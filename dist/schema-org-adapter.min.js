(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.SDOAdapter = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(_dereq_,module,exports){
module.exports=_dereq_("./lib/axios");

},{"./lib/axios":3}],2:[function(_dereq_,module,exports){
"use strict";var utils=_dereq_("./../utils"),settle=_dereq_("./../core/settle"),cookies=_dereq_("./../helpers/cookies"),buildURL=_dereq_("./../helpers/buildURL"),buildFullPath=_dereq_("../core/buildFullPath"),parseHeaders=_dereq_("./../helpers/parseHeaders"),isURLSameOrigin=_dereq_("./../helpers/isURLSameOrigin"),createError=_dereq_("../core/createError");module.exports=function(e){return new Promise(function(r,t){var s=e.data,o=e.headers,a=e.responseType;utils.isFormData(s)&&delete o["Content-Type"];var n=new XMLHttpRequest;if(e.auth){var i=e.auth.username||"",u=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";o.Authorization="Basic "+btoa(i+":"+u)}var l=buildFullPath(e.baseURL,e.url);function d(){if(n){var s="getAllResponseHeaders"in n?parseHeaders(n.getAllResponseHeaders()):null,o={data:a&&"text"!==a&&"json"!==a?n.response:n.responseText,status:n.status,statusText:n.statusText,headers:s,config:e,request:n};settle(r,t,o),n=null}}if(n.open(e.method.toUpperCase(),buildURL(l,e.params,e.paramsSerializer),!0),n.timeout=e.timeout,"onloadend"in n?n.onloadend=d:n.onreadystatechange=function(){n&&4===n.readyState&&(0!==n.status||n.responseURL&&0===n.responseURL.indexOf("file:"))&&setTimeout(d)},n.onabort=function(){n&&(t(createError("Request aborted",e,"ECONNABORTED",n)),n=null)},n.onerror=function(){t(createError("Network Error",e,null,n)),n=null},n.ontimeout=function(){var r="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(r=e.timeoutErrorMessage),t(createError(r,e,e.transitional&&e.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",n)),n=null},utils.isStandardBrowserEnv()){var p=(e.withCredentials||isURLSameOrigin(l))&&e.xsrfCookieName?cookies.read(e.xsrfCookieName):void 0;p&&(o[e.xsrfHeaderName]=p)}"setRequestHeader"in n&&utils.forEach(o,function(e,r){void 0===s&&"content-type"===r.toLowerCase()?delete o[r]:n.setRequestHeader(r,e)}),utils.isUndefined(e.withCredentials)||(n.withCredentials=!!e.withCredentials),a&&"json"!==a&&(n.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&n.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&n.upload&&n.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){n&&(n.abort(),t(e),n=null)}),s||(s=null),n.send(s)})};

},{"../core/buildFullPath":9,"../core/createError":10,"./../core/settle":14,"./../helpers/buildURL":18,"./../helpers/cookies":20,"./../helpers/isURLSameOrigin":23,"./../helpers/parseHeaders":25,"./../utils":28}],3:[function(_dereq_,module,exports){
"use strict";var utils=_dereq_("./utils"),bind=_dereq_("./helpers/bind"),Axios=_dereq_("./core/Axios"),mergeConfig=_dereq_("./core/mergeConfig"),defaults=_dereq_("./defaults");function createInstance(e){var r=new Axios(e),i=bind(Axios.prototype.request,r);return utils.extend(i,Axios.prototype,r),utils.extend(i,r),i}var axios=createInstance(defaults);axios.Axios=Axios,axios.create=function(e){return createInstance(mergeConfig(axios.defaults,e))},axios.Cancel=_dereq_("./cancel/Cancel"),axios.CancelToken=_dereq_("./cancel/CancelToken"),axios.isCancel=_dereq_("./cancel/isCancel"),axios.all=function(e){return Promise.all(e)},axios.spread=_dereq_("./helpers/spread"),axios.isAxiosError=_dereq_("./helpers/isAxiosError"),module.exports=axios,module.exports.default=axios;

},{"./cancel/Cancel":4,"./cancel/CancelToken":5,"./cancel/isCancel":6,"./core/Axios":7,"./core/mergeConfig":13,"./defaults":16,"./helpers/bind":17,"./helpers/isAxiosError":22,"./helpers/spread":26,"./utils":28}],4:[function(_dereq_,module,exports){
"use strict";function Cancel(e){this.message=e}Cancel.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},Cancel.prototype.__CANCEL__=!0,module.exports=Cancel;

},{}],5:[function(_dereq_,module,exports){
"use strict";var Cancel=_dereq_("./Cancel");function CancelToken(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(e){n=e});var o=this;e(function(e){o.reason||(o.reason=new Cancel(e),n(o.reason))})}CancelToken.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},CancelToken.source=function(){var e;return{token:new CancelToken(function(n){e=n}),cancel:e}},module.exports=CancelToken;

},{"./Cancel":4}],6:[function(_dereq_,module,exports){
"use strict";module.exports=function(t){return!(!t||!t.__CANCEL__)};

},{}],7:[function(_dereq_,module,exports){
"use strict";var utils=_dereq_("./../utils"),buildURL=_dereq_("../helpers/buildURL"),InterceptorManager=_dereq_("./InterceptorManager"),dispatchRequest=_dereq_("./dispatchRequest"),mergeConfig=_dereq_("./mergeConfig"),validator=_dereq_("../helpers/validator"),validators=validator.validators;function Axios(t){this.defaults=t,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}Axios.prototype.request=function(t){"string"==typeof t?(t=arguments[1]||{}).url=arguments[0]:t=t||{},(t=mergeConfig(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var e=t.transitional;void 0!==e&&validator.assertOptions(e,{silentJSONParsing:validators.transitional(validators.boolean,"1.0.0"),forcedJSONParsing:validators.transitional(validators.boolean,"1.0.0"),clarifyTimeoutError:validators.transitional(validators.boolean,"1.0.0")},!1);var r=[],o=!0;this.interceptors.request.forEach(function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,r.unshift(e.fulfilled,e.rejected))});var i,a=[];if(this.interceptors.response.forEach(function(t){a.push(t.fulfilled,t.rejected)}),!o){var s=[dispatchRequest,void 0];for(Array.prototype.unshift.apply(s,r),s=s.concat(a),i=Promise.resolve(t);s.length;)i=i.then(s.shift(),s.shift());return i}for(var n=t;r.length;){var u=r.shift(),l=r.shift();try{n=u(n)}catch(t){l(t);break}}try{i=dispatchRequest(n)}catch(t){return Promise.reject(t)}for(;a.length;)i=i.then(a.shift(),a.shift());return i},Axios.prototype.getUri=function(t){return t=mergeConfig(this.defaults,t),buildURL(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},utils.forEach(["delete","get","head","options"],function(t){Axios.prototype[t]=function(e,r){return this.request(mergeConfig(r||{},{method:t,url:e,data:(r||{}).data}))}}),utils.forEach(["post","put","patch"],function(t){Axios.prototype[t]=function(e,r,o){return this.request(mergeConfig(o||{},{method:t,url:e,data:r}))}}),module.exports=Axios;

},{"../helpers/buildURL":18,"../helpers/validator":27,"./../utils":28,"./InterceptorManager":8,"./dispatchRequest":11,"./mergeConfig":13}],8:[function(_dereq_,module,exports){
"use strict";var utils=_dereq_("./../utils");function InterceptorManager(){this.handlers=[]}InterceptorManager.prototype.use=function(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1},InterceptorManager.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},InterceptorManager.prototype.forEach=function(e){utils.forEach(this.handlers,function(n){null!==n&&e(n)})},module.exports=InterceptorManager;

},{"./../utils":28}],9:[function(_dereq_,module,exports){
"use strict";var isAbsoluteURL=_dereq_("../helpers/isAbsoluteURL"),combineURLs=_dereq_("../helpers/combineURLs");module.exports=function(e,s){return e&&!isAbsoluteURL(s)?combineURLs(e,s):s};

},{"../helpers/combineURLs":19,"../helpers/isAbsoluteURL":21}],10:[function(_dereq_,module,exports){
"use strict";var enhanceError=_dereq_("./enhanceError");module.exports=function(r,e,n,o,a){var c=new Error(r);return enhanceError(c,e,n,o,a)};

},{"./enhanceError":12}],11:[function(_dereq_,module,exports){
"use strict";var utils=_dereq_("./../utils"),transformData=_dereq_("./transformData"),isCancel=_dereq_("../cancel/isCancel"),defaults=_dereq_("../defaults");function throwIfCancellationRequested(e){e.cancelToken&&e.cancelToken.throwIfRequested()}module.exports=function(e){return throwIfCancellationRequested(e),e.headers=e.headers||{},e.data=transformData.call(e,e.data,e.headers,e.transformRequest),e.headers=utils.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),utils.forEach(["delete","get","head","post","put","patch","common"],function(a){delete e.headers[a]}),(e.adapter||defaults.adapter)(e).then(function(a){return throwIfCancellationRequested(e),a.data=transformData.call(e,a.data,a.headers,e.transformResponse),a},function(a){return isCancel(a)||(throwIfCancellationRequested(e),a&&a.response&&(a.response.data=transformData.call(e,a.response.data,a.response.headers,e.transformResponse))),Promise.reject(a)})};

},{"../cancel/isCancel":6,"../defaults":16,"./../utils":28,"./transformData":15}],12:[function(_dereq_,module,exports){
"use strict";module.exports=function(e,i,s,t,n){return e.config=i,s&&(e.code=s),e.request=t,e.response=n,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e};

},{}],13:[function(_dereq_,module,exports){
"use strict";var utils=_dereq_("../utils");module.exports=function(e,t){t=t||{};var i={},s=["url","method","data"],n=["headers","auth","proxy","params"],r=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],o=["validateStatus"];function a(e,t){return utils.isPlainObject(e)&&utils.isPlainObject(t)?utils.merge(e,t):utils.isPlainObject(t)?utils.merge({},t):utils.isArray(t)?t.slice():t}function u(s){utils.isUndefined(t[s])?utils.isUndefined(e[s])||(i[s]=a(void 0,e[s])):i[s]=a(e[s],t[s])}utils.forEach(s,function(e){utils.isUndefined(t[e])||(i[e]=a(void 0,t[e]))}),utils.forEach(n,u),utils.forEach(r,function(s){utils.isUndefined(t[s])?utils.isUndefined(e[s])||(i[s]=a(void 0,e[s])):i[s]=a(void 0,t[s])}),utils.forEach(o,function(s){s in t?i[s]=a(e[s],t[s]):s in e&&(i[s]=a(void 0,e[s]))});var c=s.concat(n).concat(r).concat(o),l=Object.keys(e).concat(Object.keys(t)).filter(function(e){return-1===c.indexOf(e)});return utils.forEach(l,u),i};

},{"../utils":28}],14:[function(_dereq_,module,exports){
"use strict";var createError=_dereq_("./createError");module.exports=function(t,r,e){var s=e.config.validateStatus;e.status&&s&&!s(e.status)?r(createError("Request failed with status code "+e.status,e.config,null,e.request,e)):t(e)};

},{"./createError":10}],15:[function(_dereq_,module,exports){
"use strict";var utils=_dereq_("./../utils"),defaults=_dereq_("./../defaults");module.exports=function(t,u,e){var r=this||defaults;return utils.forEach(e,function(e){t=e.call(r,t,u)}),t};

},{"./../defaults":16,"./../utils":28}],16:[function(_dereq_,module,exports){
(function (process){(function (){
"use strict";var utils=_dereq_("./utils"),normalizeHeaderName=_dereq_("./helpers/normalizeHeaderName"),enhanceError=_dereq_("./core/enhanceError"),DEFAULT_CONTENT_TYPE={"Content-Type":"application/x-www-form-urlencoded"};function setContentTypeIfUnset(e,t){!utils.isUndefined(e)&&utils.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function getDefaultAdapter(){var e;return"undefined"!=typeof XMLHttpRequest?e=_dereq_("./adapters/xhr"):"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process)&&(e=_dereq_("./adapters/http")),e}function stringifySafely(e,t,r){if(utils.isString(e))try{return(t||JSON.parse)(e),utils.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(r||JSON.stringify)(e)}var defaults={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:getDefaultAdapter(),transformRequest:[function(e,t){return normalizeHeaderName(t,"Accept"),normalizeHeaderName(t,"Content-Type"),utils.isFormData(e)||utils.isArrayBuffer(e)||utils.isBuffer(e)||utils.isStream(e)||utils.isFile(e)||utils.isBlob(e)?e:utils.isArrayBufferView(e)?e.buffer:utils.isURLSearchParams(e)?(setContentTypeIfUnset(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):utils.isObject(e)||t&&"application/json"===t["Content-Type"]?(setContentTypeIfUnset(t,"application/json"),stringifySafely(e)):e}],transformResponse:[function(e){var t=this.transitional,r=t&&t.silentJSONParsing,n=t&&t.forcedJSONParsing,i=!r&&"json"===this.responseType;if(i||n&&utils.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(i){if("SyntaxError"===e.name)throw enhanceError(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};utils.forEach(["delete","get","head"],function(e){defaults.headers[e]={}}),utils.forEach(["post","put","patch"],function(e){defaults.headers[e]=utils.merge(DEFAULT_CONTENT_TYPE)}),module.exports=defaults;

}).call(this)}).call(this,_dereq_('_process'))
},{"./adapters/http":2,"./adapters/xhr":2,"./core/enhanceError":12,"./helpers/normalizeHeaderName":24,"./utils":28,"_process":55}],17:[function(_dereq_,module,exports){
"use strict";module.exports=function(r,n){return function(){for(var t=new Array(arguments.length),e=0;e<t.length;e++)t[e]=arguments[e];return r.apply(n,t)}};

},{}],18:[function(_dereq_,module,exports){
"use strict";var utils=_dereq_("./../utils");function encode(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}module.exports=function(e,i,r){if(!i)return e;var t;if(r)t=r(i);else if(utils.isURLSearchParams(i))t=i.toString();else{var n=[];utils.forEach(i,function(e,i){null!=e&&(utils.isArray(e)?i+="[]":e=[e],utils.forEach(e,function(e){utils.isDate(e)?e=e.toISOString():utils.isObject(e)&&(e=JSON.stringify(e)),n.push(encode(i)+"="+encode(e))}))}),t=n.join("&")}if(t){var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s)),e+=(-1===e.indexOf("?")?"?":"&")+t}return e};

},{"./../utils":28}],19:[function(_dereq_,module,exports){
"use strict";module.exports=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e};

},{}],20:[function(_dereq_,module,exports){
"use strict";var utils=_dereq_("./../utils");module.exports=utils.isStandardBrowserEnv()?{write:function(e,t,n,i,u,o){var r=[];r.push(e+"="+encodeURIComponent(t)),utils.isNumber(n)&&r.push("expires="+new Date(n).toGMTString()),utils.isString(i)&&r.push("path="+i),utils.isString(u)&&r.push("domain="+u),!0===o&&r.push("secure"),document.cookie=r.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};

},{"./../utils":28}],21:[function(_dereq_,module,exports){
"use strict";module.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)};

},{}],22:[function(_dereq_,module,exports){
"use strict";module.exports=function(o){return"object"==typeof o&&!0===o.isAxiosError};

},{}],23:[function(_dereq_,module,exports){
"use strict";var utils=_dereq_("./../utils");module.exports=utils.isStandardBrowserEnv()?function(){var t,r=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a");function o(t){var o=t;return r&&(e.setAttribute("href",o),o=e.href),e.setAttribute("href",o),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:"/"===e.pathname.charAt(0)?e.pathname:"/"+e.pathname}}return t=o(window.location.href),function(r){var e=utils.isString(r)?o(r):r;return e.protocol===t.protocol&&e.host===t.host}}():function(){return!0};

},{"./../utils":28}],24:[function(_dereq_,module,exports){
"use strict";var utils=_dereq_("../utils");module.exports=function(e,t){utils.forEach(e,function(r,s){s!==t&&s.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[s])})};

},{"../utils":28}],25:[function(_dereq_,module,exports){
"use strict";var utils=_dereq_("./../utils"),ignoreDuplicateOf=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];module.exports=function(t){var e,i,r,o={};return t?(utils.forEach(t.split("\n"),function(t){if(r=t.indexOf(":"),e=utils.trim(t.substr(0,r)).toLowerCase(),i=utils.trim(t.substr(r+1)),e){if(o[e]&&ignoreDuplicateOf.indexOf(e)>=0)return;o[e]="set-cookie"===e?(o[e]?o[e]:[]).concat([i]):o[e]?o[e]+", "+i:i}}),o):o};

},{"./../utils":28}],26:[function(_dereq_,module,exports){
"use strict";module.exports=function(n){return function(t){return n.apply(null,t)}};

},{}],27:[function(_dereq_,module,exports){
"use strict";var pkg=_dereq_("./../../package.json"),validators={};["object","boolean","number","function","string","symbol"].forEach(function(r,e){validators[r]=function(n){return typeof n===r||"a"+(e<1?"n ":" ")+r}});var deprecatedWarnings={},currentVerArr=pkg.version.split(".");function isOlderVersion(r,e){for(var n=e?e.split("."):currentVerArr,o=r.split("."),t=0;t<3;t++){if(n[t]>o[t])return!0;if(n[t]<o[t])return!1}return!1}function assertOptions(r,e,n){if("object"!=typeof r)throw new TypeError("options must be an object");for(var o=Object.keys(r),t=o.length;t-- >0;){var i=o[t],s=e[i];if(s){var a=r[i],u=void 0===a||s(a,i,r);if(!0!==u)throw new TypeError("option "+i+" must be "+u)}else if(!0!==n)throw Error("Unknown option "+i)}}validators.transitional=function(r,e,n){var o=e&&isOlderVersion(e);function t(r,e){return"[Axios v"+pkg.version+"] Transitional option '"+r+"'"+e+(n?". "+n:"")}return function(n,i,s){if(!1===r)throw new Error(t(i," has been removed in "+e));return o&&!deprecatedWarnings[i]&&(deprecatedWarnings[i]=!0,console.warn(t(i," has been deprecated since v"+e+" and will be removed in the near future"))),!r||r(n,i,s)}},module.exports={isOlderVersion:isOlderVersion,assertOptions:assertOptions,validators:validators};

},{"./../../package.json":29}],28:[function(_dereq_,module,exports){
"use strict";var bind=_dereq_("./helpers/bind"),toString=Object.prototype.toString;function isArray(r){return"[object Array]"===toString.call(r)}function isUndefined(r){return void 0===r}function isBuffer(r){return null!==r&&!isUndefined(r)&&null!==r.constructor&&!isUndefined(r.constructor)&&"function"==typeof r.constructor.isBuffer&&r.constructor.isBuffer(r)}function isArrayBuffer(r){return"[object ArrayBuffer]"===toString.call(r)}function isFormData(r){return"undefined"!=typeof FormData&&r instanceof FormData}function isArrayBufferView(r){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(r):r&&r.buffer&&r.buffer instanceof ArrayBuffer}function isString(r){return"string"==typeof r}function isNumber(r){return"number"==typeof r}function isObject(r){return null!==r&&"object"==typeof r}function isPlainObject(r){if("[object Object]"!==toString.call(r))return!1;var t=Object.getPrototypeOf(r);return null===t||t===Object.prototype}function isDate(r){return"[object Date]"===toString.call(r)}function isFile(r){return"[object File]"===toString.call(r)}function isBlob(r){return"[object Blob]"===toString.call(r)}function isFunction(r){return"[object Function]"===toString.call(r)}function isStream(r){return isObject(r)&&isFunction(r.pipe)}function isURLSearchParams(r){return"undefined"!=typeof URLSearchParams&&r instanceof URLSearchParams}function trim(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function isStandardBrowserEnv(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)}function forEach(r,t){if(null!=r)if("object"!=typeof r&&(r=[r]),isArray(r))for(var e=0,i=r.length;e<i;e++)t.call(null,r[e],e,r);else for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.call(null,r[n],n,r)}function merge(){var r={};function t(t,e){isPlainObject(r[e])&&isPlainObject(t)?r[e]=merge(r[e],t):isPlainObject(t)?r[e]=merge({},t):isArray(t)?r[e]=t.slice():r[e]=t}for(var e=0,i=arguments.length;e<i;e++)forEach(arguments[e],t);return r}function extend(r,t,e){return forEach(t,function(t,i){r[i]=e&&"function"==typeof t?bind(t,e):t}),r}function stripBOM(r){return 65279===r.charCodeAt(0)&&(r=r.slice(1)),r}module.exports={isArray:isArray,isArrayBuffer:isArrayBuffer,isBuffer:isBuffer,isFormData:isFormData,isArrayBufferView:isArrayBufferView,isString:isString,isNumber:isNumber,isObject:isObject,isPlainObject:isPlainObject,isUndefined:isUndefined,isDate:isDate,isFile:isFile,isBlob:isBlob,isFunction:isFunction,isStream:isStream,isURLSearchParams:isURLSearchParams,isStandardBrowserEnv:isStandardBrowserEnv,forEach:forEach,merge:merge,extend:extend,trim:trim,stripBOM:stripBOM};

},{"./helpers/bind":17}],29:[function(_dereq_,module,exports){
module.exports={
  "name": "axios",
  "version": "0.21.4",
  "description": "Promise based HTTP client for the browser and node.js",
  "main": "index.js",
  "scripts": {
    "test": "grunt test",
    "start": "node ./sandbox/server.js",
    "build": "NODE_ENV=production grunt build",
    "preversion": "npm test",
    "version": "npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",
    "postversion": "git push && git push --tags",
    "examples": "node ./examples/server.js",
    "coveralls": "cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",
    "fix": "eslint --fix lib/**/*.js"
  },
  "repository": {
    "type": "git",
    "url": "https://github.com/axios/axios.git"
  },
  "keywords": [
    "xhr",
    "http",
    "ajax",
    "promise",
    "node"
  ],
  "author": "Matt Zabriskie",
  "license": "MIT",
  "bugs": {
    "url": "https://github.com/axios/axios/issues"
  },
  "homepage": "https://axios-http.com",
  "devDependencies": {
    "coveralls": "^3.0.0",
    "es6-promise": "^4.2.4",
    "grunt": "^1.3.0",
    "grunt-banner": "^0.6.0",
    "grunt-cli": "^1.2.0",
    "grunt-contrib-clean": "^1.1.0",
    "grunt-contrib-watch": "^1.0.0",
    "grunt-eslint": "^23.0.0",
    "grunt-karma": "^4.0.0",
    "grunt-mocha-test": "^0.13.3",
    "grunt-ts": "^6.0.0-beta.19",
    "grunt-webpack": "^4.0.2",
    "istanbul-instrumenter-loader": "^1.0.0",
    "jasmine-core": "^2.4.1",
    "karma": "^6.3.2",
    "karma-chrome-launcher": "^3.1.0",
    "karma-firefox-launcher": "^2.1.0",
    "karma-jasmine": "^1.1.1",
    "karma-jasmine-ajax": "^0.1.13",
    "karma-safari-launcher": "^1.0.0",
    "karma-sauce-launcher": "^4.3.6",
    "karma-sinon": "^1.0.5",
    "karma-sourcemap-loader": "^0.3.8",
    "karma-webpack": "^4.0.2",
    "load-grunt-tasks": "^3.5.2",
    "minimist": "^1.2.0",
    "mocha": "^8.2.1",
    "sinon": "^4.5.0",
    "terser-webpack-plugin": "^4.2.3",
    "typescript": "^4.0.5",
    "url-search-params": "^0.10.0",
    "webpack": "^4.44.2",
    "webpack-dev-server": "^3.11.0"
  },
  "browser": {
    "./lib/adapters/http.js": "./lib/adapters/xhr.js"
  },
  "jsdelivr": "dist/axios.min.js",
  "unpkg": "dist/axios.min.js",
  "typings": "./index.d.ts",
  "dependencies": {
    "follow-redirects": "^1.14.0"
  },
  "bundlesize": [
    {
      "path": "./dist/axios.min.js",
      "threshold": "5kB"
    }
  ]
}

},{}],30:[function(_dereq_,module,exports){

},{}],31:[function(_dereq_,module,exports){
"use strict";module.exports=function e(r){return null===r||"object"!=typeof r||null!=r.toJSON?JSON.stringify(r):Array.isArray(r)?"["+r.reduce((r,t,o)=>{return r+(0===o?"":",")+e(void 0===t||"symbol"==typeof t?null:t)},"")+"]":"{"+Object.keys(r).sort().reduce((t,o,u)=>{if(void 0===r[o]||"symbol"==typeof r[o])return t;return t+(0===t.length?"":",")+e(o)+":"+e(r[o])},"")+"}"};

},{}],32:[function(_dereq_,module,exports){
"use strict";const{isArray:_isArray,isObject:_isObject,isString:_isString}=_dereq_("./types"),{asArray:_asArray}=_dereq_("./util"),{prependBase:prependBase}=_dereq_("./url"),JsonLdError=_dereq_("./JsonLdError"),ResolvedContext=_dereq_("./ResolvedContext"),MAX_CONTEXT_URLS=10;function _throwInvalidLocalContext(e){throw new JsonLdError("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:e})}function _resolveContextUrls({context:e,base:t}){if(!e)return;const o=e["@context"];if(_isString(o))e["@context"]=prependBase(t,o);else if(_isArray(o))for(let e=0;e<o.length;++e){const r=o[e];_isString(r)?o[e]=prependBase(t,r):_isObject(r)&&_resolveContextUrls({context:{"@context":r},base:t})}else if(_isObject(o))for(const e in o)_resolveContextUrls({context:o[e],base:t})}module.exports=class{constructor({sharedCache:e}){this.perOpCache=new Map,this.sharedCache=e}async resolve({activeCtx:e,context:t,documentLoader:o,base:r,cycles:n=new Set}){t&&_isObject(t)&&t["@context"]&&(t=t["@context"]),t=_asArray(t);const s=[];for(const c of t){if(_isString(c)){let t=this._get(c);t||(t=await this._resolveRemoteContext({activeCtx:e,url:c,documentLoader:o,base:r,cycles:n})),_isArray(t)?s.push(...t):s.push(t);continue}if(null===c){s.push(new ResolvedContext({document:null}));continue}_isObject(c)||_throwInvalidLocalContext(t);const a=JSON.stringify(c);let i=this._get(a);i||(i=new ResolvedContext({document:c}),this._cacheResolvedContext({key:a,resolved:i,tag:"static"})),s.push(i)}return s}_get(e){let t=this.perOpCache.get(e);if(!t){const o=this.sharedCache.get(e);o&&(t=o.get("static"))&&this.perOpCache.set(e,t)}return t}_cacheResolvedContext({key:e,resolved:t,tag:o}){if(this.perOpCache.set(e,t),void 0!==o){let r=this.sharedCache.get(e);r||(r=new Map,this.sharedCache.set(e,r)),r.set(o,t)}return t}async _resolveRemoteContext({activeCtx:e,url:t,documentLoader:o,base:r,cycles:n}){t=prependBase(r,t);const{context:s,remoteDoc:c}=await this._fetchContext({activeCtx:e,url:t,documentLoader:o,cycles:n});_resolveContextUrls({context:s,base:r=c.documentUrl||t});const a=await this.resolve({activeCtx:e,context:s,documentLoader:o,base:r,cycles:n});return this._cacheResolvedContext({key:t,resolved:a,tag:c.tag}),a}async _fetchContext({activeCtx:e,url:t,documentLoader:o,cycles:r}){if(r.size>10)throw new JsonLdError("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"json-ld-1.0"===e.processingMode?"loading remote context failed":"context overflow",max:10});if(r.has(t))throw new JsonLdError("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"json-ld-1.0"===e.processingMode?"recursive context inclusion":"context overflow",url:t});let n,s;r.add(t);try{n=(s=await o(t)).document||null,_isString(n)&&(n=JSON.parse(n))}catch(e){throw new JsonLdError("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:t,cause:e})}if(!_isObject(n))throw new JsonLdError("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:t});return n="@context"in n?{"@context":n["@context"]}:{"@context":{}},s.contextUrl&&(_isArray(n["@context"])||(n["@context"]=[n["@context"]]),n["@context"].push(s.contextUrl)),{context:n,remoteDoc:s}}};

},{"./JsonLdError":33,"./ResolvedContext":37,"./types":51,"./url":52,"./util":53}],33:[function(_dereq_,module,exports){
"use strict";module.exports=class extends Error{constructor(r="An unspecified JSON-LD error occurred.",s="jsonld.Error",e={}){super(r),this.name=s,this.message=r,this.details=e}};

},{}],34:[function(_dereq_,module,exports){
"use strict";module.exports=(e=>{class t{toString(){return"[object JsonLdProcessor]"}}return Object.defineProperty(t,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(t.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:t}),t.compact=function(t,r){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):e.compact(t,r)},t.expand=function(t){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):e.expand(t)},t.flatten=function(t){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):e.flatten(t)},t});

},{}],35:[function(_dereq_,module,exports){
"use strict";module.exports=_dereq_("rdf-canonize").NQuads;

},{"rdf-canonize":56}],36:[function(_dereq_,module,exports){
"use strict";module.exports=class{constructor(){this._requests={}}wrapLoader(e){const t=this;return t._loader=e,function(){return t.add.apply(t,arguments)}}async add(e){let t=this._requests[e];if(t)return Promise.resolve(t);t=this._requests[e]=this._loader(e);try{return await t}finally{delete this._requests[e]}}};

},{}],37:[function(_dereq_,module,exports){
"use strict";const LRU=_dereq_("lru-cache"),MAX_ACTIVE_CONTEXTS=10;module.exports=class{constructor({document:e}){this.document=e,this.cache=new LRU({max:10})}getProcessed(e){return this.cache.get(e)}setProcessed(e,c){this.cache.set(e,c)}};

},{"lru-cache":54}],38:[function(_dereq_,module,exports){
"use strict";const JsonLdError=_dereq_("./JsonLdError"),{isArray:_isArray,isObject:_isObject,isString:_isString,isUndefined:_isUndefined}=_dereq_("./types"),{isList:_isList,isValue:_isValue,isGraph:_isGraph,isSimpleGraph:_isSimpleGraph,isSubjectReference:_isSubjectReference}=_dereq_("./graphTypes"),{expandIri:_expandIri,getContextValue:_getContextValue,isKeyword:_isKeyword,process:_processContext,processingMode:_processingMode}=_dereq_("./context"),{removeBase:_removeBase,prependBase:_prependBase}=_dereq_("./url"),{addValue:_addValue,asArray:_asArray,compareShortestLeast:_compareShortestLeast}=_dereq_("./util"),api={};function _selectTerm(e,i,t,a,n,r){null===r&&(r="@null");const o=[];if(("@id"===r||"@reverse"===r)&&_isObject(t)&&"@id"in t){"@reverse"===r&&o.push("@reverse");const i=api.compactIri({activeCtx:e,iri:t["@id"],relativeTo:{vocab:!0}});e.mappings.has(i)&&e.mappings.get(i)&&e.mappings.get(i)["@id"]===t["@id"]?o.push.apply(o,["@vocab","@id"]):o.push.apply(o,["@id","@vocab"])}else{o.push(r);const e=o.find(e=>e.includes("_"));e&&o.push(e.replace(/^[^_]+_/,"_"))}o.push("@none");const s=e.inverse[i];for(const e of a){if(!(e in s))continue;const i=s[e][n];for(const e of o)if(e in i)return i[e]}return null}function _checkNestProperty(e,i,t){if("@nest"!==_expandIri(e,i,{vocab:!0},t))throw new JsonLdError("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}module.exports=api,api.compact=(async({activeCtx:e,activeProperty:i=null,element:t,options:a={},compactionMap:n=(()=>void 0)})=>{if(_isArray(t)){let r=[];for(let o=0;o<t.length;++o){let s=await api.compact({activeCtx:e,activeProperty:i,element:t[o],options:a,compactionMap:n});null===s&&void 0===(s=await n({unmappedValue:t[o],activeCtx:e,activeProperty:i,parent:t,index:o,options:a}))||r.push(s)}if(a.compactArrays&&1===r.length){0===(_getContextValue(e,i,"@container")||[]).length&&(r=r[0])}return r}const r=_getContextValue(e,i,"@context");if(_isUndefined(r)||(e=await _processContext({activeCtx:e,localCtx:r,propagate:!0,overrideProtected:!0,options:a})),_isObject(t)){if(a.link&&"@id"in t&&a.link.hasOwnProperty(t["@id"])){const e=a.link[t["@id"]];for(let i=0;i<e.length;++i)if(e[i].expanded===t)return e[i].compacted}if(_isValue(t)||_isSubjectReference(t)){const n=api.compactValue({activeCtx:e,activeProperty:i,value:t,options:a});return a.link&&_isSubjectReference(t)&&(a.link.hasOwnProperty(t["@id"])||(a.link[t["@id"]]=[]),a.link[t["@id"]].push({expanded:t,compacted:n})),n}if(_isList(t)){if((_getContextValue(e,i,"@container")||[]).includes("@list"))return api.compact({activeCtx:e,activeProperty:i,element:t["@list"],options:a,compactionMap:n})}const r="@reverse"===i,o={},s=e;_isValue(t)||_isSubjectReference(t)||(e=e.revertToPreviousContext());const c=_getContextValue(s,i,"@context");_isUndefined(c)||(e=await _processContext({activeCtx:e,localCtx:c,propagate:!0,overrideProtected:!0,options:a})),a.link&&"@id"in t&&(a.link.hasOwnProperty(t["@id"])||(a.link[t["@id"]]=[]),a.link[t["@id"]].push({expanded:t,compacted:o}));let l=t["@type"]||[];l.length>1&&(l=Array.from(l).sort());const p=e;for(const i of l){const t=api.compactIri({activeCtx:p,iri:i,relativeTo:{vocab:!0}}),n=_getContextValue(s,t,"@context");_isUndefined(n)||(e=await _processContext({activeCtx:e,localCtx:n,options:a,propagate:!1}))}const d=Object.keys(t).sort();for(const c of d){const l=t[c];if("@id"!==c)if("@type"!==c)if("@reverse"!==c)if("@preserve"!==c)if("@index"!==c)if("@graph"!==c&&"@list"!==c&&"@included"!==c&&_isKeyword(c)){const i=api.compactIri({activeCtx:e,iri:c,relativeTo:{vocab:!0}});_addValue(o,i,l)}else{if(!_isArray(l))throw new JsonLdError("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");if(0===l.length){const i=api.compactIri({activeCtx:e,iri:c,value:l,relativeTo:{vocab:!0},reverse:r}),t=e.mappings.has(i)?e.mappings.get(i)["@nest"]:null;let n=o;t&&(_checkNestProperty(e,t,a),_isObject(o[t])||(o[t]={}),n=o[t]),_addValue(n,i,l,{propertyIsArray:!0})}for(const i of l){const t=api.compactIri({activeCtx:e,iri:c,value:i,relativeTo:{vocab:!0},reverse:r}),s=e.mappings.has(t)?e.mappings.get(t)["@nest"]:null;let l=o;s&&(_checkNestProperty(e,s,a),_isObject(o[s])||(o[s]={}),l=o[s]);const p=_getContextValue(e,t,"@container")||[],d=_isGraph(i),u=_isList(i);let v;u?v=i["@list"]:d&&(v=i["@graph"]);let g=await api.compact({activeCtx:e,activeProperty:t,element:u||d?v:i,options:a,compactionMap:n});if(u){if(_isArray(g)||(g=[g]),p.includes("@list")){_addValue(l,t,g,{valueIsArray:!0,allowDuplicate:!0});continue}g={[api.compactIri({activeCtx:e,iri:"@list",relativeTo:{vocab:!0}})]:g},"@index"in i&&(g[api.compactIri({activeCtx:e,iri:"@index",relativeTo:{vocab:!0}})]=i["@index"])}if(d)if(p.includes("@graph")&&(p.includes("@id")||p.includes("@index")&&_isSimpleGraph(i))){let n;l.hasOwnProperty(t)?n=l[t]:l[t]=n={};const r=(p.includes("@id")?i["@id"]:i["@index"])||api.compactIri({activeCtx:e,iri:"@none",relativeTo:{vocab:!0}});_addValue(n,r,g,{propertyIsArray:!a.compactArrays||p.includes("@set")})}else p.includes("@graph")&&_isSimpleGraph(i)?(_isArray(g)&&g.length>1&&(g={"@included":g}),_addValue(l,t,g,{propertyIsArray:!a.compactArrays||p.includes("@set")})):(_isArray(g)&&1===g.length&&a.compactArrays&&(g=g[0]),g={[api.compactIri({activeCtx:e,iri:"@graph",relativeTo:{vocab:!0}})]:g},"@id"in i&&(g[api.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}})]=i["@id"]),"@index"in i&&(g[api.compactIri({activeCtx:e,iri:"@index",relativeTo:{vocab:!0}})]=i["@index"]),_addValue(l,t,g,{propertyIsArray:!a.compactArrays||p.includes("@set")}));else if(p.includes("@language")||p.includes("@index")||p.includes("@id")||p.includes("@type")){let r,o;if(l.hasOwnProperty(t)?r=l[t]:l[t]=r={},p.includes("@language"))_isValue(g)&&(g=g["@value"]),o=i["@language"];else if(p.includes("@index")){const a=_getContextValue(e,t,"@index")||"@index",n=api.compactIri({activeCtx:e,iri:a,relativeTo:{vocab:!0}});if("@index"===a)o=i["@index"],delete g[n];else{let e;if([o,...e]=_asArray(g[a]||[]),_isString(o))switch(e.length){case 0:delete g[a];break;case 1:g[a]=e[0];break;default:g[a]=e}else o=null}}else if(p.includes("@id")){const i=api.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}});o=g[i],delete g[i]}else if(p.includes("@type")){const r=api.compactIri({activeCtx:e,iri:"@type",relativeTo:{vocab:!0}});let s;switch([o,...s]=_asArray(g[r]||[]),s.length){case 0:delete g[r];break;case 1:g[r]=s[0];break;default:g[r]=s}1===Object.keys(g).length&&"@id"in i&&(g=await api.compact({activeCtx:e,activeProperty:t,element:{"@id":i["@id"]},options:a,compactionMap:n}))}o||(o=api.compactIri({activeCtx:e,iri:"@none",relativeTo:{vocab:!0}})),_addValue(r,o,g,{propertyIsArray:p.includes("@set")})}else{const e=!a.compactArrays||p.includes("@set")||p.includes("@list")||_isArray(g)&&0===g.length||"@list"===c||"@graph"===c;_addValue(l,t,g,{propertyIsArray:e})}}}else{if((_getContextValue(e,i,"@container")||[]).includes("@index"))continue;const t=api.compactIri({activeCtx:e,iri:c,relativeTo:{vocab:!0}});_addValue(o,t,l)}else{const t=await api.compact({activeCtx:e,activeProperty:i,element:l,options:a,compactionMap:n});_isArray(t)&&0===t.length||_addValue(o,c,t)}else{const i=await api.compact({activeCtx:e,activeProperty:"@reverse",element:l,options:a,compactionMap:n});for(const t in i)if(e.mappings.has(t)&&e.mappings.get(t).reverse){const n=i[t],r=(_getContextValue(e,t,"@container")||[]).includes("@set")||!a.compactArrays;_addValue(o,t,n,{propertyIsArray:r}),delete i[t]}if(Object.keys(i).length>0){const t=api.compactIri({activeCtx:e,iri:c,relativeTo:{vocab:!0}});_addValue(o,t,i)}}else{let i=_asArray(l).map(e=>api.compactIri({activeCtx:s,iri:e,relativeTo:{vocab:!0}}));1===i.length&&(i=i[0]);const t=api.compactIri({activeCtx:e,iri:"@type",relativeTo:{vocab:!0}}),a=(_getContextValue(e,t,"@container")||[]).includes("@set")&&_processingMode(e,1.1)||_isArray(i)&&0===l.length;_addValue(o,t,i,{propertyIsArray:a})}else{let i=_asArray(l).map(i=>api.compactIri({activeCtx:e,iri:i,relativeTo:{vocab:!1},base:a.base}));1===i.length&&(i=i[0]),o[api.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}})]=i}}return o}return t}),api.compactIri=(({activeCtx:e,iri:i,value:t=null,relativeTo:a={vocab:!1},reverse:n=!1,base:r=null})=>{if(null===i)return i;e.isPropertyTermScoped&&e.previousContext&&(e=e.previousContext);const o=e.getInverse();if(_isKeyword(i)&&i in o&&"@none"in o[i]&&"@type"in o[i]["@none"]&&"@none"in o[i]["@none"]["@type"])return o[i]["@none"]["@type"]["@none"];if(a.vocab&&i in o){const a=e["@language"]||"@none",r=[];_isObject(t)&&"@index"in t&&!("@graph"in t)&&r.push("@index","@index@set"),_isObject(t)&&"@preserve"in t&&(t=t["@preserve"][0]),_isGraph(t)?("@index"in t&&r.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in t&&r.push("@graph@id","@graph@id@set"),r.push("@graph","@graph@set","@set"),"@index"in t||r.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in t||r.push("@graph@id","@graph@id@set")):_isObject(t)&&!_isValue(t)&&r.push("@id","@id@set","@type","@set@type");let o="@language",s="@null";if(n)o="@type",s="@reverse",r.push("@set");else if(_isList(t)){"@index"in t||r.push("@list");const e=t["@list"];if(0===e.length)o="@any",s="@none";else{let i=0===e.length?a:null,t=null;for(let a=0;a<e.length;++a){const n=e[a];let r="@none",o="@none";if(_isValue(n))if("@direction"in n){r=`${(n["@language"]||"").toLowerCase()}_${n["@direction"]}`}else"@language"in n?r=n["@language"].toLowerCase():"@type"in n?o=n["@type"]:r="@null";else o="@id";if(null===i?i=r:r!==i&&_isValue(n)&&(i="@none"),null===t?t=o:o!==t&&(t="@none"),"@none"===i&&"@none"===t)break}i=i||"@none","@none"!==(t=t||"@none")?(o="@type",s=t):s=i}}else{if(_isValue(t))if("@language"in t&&!("@index"in t)){r.push("@language","@language@set"),s=t["@language"];const e=t["@direction"];e&&(s=`${s}_${e}`)}else"@direction"in t&&!("@index"in t)?s=`_${t["@direction"]}`:"@type"in t&&(o="@type",s=t["@type"]);else o="@type",s="@id";r.push("@set")}r.push("@none"),!_isObject(t)||"@index"in t||r.push("@index","@index@set"),_isValue(t)&&1===Object.keys(t).length&&r.push("@language","@language@set");const c=_selectTerm(e,i,t,r,o,s);if(null!==c)return c}if(a.vocab&&"@vocab"in e){const t=e["@vocab"];if(0===i.indexOf(t)&&i!==t){const a=i.substr(t.length);if(!e.mappings.has(a))return a}}let s=null;const c=[];let l=e.fastCurieMap;const p=i.length-1;for(let e=0;e<p&&i[e]in l;++e)""in(l=l[i[e]])&&c.push(l[""][0]);for(let a=c.length-1;a>=0;--a){const n=c[a],r=n.terms;for(const a of r){const r=a+":"+i.substr(n.iri.length);e.mappings.get(a)._prefix&&(!e.mappings.has(r)||null===t&&e.mappings.get(r)["@id"]===i)&&(null===s||_compareShortestLeast(r,s)<0)&&(s=r)}}if(null!==s)return s;for(const[t,a]of e.mappings)if(a&&a._prefix&&i.startsWith(t+":"))throw new JsonLdError(`Absolute IRI "${i}" confused with prefix "${t}".`,"jsonld.SyntaxError",{code:"IRI confused with prefix",context:e});return a.vocab?i:"@base"in e?e["@base"]?_removeBase(_prependBase(r,e["@base"]),i):i:_removeBase(r,i)}),api.compactValue=(({activeCtx:e,activeProperty:i,value:t,options:a})=>{if(_isValue(t)){const a=_getContextValue(e,i,"@type"),n=_getContextValue(e,i,"@language"),r=_getContextValue(e,i,"@direction"),o=_getContextValue(e,i,"@container")||[],s="@index"in t&&!o.includes("@index");if(!s&&"@none"!==a){if(t["@type"]===a)return t["@value"];if("@language"in t&&t["@language"]===n&&"@direction"in t&&t["@direction"]===r)return t["@value"];if("@language"in t&&t["@language"]===n)return t["@value"];if("@direction"in t&&t["@direction"]===r)return t["@value"]}const c=Object.keys(t).length,l=1===c||2===c&&"@index"in t&&!s,p="@language"in e,d=_isString(t["@value"]),u=e.mappings.has(i)&&null===e.mappings.get(i)["@language"];if(l&&"@none"!==a&&(!p||!d||u))return t["@value"];const v={};return s&&(v[api.compactIri({activeCtx:e,iri:"@index",relativeTo:{vocab:!0}})]=t["@index"]),"@type"in t?v[api.compactIri({activeCtx:e,iri:"@type",relativeTo:{vocab:!0}})]=api.compactIri({activeCtx:e,iri:t["@type"],relativeTo:{vocab:!0}}):"@language"in t&&(v[api.compactIri({activeCtx:e,iri:"@language",relativeTo:{vocab:!0}})]=t["@language"]),"@direction"in t&&(v[api.compactIri({activeCtx:e,iri:"@direction",relativeTo:{vocab:!0}})]=t["@direction"]),v[api.compactIri({activeCtx:e,iri:"@value",relativeTo:{vocab:!0}})]=t["@value"],v}const n=_expandIri(e,i,{vocab:!0},a),r=_getContextValue(e,i,"@type"),o=api.compactIri({activeCtx:e,iri:t["@id"],relativeTo:{vocab:"@vocab"===r},base:a.base});return"@id"===r||"@vocab"===r||"@graph"===n?o:{[api.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}})]:o}});

},{"./JsonLdError":33,"./context":40,"./graphTypes":46,"./types":51,"./url":52,"./util":53}],39:[function(_dereq_,module,exports){
"use strict";const RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",XSD="http://www.w3.org/2001/XMLSchema#";module.exports={LINK_HEADER_REL:"http://www.w3.org/ns/json-ld#context",LINK_HEADER_CONTEXT:"http://www.w3.org/ns/json-ld#context",RDF:RDF,RDF_LIST:RDF+"List",RDF_FIRST:RDF+"first",RDF_REST:RDF+"rest",RDF_NIL:RDF+"nil",RDF_TYPE:RDF+"type",RDF_PLAIN_LITERAL:RDF+"PlainLiteral",RDF_XML_LITERAL:RDF+"XMLLiteral",RDF_JSON_LITERAL:RDF+"JSON",RDF_OBJECT:RDF+"object",RDF_LANGSTRING:RDF+"langString",XSD:XSD,XSD_BOOLEAN:XSD+"boolean",XSD_DOUBLE:XSD+"double",XSD_INTEGER:XSD+"integer",XSD_STRING:XSD+"string"};

},{}],40:[function(_dereq_,module,exports){
"use strict";const util=_dereq_("./util"),JsonLdError=_dereq_("./JsonLdError"),{isArray:_isArray,isObject:_isObject,isString:_isString,isUndefined:_isUndefined}=_dereq_("./types"),{isAbsolute:_isAbsoluteIri,isRelative:_isRelativeIri,prependBase:prependBase}=_dereq_("./url"),{asArray:_asArray,compareShortestLeast:_compareShortestLeast}=_dereq_("./util"),INITIAL_CONTEXT_CACHE=new Map,INITIAL_CONTEXT_CACHE_MAX_SIZE=1e4,KEYWORD_PATTERN=/^@[a-zA-Z]+$/,api={};function _expandIri(e,n,t,o,r,i){if(null===n||!_isString(n)||api.isKeyword(n))return n;if(n.match(KEYWORD_PATTERN))return null;if(o&&o.hasOwnProperty(n)&&!0!==r.get(n)&&api.createTermDefinition({activeCtx:e,localCtx:o,term:n,defined:r,options:i}),(t=t||{}).vocab){const t=e.mappings.get(n);if(null===t)return null;if(_isObject(t)&&"@id"in t)return t["@id"]}const s=n.indexOf(":");if(s>0){const t=n.substr(0,s),a=n.substr(s+1);if("_"===t||0===a.indexOf("//"))return n;o&&o.hasOwnProperty(t)&&api.createTermDefinition({activeCtx:e,localCtx:o,term:t,defined:r,options:i});const d=e.mappings.get(t);if(d&&d._prefix)return d["@id"]+a;if(_isAbsoluteIri(n))return n}if(t.vocab&&"@vocab"in e)return e["@vocab"]+n;if(t.base&&"@base"in e){if(e["@base"])return prependBase(prependBase(i.base,e["@base"]),n)}else if(t.base)return prependBase(i.base,n);return n}function _deepCompare(e,n){if(!e||"object"!=typeof e||!n||"object"!=typeof n)return e===n;const t=Array.isArray(e);if(t!==Array.isArray(n))return!1;if(t){if(e.length!==n.length)return!1;for(let t=0;t<e.length;++t)if(!_deepCompare(e[t],n[t]))return!1;return!0}const o=Object.keys(e),r=Object.keys(n);if(o.length!==r.length)return!1;for(const t in e){let o=e[t],r=n[t];if("@container"===t&&Array.isArray(o)&&Array.isArray(r)&&(o=o.slice().sort(),r=r.slice().sort()),!_deepCompare(o,r))return!1}return!0}module.exports=api,api.process=(async({activeCtx:e,localCtx:n,options:t,propagate:o=!0,overrideProtected:r=!1,cycles:i=new Set})=>{if(_isObject(n)&&"@context"in n&&_isArray(n["@context"])&&(n=n["@context"]),0===_asArray(n).length)return e;const s=await t.contextResolver.resolve({activeCtx:e,context:n,documentLoader:t.documentLoader,base:t.base});_isObject(s[0].document)&&"boolean"==typeof s[0].document["@propagate"]&&(o=s[0].document["@propagate"]);let a=e;o||a.previousContext||((a=a.clone()).previousContext=e);for(const o of s){let{document:s}=o;if(e=a,null===s){if(!r&&0!==Object.keys(e.protected).length){const r=t&&t.protectedMode||"error";if("error"===r)throw new JsonLdError("Tried to nullify a context with protected terms outside of a term definition.","jsonld.SyntaxError",{code:"invalid context nullification"});if("warn"===r){console.warn("WARNING: invalid context nullification");const n=o.getProcessed(e);if(n){a=e=n;continue}const r=e;a=e=api.getInitialContext(t).clone();for(const[n,t]of Object.entries(r.protected))t&&(e.mappings[n]=util.clone(r.mappings[n]));e.protected=util.clone(r.protected),o.setProcessed(r,a);continue}throw new JsonLdError("Invalid protectedMode.","jsonld.SyntaxError",{code:"invalid protected mode",context:n,protectedMode:r})}a=e=api.getInitialContext(t).clone();continue}const d=o.getProcessed(e);if(d){a=e=d;continue}if(_isObject(s)&&"@context"in s&&(s=s["@context"]),!_isObject(s))throw new JsonLdError("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:s});a=a.clone();const c=new Map;if("@version"in s){if(1.1!==s["@version"])throw new JsonLdError("Unsupported JSON-LD version: "+s["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:s});if(e.processingMode&&"json-ld-1.0"===e.processingMode)throw new JsonLdError("@version: "+s["@version"]+" not compatible with "+e.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:s});a.processingMode="json-ld-1.1",a["@version"]=s["@version"],c.set("@version",!0)}if(a.processingMode=a.processingMode||e.processingMode,"@base"in s){let e=s["@base"];if(null===e||_isAbsoluteIri(e));else{if(!_isRelativeIri(e))throw new JsonLdError('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:s});e=prependBase(a["@base"],e)}a["@base"]=e,c.set("@base",!0)}if("@vocab"in s){const e=s["@vocab"];if(null===e)delete a["@vocab"];else{if(!_isString(e))throw new JsonLdError('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:s});if(!_isAbsoluteIri(e)&&api.processingMode(a,1))throw new JsonLdError('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:s});a["@vocab"]=_expandIri(a,e,{vocab:!0,base:!0},void 0,void 0,t)}c.set("@vocab",!0)}if("@language"in s){const e=s["@language"];if(null===e)delete a["@language"];else{if(!_isString(e))throw new JsonLdError('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:s});a["@language"]=e.toLowerCase()}c.set("@language",!0)}if("@direction"in s){const n=s["@direction"];if("json-ld-1.0"===e.processingMode)throw new JsonLdError("Invalid JSON-LD syntax; @direction not compatible with "+e.processingMode,"jsonld.SyntaxError",{code:"invalid context member",context:s});if(null===n)delete a["@direction"];else{if("ltr"!==n&&"rtl"!==n)throw new JsonLdError('Invalid JSON-LD syntax; the value of "@direction" in a @context must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:s});a["@direction"]=n}c.set("@direction",!0)}if("@propagate"in s){const t=s["@propagate"];if("json-ld-1.0"===e.processingMode)throw new JsonLdError("Invalid JSON-LD syntax; @propagate not compatible with "+e.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:s});if("boolean"!=typeof t)throw new JsonLdError("Invalid JSON-LD syntax; @propagate value must be a boolean.","jsonld.SyntaxError",{code:"invalid @propagate value",context:n});c.set("@propagate",!0)}if("@import"in s){const o=s["@import"];if("json-ld-1.0"===e.processingMode)throw new JsonLdError("Invalid JSON-LD syntax; @import not compatible with "+e.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:s});if(!_isString(o))throw new JsonLdError("Invalid JSON-LD syntax; @import must be a string.","jsonld.SyntaxError",{code:"invalid @import value",context:n});const r=await t.contextResolver.resolve({activeCtx:e,context:o,documentLoader:t.documentLoader,base:t.base});if(1!==r.length)throw new JsonLdError("Invalid JSON-LD syntax; @import must reference a single context.","jsonld.SyntaxError",{code:"invalid remote context",context:n});const i=r[0].getProcessed(e);if(i)s=i;else{const t=r[0].document;if("@import"in t)throw new JsonLdError("Invalid JSON-LD syntax: imported context must not include @import.","jsonld.SyntaxError",{code:"invalid context entry",context:n});for(const e in t)s.hasOwnProperty(e)||(s[e]=t[e]);r[0].setProcessed(e,s)}c.set("@import",!0)}c.set("@protected",s["@protected"]||!1);for(const e in s)if(api.createTermDefinition({activeCtx:a,localCtx:s,term:e,defined:c,options:t,overrideProtected:r}),_isObject(s[e])&&"@context"in s[e]){const n=s[e]["@context"];let o=!0;if(_isString(n)){const e=prependBase(t.base,n);i.has(e)?o=!1:i.add(e)}if(o)try{await api.process({activeCtx:a.clone(),localCtx:s[e]["@context"],overrideProtected:!0,options:t,cycles:i})}catch(n){throw new JsonLdError("Invalid JSON-LD syntax; invalid scoped context.","jsonld.SyntaxError",{code:"invalid scoped context",context:s[e]["@context"],term:e})}}o.setProcessed(e,a)}return a}),api.createTermDefinition=(({activeCtx:e,localCtx:n,term:t,defined:o,options:r,overrideProtected:i=!1})=>{if(o.has(t)){if(o.get(t))return;throw new JsonLdError("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:n,term:t})}let s;if(o.set(t,!1),n.hasOwnProperty(t)&&(s=n[t]),"@type"===t&&_isObject(s)&&"@set"===(s["@container"]||"@set")&&api.processingMode(e,1.1)){const e=["@container","@id","@protected"],o=Object.keys(s);if(0===o.length||o.some(n=>!e.includes(n)))throw new JsonLdError("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:n,term:t})}else{if(api.isKeyword(t))throw new JsonLdError("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:n,term:t});if(t.match(KEYWORD_PATTERN))return void console.warn('WARNING: terms beginning with "@" are reserved for future use and ignored',{term:t});if(""===t)throw new JsonLdError("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:n})}const a=e.mappings.get(t);e.mappings.has(t)&&e.mappings.delete(t);let d=!1;if((_isString(s)||null===s)&&(d=!0,s={"@id":s}),!_isObject(s))throw new JsonLdError("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:n});const c={};e.mappings.set(t,c),c.reverse=!1;const l=["@container","@id","@language","@reverse","@type"];api.processingMode(e,1.1)&&l.push("@context","@direction","@index","@nest","@prefix","@protected");for(const e in s)if(!l.includes(e))throw new JsonLdError("Invalid JSON-LD syntax; a term definition must not contain "+e,"jsonld.SyntaxError",{code:"invalid term definition",context:n});const p=t.indexOf(":");if(c._termHasColon=p>0,"@reverse"in s){if("@id"in s)throw new JsonLdError("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:n});if("@nest"in s)throw new JsonLdError("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:n});const i=s["@reverse"];if(!_isString(i))throw new JsonLdError("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:n});if(!api.isKeyword(i)&&i.match(KEYWORD_PATTERN))return console.warn('WARNING: values beginning with "@" are reserved for future use and ignored',{reverse:i}),void(a?e.mappings.set(t,a):e.mappings.delete(t));const d=_expandIri(e,i,{vocab:!0,base:!1},n,o,r);if(!_isAbsoluteIri(d))throw new JsonLdError("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:n});c["@id"]=d,c.reverse=!0}else if("@id"in s){let i=s["@id"];if(i&&!_isString(i))throw new JsonLdError("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:n});if(null===i)c["@id"]=null;else{if(!api.isKeyword(i)&&i.match(KEYWORD_PATTERN))return console.warn('WARNING: values beginning with "@" are reserved for future use and ignored',{id:i}),void(a?e.mappings.set(t,a):e.mappings.delete(t));if(i!==t){if(i=_expandIri(e,i,{vocab:!0,base:!1},n,o,r),!_isAbsoluteIri(i)&&!api.isKeyword(i))throw new JsonLdError("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:n});if(t.match(/(?::[^:])|\//)){if(_expandIri(e,t,{vocab:!0,base:!1},n,new Map(o).set(t,!0),r)!==i)throw new JsonLdError("Invalid JSON-LD syntax; term in form of IRI must expand to definition.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:n})}c["@id"]=i,c._prefix=d&&!c._termHasColon&&i.match(/[:\/\?#\[\]@]$/)}}}if(!("@id"in c))if(c._termHasColon){const i=t.substr(0,p);if(n.hasOwnProperty(i)&&api.createTermDefinition({activeCtx:e,localCtx:n,term:i,defined:o,options:r}),e.mappings.has(i)){const n=t.substr(p+1);c["@id"]=e.mappings.get(i)["@id"]+n}else c["@id"]=t}else if("@type"===t)c["@id"]=t;else{if(!("@vocab"in e))throw new JsonLdError("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:n,term:t});c["@id"]=e["@vocab"]+t}if((!0===s["@protected"]||!0===o.get("@protected")&&!1!==s["@protected"])&&(e.protected[t]=!0,c.protected=!0),o.set(t,!0),"@type"in s){let t=s["@type"];if(!_isString(t))throw new JsonLdError("Invalid JSON-LD syntax; an @context @type value must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:n});if("@json"===t||"@none"===t){if(api.processingMode(e,1))throw new JsonLdError("Invalid JSON-LD syntax; an @context @type value must not be "+`"${t}" in JSON-LD 1.0 mode.`,"jsonld.SyntaxError",{code:"invalid type mapping",context:n})}else if("@id"!==t&&"@vocab"!==t){if(t=_expandIri(e,t,{vocab:!0,base:!1},n,o,r),!_isAbsoluteIri(t))throw new JsonLdError("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:n});if(0===t.indexOf("_:"))throw new JsonLdError("Invalid JSON-LD syntax; an @context @type value must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:n})}c["@type"]=t}if("@container"in s){const t=_isString(s["@container"])?[s["@container"]]:s["@container"]||[],o=["@list","@set","@index","@language"];let r=!0;const i=t.includes("@set");if(api.processingMode(e,1.1)){if(o.push("@graph","@id","@type"),t.includes("@list")){if(1!==t.length)throw new JsonLdError("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:n})}else if(t.includes("@graph")){if(t.some(e=>"@graph"!==e&&"@id"!==e&&"@index"!==e&&"@set"!==e))throw new JsonLdError("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:n})}else r&=t.length<=(i?2:1);if(t.includes("@type")&&(c["@type"]=c["@type"]||"@id",!["@id","@vocab"].includes(c["@type"])))throw new JsonLdError("Invalid JSON-LD syntax; container: @type requires @type to be @id or @vocab.","jsonld.SyntaxError",{code:"invalid type mapping",context:n})}else r&=!_isArray(s["@container"]),r&=t.length<=1;if(r&=t.every(e=>o.includes(e)),!(r&=!(i&&t.includes("@list"))))throw new JsonLdError("Invalid JSON-LD syntax; @context @container value must be one of the following: "+o.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:n});if(c.reverse&&!t.every(e=>["@index","@set"].includes(e)))throw new JsonLdError("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:n});c["@container"]=t}if("@index"in s){if(!("@container"in s&&c["@container"].includes("@index")))throw new JsonLdError("Invalid JSON-LD syntax; @index without @index in @container: "+`"${s["@index"]}" on term "${t}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:n});if(!_isString(s["@index"])||0===s["@index"].indexOf("@"))throw new JsonLdError("Invalid JSON-LD syntax; @index must expand to an IRI: "+`"${s["@index"]}" on term "${t}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:n});c["@index"]=s["@index"]}if("@context"in s&&(c["@context"]=s["@context"]),"@language"in s&&!("@type"in s)){let e=s["@language"];if(null!==e&&!_isString(e))throw new JsonLdError("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:n});null!==e&&(e=e.toLowerCase()),c["@language"]=e}if("@prefix"in s){if(t.match(/:|\//))throw new JsonLdError("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:n});if(api.isKeyword(c["@id"]))throw new JsonLdError("Invalid JSON-LD syntax; keywords may not be used as prefixes","jsonld.SyntaxError",{code:"invalid term definition",context:n});if("boolean"!=typeof s["@prefix"])throw new JsonLdError("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:n});c._prefix=!0===s["@prefix"]}if("@direction"in s){const e=s["@direction"];if(null!==e&&"ltr"!==e&&"rtl"!==e)throw new JsonLdError('Invalid JSON-LD syntax; @direction value must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:n});c["@direction"]=e}if("@nest"in s){const e=s["@nest"];if(!_isString(e)||"@nest"!==e&&0===e.indexOf("@"))throw new JsonLdError("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:n});c["@nest"]=e}const x=c["@id"];if("@context"===x||"@preserve"===x)throw new JsonLdError("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:n});if(a&&a.protected&&!i&&(e.protected[t]=!0,c.protected=!0,!_deepCompare(a,c))){const e=r&&r.protectedMode||"error";if("error"===e)throw new JsonLdError(`Invalid JSON-LD syntax; tried to redefine "${t}" which is a `+"protected term.","jsonld.SyntaxError",{code:"protected term redefinition",context:n,term:t});if("warn"===e)return void console.warn("WARNING: protected term redefinition",{term:t});throw new JsonLdError("Invalid protectedMode.","jsonld.SyntaxError",{code:"invalid protected mode",context:n,term:t,protectedMode:e})}}),api.expandIri=((e,n,t,o)=>_expandIri(e,n,t,void 0,void 0,o)),api.getInitialContext=(e=>{const n=JSON.stringify({processingMode:e.processingMode}),t=INITIAL_CONTEXT_CACHE.get(n);if(t)return t;const o={processingMode:e.processingMode,mappings:new Map,inverse:null,getInverse:function(){const e=this;if(e.inverse)return e.inverse;const n=e.inverse={},t=e.fastCurieMap={},o={},s=(e["@language"]||"@none").toLowerCase(),a=e["@direction"],d=e.mappings,c=[...d.keys()].sort(_compareShortestLeast);for(const e of c){const r=d.get(e);if(null===r)continue;let c=r["@container"]||"@none";if(c=[].concat(c).sort().join(""),null===r["@id"])continue;const l=_asArray(r["@id"]);for(const d of l){let l=n[d];const p=api.isKeyword(d);if(l)p||r._termHasColon||o[d].push(e);else if(n[d]=l={},!p&&!r._termHasColon){o[d]=[e];const n={iri:d,terms:o[d]};d[0]in t?t[d[0]].push(n):t[d[0]]=[n]}if(l[c]||(l[c]={"@language":{},"@type":{},"@any":{}}),l=l[c],i(e,l["@any"],"@none"),r.reverse)i(e,l["@type"],"@reverse");else if("@none"===r["@type"])i(e,l["@any"],"@none"),i(e,l["@language"],"@none"),i(e,l["@type"],"@none");else if("@type"in r)i(e,l["@type"],r["@type"]);else if("@language"in r&&"@direction"in r){const n=r["@language"],t=r["@direction"];i(e,l["@language"],n&&t?`${n}_${t}`.toLowerCase():n?n.toLowerCase():t?`_${t}`:"@null")}else"@language"in r?i(e,l["@language"],(r["@language"]||"@null").toLowerCase()):"@direction"in r?r["@direction"]?i(e,l["@language"],`_${r["@direction"]}`):i(e,l["@language"],"@none"):a?(i(e,l["@language"],`_${a}`),i(e,l["@language"],"@none"),i(e,l["@type"],"@none")):(i(e,l["@language"],s),i(e,l["@language"],"@none"),i(e,l["@type"],"@none"))}}for(const e in t)r(t,e,1);return n},clone:function(){const e={};e.mappings=util.clone(this.mappings),e.clone=this.clone,e.inverse=null,e.getInverse=this.getInverse,e.protected=util.clone(this.protected),this.previousContext&&(e.previousContext=this.previousContext.clone());e.revertToPreviousContext=this.revertToPreviousContext,"@base"in this&&(e["@base"]=this["@base"]);"@language"in this&&(e["@language"]=this["@language"]);"@vocab"in this&&(e["@vocab"]=this["@vocab"]);return e},revertToPreviousContext:function(){if(!this.previousContext)return this;return this.previousContext.clone()},protected:{}};return 1e4===INITIAL_CONTEXT_CACHE.size&&INITIAL_CONTEXT_CACHE.clear(),INITIAL_CONTEXT_CACHE.set(n,o),o;function r(e,n,t){const o=e[n],i=e[n]={};let s,a;for(const e of o)(a=t>=(s=e.iri).length?"":s[t])in i?i[a].push(e):i[a]=[e];for(const e in i)""!==e&&r(i,e,t+1)}function i(e,n,t){n.hasOwnProperty(t)||(n[t]=e)}}),api.getContextValue=((e,n,t)=>{if(null===n){if("@context"===t)return;return null}if(e.mappings.has(n)){const o=e.mappings.get(n);if(_isUndefined(t))return o;if(o.hasOwnProperty(t))return o[t]}return"@language"===t&&t in e?e[t]:"@direction"===t&&t in e?e[t]:"@context"!==t?null:void 0}),api.processingMode=((e,n)=>n.toString()>="1.1"?!e.processingMode||e.processingMode>="json-ld-"+n.toString():"json-ld-1.0"===e.processingMode),api.isKeyword=(e=>{if(!_isString(e)||"@"!==e[0])return!1;switch(e){case"@base":case"@container":case"@context":case"@default":case"@direction":case"@embed":case"@explicit":case"@graph":case"@id":case"@included":case"@index":case"@json":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@protected":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1});

},{"./JsonLdError":33,"./types":51,"./url":52,"./util":53}],41:[function(_dereq_,module,exports){
"use strict";const{parseLinkHeader:parseLinkHeader,buildHeaders:buildHeaders}=_dereq_("../util"),{LINK_HEADER_CONTEXT:LINK_HEADER_CONTEXT}=_dereq_("../constants"),JsonLdError=_dereq_("../JsonLdError"),RequestQueue=_dereq_("../RequestQueue"),{prependBase:prependBase}=_dereq_("../url"),REGEX_LINK_HEADER=/(^|(\r\n))link:/i;function _get(e,r,t){const n=new(e=e||XMLHttpRequest);return new Promise((e,o)=>{n.onload=(()=>e(n)),n.onerror=(e=>o(e)),n.open("GET",r,!0);for(const e in t)n.setRequestHeader(e,t[e]);n.send()})}module.exports=(({secure:e,headers:r={},xhr:t}={headers:{}})=>{return r=buildHeaders(r),(new RequestQueue).wrapLoader(async function n(o){if(0!==o.indexOf("http:")&&0!==o.indexOf("https:"))throw new JsonLdError('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:o});if(e&&0!==o.indexOf("https"))throw new JsonLdError('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:o});let d;try{d=await _get(t,o,r)}catch(e){throw new JsonLdError("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:o,cause:e})}if(d.status>=400)throw new JsonLdError("URL could not be dereferenced: "+d.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:o,httpStatusCode:d.status});let s={contextUrl:null,documentUrl:o,document:d.response};let a=null;const l=d.getResponseHeader("Content-Type");let u;REGEX_LINK_HEADER.test(d.getAllResponseHeaders())&&(u=d.getResponseHeader("Link"));if(u&&"application/ld+json"!==l){const e=parseLinkHeader(u),r=e[LINK_HEADER_CONTEXT];if(Array.isArray(r))throw new JsonLdError("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:o});r&&(s.contextUrl=r.target),(a=e.alternate)&&"application/ld+json"==a.type&&!(l||"").match(/^application\/(\w*\+)?json$/)&&(s=await n(prependBase(o,a.target)))}return s})});

},{"../JsonLdError":33,"../RequestQueue":36,"../constants":39,"../url":52,"../util":53}],42:[function(_dereq_,module,exports){
"use strict";const JsonLdError=_dereq_("./JsonLdError"),{isArray:_isArray,isObject:_isObject,isEmptyObject:_isEmptyObject,isString:_isString,isUndefined:_isUndefined}=_dereq_("./types"),{isList:_isList,isValue:_isValue,isGraph:_isGraph,isSubject:_isSubject}=_dereq_("./graphTypes"),{expandIri:_expandIri,getContextValue:_getContextValue,isKeyword:_isKeyword,process:_processContext,processingMode:_processingMode}=_dereq_("./context"),{isAbsolute:_isAbsoluteIri}=_dereq_("./url"),{addValue:_addValue,asArray:_asArray,getValues:_getValues,validateTypeValue:_validateTypeValue}=_dereq_("./util"),api={};module.exports=api;const REGEX_BCP47=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/;async function _expandObject({activeCtx:e,activeProperty:t,expandedActiveProperty:n,element:a,expandedParent:i,options:r={},insideList:o,typeKey:s,typeScopedContext:l,expansionMap:d}){const p=Object.keys(a).sort(),c=[];let u;const v=a[s]&&"@json"===_expandIri(e,_isArray(a[s])?a[s][0]:a[s],{vocab:!0},r);for(const s of p){let p,y=a[s];if("@context"===s)continue;let x=_expandIri(e,s,{vocab:!0},r);if((null===x||!_isAbsoluteIri(x)&&!_isKeyword(x))&&void 0===(x=d({unmappedProperty:s,activeCtx:e,activeProperty:t,parent:a,options:r,insideList:o,value:y,expandedParent:i})))continue;if(_isKeyword(x)){if("@reverse"===n)throw new JsonLdError("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:y});if(x in i&&"@included"!==x&&"@type"!==x)throw new JsonLdError("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:x})}if("@id"===x){if(!_isString(y)){if(!r.isFrame)throw new JsonLdError('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:y});if(_isObject(y)){if(!_isEmptyObject(y))throw new JsonLdError('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:y})}else{if(!_isArray(y))throw new JsonLdError('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:y});if(!y.every(e=>_isString(e)))throw new JsonLdError('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:y})}}_addValue(i,"@id",_asArray(y).map(t=>_isString(t)?_expandIri(e,t,{base:!0},r):t),{propertyIsArray:r.isFrame});continue}if("@type"===x){_isObject(y)&&(y=Object.fromEntries(Object.entries(y).map(([e,t])=>[_expandIri(l,e,{vocab:!0}),_asArray(t).map(e=>_expandIri(l,e,{base:!0,vocab:!0}))]))),_validateTypeValue(y,r.isFrame),_addValue(i,"@type",_asArray(y).map(e=>_isString(e)?_expandIri(l,e,{base:!0,vocab:!0},r):e),{propertyIsArray:r.isFrame});continue}if("@included"===x&&_processingMode(e,1.1)){const n=_asArray(await api.expand({activeCtx:e,activeProperty:t,element:y,options:r,expansionMap:d}));if(!n.every(e=>_isSubject(e)))throw new JsonLdError("Invalid JSON-LD syntax; values of @included must expand to node objects.","jsonld.SyntaxError",{code:"invalid @included value",value:y});_addValue(i,"@included",n,{propertyIsArray:!0});continue}if("@graph"===x&&!_isObject(y)&&!_isArray(y))throw new JsonLdError('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:y});if("@value"===x){u=y,v&&_processingMode(e,1.1)?i["@value"]=y:_addValue(i,"@value",y,{propertyIsArray:r.isFrame});continue}if("@language"===x){if(null===y)continue;if(!_isString(y)&&!r.isFrame)throw new JsonLdError('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:y});y=_asArray(y).map(e=>_isString(e)?e.toLowerCase():e);for(const e of y)_isString(e)&&!e.match(REGEX_BCP47)&&console.warn(`@language must be valid BCP47: ${e}`);_addValue(i,"@language",y,{propertyIsArray:r.isFrame});continue}if("@direction"===x){if(!_isString(y)&&!r.isFrame)throw new JsonLdError('Invalid JSON-LD syntax; "@direction" value must be a string.',"jsonld.SyntaxError",{code:"invalid base direction",value:y});y=_asArray(y);for(const e of y)if(_isString(e)&&"ltr"!==e&&"rtl"!==e)throw new JsonLdError('Invalid JSON-LD syntax; "@direction" must be "ltr" or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",value:y});_addValue(i,"@direction",y,{propertyIsArray:r.isFrame});continue}if("@index"===x){if(!_isString(y))throw new JsonLdError('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:y});_addValue(i,"@index",y);continue}if("@reverse"===x){if(!_isObject(y))throw new JsonLdError('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:y});if("@reverse"in(p=await api.expand({activeCtx:e,activeProperty:"@reverse",element:y,options:r,expansionMap:d})))for(const e in p["@reverse"])_addValue(i,e,p["@reverse"][e],{propertyIsArray:!0});let t=i["@reverse"]||null;for(const e in p){if("@reverse"===e)continue;null===t&&(t=i["@reverse"]={}),_addValue(t,e,[],{propertyIsArray:!0});const n=p[e];for(let a=0;a<n.length;++a){const i=n[a];if(_isValue(i)||_isList(i))throw new JsonLdError('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:p});_addValue(t,e,i,{propertyIsArray:!0})}}continue}if("@nest"===x){c.push(s);continue}let _=e;const g=_getContextValue(e,s,"@context");_isUndefined(g)||(_=await _processContext({activeCtx:e,localCtx:g,propagate:!0,overrideProtected:!0,options:r}));const f=_getContextValue(_,s,"@container")||[];if(f.includes("@language")&&_isObject(y)){p=_expandLanguageMap(_,y,_getContextValue(_,s,"@direction"),r)}else if(f.includes("@index")&&_isObject(y)){const t=f.includes("@graph"),n=_getContextValue(_,s,"@index")||"@index",a="@index"!==n&&_expandIri(e,n,{vocab:!0},r);p=await _expandIndexMap({activeCtx:_,options:r,activeProperty:s,value:y,expansionMap:d,asGraph:t,indexKey:n,propertyIndex:a})}else if(f.includes("@id")&&_isObject(y)){const e=f.includes("@graph");p=await _expandIndexMap({activeCtx:_,options:r,activeProperty:s,value:y,expansionMap:d,asGraph:e,indexKey:"@id"})}else if(f.includes("@type")&&_isObject(y))p=await _expandIndexMap({activeCtx:_.revertToPreviousContext(),options:r,activeProperty:s,value:y,expansionMap:d,asGraph:!1,indexKey:"@type"});else{const a="@list"===x;if(a||"@set"===x){let e=t;a&&"@graph"===n&&(e=null),p=await api.expand({activeCtx:_,activeProperty:e,element:y,options:r,insideList:a,expansionMap:d})}else p="@json"===_getContextValue(e,s,"@type")?{"@type":"@json","@value":y}:await api.expand({activeCtx:_,activeProperty:s,element:y,options:r,insideList:!1,expansionMap:d})}if(null!==p||"@value"===x||void 0!==(p=d({unmappedValue:y,expandedProperty:x,activeCtx:_,activeProperty:t,parent:a,options:r,insideList:o,key:s,expandedParent:i})))if("@list"!==x&&!_isList(p)&&f.includes("@list")&&(p={"@list":_asArray(p)}),f.includes("@graph")&&!f.some(e=>"@id"===e||"@index"===e)&&(p=_asArray(p).map(e=>({"@graph":_asArray(e)}))),_.mappings.has(s)&&_.mappings.get(s).reverse){const e=i["@reverse"]=i["@reverse"]||{};p=_asArray(p);for(let t=0;t<p.length;++t){const n=p[t];if(_isValue(n)||_isList(n))throw new JsonLdError('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:p});_addValue(e,x,n,{propertyIsArray:!0})}}else _addValue(i,x,p,{propertyIsArray:!0})}if("@value"in i)if("@json"===i["@type"]&&_processingMode(e,1.1));else if((_isObject(u)||_isArray(u))&&!r.isFrame)throw new JsonLdError('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:u});for(const p of c){const c=_isArray(a[p])?a[p]:[a[p]];for(const a of c){if(!_isObject(a)||Object.keys(a).some(t=>"@value"===_expandIri(e,t,{vocab:!0},r)))throw new JsonLdError("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:a});await _expandObject({activeCtx:e,activeProperty:t,expandedActiveProperty:n,element:a,expandedParent:i,options:r,insideList:o,typeScopedContext:l,typeKey:s,expansionMap:d})}}}function _expandValue({activeCtx:e,activeProperty:t,value:n,options:a}){if(null==n)return null;const i=_expandIri(e,t,{vocab:!0},a);if("@id"===i)return _expandIri(e,n,{base:!0},a);if("@type"===i)return _expandIri(e,n,{vocab:!0,base:!0},a);const r=_getContextValue(e,t,"@type");if(("@id"===r||"@graph"===i)&&_isString(n))return{"@id":_expandIri(e,n,{base:!0},a)};if("@vocab"===r&&_isString(n))return{"@id":_expandIri(e,n,{vocab:!0,base:!0},a)};if(_isKeyword(i))return n;const o={};if(r&&!["@id","@vocab","@none"].includes(r))o["@type"]=r;else if(_isString(n)){const n=_getContextValue(e,t,"@language");null!==n&&(o["@language"]=n);const a=_getContextValue(e,t,"@direction");null!==a&&(o["@direction"]=a)}return["boolean","number","string"].includes(typeof n)||(n=n.toString()),o["@value"]=n,o}function _expandLanguageMap(e,t,n,a){const i=[],r=Object.keys(t).sort();for(const o of r){const r=_expandIri(e,o,{vocab:!0},a);let s=t[o];_isArray(s)||(s=[s]);for(const e of s){if(null===e)continue;if(!_isString(e))throw new JsonLdError("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:t});const a={"@value":e};"@none"!==r&&(a["@language"]=o.toLowerCase()),n&&(a["@direction"]=n),i.push(a)}}return i}async function _expandIndexMap({activeCtx:e,options:t,activeProperty:n,value:a,expansionMap:i,asGraph:r,indexKey:o,propertyIndex:s}){const l=[],d=Object.keys(a).sort(),p="@type"===o;for(let c of d){if(p){const n=_getContextValue(e,c,"@context");_isUndefined(n)||(e=await _processContext({activeCtx:e,localCtx:n,propagate:!1,options:t}))}let d,u=a[c];_isArray(u)||(u=[u]),u=await api.expand({activeCtx:e,activeProperty:n,element:u,options:t,insideList:!1,insideIndex:!0,expansionMap:i}),d=s?"@none"===c?"@none":_expandValue({activeCtx:e,activeProperty:o,value:c,options:t}):_expandIri(e,c,{vocab:!0},t),"@id"===o?c=_expandIri(e,c,{base:!0},t):p&&(c=d);for(let e of u){if(r&&!_isGraph(e)&&(e={"@graph":[e]}),"@type"===o)"@none"===d||(e["@type"]?e["@type"]=[c].concat(e["@type"]):e["@type"]=[c]);else{if(_isValue(e)&&!["@language","@type","@index"].includes(o))throw new JsonLdError("Invalid JSON-LD syntax; Attempt to add illegal key to value "+`object: "${o}".`,"jsonld.SyntaxError",{code:"invalid value object",value:e});s?"@none"!==d&&_addValue(e,s,d,{propertyIsArray:!0,prependValue:!0}):"@none"===d||o in e||(e[o]=c)}l.push(e)}}return l}api.expand=(async({activeCtx:e,activeProperty:t=null,element:n,options:a={},insideList:i=!1,insideIndex:r=!1,typeScopedContext:o=null,expansionMap:s=(()=>void 0)})=>{if(null==n)return null;if("@default"===t&&(a=Object.assign({},a,{isFrame:!1})),!_isArray(n)&&!_isObject(n)){if(!i&&(null===t||"@graph"===_expandIri(e,t,{vocab:!0},a))){const r=await s({unmappedValue:n,activeCtx:e,activeProperty:t,options:a,insideList:i});return void 0===r?null:r}return _expandValue({activeCtx:e,activeProperty:t,value:n,options:a})}if(_isArray(n)){let l=[];const d=_getContextValue(e,t,"@container")||[];i=i||d.includes("@list");for(let d=0;d<n.length;++d){let p=await api.expand({activeCtx:e,activeProperty:t,element:n[d],options:a,expansionMap:s,insideIndex:r,typeScopedContext:o});i&&_isArray(p)&&(p={"@list":p}),null===p&&void 0===(p=await s({unmappedValue:n[d],activeCtx:e,activeProperty:t,parent:n,index:d,options:a,expandedParent:l,insideList:i}))||(_isArray(p)?l=l.concat(p):l.push(p))}return l}const l=_expandIri(e,t,{vocab:!0},a),d=_getContextValue(e,t,"@context");o=o||(e.previousContext?e:null);let p=Object.keys(n).sort(),c=!r;if(c&&o&&p.length<=2&&!p.includes("@context"))for(const t of p){const n=_expandIri(o,t,{vocab:!0},a);if("@value"===n){c=!1,e=o;break}if("@id"===n&&1===p.length){c=!1;break}}c&&(e=e.revertToPreviousContext()),_isUndefined(d)||(e=await _processContext({activeCtx:e,localCtx:d,propagate:!0,overrideProtected:!0,options:a})),"@context"in n&&(e=await _processContext({activeCtx:e,localCtx:n["@context"],options:a})),o=e;let u=null;for(const t of p){if("@type"===_expandIri(e,t,{vocab:!0},a)){u=u||t;const i=n[t],r=Array.isArray(i)?i.length>1?i.slice().sort():i:[i];for(const t of r){const n=_getContextValue(o,t,"@context");_isUndefined(n)||(e=await _processContext({activeCtx:e,localCtx:n,options:a,propagate:!1}))}}}let v={};await _expandObject({activeCtx:e,activeProperty:t,expandedActiveProperty:l,element:n,expandedParent:v,options:a,insideList:i,typeKey:u,typeScopedContext:o,expansionMap:s});let y=(p=Object.keys(v)).length;if("@value"in v){if("@type"in v&&("@language"in v||"@direction"in v))throw new JsonLdError('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and either "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:v});let r=y-1;if("@type"in v&&(r-=1),"@index"in v&&(r-=1),"@language"in v&&(r-=1),"@direction"in v&&(r-=1),0!==r)throw new JsonLdError('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and either "@type" or either or both "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:v});const o=null===v["@value"]?[]:_asArray(v["@value"]),l=_getValues(v,"@type");if(_processingMode(e,1.1)&&l.includes("@json")&&1===l.length);else if(0===o.length){const r=await s({unmappedValue:v,activeCtx:e,activeProperty:t,element:n,options:a,insideList:i});v=void 0!==r?r:null}else{if(!o.every(e=>_isString(e)||_isEmptyObject(e))&&"@language"in v)throw new JsonLdError("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:v});if(!l.every(e=>_isAbsoluteIri(e)&&!(_isString(e)&&0===e.indexOf("_:"))||_isEmptyObject(e)))throw new JsonLdError('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:v})}}else if("@type"in v&&!_isArray(v["@type"]))v["@type"]=[v["@type"]];else if("@set"in v||"@list"in v){if(y>1&&!(2===y&&"@index"in v))throw new JsonLdError('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:v});"@set"in v&&(v=v["@set"],y=(p=Object.keys(v)).length)}else if(1===y&&"@language"in v){const r=await s(v,{unmappedValue:v,activeCtx:e,activeProperty:t,element:n,options:a,insideList:i});v=void 0!==r?r:null}if(_isObject(v)&&!a.keepFreeFloatingNodes&&!i&&(null===t||"@graph"===l)&&(0===y||"@value"in v||"@list"in v||1===y&&"@id"in v)){const r=await s({unmappedValue:v,activeCtx:e,activeProperty:t,element:n,options:a,insideList:i});v=void 0!==r?r:null}return v});

},{"./JsonLdError":33,"./context":40,"./graphTypes":46,"./types":51,"./url":52,"./util":53}],43:[function(_dereq_,module,exports){
"use strict";const{isSubjectReference:_isSubjectReference}=_dereq_("./graphTypes"),{createMergedNodeMap:_createMergedNodeMap}=_dereq_("./nodeMap"),api={};module.exports=api,api.flatten=(e=>{const r=_createMergedNodeMap(e),t=[],c=Object.keys(r).sort();for(let e=0;e<c.length;++e){const s=r[c[e]];_isSubjectReference(s)||t.push(s)}return t});

},{"./graphTypes":46,"./nodeMap":48}],44:[function(_dereq_,module,exports){
"use strict";const{isKeyword:isKeyword}=_dereq_("./context"),graphTypes=_dereq_("./graphTypes"),types=_dereq_("./types"),util=_dereq_("./util"),url=_dereq_("./url"),JsonLdError=_dereq_("./JsonLdError"),{createNodeMap:_createNodeMap,mergeNodeMapGraphs:_mergeNodeMapGraphs}=_dereq_("./nodeMap"),api={};function _createImplicitFrame(e){const r={};for(const t in e)void 0!==e[t]&&(r["@"+t]=[e[t]]);return[r]}function _createsCircularReference(e,r,t){for(let i=t.length-1;i>=0;--i){const s=t[i];if(s.graph===r&&s.subject["@id"]===e["@id"])return!0}return!1}function _getFrameFlag(e,r,t){const i="@"+t;let s=i in e?e[i][0]:r[t];if("embed"===t)if(!0===s)s="@once";else if(!1===s)s="@never";else if("@always"!==s&&"@never"!==s&&"@link"!==s&&"@first"!==s&&"@last"!==s&&"@once"!==s)throw new JsonLdError("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:e});return s}function _validateFrame(e){if(!types.isArray(e)||1!==e.length||!types.isObject(e[0]))throw new JsonLdError("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:e});if("@id"in e[0])for(const r of util.asArray(e[0]["@id"]))if(!types.isObject(r)&&!url.isAbsolute(r)||types.isString(r)&&0===r.indexOf("_:"))throw new JsonLdError("Invalid JSON-LD syntax; invalid @id in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:e});if("@type"in e[0])for(const r of util.asArray(e[0]["@type"]))if(!types.isObject(r)&&!url.isAbsolute(r)||types.isString(r)&&0===r.indexOf("_:"))throw new JsonLdError("Invalid JSON-LD syntax; invalid @type in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:e})}function _filterSubjects(e,r,t,i){const s={};for(const n of r){const r=e.graphMap[e.graph][n];_filterSubject(e,r,t,i)&&(s[n]=r)}return s}function _filterSubject(e,r,t,i){let s=!0,n=!1;for(const a in t){let l=!1;const u=util.getValues(r,a),p=0===util.getValues(t,a).length;if("@id"===a){if(types.isEmptyObject(t["@id"][0]||{})?l=!0:t["@id"].length>=0&&(l=t["@id"].includes(u[0])),!i.requireAll)return l}else if("@type"===a){if(s=!1,p){if(u.length>0)return!1;l=!0}else if(1===t["@type"].length&&types.isEmptyObject(t["@type"][0]))l=u.length>0;else for(const e of t["@type"])l=!!(types.isObject(e)&&"@default"in e)||(l||u.some(r=>r===e));if(!i.requireAll)return l}else{if(isKeyword(a))continue;{const r=util.getValues(t,a)[0];let n=!1;if(r&&(_validateFrame([r]),n="@default"in r),s=!1,0===u.length&&n)continue;if(u.length>0&&p)return!1;if(void 0===r){if(u.length>0)return!1;l=!0}else if(graphTypes.isList(r)){const t=r["@list"][0];if(graphTypes.isList(u[0])){const r=u[0]["@list"];graphTypes.isValue(t)?l=r.some(e=>_valueMatch(t,e)):(graphTypes.isSubject(t)||graphTypes.isSubjectReference(t))&&(l=r.some(r=>_nodeMatch(e,t,r,i)))}}else l=graphTypes.isValue(r)?u.some(e=>_valueMatch(r,e)):graphTypes.isSubjectReference(r)?u.some(t=>_nodeMatch(e,r,t,i)):!!types.isObject(r)&&u.length>0}}if(!l&&i.requireAll)return!1;n=n||l}return s||n}function _removeEmbed(e,r){const t=e.uniqueEmbeds[e.graph],i=t[r],s=i.parent,n=i.property,a={"@id":r};if(types.isArray(s)){for(let e=0;e<s.length;++e)if(util.compareValues(s[e],a)){s[e]=a;break}}else{const e=types.isArray(s[n]);util.removeValue(s,n,a,{propertyIsArray:e}),util.addValue(s,n,a,{propertyIsArray:e})}const l=e=>{const r=Object.keys(t);for(const i of r)i in t&&types.isObject(t[i].parent)&&t[i].parent["@id"]===e&&(delete t[i],l(i))};l(r)}function _cleanupPreserve(e,r){if(types.isArray(e))return e.map(e=>_cleanupPreserve(e,r));if(types.isObject(e)){if("@preserve"in e)return e["@preserve"][0];if(graphTypes.isValue(e))return e;if(graphTypes.isList(e))return e["@list"]=_cleanupPreserve(e["@list"],r),e;if("@id"in e){const t=e["@id"];if(r.link.hasOwnProperty(t)){const i=r.link[t].indexOf(e);if(-1!==i)return r.link[t][i];r.link[t].push(e)}else r.link[t]=[e]}for(const t in e)"@id"===t&&r.bnodesToClear.includes(e[t])?delete e["@id"]:e[t]=_cleanupPreserve(e[t],r)}return e}function _addFrameOutput(e,r,t){types.isObject(e)?util.addValue(e,r,t,{propertyIsArray:!0}):e.push(t)}function _nodeMatch(e,r,t,i){if(!("@id"in t))return!1;const s=e.subjects[t["@id"]];return s&&_filterSubject(e,s,r,i)}function _valueMatch(e,r){const t=r["@value"],i=r["@type"],s=r["@language"],n=e["@value"]?types.isArray(e["@value"])?e["@value"]:[e["@value"]]:[],a=e["@type"]?types.isArray(e["@type"])?e["@type"]:[e["@type"]]:[],l=e["@language"]?types.isArray(e["@language"])?e["@language"]:[e["@language"]]:[];return 0===n.length&&0===a.length&&0===l.length||!(!n.includes(t)&&!types.isEmptyObject(n[0]))&&(!!(!i&&0===a.length||a.includes(i)||i&&types.isEmptyObject(a[0]))&&!!(!s&&0===l.length||l.includes(s)||s&&types.isEmptyObject(l[0])))}module.exports=api,api.frameMergedOrDefault=((e,r,t)=>{const i={options:t,embedded:!1,graph:"@default",graphMap:{"@default":{}},subjectStack:[],link:{},bnodeMap:{}},s=new util.IdentifierIssuer("_:b");_createNodeMap(e,i.graphMap,"@default",s),t.merged&&(i.graphMap["@merged"]=_mergeNodeMapGraphs(i.graphMap),i.graph="@merged"),i.subjects=i.graphMap[i.graph];const n=[];return api.frame(i,Object.keys(i.subjects).sort(),r,n),t.pruneBlankNodeIdentifiers&&(t.bnodesToClear=Object.keys(i.bnodeMap).filter(e=>1===i.bnodeMap[e].length)),t.link={},_cleanupPreserve(n,t)}),api.frame=((e,r,t,i,s=null)=>{_validateFrame(t),t=t[0];const n=e.options,a={embed:_getFrameFlag(t,n,"embed"),explicit:_getFrameFlag(t,n,"explicit"),requireAll:_getFrameFlag(t,n,"requireAll")};e.link.hasOwnProperty(e.graph)||(e.link[e.graph]={});const l=e.link[e.graph],u=_filterSubjects(e,r,t,a),p=Object.keys(u).sort();for(const o of p){const p=u[o];if(null===s?e.uniqueEmbeds={[e.graph]:{}}:e.uniqueEmbeds[e.graph]=e.uniqueEmbeds[e.graph]||{},"@link"===a.embed&&o in l){_addFrameOutput(i,s,l[o]);continue}const d={"@id":o};if(0===o.indexOf("_:")&&util.addValue(e.bnodeMap,o,d,{propertyIsArray:!0}),l[o]=d,("@first"===a.embed||"@last"===a.embed)&&e.is11)throw new JsonLdError("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:t});if(e.embedded||!e.uniqueEmbeds[e.graph].hasOwnProperty(o))if(!e.embedded||"@never"!==a.embed&&!_createsCircularReference(p,e.graph,e.subjectStack))if(!e.embedded||"@first"!=a.embed&&"@once"!=a.embed||!e.uniqueEmbeds[e.graph].hasOwnProperty(o)){if("@last"===a.embed&&o in e.uniqueEmbeds[e.graph]&&_removeEmbed(e,o),e.uniqueEmbeds[e.graph][o]={parent:i,property:s},e.subjectStack.push({subject:p,graph:e.graph}),o in e.graphMap){let r=!1,i=null;"@graph"in t?(i=t["@graph"][0],r=!("@merged"===o||"@default"===o),types.isObject(i)||(i={})):(r="@merged"!==e.graph,i={}),r&&api.frame({...e,graph:o,embedded:!1},Object.keys(e.graphMap[o]).sort(),[i],d,"@graph")}"@included"in t&&api.frame({...e,embedded:!1},r,t["@included"],d,"@included");for(const r of Object.keys(p).sort())if(isKeyword(r)){if(d[r]=util.clone(p[r]),"@type"===r)for(const r of p["@type"])0===r.indexOf("_:")&&util.addValue(e.bnodeMap,r,d,{propertyIsArray:!0})}else if(!a.explicit||r in t)for(const i of p[r]){const s=r in t?t[r]:_createImplicitFrame(a);if(graphTypes.isList(i)){const s=t[r]&&t[r][0]&&t[r][0]["@list"]?t[r][0]["@list"]:_createImplicitFrame(a),n={"@list":[]};_addFrameOutput(d,r,n);const l=i["@list"];for(const r of l)graphTypes.isSubjectReference(r)?api.frame({...e,embedded:!0},[r["@id"]],s,n,"@list"):_addFrameOutput(n,"@list",util.clone(r))}else graphTypes.isSubjectReference(i)?api.frame({...e,embedded:!0},[i["@id"]],s,d,r):_valueMatch(s[0],i)&&_addFrameOutput(d,r,util.clone(i))}for(const e of Object.keys(t).sort()){if("@type"===e){if(!(types.isObject(t[e][0])&&"@default"in t[e][0]))continue}else if(isKeyword(e))continue;const r=t[e][0]||{};if(!(_getFrameFlag(r,n,"omitDefault")||e in d)){let t="@null";"@default"in r&&(t=util.clone(r["@default"])),types.isArray(t)||(t=[t]),d[e]=[{"@preserve":t}]}}for(const r of Object.keys(t["@reverse"]||{}).sort()){const i=t["@reverse"][r];for(const t of Object.keys(e.subjects)){util.getValues(e.subjects[t],r).some(e=>e["@id"]===o)&&(d["@reverse"]=d["@reverse"]||{},util.addValue(d["@reverse"],r,[],{propertyIsArray:!0}),api.frame({...e,embedded:!0},[t],i,d["@reverse"][r],s))}}_addFrameOutput(i,s,d),e.subjectStack.pop()}else _addFrameOutput(i,s,d);else _addFrameOutput(i,s,d)}}),api.cleanupNull=((e,r)=>{if(types.isArray(e)){return e.map(e=>api.cleanupNull(e,r)).filter(e=>e)}if("@null"===e)return null;if(types.isObject(e)){if("@id"in e){const t=e["@id"];if(r.link.hasOwnProperty(t)){const i=r.link[t].indexOf(e);if(-1!==i)return r.link[t][i];r.link[t].push(e)}else r.link[t]=[e]}for(const t in e)e[t]=api.cleanupNull(e[t],r)}return e});

},{"./JsonLdError":33,"./context":40,"./graphTypes":46,"./nodeMap":48,"./types":51,"./url":52,"./util":53}],45:[function(_dereq_,module,exports){
"use strict";const JsonLdError=_dereq_("./JsonLdError"),graphTypes=_dereq_("./graphTypes"),types=_dereq_("./types"),util=_dereq_("./util"),{RDF_LIST:RDF_LIST,RDF_FIRST:RDF_FIRST,RDF_REST:RDF_REST,RDF_NIL:RDF_NIL,RDF_TYPE:RDF_TYPE,RDF_JSON_LITERAL:RDF_JSON_LITERAL,XSD_BOOLEAN:XSD_BOOLEAN,XSD_DOUBLE:XSD_DOUBLE,XSD_INTEGER:XSD_INTEGER,XSD_STRING:XSD_STRING}=_dereq_("./constants"),REGEX_BCP47=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/,api={};function _RDFToObject(e,t,s){if(e.termType.endsWith("Node"))return{"@id":e.value};const a={"@value":e.value};if(e.language)a["@language"]=e.language;else{let r=e.datatype.value;if(r||(r=XSD_STRING),r===RDF_JSON_LITERAL){r="@json";try{a["@value"]=JSON.parse(a["@value"])}catch(e){throw new JsonLdError("JSON literal could not be parsed.","jsonld.InvalidJsonLiteral",{code:"invalid JSON literal",value:a["@value"],cause:e})}}if(t){if(r===XSD_BOOLEAN)"true"===a["@value"]?a["@value"]=!0:"false"===a["@value"]&&(a["@value"]=!1);else if(types.isNumeric(a["@value"]))if(r===XSD_INTEGER){const e=parseInt(a["@value"],10);e.toFixed(0)===a["@value"]&&(a["@value"]=e)}else r===XSD_DOUBLE&&(a["@value"]=parseFloat(a["@value"]));[XSD_BOOLEAN,XSD_INTEGER,XSD_DOUBLE,XSD_STRING].includes(r)||(a["@type"]=r)}else if("i18n-datatype"===s&&r.startsWith("https://www.w3.org/ns/i18n#")){const[,e,t]=r.split(/[#_]/);e.length>0&&(a["@language"]=e,e.match(REGEX_BCP47)||console.warn(`@language must be valid BCP47: ${e}`)),a["@direction"]=t}else r!==XSD_STRING&&(a["@type"]=r)}return a}module.exports=api,api.fromRDF=(async(e,{useRdfType:t=!1,useNativeTypes:s=!1,rdfDirection:a=null})=>{const r={},l={"@default":r},u={};for(const n of e){const e="DefaultGraph"===n.graph.termType?"@default":n.graph.value;e in l||(l[e]={}),"@default"===e||e in r||(r[e]={"@id":e});const o=l[e],i=n.subject.value,p=n.predicate.value,R=n.object;i in o||(o[i]={"@id":i});const c=o[i],D=R.termType.endsWith("Node");if(!D||R.value in o||(o[R.value]={"@id":R.value}),p===RDF_TYPE&&!t&&D){util.addValue(c,"@type",R.value,{propertyIsArray:!0});continue}const _=_RDFToObject(R,s,a);if(util.addValue(c,p,_,{propertyIsArray:!0}),D)if(R.value===RDF_NIL){const e=o[R.value];"usages"in e||(e.usages=[]),e.usages.push({node:c,property:p,value:_})}else R.value in u?u[R.value]=!1:u[R.value]={node:c,property:p,value:_}}for(const e in l){const t=l[e];if(!(RDF_NIL in t))continue;const s=t[RDF_NIL];if(s.usages){for(let e of s.usages){let s=e.node,a=e.property,r=e.value;const l=[],n=[];let o=Object.keys(s).length;for(;a===RDF_REST&&types.isObject(u[s["@id"]])&&types.isArray(s[RDF_FIRST])&&1===s[RDF_FIRST].length&&types.isArray(s[RDF_REST])&&1===s[RDF_REST].length&&(3===o||4===o&&types.isArray(s["@type"])&&1===s["@type"].length&&s["@type"][0]===RDF_LIST)&&(l.push(s[RDF_FIRST][0]),n.push(s["@id"]),s=(e=u[s["@id"]]).node,a=e.property,r=e.value,o=Object.keys(s).length,graphTypes.isBlankNode(s)););delete r["@id"],r["@list"]=l.reverse();for(const e of n)delete t[e]}delete s.usages}}const n=[],o=Object.keys(r).sort();for(const e of o){const t=r[e];if(e in l){const s=t["@graph"]=[],a=l[e],r=Object.keys(a).sort();for(const e of r){const t=a[e];graphTypes.isSubjectReference(t)||s.push(t)}}graphTypes.isSubjectReference(t)||n.push(t)}return n});

},{"./JsonLdError":33,"./constants":39,"./graphTypes":46,"./types":51,"./util":53}],46:[function(_dereq_,module,exports){
"use strict";const types=_dereq_("./types"),api={};module.exports=api,api.isSubject=(i=>{if(types.isObject(i)&&!("@value"in i||"@set"in i||"@list"in i)){return Object.keys(i).length>1||!("@id"in i)}return!1}),api.isSubjectReference=(i=>types.isObject(i)&&1===Object.keys(i).length&&"@id"in i),api.isValue=(i=>types.isObject(i)&&"@value"in i),api.isList=(i=>types.isObject(i)&&"@list"in i),api.isGraph=(i=>types.isObject(i)&&"@graph"in i&&1===Object.keys(i).filter(i=>"@id"!==i&&"@index"!==i).length),api.isSimpleGraph=(i=>api.isGraph(i)&&!("@id"in i)),api.isBlankNode=(i=>!!types.isObject(i)&&("@id"in i?0===i["@id"].indexOf("_:"):0===Object.keys(i).length||!("@value"in i||"@set"in i||"@list"in i)));

},{"./types":51}],47:[function(_dereq_,module,exports){
const canonize=_dereq_("rdf-canonize"),platform=_dereq_("./platform"),util=_dereq_("./util"),ContextResolver=_dereq_("./ContextResolver"),IdentifierIssuer=util.IdentifierIssuer,JsonLdError=_dereq_("./JsonLdError"),LRU=_dereq_("lru-cache"),NQuads=_dereq_("./NQuads"),{expand:_expand}=_dereq_("./expand"),{flatten:_flatten}=_dereq_("./flatten"),{fromRDF:_fromRDF}=_dereq_("./fromRdf"),{toRDF:_toRDF}=_dereq_("./toRdf"),{frameMergedOrDefault:_frameMergedOrDefault,cleanupNull:_cleanupNull}=_dereq_("./frame"),{isArray:_isArray,isObject:_isObject,isString:_isString}=_dereq_("./types"),{isSubjectReference:_isSubjectReference}=_dereq_("./graphTypes"),{expandIri:_expandIri,getInitialContext:_getInitialContext,process:_processContext,processingMode:_processingMode}=_dereq_("./context"),{compact:_compact,compactIri:_compactIri}=_dereq_("./compact"),{createNodeMap:_createNodeMap,createMergedNodeMap:_createMergedNodeMap,mergeNodeMaps:_mergeNodeMaps}=_dereq_("./nodeMap"),wrapper=function(e){const t={},n=new LRU({max:100});function o(t,{documentLoader:n=e.documentLoader,...o}){return Object.assign({},{documentLoader:n},o,t)}return e.compact=async function(t,r,a){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");if(null===r)throw new JsonLdError("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});if(null===t)return null;let i;(a=o(a,{base:_isString(t)?t:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new IdentifierIssuer("_:b"),contextResolver:new ContextResolver({sharedCache:n})})).link&&(a.skipExpansion=!0),a.compactToRelative||delete a.base,i=a.skipExpansion?t:await e.expand(t,a);const s=await e.processContext(_getInitialContext(a),r,a);let c=await _compact({activeCtx:s,element:i,options:a,compactionMap:a.compactionMap});a.compactArrays&&!a.graph&&_isArray(c)?1===c.length?c=c[0]:0===c.length&&(c={}):a.graph&&_isObject(c)&&(c=[c]),_isObject(r)&&"@context"in r&&(r=r["@context"]),r=util.clone(r),_isArray(r)||(r=[r]);const l=r;r=[];for(let e=0;e<l.length;++e)(!_isObject(l[e])||Object.keys(l[e]).length>0)&&r.push(l[e]);const u=r.length>0;if(1===r.length&&(r=r[0]),_isArray(c)){const e=_compactIri({activeCtx:s,iri:"@graph",relativeTo:{vocab:!0}}),t=c;c={},u&&(c["@context"]=r),c[e]=t}else if(_isObject(c)&&u){const e=c;c={"@context":r};for(const t in e)c[t]=e[t]}return c},e.expand=async function(t,r){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");!1===(r=o(r,{keepFreeFloatingNodes:!1,contextResolver:new ContextResolver({sharedCache:n})})).expansionMap&&(r.expansionMap=void 0);const a={},i=[];if("expandContext"in r){const e=util.clone(r.expandContext);_isObject(e)&&"@context"in e?a.expandContext=e:a.expandContext={"@context":e},i.push(a.expandContext)}let s;if(_isString(t)){const n=await e.get(t,r);s=n.documentUrl,a.input=n.document,n.contextUrl&&(a.remoteContext={"@context":n.contextUrl},i.push(a.remoteContext))}else a.input=util.clone(t);"base"in r||(r.base=s||"");let c=_getInitialContext(r);for(const e of i)c=await _processContext({activeCtx:c,localCtx:e,options:r});let l=await _expand({activeCtx:c,element:a.input,options:r,expansionMap:r.expansionMap});return _isObject(l)&&"@graph"in l&&1===Object.keys(l).length?l=l["@graph"]:null===l&&(l=[]),_isArray(l)||(l=[l]),l},e.flatten=async function(t,r,a){if(arguments.length<1)return new TypeError("Could not flatten, too few arguments.");r="function"==typeof r?null:r||null,a=o(a,{base:_isString(t)?t:"",contextResolver:new ContextResolver({sharedCache:n})});const i=await e.expand(t,a),s=_flatten(i);return null===r?s:(a.graph=!0,a.skipExpansion=!0,await e.compact(s,r,a))},e.frame=async function(t,r,a){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");if(a=o(a,{base:_isString(t)?t:"",embed:"@once",explicit:!1,requireAll:!1,omitDefault:!1,bnodesToClear:[],contextResolver:new ContextResolver({sharedCache:n})}),_isString(r)){const t=await e.get(r,a);if(r=t.document,t.contextUrl){let e=r["@context"];e?_isArray(e)?e.push(t.contextUrl):e=[e,t.contextUrl]:e=t.contextUrl,r["@context"]=e}}const i=r&&r["@context"]||{},s=await e.processContext(_getInitialContext(a),i,a);a.hasOwnProperty("omitGraph")||(a.omitGraph=_processingMode(s,1.1)),a.hasOwnProperty("pruneBlankNodeIdentifiers")||(a.pruneBlankNodeIdentifiers=_processingMode(s,1.1));const c=await e.expand(t,a),l={...a};l.isFrame=!0,l.keepFreeFloatingNodes=!0;const u=await e.expand(r,l),d=Object.keys(r).map(e=>_expandIri(s,e,{vocab:!0}));l.merged=!d.includes("@graph"),l.is11=_processingMode(s,1.1);const p=_frameMergedOrDefault(c,u,l);l.graph=!a.omitGraph,l.skipExpansion=!0,l.link={},l.framing=!0;let f=await e.compact(p,i,l);return l.link={},f=_cleanupNull(f,l)},e.link=async function(t,n,o){const r={};return n&&(r["@context"]=n),r["@embed"]="@link",e.frame(t,r,o)},e.normalize=e.canonize=async function(t,r){if(arguments.length<1)throw new TypeError("Could not canonize, too few arguments.");if("inputFormat"in(r=o(r,{base:_isString(t)?t:"",algorithm:"URDNA2015",skipExpansion:!1,contextResolver:new ContextResolver({sharedCache:n})}))){if("application/n-quads"!==r.inputFormat&&"application/nquads"!==r.inputFormat)throw new JsonLdError("Unknown canonicalization input format.","jsonld.CanonizeError");const e=NQuads.parse(t);return canonize.canonize(e,r)}const a={...r};delete a.format,a.produceGeneralizedRdf=!1;const i=await e.toRDF(t,a);return canonize.canonize(i,r)},e.fromRDF=async function(e,n){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");n=o(n,{format:_isString(e)?"application/n-quads":void 0});const{format:r}=n;let{rdfParser:a}=n;if(r){if(!(a=a||t[r]))throw new JsonLdError("Unknown input format.","jsonld.UnknownFormat",{format:r})}else a=(()=>e);const i=await a(e);return _fromRDF(i,n)},e.toRDF=async function(t,r){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");let a;a=(r=o(r,{base:_isString(t)?t:"",skipExpansion:!1,contextResolver:new ContextResolver({sharedCache:n})})).skipExpansion?t:await e.expand(t,r);const i=_toRDF(a,r);if(r.format){if("application/n-quads"===r.format||"application/nquads"===r.format)return NQuads.serialize(i);throw new JsonLdError("Unknown output format.","jsonld.UnknownFormat",{format:r.format})}return i},e.createNodeMap=async function(t,r){if(arguments.length<1)throw new TypeError("Could not create node map, too few arguments.");r=o(r,{base:_isString(t)?t:"",contextResolver:new ContextResolver({sharedCache:n})});const a=await e.expand(t,r);return _createMergedNodeMap(a,r)},e.merge=async function(t,r,a){if(arguments.length<1)throw new TypeError("Could not merge, too few arguments.");if(!_isArray(t))throw new TypeError('Could not merge, "docs" must be an array.');r="function"==typeof r?null:r||null,a=o(a,{contextResolver:new ContextResolver({sharedCache:n})});const i=await Promise.all(t.map(t=>{const n={...a};return e.expand(t,n)}));let s=!0;"mergeNodes"in a&&(s=a.mergeNodes);const c=a.issuer||new IdentifierIssuer("_:b"),l={"@default":{}};for(let e=0;e<i.length;++e){const t=util.relabelBlankNodes(i[e],{issuer:new IdentifierIssuer("_:b"+e+"-")}),n=s||0===e?l:{"@default":{}};if(_createNodeMap(t,n,"@default",c),n!==l)for(const e in n){const t=n[e];if(!(e in l)){l[e]=t;continue}const o=l[e];for(const e in t)e in o||(o[e]=t[e])}}const u=_mergeNodeMaps(l),d=[],p=Object.keys(u).sort();for(let e=0;e<p.length;++e){const t=u[p[e]];_isSubjectReference(t)||d.push(t)}return null===r?d:(a.graph=!0,a.skipExpansion=!0,await e.compact(d,r,a))},Object.defineProperty(e,"documentLoader",{get:()=>e._documentLoader,set:t=>e._documentLoader=t}),e.documentLoader=(async e=>{throw new JsonLdError("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:e})}),e.get=async function(t,n){let o;o="function"==typeof n.documentLoader?n.documentLoader:e.documentLoader;const r=await o(t);try{if(!r.document)throw new JsonLdError("No remote document found at the given URL.","jsonld.NullRemoteDocument");_isString(r.document)&&(r.document=JSON.parse(r.document))}catch(e){throw new JsonLdError("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:e,remoteDoc:r})}return r},e.processContext=async function(e,t,r){return r=o(r,{base:"",contextResolver:new ContextResolver({sharedCache:n})}),null===t?_getInitialContext(r):(t=util.clone(t),_isObject(t)&&"@context"in t||(t={"@context":t}),_processContext({activeCtx:e,localCtx:t,options:r}))},e.getContextValue=_dereq_("./context").getContextValue,e.documentLoaders={},e.useDocumentLoader=function(t){if(!(t in e.documentLoaders))throw new JsonLdError('Unknown document loader type: "'+t+'"',"jsonld.UnknownDocumentLoader",{type:t});e.documentLoader=e.documentLoaders[t].apply(e,Array.prototype.slice.call(arguments,1))},e.registerRDFParser=function(e,n){t[e]=n},e.unregisterRDFParser=function(e){delete t[e]},e.registerRDFParser("application/n-quads",NQuads.parse),e.registerRDFParser("application/nquads",NQuads.parse),e.url=_dereq_("./url"),e.util=util,Object.assign(e,util),e.promises=e,e.RequestQueue=_dereq_("./RequestQueue"),e.JsonLdProcessor=_dereq_("./JsonLdProcessor")(e),platform.setupGlobals(e),platform.setupDocumentLoaders(e),e},factory=function(){return wrapper(function(){return factory()})};wrapper(factory),module.exports=factory;

},{"./ContextResolver":32,"./JsonLdError":33,"./JsonLdProcessor":34,"./NQuads":35,"./RequestQueue":36,"./compact":38,"./context":40,"./expand":42,"./flatten":43,"./frame":44,"./fromRdf":45,"./graphTypes":46,"./nodeMap":48,"./platform":49,"./toRdf":50,"./types":51,"./url":52,"./util":53,"lru-cache":54,"rdf-canonize":56}],48:[function(_dereq_,module,exports){
"use strict";const{isKeyword:isKeyword}=_dereq_("./context"),graphTypes=_dereq_("./graphTypes"),types=_dereq_("./types"),util=_dereq_("./util"),JsonLdError=_dereq_("./JsonLdError"),api={};module.exports=api,api.createMergedNodeMap=((e,t)=>{const r=(t=t||{}).issuer||new util.IdentifierIssuer("_:b"),i={"@default":{}};return api.createNodeMap(e,i,"@default",r),api.mergeNodeMaps(i)}),api.createNodeMap=((e,t,r,i,o,s)=>{if(types.isArray(e)){for(const o of e)api.createNodeMap(o,t,r,i,void 0,s);return}if(!types.isObject(e))return void(s&&s.push(e));if(graphTypes.isValue(e)){if("@type"in e){let t=e["@type"];0===t.indexOf("_:")&&(e["@type"]=t=i.getId(t))}return void(s&&s.push(e))}if(s&&graphTypes.isList(e)){const a=[];return api.createNodeMap(e["@list"],t,r,i,o,a),void s.push({"@list":a})}if("@type"in e){const t=e["@type"];for(const e of t)0===e.indexOf("_:")&&i.getId(e)}types.isUndefined(o)&&(o=graphTypes.isBlankNode(e)?i.getId(e["@id"]):e["@id"]),s&&s.push({"@id":o});const a=t[r],p=a[o]=a[o]||{};p["@id"]=o;const n=Object.keys(e).sort();for(let s of n){if("@id"===s)continue;if("@reverse"===s){const s={"@id":o},p=e["@reverse"];for(const e in p){const o=p[e];for(const p of o){let o=p["@id"];graphTypes.isBlankNode(p)&&(o=i.getId(o)),api.createNodeMap(p,t,r,i,o),util.addValue(a[o],e,s,{propertyIsArray:!0,allowDuplicate:!1})}}continue}if("@graph"===s){o in t||(t[o]={}),api.createNodeMap(e[s],t,o,i);continue}if("@included"===s){api.createNodeMap(e[s],t,r,i);continue}if("@type"!==s&&isKeyword(s)){if("@index"===s&&s in p&&(e[s]!==p[s]||e[s]["@id"]!==p[s]["@id"]))throw new JsonLdError("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:p});p[s]=e[s];continue}const n=e[s];if(0===s.indexOf("_:")&&(s=i.getId(s)),0!==n.length)for(let e of n)if("@type"===s&&(e=0===e.indexOf("_:")?i.getId(e):e),graphTypes.isSubject(e)||graphTypes.isSubjectReference(e)){if("@id"in e&&!e["@id"])continue;const o=graphTypes.isBlankNode(e)?i.getId(e["@id"]):e["@id"];util.addValue(p,s,{"@id":o},{propertyIsArray:!0,allowDuplicate:!1}),api.createNodeMap(e,t,r,i,o)}else if(graphTypes.isValue(e))util.addValue(p,s,e,{propertyIsArray:!0,allowDuplicate:!1});else if(graphTypes.isList(e)){const a=[];api.createNodeMap(e["@list"],t,r,i,o,a),e={"@list":a},util.addValue(p,s,e,{propertyIsArray:!0,allowDuplicate:!1})}else api.createNodeMap(e,t,r,i,o),util.addValue(p,s,e,{propertyIsArray:!0,allowDuplicate:!1});else util.addValue(p,s,[],{propertyIsArray:!0})}}),api.mergeNodeMapGraphs=(e=>{const t={};for(const r of Object.keys(e).sort())for(const i of Object.keys(e[r]).sort()){const o=e[r][i];i in t||(t[i]={"@id":i});const s=t[i];for(const e of Object.keys(o).sort())if(isKeyword(e)&&"@type"!==e)s[e]=util.clone(o[e]);else for(const t of o[e])util.addValue(s,e,util.clone(t),{propertyIsArray:!0,allowDuplicate:!1})}return t}),api.mergeNodeMaps=(e=>{const t=e["@default"],r=Object.keys(e).sort();for(const i of r){if("@default"===i)continue;const r=e[i];let o=t[i];o?"@graph"in o||(o["@graph"]=[]):t[i]=o={"@id":i,"@graph":[]};const s=o["@graph"];for(const e of Object.keys(r).sort()){const t=r[e];graphTypes.isSubjectReference(t)||s.push(t)}}return t});

},{"./JsonLdError":33,"./context":40,"./graphTypes":46,"./types":51,"./util":53}],49:[function(_dereq_,module,exports){
"use strict";const xhrLoader=_dereq_("./documentLoaders/xhr"),api={};module.exports=api,api.setupDocumentLoaders=function(e){"undefined"!=typeof XMLHttpRequest&&(e.documentLoaders.xhr=xhrLoader,e.useDocumentLoader("xhr"))},api.setupGlobals=function(e){void 0===globalThis.JsonLdProcessor&&Object.defineProperty(globalThis,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:e.JsonLdProcessor})};

},{"./documentLoaders/xhr":41}],50:[function(_dereq_,module,exports){
"use strict";const{createNodeMap:createNodeMap}=_dereq_("./nodeMap"),{isKeyword:isKeyword}=_dereq_("./context"),graphTypes=_dereq_("./graphTypes"),jsonCanonicalize=_dereq_("canonicalize"),types=_dereq_("./types"),util=_dereq_("./util"),{RDF_FIRST:RDF_FIRST,RDF_REST:RDF_REST,RDF_NIL:RDF_NIL,RDF_TYPE:RDF_TYPE,RDF_JSON_LITERAL:RDF_JSON_LITERAL,RDF_LANGSTRING:RDF_LANGSTRING,XSD_BOOLEAN:XSD_BOOLEAN,XSD_DOUBLE:XSD_DOUBLE,XSD_INTEGER:XSD_INTEGER,XSD_STRING:XSD_STRING}=_dereq_("./constants"),{isAbsolute:_isAbsoluteIri}=_dereq_("./url"),api={};function _graphToRDF(e,t,a,o,s){const i=Object.keys(t).sort();for(const r of i){const i=t[r],l=Object.keys(i).sort();for(let t of l){const l=i[t];if("@type"===t)t=RDF_TYPE;else if(isKeyword(t))continue;for(const i of l){const l={termType:r.startsWith("_:")?"BlankNode":"NamedNode",value:r};if(!_isAbsoluteIri(r))continue;const u={termType:t.startsWith("_:")?"BlankNode":"NamedNode",value:t};if(!_isAbsoluteIri(t))continue;if("BlankNode"===u.termType&&!s.produceGeneralizedRdf)continue;const n=_objectToRDF(i,o,e,a,s.rdfDirection);n&&e.push({subject:l,predicate:u,object:n,graph:a})}}}}function _listToRDF(e,t,a,o,s){const i={termType:"NamedNode",value:RDF_FIRST},r={termType:"NamedNode",value:RDF_REST},l={termType:"NamedNode",value:RDF_NIL},u=e.pop(),n=u?{termType:"BlankNode",value:t.getId()}:l;let p=n;for(const l of e){const e=_objectToRDF(l,t,a,o,s),u={termType:"BlankNode",value:t.getId()};a.push({subject:p,predicate:i,object:e,graph:o}),a.push({subject:p,predicate:r,object:u,graph:o}),p=u}if(u){const e=_objectToRDF(u,t,a,o,s);a.push({subject:p,predicate:i,object:e,graph:o}),a.push({subject:p,predicate:r,object:l,graph:o})}return n}function _objectToRDF(e,t,a,o,s){const i={};if(graphTypes.isValue(e)){i.termType="Literal",i.value=void 0,i.datatype={termType:"NamedNode"};let t=e["@value"];const a=e["@type"]||null;if("@json"===a)i.value=jsonCanonicalize(t),i.datatype.value=RDF_JSON_LITERAL;else if(types.isBoolean(t))i.value=t.toString(),i.datatype.value=a||XSD_BOOLEAN;else if(types.isDouble(t)||a===XSD_DOUBLE)types.isDouble(t)||(t=parseFloat(t)),i.value=t.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),i.datatype.value=a||XSD_DOUBLE;else if(types.isNumber(t))i.value=t.toFixed(0),i.datatype.value=a||XSD_INTEGER;else if("i18n-datatype"===s&&"@direction"in e){const a="https://www.w3.org/ns/i18n#"+(e["@language"]||"")+`_${e["@direction"]}`;i.datatype.value=a,i.value=t}else"@language"in e?(i.value=t,i.datatype.value=a||RDF_LANGSTRING,i.language=e["@language"]):(i.value=t,i.datatype.value=a||XSD_STRING)}else if(graphTypes.isList(e)){const r=_listToRDF(e["@list"],t,a,o,s);i.termType=r.termType,i.value=r.value}else{const t=types.isObject(e)?e["@id"]:e;i.termType=t.startsWith("_:")?"BlankNode":"NamedNode",i.value=t}return"NamedNode"!==i.termType||_isAbsoluteIri(i.value)?i:null}module.exports=api,api.toRDF=((e,t)=>{const a=new util.IdentifierIssuer("_:b"),o={"@default":{}};createNodeMap(e,o,"@default",a);const s=[],i=Object.keys(o).sort();for(const e of i){let i;if("@default"===e)i={termType:"DefaultGraph",value:""};else{if(!_isAbsoluteIri(e))continue;(i=e.startsWith("_:")?{termType:"BlankNode"}:{termType:"NamedNode"}).value=e}_graphToRDF(s,o[e],i,a,t)}return s});

},{"./constants":39,"./context":40,"./graphTypes":46,"./nodeMap":48,"./types":51,"./url":52,"./util":53,"canonicalize":31}],51:[function(_dereq_,module,exports){
"use strict";const api={};module.exports=api,api.isArray=Array.isArray,api.isBoolean=(t=>"boolean"==typeof t||"[object Boolean]"===Object.prototype.toString.call(t)),api.isDouble=(t=>api.isNumber(t)&&(-1!==String(t).indexOf(".")||Math.abs(t)>=1e21)),api.isEmptyObject=(t=>api.isObject(t)&&0===Object.keys(t).length),api.isNumber=(t=>"number"==typeof t||"[object Number]"===Object.prototype.toString.call(t)),api.isNumeric=(t=>!isNaN(parseFloat(t))&&isFinite(t)),api.isObject=(t=>"[object Object]"===Object.prototype.toString.call(t)),api.isString=(t=>"string"==typeof t||"[object String]"===Object.prototype.toString.call(t)),api.isUndefined=(t=>void 0===t);

},{}],52:[function(_dereq_,module,exports){
"use strict";const types=_dereq_("./types"),api={};module.exports=api,api.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},api.parse=((e,t)=>{const r={},a=api.parsers[t||"full"],s=a.regex.exec(e);let p=a.keys.length;for(;p--;)r[a.keys[p]]=void 0===s[p]?null:s[p];return("https"===r.scheme&&"443"===r.port||"http"===r.scheme&&"80"===r.port)&&(r.href=r.href.replace(":"+r.port,""),r.authority=r.authority.replace(":"+r.port,""),r.port=null),r.normalizedPath=api.removeDotSegments(r.path),r}),api.prependBase=((e,t)=>{if(null===e)return t;if(api.isAbsolute(t))return t;e&&!types.isString(e)||(e=api.parse(e||""));const r=api.parse(t),a={protocol:e.protocol||""};if(null!==r.authority)a.authority=r.authority,a.path=r.path,a.query=r.query;else if(a.authority=e.authority,""===r.path)a.path=e.path,null!==r.query?a.query=r.query:a.query=e.query;else{if(0===r.path.indexOf("/"))a.path=r.path;else{let t=e.path;((t=t.substr(0,t.lastIndexOf("/")+1)).length>0||e.authority)&&"/"!==t.substr(-1)&&(t+="/"),t+=r.path,a.path=t}a.query=r.query}""!==r.path&&(a.path=api.removeDotSegments(a.path));let s=a.protocol;return null!==a.authority&&(s+="//"+a.authority),s+=a.path,null!==a.query&&(s+="?"+a.query),null!==r.fragment&&(s+="#"+r.fragment),""===s&&(s="./"),s}),api.removeBase=((e,t)=>{if(null===e)return t;e&&!types.isString(e)||(e=api.parse(e||""));let r="";if(""!==e.href?r+=(e.protocol||"")+"//"+(e.authority||""):t.indexOf("//")&&(r+="//"),0!==t.indexOf(r))return t;const a=api.parse(t.substr(r.length)),s=e.normalizedPath.split("/"),p=a.normalizedPath.split("/"),i=a.fragment||a.query?0:1;for(;s.length>0&&p.length>i&&s[0]===p[0];)s.shift(),p.shift();let l="";if(s.length>0){s.pop();for(let e=0;e<s.length;++e)l+="../"}return l+=p.join("/"),null!==a.query&&(l+="?"+a.query),null!==a.fragment&&(l+="#"+a.fragment),""===l&&(l="./"),l}),api.removeDotSegments=(e=>{if(0===e.length)return"";const t=e.split("/"),r=[];for(;t.length>0;){const e=t.shift(),a=0===t.length;"."!==e?".."!==e?r.push(e):(r.pop(),a&&r.push("")):a&&r.push("")}return"/"===e[0]&&r.length>0&&""!==r[0]&&r.unshift(""),1===r.length&&""===r[0]?"/":r.join("/")});const isAbsoluteRegex=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;api.isAbsolute=(e=>types.isString(e)&&isAbsoluteRegex.test(e)),api.isRelative=(e=>types.isString(e));

},{"./types":51}],53:[function(_dereq_,module,exports){
"use strict";const graphTypes=_dereq_("./graphTypes"),types=_dereq_("./types"),IdentifierIssuer=_dereq_("rdf-canonize").IdentifierIssuer,JsonLdError=_dereq_("./JsonLdError"),REGEX_LINK_HEADERS=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,REGEX_LINK_HEADER=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,REGEX_LINK_HEADER_PARAMS=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,DEFAULTS={headers:{accept:"application/ld+json, application/json"}},api={};function _labelBlankNodes(e,r){if(types.isArray(r))for(let a=0;a<r.length;++a)r[a]=_labelBlankNodes(e,r[a]);else if(graphTypes.isList(r))r["@list"]=_labelBlankNodes(e,r["@list"]);else if(types.isObject(r)){graphTypes.isBlankNode(r)&&(r["@id"]=e.getId(r["@id"]));const a=Object.keys(r).sort();for(let t=0;t<a.length;++t){const s=a[t];"@id"!==s&&(r[s]=_labelBlankNodes(e,r[s]))}}return r}module.exports=api,api.IdentifierIssuer=IdentifierIssuer,api.clone=function(e){if(e&&"object"==typeof e){let r;if(types.isArray(e)){r=[];for(let a=0;a<e.length;++a)r[a]=api.clone(e[a])}else if(e instanceof Map){r=new Map;for(const[a,t]of e)r.set(a,api.clone(t))}else if(e instanceof Set){r=new Set;for(const a of e)r.add(api.clone(a))}else if(types.isObject(e)){r={};for(const a in e)r[a]=api.clone(e[a])}else r=e.toString();return r}return e},api.asArray=function(e){return Array.isArray(e)?e:[e]},api.buildHeaders=((e={})=>{if(Object.keys(e).some(e=>"accept"===e.toLowerCase()))throw new RangeError('Accept header may not be specified; only "'+DEFAULTS.headers.accept+'" is supported.');return Object.assign({Accept:DEFAULTS.headers.accept},e)}),api.parseLinkHeader=(e=>{const r={},a=e.match(REGEX_LINK_HEADERS);for(let e=0;e<a.length;++e){let t=a[e].match(REGEX_LINK_HEADER);if(!t)continue;const s={target:t[1]},i=t[2];for(;t=REGEX_LINK_HEADER_PARAMS.exec(i);)s[t[1]]=void 0===t[2]?t[3]:t[2];const p=s.rel||"";Array.isArray(r[p])?r[p].push(s):r.hasOwnProperty(p)?r[p]=[r[p],s]:r[p]=s}return r}),api.validateTypeValue=((e,r)=>{if(!(types.isString(e)||types.isArray(e)&&e.every(e=>types.isString(e)))){if(r&&types.isObject(e))switch(Object.keys(e).length){case 0:return;case 1:if("@default"in e&&api.asArray(e["@default"]).every(e=>types.isString(e)))return}throw new JsonLdError('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, an empty object, or a default object.',"jsonld.SyntaxError",{code:"invalid type value",value:e})}}),api.hasProperty=((e,r)=>{if(e.hasOwnProperty(r)){const a=e[r];return!types.isArray(a)||a.length>0}return!1}),api.hasValue=((e,r,a)=>{if(api.hasProperty(e,r)){let t=e[r];const s=graphTypes.isList(t);if(types.isArray(t)||s){s&&(t=t["@list"]);for(let e=0;e<t.length;++e)if(api.compareValues(a,t[e]))return!0}else if(!types.isArray(a))return api.compareValues(a,t)}return!1}),api.addValue=((e,r,a,t)=>{if("propertyIsArray"in(t=t||{})||(t.propertyIsArray=!1),"valueIsArray"in t||(t.valueIsArray=!1),"allowDuplicate"in t||(t.allowDuplicate=!0),"prependValue"in t||(t.prependValue=!1),t.valueIsArray)e[r]=a;else if(types.isArray(a)){0===a.length&&t.propertyIsArray&&!e.hasOwnProperty(r)&&(e[r]=[]),t.prependValue&&(a=a.concat(e[r]),e[r]=[]);for(let s=0;s<a.length;++s)api.addValue(e,r,a[s],t)}else if(e.hasOwnProperty(r)){const s=!t.allowDuplicate&&api.hasValue(e,r,a);types.isArray(e[r])||s&&!t.propertyIsArray||(e[r]=[e[r]]),s||(t.prependValue?e[r].unshift(a):e[r].push(a))}else e[r]=t.propertyIsArray?[a]:a}),api.getValues=((e,r)=>[].concat(e[r]||[])),api.removeProperty=((e,r)=>{delete e[r]}),api.removeValue=((e,r,a,t)=>{"propertyIsArray"in(t=t||{})||(t.propertyIsArray=!1);const s=api.getValues(e,r).filter(e=>!api.compareValues(e,a));0===s.length?api.removeProperty(e,r):1!==s.length||t.propertyIsArray?e[r]=s:e[r]=s[0]}),api.relabelBlankNodes=((e,r)=>{return _labelBlankNodes((r=r||{}).issuer||new IdentifierIssuer("_:b"),e)}),api.compareValues=((e,r)=>e===r||(!(!graphTypes.isValue(e)||!graphTypes.isValue(r)||e["@value"]!==r["@value"]||e["@type"]!==r["@type"]||e["@language"]!==r["@language"]||e["@index"]!==r["@index"])||!!(types.isObject(e)&&"@id"in e&&types.isObject(r)&&"@id"in r)&&e["@id"]===r["@id"])),api.compareShortestLeast=((e,r)=>e.length<r.length?-1:r.length<e.length?1:e===r?0:e<r?-1:1);

},{"./JsonLdError":33,"./graphTypes":46,"./types":51,"rdf-canonize":56}],54:[function(_dereq_,module,exports){
"use strict";const Yallist=_dereq_("yallist"),MAX=Symbol("max"),LENGTH=Symbol("length"),LENGTH_CALCULATOR=Symbol("lengthCalculator"),ALLOW_STALE=Symbol("allowStale"),MAX_AGE=Symbol("maxAge"),DISPOSE=Symbol("dispose"),NO_DISPOSE_ON_SET=Symbol("noDisposeOnSet"),LRU_LIST=Symbol("lruList"),CACHE=Symbol("cache"),UPDATE_AGE_ON_GET=Symbol("updateAgeOnGet"),naiveLength=()=>1;class LRUCache{constructor(t){if("number"==typeof t&&(t={max:t}),t||(t={}),t.max&&("number"!=typeof t.max||t.max<0))throw new TypeError("max must be a non-negative number");this[MAX]=t.max||1/0;const e=t.length||naiveLength;if(this[LENGTH_CALCULATOR]="function"!=typeof e?naiveLength:e,this[ALLOW_STALE]=t.stale||!1,t.maxAge&&"number"!=typeof t.maxAge)throw new TypeError("maxAge must be a number");this[MAX_AGE]=t.maxAge||0,this[DISPOSE]=t.dispose,this[NO_DISPOSE_ON_SET]=t.noDisposeOnSet||!1,this[UPDATE_AGE_ON_GET]=t.updateAgeOnGet||!1,this.reset()}set max(t){if("number"!=typeof t||t<0)throw new TypeError("max must be a non-negative number");this[MAX]=t||1/0,trim(this)}get max(){return this[MAX]}set allowStale(t){this[ALLOW_STALE]=!!t}get allowStale(){return this[ALLOW_STALE]}set maxAge(t){if("number"!=typeof t)throw new TypeError("maxAge must be a non-negative number");this[MAX_AGE]=t,trim(this)}get maxAge(){return this[MAX_AGE]}set lengthCalculator(t){"function"!=typeof t&&(t=naiveLength),t!==this[LENGTH_CALCULATOR]&&(this[LENGTH_CALCULATOR]=t,this[LENGTH]=0,this[LRU_LIST].forEach(t=>{t.length=this[LENGTH_CALCULATOR](t.value,t.key),this[LENGTH]+=t.length})),trim(this)}get lengthCalculator(){return this[LENGTH_CALCULATOR]}get length(){return this[LENGTH]}get itemCount(){return this[LRU_LIST].length}rforEach(t,e){e=e||this;for(let s=this[LRU_LIST].tail;null!==s;){const i=s.prev;forEachStep(this,t,s,e),s=i}}forEach(t,e){e=e||this;for(let s=this[LRU_LIST].head;null!==s;){const i=s.next;forEachStep(this,t,s,e),s=i}}keys(){return this[LRU_LIST].toArray().map(t=>t.key)}values(){return this[LRU_LIST].toArray().map(t=>t.value)}reset(){this[DISPOSE]&&this[LRU_LIST]&&this[LRU_LIST].length&&this[LRU_LIST].forEach(t=>this[DISPOSE](t.key,t.value)),this[CACHE]=new Map,this[LRU_LIST]=new Yallist,this[LENGTH]=0}dump(){return this[LRU_LIST].map(t=>!isStale(this,t)&&{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[LRU_LIST]}set(t,e,s){if((s=s||this[MAX_AGE])&&"number"!=typeof s)throw new TypeError("maxAge must be a number");const i=s?Date.now():0,h=this[LENGTH_CALCULATOR](e,t);if(this[CACHE].has(t)){if(h>this[MAX])return del(this,this[CACHE].get(t)),!1;const n=this[CACHE].get(t).value;return this[DISPOSE]&&(this[NO_DISPOSE_ON_SET]||this[DISPOSE](t,n.value)),n.now=i,n.maxAge=s,n.value=e,this[LENGTH]+=h-n.length,n.length=h,this.get(t),trim(this),!0}const n=new Entry(t,e,h,i,s);return n.length>this[MAX]?(this[DISPOSE]&&this[DISPOSE](t,e),!1):(this[LENGTH]+=n.length,this[LRU_LIST].unshift(n),this[CACHE].set(t,this[LRU_LIST].head),trim(this),!0)}has(t){if(!this[CACHE].has(t))return!1;const e=this[CACHE].get(t).value;return!isStale(this,e)}get(t){return get(this,t,!0)}peek(t){return get(this,t,!1)}pop(){const t=this[LRU_LIST].tail;return t?(del(this,t),t.value):null}del(t){del(this,this[CACHE].get(t))}load(t){this.reset();const e=Date.now();for(let s=t.length-1;s>=0;s--){const i=t[s],h=i.e||0;if(0===h)this.set(i.k,i.v);else{const t=h-e;t>0&&this.set(i.k,i.v,t)}}}prune(){this[CACHE].forEach((t,e)=>get(this,e,!1))}}const get=(t,e,s)=>{const i=t[CACHE].get(e);if(i){const e=i.value;if(isStale(t,e)){if(del(t,i),!t[ALLOW_STALE])return}else s&&(t[UPDATE_AGE_ON_GET]&&(i.value.now=Date.now()),t[LRU_LIST].unshiftNode(i));return e.value}},isStale=(t,e)=>{if(!e||!e.maxAge&&!t[MAX_AGE])return!1;const s=Date.now()-e.now;return e.maxAge?s>e.maxAge:t[MAX_AGE]&&s>t[MAX_AGE]},trim=t=>{if(t[LENGTH]>t[MAX])for(let e=t[LRU_LIST].tail;t[LENGTH]>t[MAX]&&null!==e;){const s=e.prev;del(t,e),e=s}},del=(t,e)=>{if(e){const s=e.value;t[DISPOSE]&&t[DISPOSE](s.key,s.value),t[LENGTH]-=s.length,t[CACHE].delete(s.key),t[LRU_LIST].removeNode(e)}};class Entry{constructor(t,e,s,i,h){this.key=t,this.value=e,this.length=s,this.now=i,this.maxAge=h||0}}const forEachStep=(t,e,s,i)=>{let h=s.value;isStale(t,h)&&(del(t,s),t[ALLOW_STALE]||(h=void 0)),h&&e.call(i,h.value,h.key,t)};module.exports=LRUCache;

},{"yallist":69}],55:[function(_dereq_,module,exports){
var cachedSetTimeout,cachedClearTimeout,process=module.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(e){if(cachedSetTimeout===setTimeout)return setTimeout(e,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(e,0);try{return cachedSetTimeout(e,0)}catch(t){try{return cachedSetTimeout.call(null,e,0)}catch(t){return cachedSetTimeout.call(this,e,0)}}}function runClearTimeout(e){if(cachedClearTimeout===clearTimeout)return clearTimeout(e);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(e);try{return cachedClearTimeout(e)}catch(t){try{return cachedClearTimeout.call(null,e)}catch(t){return cachedClearTimeout.call(this,e)}}}!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var currentQueue,queue=[],draining=!1,queueIndex=-1;function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var e=runTimeout(cleanUpNextTick);draining=!0;for(var t=queue.length;t;){for(currentQueue=queue,queue=[];++queueIndex<t;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,t=queue.length}currentQueue=null,draining=!1,runClearTimeout(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}process.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];queue.push(new Item(e,t)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.prependListener=noop,process.prependOnceListener=noop,process.listeners=function(e){return[]},process.binding=function(e){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(e){throw new Error("process.chdir is not supported")},process.umask=function(){return 0};

},{}],56:[function(_dereq_,module,exports){
module.exports=_dereq_("./lib");

},{"./lib":65}],57:[function(_dereq_,module,exports){
"use strict";module.exports=class t{constructor(t,s=new Map,e=0){this.prefix=t,this._existing=s,this.counter=e}clone(){const{prefix:s,_existing:e,counter:i}=this;return new t(s,new Map(e),i)}getId(t){const s=t&&this._existing.get(t);if(s)return s;const e=this.prefix+this.counter;return this.counter++,t&&this._existing.set(t,e),e}hasId(t){return this._existing.has(t)}getOldIds(){return[...this._existing.keys()]}};

},{}],58:[function(_dereq_,module,exports){
"use strict";_dereq_("setimmediate");const crypto=self.crypto||self.msCrypto;module.exports=class{constructor(t){if(!crypto||!crypto.subtle)throw new Error("crypto.subtle not found.");if("sha256"===t)this.algorithm={name:"SHA-256"};else{if("sha1"!==t)throw new Error(`Unsupport algorithm "${t}".`);this.algorithm={name:"SHA-1"}}this._content=""}update(t){this._content+=t}async digest(){const t=(new TextEncoder).encode(this._content),e=new Uint8Array(await crypto.subtle.digest(this.algorithm,t));let r="";for(let t=0;t<e.length;++t)r+=e[t].toString(16).padStart(2,"0");return r}};

},{"setimmediate":66}],59:[function(_dereq_,module,exports){
"use strict";const TERMS=["subject","predicate","object","graph"],RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",RDF_LANGSTRING=RDF+"langString",XSD_STRING="http://www.w3.org/2001/XMLSchema#string",TYPE_NAMED_NODE="NamedNode",TYPE_BLANK_NODE="BlankNode",TYPE_LITERAL="Literal",TYPE_DEFAULT_GRAPH="DefaultGraph",REGEX={};function _compareTriples(e,a){return e.subject.termType===a.subject.termType&&e.object.termType===a.object.termType&&(e.subject.value===a.subject.value&&e.predicate.value===a.predicate.value&&e.object.value===a.object.value&&(e.object.termType!==TYPE_LITERAL||e.object.datatype.termType===a.object.datatype.termType&&e.object.language===a.object.language&&e.object.datatype.value===a.object.datatype.value))}REGEX.eoln=/(?:\r\n)|(?:\n)|(?:\r)/g,REGEX.empty=new RegExp("^[ \\t]*$"),REGEX.quad=new RegExp('^[ \\t]*(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�_0-9])(?:(?:[A-Za-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�_0-9-·̀-ͯ‿-⁀.])*(?:[A-Za-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�_0-9-·̀-ͯ‿-⁀]))?))[ \\t]+(?:<([^:]+:[^>]*)>)[ \\t]+(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�_0-9])(?:(?:[A-Za-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�_0-9-·̀-ͯ‿-⁀.])*(?:[A-Za-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�_0-9-·̀-ͯ‿-⁀]))?)|(?:"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"(?:(?:\\^\\^(?:<([^:]+:[^>]*)>))|(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*)))?))[ \\t]*(?:\\.|(?:(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�_0-9])(?:(?:[A-Za-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�_0-9-·̀-ͯ‿-⁀.])*(?:[A-Za-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�_0-9-·̀-ͯ‿-⁀]))?))[ \\t]*\\.))[ \\t]*$'),module.exports=class e{static parse(e){const a=[],t={},r=e.split(REGEX.eoln);let u=0;for(const e of r){if(u++,REGEX.empty.test(e))continue;const r=e.match(REGEX.quad);if(null===r)throw new Error("N-Quads parse error on line "+u+".");const n={subject:null,predicate:null,object:null,graph:null};if(void 0!==r[1]?n.subject={termType:"NamedNode",value:r[1]}:n.subject={termType:"BlankNode",value:r[2]},n.predicate={termType:"NamedNode",value:r[3]},void 0!==r[4]?n.object={termType:"NamedNode",value:r[4]}:void 0!==r[5]?n.object={termType:"BlankNode",value:r[5]}:(n.object={termType:TYPE_LITERAL,value:void 0,datatype:{termType:"NamedNode"}},void 0!==r[7]?n.object.datatype.value=r[7]:void 0!==r[8]?(n.object.datatype.value=RDF_LANGSTRING,n.object.language=r[8]):n.object.datatype.value=XSD_STRING,n.object.value=_unescape(r[6])),void 0!==r[9]?n.graph={termType:"NamedNode",value:r[9]}:void 0!==r[10]?n.graph={termType:"BlankNode",value:r[10]}:n.graph={termType:"DefaultGraph",value:""},n.graph.value in t){let e=!0;const r=t[n.graph.value];for(const a of r)if(_compareTriples(a,n)){e=!1;break}e&&(r.push(n),a.push(n))}else t[n.graph.value]=[n],a.push(n)}return a}static serialize(a){Array.isArray(a)||(a=e.legacyDatasetToQuads(a));const t=[];for(const r of a)t.push(e.serializeQuad(r));return t.sort().join("")}static serializeQuad(e){const a=e.subject,t=e.predicate,r=e.object,u=e.graph;let n="";return"NamedNode"===a.termType?n+=`<${a.value}>`:n+=`${a.value}`,n+=` <${t.value}> `,"NamedNode"===r.termType?n+=`<${r.value}>`:"BlankNode"===r.termType?n+=r.value:(n+=`"${_escape(r.value)}"`,r.datatype.value===RDF_LANGSTRING?r.language&&(n+=`@${r.language}`):r.datatype.value!==XSD_STRING&&(n+=`^^<${r.datatype.value}>`)),"NamedNode"===u.termType?n+=` <${u.value}>`:"BlankNode"===u.termType&&(n+=` ${u.value}`),n+=" .\n"}static legacyDatasetToQuads(e){const a=[],t={"blank node":"BlankNode",IRI:"NamedNode",literal:TYPE_LITERAL};for(const r in e){e[r].forEach(e=>{const u={};for(const a in e){const r=e[a],n={termType:t[r.type],value:r.value};n.termType===TYPE_LITERAL&&(n.datatype={termType:"NamedNode"},"datatype"in r&&(n.datatype.value=r.datatype),"language"in r?("datatype"in r||(n.datatype.value=RDF_LANGSTRING),n.language=r.language):"datatype"in r||(n.datatype.value=XSD_STRING)),u[a]=n}u.graph="@default"===r?{termType:"DefaultGraph",value:""}:{termType:r.startsWith("_:")?"BlankNode":"NamedNode",value:r},a.push(u)})}return a}};const _escapeRegex=/["\\\n\r]/g;function _escape(e){return e.replace(_escapeRegex,function(e){switch(e){case'"':return'\\"';case"\\":return"\\\\";case"\n":return"\\n";case"\r":return"\\r"}})}const _unescapeRegex=/(?:\\([tbnrf"'\\]))|(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g;function _unescape(e){return e.replace(_unescapeRegex,function(e,a,t,r){if(a)switch(a){case"t":return"\t";case"b":return"\b";case"n":return"\n";case"r":return"\r";case"f":return"\f";case'"':return'"';case"'":return"'";case"\\":return"\\"}if(t)return String.fromCharCode(parseInt(t,16));if(r)throw new Error("Unsupported U escape")})}

},{}],60:[function(_dereq_,module,exports){
"use strict";module.exports=class{constructor(t){this.current=t.sort(),this.done=!1,this.dir=new Map;for(let e=0;e<t.length;++e)this.dir.set(t[e],!0)}hasNext(){return!this.done}next(){const{current:t,dir:e}=this,s=t.slice();let n=null,r=0;const o=t.length;for(let s=0;s<o;++s){const l=t[s],i=e.get(l);(null===n||l>n)&&(i&&s>0&&l>t[s-1]||!i&&s<o-1&&l>t[s+1])&&(n=l,r=s)}if(null===n)this.done=!0;else{const s=e.get(n)?r-1:r+1;t[r]=t[s],t[s]=n;for(const s of t)s>n&&e.set(s,!e.get(s))}return s}};

},{}],61:[function(_dereq_,module,exports){
(function (setImmediate){(function (){
"use strict";const IdentifierIssuer=_dereq_("./IdentifierIssuer"),MessageDigest=_dereq_("./MessageDigest"),Permuter=_dereq_("./Permuter"),NQuads=_dereq_("./NQuads");function _stringHashCompare(e,s){return e.hash<s.hash?-1:e.hash>s.hash?1:0}module.exports=class{constructor(){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new IdentifierIssuer("_:c14n"),this.hashAlgorithm="sha256",this.quads=null}async main(e){this.quads=e;for(const s of e)this._addBlankNodeQuadInfo({quad:s,component:s.subject}),this._addBlankNodeQuadInfo({quad:s,component:s.object}),this._addBlankNodeQuadInfo({quad:s,component:s.graph});const s=new Map,t=[...this.blankNodeInfo.keys()];let a=0;for(const e of t)++a%100==0&&await this._yield(),await this._hashAndTrackBlankNode({id:e,hashToBlankNodes:s});const o=[...s.keys()].sort(),n=[];for(const e of o){const t=s.get(e);if(t.length>1){n.push(t);continue}const a=t[0];this.canonicalIssuer.getId(a)}for(const e of n){const s=[];for(const t of e){if(this.canonicalIssuer.hasId(t))continue;const e=new IdentifierIssuer("_:b");e.getId(t);const a=await this.hashNDegreeQuads(t,e);s.push(a)}s.sort(_stringHashCompare);for(const e of s){const s=e.issuer.getOldIds();for(const e of s)this.canonicalIssuer.getId(e)}}const i=[];for(const e of this.quads){const s={...e};s.subject=this._useCanonicalId({component:s.subject}),s.object=this._useCanonicalId({component:s.object}),s.graph=this._useCanonicalId({component:s.graph}),i.push(NQuads.serializeQuad(s))}return i.sort(),i.join("")}async hashFirstDegreeQuads(e){const s=[],t=this.blankNodeInfo.get(e),a=t.quads;for(const t of a){const a={subject:null,predicate:t.predicate,object:null,graph:null};a.subject=this.modifyFirstDegreeComponent(e,t.subject,"subject"),a.object=this.modifyFirstDegreeComponent(e,t.object,"object"),a.graph=this.modifyFirstDegreeComponent(e,t.graph,"graph"),s.push(NQuads.serializeQuad(a))}s.sort();const o=new MessageDigest(this.hashAlgorithm);for(const e of s)o.update(e);return t.hash=await o.digest(),t.hash}async hashRelatedBlankNode(e,s,t,a){let o;o=this.canonicalIssuer.hasId(e)?this.canonicalIssuer.getId(e):t.hasId(e)?t.getId(e):this.blankNodeInfo.get(e).hash;const n=new MessageDigest(this.hashAlgorithm);return n.update(a),"g"!==a&&n.update(this.getRelatedPredicate(s)),n.update(o),n.digest()}async hashNDegreeQuads(e,s){const t=new MessageDigest(this.hashAlgorithm),a=await this.createHashToRelated(e,s),o=[...a.keys()].sort();for(const e of o){t.update(e);let o,n="";const i=new Permuter(a.get(e));let d=0;for(;i.hasNext();){const e=i.next();++d%3==0&&await this._yield();let t=s.clone(),a="";const h=[];let r=!1;for(const s of e)if(this.canonicalIssuer.hasId(s)?a+=this.canonicalIssuer.getId(s):(t.hasId(s)||h.push(s),a+=t.getId(s)),0!==n.length&&a>n){r=!0;break}if(!r){for(const e of h){const s=await this.hashNDegreeQuads(e,t);if(a+=t.getId(e),a+=`<${s.hash}>`,t=s.issuer,0!==n.length&&a>n){r=!0;break}}r||(0===n.length||a<n)&&(n=a,o=t)}}t.update(n),s=o}return{hash:await t.digest(),issuer:s}}modifyFirstDegreeComponent(e,s){return"BlankNode"!==s.termType?s:{termType:"BlankNode",value:s.value===e?"_:a":"_:z"}}getRelatedPredicate(e){return`<${e.predicate.value}>`}async createHashToRelated(e,s){const t=new Map,a=this.blankNodeInfo.get(e).quads;let o=0;for(const n of a)++o%100==0&&await this._yield(),await Promise.all([this._addRelatedBlankNodeHash({quad:n,component:n.subject,position:"s",id:e,issuer:s,hashToRelated:t}),this._addRelatedBlankNodeHash({quad:n,component:n.object,position:"o",id:e,issuer:s,hashToRelated:t}),this._addRelatedBlankNodeHash({quad:n,component:n.graph,position:"g",id:e,issuer:s,hashToRelated:t})]);return t}async _hashAndTrackBlankNode({id:e,hashToBlankNodes:s}){const t=await this.hashFirstDegreeQuads(e),a=s.get(t);a?a.push(e):s.set(t,[e])}_addBlankNodeQuadInfo({quad:e,component:s}){if("BlankNode"!==s.termType)return;const t=s.value,a=this.blankNodeInfo.get(t);a?a.quads.add(e):this.blankNodeInfo.set(t,{quads:new Set([e]),hash:null})}async _addRelatedBlankNodeHash({quad:e,component:s,position:t,id:a,issuer:o,hashToRelated:n}){if("BlankNode"!==s.termType||s.value===a)return;const i=s.value,d=await this.hashRelatedBlankNode(i,e,o,t),h=n.get(d);h?h.push(i):n.set(d,[i])}_useCanonicalId({component:e}){return"BlankNode"!==e.termType||e.value.startsWith(this.canonicalIssuer.prefix)?e:{termType:"BlankNode",value:this.canonicalIssuer.getId(e.value)}}async _yield(){return new Promise(e=>setImmediate(e))}};

}).call(this)}).call(this,_dereq_("timers").setImmediate)
},{"./IdentifierIssuer":57,"./MessageDigest":58,"./NQuads":59,"./Permuter":60,"timers":67}],62:[function(_dereq_,module,exports){
"use strict";const IdentifierIssuer=_dereq_("./IdentifierIssuer"),MessageDigest=_dereq_("./MessageDigest"),Permuter=_dereq_("./Permuter"),NQuads=_dereq_("./NQuads");function _stringHashCompare(e,s){return e.hash<s.hash?-1:e.hash>s.hash?1:0}module.exports=class{constructor(){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new IdentifierIssuer("_:c14n"),this.hashAlgorithm="sha256",this.quads=null}main(e){this.quads=e;for(const s of e)this._addBlankNodeQuadInfo({quad:s,component:s.subject}),this._addBlankNodeQuadInfo({quad:s,component:s.object}),this._addBlankNodeQuadInfo({quad:s,component:s.graph});const s=new Map,t=[...this.blankNodeInfo.keys()];for(const e of t)this._hashAndTrackBlankNode({id:e,hashToBlankNodes:s});const a=[...s.keys()].sort(),o=[];for(const e of a){const t=s.get(e);if(t.length>1){o.push(t);continue}const a=t[0];this.canonicalIssuer.getId(a)}for(const e of o){const s=[];for(const t of e){if(this.canonicalIssuer.hasId(t))continue;const e=new IdentifierIssuer("_:b");e.getId(t);const a=this.hashNDegreeQuads(t,e);s.push(a)}s.sort(_stringHashCompare);for(const e of s){const s=e.issuer.getOldIds();for(const e of s)this.canonicalIssuer.getId(e)}}const n=[];for(const e of this.quads){const s={...e};s.subject=this._useCanonicalId({component:s.subject}),s.object=this._useCanonicalId({component:s.object}),s.graph=this._useCanonicalId({component:s.graph}),n.push(NQuads.serializeQuad(s))}return n.sort(),n.join("")}hashFirstDegreeQuads(e){const s=[],t=this.blankNodeInfo.get(e),a=t.quads;for(const t of a){const a={subject:null,predicate:t.predicate,object:null,graph:null};a.subject=this.modifyFirstDegreeComponent(e,t.subject,"subject"),a.object=this.modifyFirstDegreeComponent(e,t.object,"object"),a.graph=this.modifyFirstDegreeComponent(e,t.graph,"graph"),s.push(NQuads.serializeQuad(a))}s.sort();const o=new MessageDigest(this.hashAlgorithm);for(const e of s)o.update(e);return t.hash=o.digest(),t.hash}hashRelatedBlankNode(e,s,t,a){let o;o=this.canonicalIssuer.hasId(e)?this.canonicalIssuer.getId(e):t.hasId(e)?t.getId(e):this.blankNodeInfo.get(e).hash;const n=new MessageDigest(this.hashAlgorithm);return n.update(a),"g"!==a&&n.update(this.getRelatedPredicate(s)),n.update(o),n.digest()}hashNDegreeQuads(e,s){const t=new MessageDigest(this.hashAlgorithm),a=this.createHashToRelated(e,s),o=[...a.keys()].sort();for(const e of o){t.update(e);let o,n="";const h=new Permuter(a.get(e));for(;h.hasNext();){const e=h.next();let t=s.clone(),a="";const d=[];let i=!1;for(const s of e)if(this.canonicalIssuer.hasId(s)?a+=this.canonicalIssuer.getId(s):(t.hasId(s)||d.push(s),a+=t.getId(s)),0!==n.length&&a>n){i=!0;break}if(!i){for(const e of d){const s=this.hashNDegreeQuads(e,t);if(a+=t.getId(e),a+=`<${s.hash}>`,t=s.issuer,0!==n.length&&a>n){i=!0;break}}i||(0===n.length||a<n)&&(n=a,o=t)}}t.update(n),s=o}return{hash:t.digest(),issuer:s}}modifyFirstDegreeComponent(e,s){return"BlankNode"!==s.termType?s:{termType:"BlankNode",value:s.value===e?"_:a":"_:z"}}getRelatedPredicate(e){return`<${e.predicate.value}>`}createHashToRelated(e,s){const t=new Map,a=this.blankNodeInfo.get(e).quads;for(const o of a)this._addRelatedBlankNodeHash({quad:o,component:o.subject,position:"s",id:e,issuer:s,hashToRelated:t}),this._addRelatedBlankNodeHash({quad:o,component:o.object,position:"o",id:e,issuer:s,hashToRelated:t}),this._addRelatedBlankNodeHash({quad:o,component:o.graph,position:"g",id:e,issuer:s,hashToRelated:t});return t}_hashAndTrackBlankNode({id:e,hashToBlankNodes:s}){const t=this.hashFirstDegreeQuads(e),a=s.get(t);a?a.push(e):s.set(t,[e])}_addBlankNodeQuadInfo({quad:e,component:s}){if("BlankNode"!==s.termType)return;const t=s.value,a=this.blankNodeInfo.get(t);a?a.quads.add(e):this.blankNodeInfo.set(t,{quads:new Set([e]),hash:null})}_addRelatedBlankNodeHash({quad:e,component:s,position:t,id:a,issuer:o,hashToRelated:n}){if("BlankNode"!==s.termType||s.value===a)return;const h=s.value,d=this.hashRelatedBlankNode(h,e,o,t),i=n.get(d);i?i.push(h):n.set(d,[h])}_useCanonicalId({component:e}){return"BlankNode"!==e.termType||e.value.startsWith(this.canonicalIssuer.prefix)?e:{termType:"BlankNode",value:this.canonicalIssuer.getId(e.value)}}};

},{"./IdentifierIssuer":57,"./MessageDigest":58,"./NQuads":59,"./Permuter":60}],63:[function(_dereq_,module,exports){
"use strict";const URDNA2015=_dereq_("./URDNA2015");module.exports=class extends URDNA2015{constructor(){super(),this.name="URGNA2012",this.hashAlgorithm="sha1"}modifyFirstDegreeComponent(e,t,a){return"BlankNode"!==t.termType?t:"graph"===a?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:t.value===e?"_:a":"_:z"}}getRelatedPredicate(e){return e.predicate.value}async createHashToRelated(e,t){const a=new Map,s=this.blankNodeInfo.get(e).quads;let o=0;for(const r of s){let s,l;if("BlankNode"===r.subject.termType&&r.subject.value!==e)l=r.subject.value,s="p";else{if("BlankNode"!==r.object.termType||r.object.value===e)continue;l=r.object.value,s="r"}++o%100==0&&await this._yield();const n=await this.hashRelatedBlankNode(l,r,t,s),u=a.get(n);u?u.push(l):a.set(n,[l])}return a}};

},{"./URDNA2015":61}],64:[function(_dereq_,module,exports){
"use strict";const URDNA2015Sync=_dereq_("./URDNA2015Sync");module.exports=class extends URDNA2015Sync{constructor(){super(),this.name="URGNA2012",this.hashAlgorithm="sha1"}modifyFirstDegreeComponent(e,t,a){return"BlankNode"!==t.termType?t:"graph"===a?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:t.value===e?"_:a":"_:z"}}getRelatedPredicate(e){return e.predicate.value}createHashToRelated(e,t){const a=new Map,s=this.blankNodeInfo.get(e).quads;for(const o of s){let s,r;if("BlankNode"===o.subject.termType&&o.subject.value!==e)r=o.subject.value,s="p";else{if("BlankNode"!==o.object.termType||o.object.value===e)continue;r=o.object.value,s="r"}const n=this.hashRelatedBlankNode(r,o,t,s),l=a.get(n);l?l.push(r):a.set(n,[r])}return a}};

},{"./URDNA2015Sync":62}],65:[function(_dereq_,module,exports){
"use strict";const URDNA2015=_dereq_("./URDNA2015"),URGNA2012=_dereq_("./URGNA2012"),URDNA2015Sync=_dereq_("./URDNA2015Sync"),URGNA2012Sync=_dereq_("./URGNA2012Sync");let rdfCanonizeNative;try{rdfCanonizeNative=_dereq_("rdf-canonize-native")}catch(i){}const api={};module.exports=api,api.NQuads=_dereq_("./NQuads"),api.IdentifierIssuer=_dereq_("./IdentifierIssuer"),api._rdfCanonizeNative=function(i){return i&&(rdfCanonizeNative=i),rdfCanonizeNative},api.canonize=async function(i,a){if(Array.isArray(i)||(i=api.NQuads.legacyDatasetToQuads(i)),a.useNative){if(!rdfCanonizeNative)throw new Error("rdf-canonize-native not available");return new Promise((n,r)=>rdfCanonizeNative.canonize(i,a,(i,a)=>i?r(i):n(a)))}if("URDNA2015"===a.algorithm)return new URDNA2015(a).main(i);if("URGNA2012"===a.algorithm)return new URGNA2012(a).main(i);if(!("algorithm"in a))throw new Error("No RDF Dataset Canonicalization algorithm specified.");throw new Error("Invalid RDF Dataset Canonicalization algorithm: "+a.algorithm)},api._canonizeSync=function(i,a){if(Array.isArray(i)||(i=api.NQuads.legacyDatasetToQuads(i)),a.useNative){if(rdfCanonizeNative)return rdfCanonizeNative.canonizeSync(i,a);throw new Error("rdf-canonize-native not available")}if("URDNA2015"===a.algorithm)return new URDNA2015Sync(a).main(i);if("URGNA2012"===a.algorithm)return new URGNA2012Sync(a).main(i);if(!("algorithm"in a))throw new Error("No RDF Dataset Canonicalization algorithm specified.");throw new Error("Invalid RDF Dataset Canonicalization algorithm: "+a.algorithm)};

},{"./IdentifierIssuer":57,"./NQuads":59,"./URDNA2015":61,"./URDNA2015Sync":62,"./URGNA2012":63,"./URGNA2012Sync":64,"rdf-canonize-native":30}],66:[function(_dereq_,module,exports){
(function (process,global){(function (){
!function(e,t){"use strict";if(!e.setImmediate){var n,a,s,o,c,i=1,r={},f=!1,l=e.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(e);u=u&&u.setTimeout?u:e,"[object process]"==={}.toString.call(e.process)?n=function(e){process.nextTick(function(){g(e)})}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((s=new MessageChannel).port1.onmessage=function(e){g(e.data)},n=function(e){s.port2.postMessage(e)}):l&&"onreadystatechange"in l.createElement("script")?(a=l.documentElement,n=function(e){var t=l.createElement("script");t.onreadystatechange=function(){g(e),t.onreadystatechange=null,a.removeChild(t),t=null},a.appendChild(t)}):n=function(e){setTimeout(g,0,e)}:(o="setImmediate$"+Math.random()+"$",c=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(o)&&g(+t.data.slice(o.length))},e.addEventListener?e.addEventListener("message",c,!1):e.attachEvent("onmessage",c),n=function(t){e.postMessage(o+t,"*")}),u.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),a=0;a<t.length;a++)t[a]=arguments[a+1];var s={callback:e,args:t};return r[i]=s,n(i),i++},u.clearImmediate=d}function d(e){delete r[e]}function g(e){if(f)setTimeout(g,0,e);else{var n=r[e];if(n){f=!0;try{!function(e){var n=e.callback,a=e.args;switch(a.length){case 0:n();break;case 1:n(a[0]);break;case 2:n(a[0],a[1]);break;case 3:n(a[0],a[1],a[2]);break;default:n.apply(t,a)}}(n)}finally{d(e),f=!1}}}}}("undefined"==typeof self?"undefined"==typeof global?this:global:self);

}).call(this)}).call(this,_dereq_('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"_process":55}],67:[function(_dereq_,module,exports){
(function (setImmediate,clearImmediate){(function (){
var nextTick=_dereq_("process/browser.js").nextTick,apply=Function.prototype.apply,slice=Array.prototype.slice,immediateIds={},nextImmediateId=0;function Timeout(e,t){this._id=e,this._clearFn=t}exports.setTimeout=function(){return new Timeout(apply.call(setTimeout,window,arguments),clearTimeout)},exports.setInterval=function(){return new Timeout(apply.call(setInterval,window,arguments),clearInterval)},exports.clearTimeout=exports.clearInterval=function(e){e.close()},Timeout.prototype.unref=Timeout.prototype.ref=function(){},Timeout.prototype.close=function(){this._clearFn.call(window,this._id)},exports.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},exports.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},exports._unrefActive=exports.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},exports.setImmediate="function"==typeof setImmediate?setImmediate:function(e){var t=nextImmediateId++,i=!(arguments.length<2)&&slice.call(arguments,1);return immediateIds[t]=!0,nextTick(function(){immediateIds[t]&&(i?e.apply(null,i):e.call(null),exports.clearImmediate(t))}),t},exports.clearImmediate="function"==typeof clearImmediate?clearImmediate:function(e){delete immediateIds[e]};

}).call(this)}).call(this,_dereq_("timers").setImmediate,_dereq_("timers").clearImmediate)
},{"process/browser.js":55,"timers":67}],68:[function(_dereq_,module,exports){
"use strict";module.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}};

},{}],69:[function(_dereq_,module,exports){
"use strict";function Yallist(t){var e=this;if(e instanceof Yallist||(e=new Yallist),e.tail=null,e.head=null,e.length=0,t&&"function"==typeof t.forEach)t.forEach(function(t){e.push(t)});else if(arguments.length>0)for(var l=0,i=arguments.length;l<i;l++)e.push(arguments[l]);return e}function insert(t,e,l){var i=e===t.head?new Node(l,null,e,t):new Node(l,e,e.next,t);return null===i.next&&(t.tail=i),null===i.prev&&(t.head=i),t.length++,i}function push(t,e){t.tail=new Node(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function unshift(t,e){t.head=new Node(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function Node(t,e,l,i){if(!(this instanceof Node))return new Node(t,e,l,i);this.list=i,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,l?(l.prev=this,this.next=l):this.next=null}module.exports=Yallist,Yallist.Node=Node,Yallist.create=Yallist,Yallist.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,l=t.prev;return e&&(e.prev=l),l&&(l.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=l),t.list.length--,t.next=null,t.prev=null,t.list=null,e},Yallist.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}},Yallist.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}},Yallist.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)push(this,arguments[t]);return this.length},Yallist.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)unshift(this,arguments[t]);return this.length},Yallist.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}},Yallist.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}},Yallist.prototype.forEach=function(t,e){e=e||this;for(var l=this.head,i=0;null!==l;i++)t.call(e,l.value,i,this),l=l.next},Yallist.prototype.forEachReverse=function(t,e){e=e||this;for(var l=this.tail,i=this.length-1;null!==l;i--)t.call(e,l.value,i,this),l=l.prev},Yallist.prototype.get=function(t){for(var e=0,l=this.head;null!==l&&e<t;e++)l=l.next;if(e===t&&null!==l)return l.value},Yallist.prototype.getReverse=function(t){for(var e=0,l=this.tail;null!==l&&e<t;e++)l=l.prev;if(e===t&&null!==l)return l.value},Yallist.prototype.map=function(t,e){e=e||this;for(var l=new Yallist,i=this.head;null!==i;)l.push(t.call(e,i.value,this)),i=i.next;return l},Yallist.prototype.mapReverse=function(t,e){e=e||this;for(var l=new Yallist,i=this.tail;null!==i;)l.push(t.call(e,i.value,this)),i=i.prev;return l},Yallist.prototype.reduce=function(t,e){var l,i=this.head;if(arguments.length>1)l=e;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");i=this.head.next,l=this.head.value}for(var n=0;null!==i;n++)l=t(l,i.value,n),i=i.next;return l},Yallist.prototype.reduceReverse=function(t,e){var l,i=this.tail;if(arguments.length>1)l=e;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");i=this.tail.prev,l=this.tail.value}for(var n=this.length-1;null!==i;n--)l=t(l,i.value,n),i=i.prev;return l},Yallist.prototype.toArray=function(){for(var t=new Array(this.length),e=0,l=this.head;null!==l;e++)t[e]=l.value,l=l.next;return t},Yallist.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,l=this.tail;null!==l;e++)t[e]=l.value,l=l.prev;return t},Yallist.prototype.slice=function(t,e){(e=e||this.length)<0&&(e+=this.length),(t=t||0)<0&&(t+=this.length);var l=new Yallist;if(e<t||e<0)return l;t<0&&(t=0),e>this.length&&(e=this.length);for(var i=0,n=this.head;null!==n&&i<t;i++)n=n.next;for(;null!==n&&i<e;i++,n=n.next)l.push(n.value);return l},Yallist.prototype.sliceReverse=function(t,e){(e=e||this.length)<0&&(e+=this.length),(t=t||0)<0&&(t+=this.length);var l=new Yallist;if(e<t||e<0)return l;t<0&&(t=0),e>this.length&&(e=this.length);for(var i=this.length,n=this.tail;null!==n&&i>e;i--)n=n.prev;for(;null!==n&&i>t;i--,n=n.prev)l.push(n.value);return l},Yallist.prototype.splice=function(t,e,...l){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var i=0,n=this.head;null!==n&&i<t;i++)n=n.next;var h=[];for(i=0;n&&i<e;i++)h.push(n.value),n=this.removeNode(n);null===n&&(n=this.tail),n!==this.head&&n!==this.tail&&(n=n.prev);for(i=0;i<l.length;i++)n=insert(this,n,l[i]);return h},Yallist.prototype.reverse=function(){for(var t=this.head,e=this.tail,l=t;null!==l;l=l.prev){var i=l.prev;l.prev=l.next,l.next=i}return this.head=e,this.tail=t,this};try{_dereq_("./iterator.js")(Yallist)}catch(t){}

},{"./iterator.js":68}],70:[function(_dereq_,module,exports){
const Term=_dereq_("./Term");class Class extends Term{constructor(s,r){super(s,r)}getTermType(){return"rdfs:Class"}getTermObj(){return this.graph.classes[this.IRI]}getProperties(s=!0,r){const e=this.getTermObj(),t=[];return t.push(...e["soa:hasProperty"]),s&&t.push(...this.graph.reasoner.inferPropertiesFromSuperClasses(e["rdfs:subClassOf"])),this.util.applyFilter(this.util.uniquifyArray(t),r,this.graph)}getSuperClasses(s=!0,r){const e=this.getTermObj(),t=[];return s?t.push(...this.graph.reasoner.inferSuperClasses(this.IRI)):t.push(...e["rdfs:subClassOf"]),this.util.applyFilter(this.util.uniquifyArray(t),r,this.graph)}getSubClasses(s=!0,r){const e=this.getTermObj(),t=[];return s?t.push(...this.graph.reasoner.inferSubClasses(this.IRI)):t.push(...e["soa:superClassOf"]),this.util.applyFilter(this.util.uniquifyArray(t),r,this.graph)}isRangeOf(s=!0,r){const e=[];return s?e.push(...this.graph.reasoner.inferRangeOf(this.IRI)):e.push(...this.getTermObj()["soa:isRangeOf"]),this.util.applyFilter(this.util.uniquifyArray(e),r,this.graph)}toJSON(s=!0,r){const e=super.toJSON();return e.superClasses=this.getSuperClasses(s,r),e.subClasses=this.getSubClasses(s,r),e.properties=this.getProperties(s,r),e.rangeOf=this.isRangeOf(s,r),e}}module.exports=Class;

},{"./Term":78}],71:[function(_dereq_,module,exports){
const Term=_dereq_("./Term");class DataType extends Term{constructor(t,s){super(t,s)}getTermType(){return"schema:DataType"}getTermObj(){return this.graph.dataTypes[this.IRI]}getSuperDataTypes(t=!0,s){const e=this.getTermObj(),r=[];return t?r.push(...this.graph.reasoner.inferSuperDataTypes(this.IRI)):r.push(...e["rdfs:subClassOf"]),this.util.applyFilter(this.util.uniquifyArray(r),s,this.graph)}getSubDataTypes(t=!0,s){const e=this.getTermObj(),r=[];return t?r.push(...this.graph.reasoner.inferSubDataTypes(this.IRI)):r.push(...e["soa:superClassOf"]),this.util.applyFilter(this.util.uniquifyArray(r),s,this.graph)}isRangeOf(t=!0,s){const e=[];return t?e.push(...this.graph.reasoner.inferRangeOf(this.IRI)):e.push(...this.getTermObj()["soa:isRangeOf"]),this.util.applyFilter(this.util.uniquifyArray(e),s,this.graph)}toJSON(t=!0,s){const e=super.toJSON();return e.superDataTypes=this.getSuperDataTypes(t,s),e.subDataTypes=this.getSubDataTypes(t,s),e.rangeOf=this.isRangeOf(t,s),e}}module.exports=DataType;

},{"./Term":78}],72:[function(_dereq_,module,exports){
const Class=_dereq_("./Class");class Enumeration extends Class{constructor(e,t){super(e,t)}getTermType(){return"schema:Enumeration"}getTermObj(){return this.graph.enumerations[this.IRI]}getEnumerationMembers(e=!1,t){const s=[];if(s.push(...this.getTermObj()["soa:hasEnumerationMember"]),e){const e=this.getSubClasses(!0);for(const t of e){const e=this.graph.enumerations[t];this.util.isNil(e)||s.push(...e["soa:hasEnumerationMember"])}}return this.util.applyFilter(this.util.uniquifyArray(s),t,this.graph)}toJSON(e=!0,t){const s=super.toJSON(e,t);return s.enumerationMembers=this.getEnumerationMembers(e,t),s}}module.exports=Enumeration;

},{"./Class":70}],73:[function(_dereq_,module,exports){
const Term=_dereq_("./Term");class EnumerationMember extends Term{constructor(e,r){super(e,r)}getTermType(){return"soa:EnumerationMember"}getTermObj(){return this.graph.enumerationMembers[this.IRI]}getDomainEnumerations(e=!1,r){let t=this.getTermObj(),i=[];if(i.push(...t["soa:enumerationDomainIncludes"]),e){let e=this.util.cloneJson(i);for(const r of e)i.push(...this.graph.reasoner.inferSuperClasses(r));i=this.util.applyFilter(this.util.uniquifyArray(i),{termType:"Enumeration"},this.graph)}return this.util.applyFilter(this.util.uniquifyArray(i),r,this.graph)}toJSON(e=!1,r){const t=super.toJSON();return t.domainEnumerations=this.getDomainEnumerations(e,r),t}}module.exports=EnumerationMember;

},{"./Term":78}],74:[function(_dereq_,module,exports){
const Class=_dereq_("./Class"),Property=_dereq_("./Property"),Enumeration=_dereq_("./Enumeration"),EnumerationMember=_dereq_("./EnumerationMember"),DataType=_dereq_("./DataType"),ReasoningEngine=_dereq_("./ReasoningEngine");class Graph{constructor(s){this.sdoAdapter=s,this.util=_dereq_("./utilities"),this.reasoner=new ReasoningEngine(this),this.context={rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",xsd:"http://www.w3.org/2001/XMLSchema#",dc:"http://purl.org/dc/terms/",soa:"http://schema-org-adapter.at/vocabTerms/","soa:superClassOf":{"@id":"soa:superClassOf","@type":"@id"},"soa:superPropertyOf":{"@id":"soa:superPropertyOf","@type":"@id"},"soa:hasProperty":{"@id":"soa:hasProperty","@type":"@id"},"soa:isRangeOf":{"@id":"soa:isRangeOf","@type":"@id"},"soa:hasEnumerationMember":{"@id":"soa:hasEnumerationMember","@type":"@id"},"soa:enumerationDomainIncludes":{"@id":"soa:enumerationDomainIncludes","@type":"@id"},"rdfs:subClassOf":{"@id":"rdfs:subClassOf","@type":"@id"},"rdfs:subPropertyOf":{"@id":"rdfs:subPropertyOf","@type":"@id"},"schema:isPartOf":{"@id":"schema:isPartOf","@type":"@id"},"schema:domainIncludes":{"@id":"schema:domainIncludes","@type":"@id"},"schema:rangeIncludes":{"@id":"schema:rangeIncludes","@type":"@id"},"schema:supersededBy":{"@id":"schema:supersededBy","@type":"@id"},"schema:inverseOf":{"@id":"schema:inverseOf","@type":"@id"},"dc:source":{"@id":"dc:source","@type":"@id"},"schema:source":{"@id":"schema:source","@type":"@id"}},this.classes={},this.properties={},this.dataTypes={},this.enumerations={},this.enumerationMembers={}}async addVocabulary(s,e=null){void 0===this.context.schema&&(this.context.schema=this.util.discoverUsedSchemaOrgProtocol(s)+"://schema.org/");try{if(this.sdoAdapter.equateVocabularyProtocols){const e=this.util.discoverEquateNamespaces(this.context,s);if(e.length>0){let t=this.util.cloneJson(s["@context"]);e.forEach(function(s){let e=Object.keys(t).find(e=>t[e]===s);e&&delete t[e];let i=Object.keys(this.context).find(e=>this.context[e]===this.util.switchIRIProtocol(s));t[i]=s},this),s=await this.util.preProcessVocab(s,t),e.forEach(function(e){let t=Object.keys(this.context).find(s=>this.context[s]===this.util.switchIRIProtocol(e));s["@context"][t]=this.context[t]},this)}}this.context=this.util.generateContext(this.context,s["@context"]),s=await this.util.preProcessVocab(s,this.context);const t=this.sdoAdapter.getVocabularies();for(let e of s["@graph"])e=this.util.curateVocabNode(e,t);for(let t=0;t<s["@graph"].length;t++){const i=this.util.cloneJson(s["@graph"][t]);if(this.util.isString(i["@type"]))switch(i["@type"]){case"rdfs:Class":this.addGraphNode(this.classes,i,e);break;case"rdf:Property":this.addGraphNode(this.properties,i,e);break;default:this.addGraphNode(this.enumerationMembers,i,e)}else this.util.isArray(i["@type"])?i["@type"].includes("rdfs:Class")&&i["@type"].includes("schema:DataType")?this.addGraphNode(this.dataTypes,i,e):this.addGraphNode(this.enumerationMembers,i,e):this.sdoAdapter.onError("unexpected @type format for the following node: "+JSON.stringify(i,null,2))}let i,r;do{i=!1;const s=Object.keys(this.classes),e=Object.keys(this.enumerations);for(const t of s)if(void 0!==this.classes[t]["rdfs:subClassOf"]){const s=this.classes[t]["rdfs:subClassOf"];for(const r of s)("schema:Enumeration"===r||e.includes(r))&&this.classes[t]&&!this.enumerations[t]&&(i=!0,this.enumerations[t]=this.util.cloneJson(this.classes[t]),delete this.classes[t])}}while(i);do{r=!1;const s=Object.keys(this.classes),e=Object.keys(this.dataTypes);for(const t of s)if(void 0!==this.classes[t]["rdfs:subClassOf"]){const s=this.classes[t]["rdfs:subClassOf"];for(const i of s)("schema:DataType"===i||e.includes(i))&&this.classes[t]&&!this.dataTypes[t]&&(r=!0,this.dataTypes[t]=this.util.cloneJson(this.classes[t]),delete this.classes[t])}}while(r);const o=Object.keys(this.dataTypes);for(const s of o)this.dataTypes[s]["@type"]="schema:DataType";let a=Object.keys(this.classes);for(const s of a){const e=this.classes[s]["rdfs:subClassOf"];this.classes[s]["soa:superClassOf"]||(this.classes[s]["soa:superClassOf"]=[]);for(const t of e){let e=this.classes[t];e||(e=this.enumerations[t]),e&&(e["soa:superClassOf"]?e["soa:superClassOf"].includes(s)||e["soa:superClassOf"].push(s):e["soa:superClassOf"]=[s])}}let n=Object.keys(this.enumerations);for(const s of n){const e=this.enumerations[s]["rdfs:subClassOf"];this.enumerations[s]["soa:superClassOf"]||(this.enumerations[s]["soa:superClassOf"]=[]);for(const t of e){let e=this.classes[t];e||(e=this.enumerations[t]),e&&(e["soa:superClassOf"]?e["soa:superClassOf"].includes(s)||e["soa:superClassOf"].push(s):e["soa:superClassOf"]=[s])}}let h=Object.keys(this.dataTypes);for(const s of h){const e=this.dataTypes[s]["rdfs:subClassOf"];if(this.dataTypes[s]["soa:superClassOf"]||(this.dataTypes[s]["soa:superClassOf"]=[]),e)for(const t of e){const e=this.dataTypes[t];e&&(e["soa:superClassOf"]?e["soa:superClassOf"].includes(s)||e["soa:superClassOf"].push(s):e["soa:superClassOf"]=[s])}else this.dataTypes[s]["rdfs:subClassOf"]=[]}let c=Object.keys(this.properties);for(const s of c){const e=this.properties[s]["rdfs:subPropertyOf"];if(this.properties[s]["soa:superPropertyOf"]||(this.properties[s]["soa:superPropertyOf"]=[]),e)for(const t of e){const e=this.properties[t];e&&(e["soa:superPropertyOf"]?e["soa:superPropertyOf"].includes(s)||e["soa:superPropertyOf"].push(s):e["soa:superPropertyOf"]=[s])}else this.properties[s]["rdfs:subPropertyOf"]=[]}a=Object.keys(this.classes);for(const s of a)this.classes[s]["soa:hasProperty"]||(this.classes[s]["soa:hasProperty"]=[]),this.classes[s]["soa:isRangeOf"]||(this.classes[s]["soa:isRangeOf"]=[]);n=Object.keys(this.enumerations);for(const s of n)this.enumerations[s]["soa:hasEnumerationMember"]||(this.enumerations[s]["soa:hasEnumerationMember"]=[]),this.enumerations[s]["soa:isRangeOf"]||(this.enumerations[s]["soa:isRangeOf"]=[]),this.enumerations[s]["soa:hasProperty"]||(this.enumerations[s]["soa:hasProperty"]=[]);h=Object.keys(this.dataTypes);for(const s of h)this.dataTypes[s]["soa:isRangeOf"]||(this.dataTypes[s]["soa:isRangeOf"]=[]);let u=Object.keys(this.enumerationMembers);for(const s of u)this.enumerationMembers[s]["soa:enumerationDomainIncludes"]||(this.enumerationMembers[s]["soa:enumerationDomainIncludes"]=[]);c=Object.keys(this.properties);for(const s of c){const e=this.properties[s]["schema:domainIncludes"];if(this.util.isArray(e))for(const t of e){let e=this.classes[t];e||(e=this.enumerations[t]),e&&this.util.isArray(e["soa:hasProperty"])&&!e["soa:hasProperty"].includes(s)&&e["soa:hasProperty"].push(s)}const t=this.properties[s]["schema:rangeIncludes"];if(this.util.isArray(t))for(const e of t){let t=this.classes[e]||this.enumerations[e]||this.dataTypes[e];t&&this.util.isArray(t["soa:isRangeOf"])&&!t["soa:isRangeOf"].includes(s)&&t["soa:isRangeOf"].push(s)}}u=Object.keys(this.enumerationMembers);for(const s of u){const e=this.enumerationMembers[s];let t=e["@type"];this.util.isArray(t)||(t=[t]);for(const i of t){const t=this.enumerations[i];t&&this.util.isArray(t["soa:hasEnumerationMember"])&&!t["soa:hasEnumerationMember"].includes(s)&&(t["soa:hasEnumerationMember"].push(s),this.util.isArray(e["soa:enumerationDomainIncludes"])?e["soa:enumerationDomainIncludes"].push(i):e["soa:enumerationDomainIncludes"]=[i])}}return!0}catch(s){return this.sdoAdapter.onError(s),!1}}addGraphNode(s,e,t){try{if(s[e["@id"]]){const i=s[e["@id"]];if(this.util.isNil(e["schema:isPartOf"])||(i["schema:isPartOf"]=e["schema:isPartOf"]),this.util.isNil(e["dc:source"])||(i["dc:source"]=e["dc:source"]),this.util.isNil(e["schema:source"])||(i["schema:source"]=e["schema:source"]),this.util.isNil(e["schema:category"])||(i["schema:category"]=e["schema:category"]),this.util.isNil(e["schema:supersededBy"])||(i["schema:supersededBy"]=e["schema:supersededBy"]),!this.util.isNil(e["rdfs:label"])){const s=Object.keys(e["rdfs:label"]);for(const t of s)i["rdfs:label"][t]=e["rdfs:label"][t]}if(!this.util.isNil(e["rdfs:comment"])){const s=Object.keys(e["rdfs:comment"]);for(const t of s)i["rdfs:comment"][t]=e["rdfs:comment"][t]}if(!this.util.isNil(e["rdfs:subClassOf"]))for(const s of e["rdfs:subClassOf"])i["rdfs:subClassOf"].includes(s)||i["rdfs:subClassOf"].push(s);if(!this.util.isNil(e["soa:superClassOf"]))for(const s of e["soa:superClassOf"])i["soa:superClassOf"].includes(s)||i["soa:superClassOf"].push(s);if(!this.util.isNil(e["soa:hasProperty"]))for(const s of e["soa:hasProperty"])i["soa:hasProperty"].includes(s)||i["soa:hasProperty"].push(s);if(!this.util.isNil(e["soa:isRangeOf"]))for(const s of e["soa:isRangeOf"])i["soa:isRangeOf"].includes(s)||i["soa:isRangeOf"].push(s);if(!this.util.isNil(e["soa:enumerationDomainIncludes"]))for(const s of e["soa:enumerationDomainIncludes"])i["soa:enumerationDomainIncludes"].includes(s)||i["soa:enumerationDomainIncludes"].push(s);if(!this.util.isNil(e["soa:hasEnumerationMember"]))for(const s of e["soa:hasEnumerationMember"])i["soa:hasEnumerationMember"].includes(s)||i["soa:hasEnumerationMember"].push(s);if(!this.util.isNil(e["rdfs:subPropertyOf"]))for(const s of e["rdfs:subPropertyOf"])i["rdfs:subPropertyOf"].includes(s)||i["rdfs:subPropertyOf"].push(s);if(!this.util.isNil(e["schema:domainIncludes"]))for(const s of e["schema:domainIncludes"])i["schema:domainIncludes"].includes(s)||i["schema:domainIncludes"].push(s);if(!this.util.isNil(e["schema:rangeIncludes"]))for(const s of e["schema:rangeIncludes"])i["schema:rangeIncludes"].includes(s)||i["schema:rangeIncludes"].push(s);if(!this.util.isNil(e["schema:superPropertyOf"]))for(const s of e["schema:superPropertyOf"])i["schema:superPropertyOf"].includes(s)||i["schema:superPropertyOf"].push(s);t&&(i.vocabURLs?i.vocabURLs.includes(t)||i.vocabURLs.push(t):i.vocabURLs=[t])}else s[e["@id"]]=e,t&&(s[e["@id"]].vocabURLs=[t]);return!0}catch(s){return this.sdoAdapter.onError(s),!1}}getTerm(s,e){const t=this.discoverCompactIRI(s);let i,r,o=0;do{switch(o){case 0:i=this.classes[t],r="Class";break;case 1:i=this.properties[t],r="Property";break;case 2:i=this.dataTypes[t],r="DataType";break;case 3:i=this.enumerations[t],r="Enumeration";break;case 4:i=this.enumerationMembers[t],r="EnumerationMember"}o++}while(!i&&o<6);if(!i)throw new Error("There is no term with the IRI "+s);if(0===(i=this.util.applyFilter([i["@id"]],e,this)).length)throw new Error("There is no term with that IRI and filter settings.");switch(r){case"Class":return new Class(t,this);case"Property":return new Property(t,this);case"Enumeration":return new Enumeration(t,this);case"EnumerationMember":return new EnumerationMember(t,this);case"DataType":return new DataType(t,this)}}getClass(s,e){const t=this.discoverCompactIRI(s);if(t){let s=this.classes[t];if(s){if(0===(s=this.util.applyFilter([t],e,this)).length)throw new Error("There is no class with that IRI and filter settings.");return new Class(t,this)}if(s=this.enumerations[t])try{return this.getEnumeration(t,e)}catch(s){throw new Error("There is no class with that IRI and filter settings.")}}throw new Error("There is no class with the IRI "+s)}getProperty(s,e){const t=this.discoverCompactIRI(s);if(t){let s=this.properties[t];if(s){if(0===(s=this.util.applyFilter([t],e,this)).length)throw new Error("There is no property with that URI and filter settings.");return new Property(t,this)}}throw new Error("There is no property with that URI.")}getDataType(s,e){const t=this.discoverCompactIRI(s);if(t){let s=this.dataTypes[t];if(s){if(0===(s=this.util.applyFilter([t],e,this)).length)throw new Error("There is no data-type with that IRI and filter settings.");return new DataType(t,this)}}throw new Error("There is no data-type with the IRI "+s)}getEnumeration(s,e){const t=this.discoverCompactIRI(s);if(t){let s=this.enumerations[t];if(s){if(0===(s=this.util.applyFilter([t],e,this)).length)throw new Error("There is no enumeration with that IRI and filter settings.");return new Enumeration(t,this)}}throw new Error("There is no enumeration with the IRI "+s)}getEnumerationMember(s,e){const t=this.discoverCompactIRI(s);if(t){let s=this.enumerationMembers[t];if(s){if(0===(s=this.util.applyFilter([t],e,this)).length)throw new Error("There is no EnumerationMember with that IRI and filter settings.");return new EnumerationMember(t,this)}}throw new Error("There is no EnumerationMember with the IRI "+s)}discoverCompactIRI(s){if(s.includes(":")){const e=Object.keys(this.context);for(const t of e){const e=this.context[t];if(this.util.isString(e)){if(s.startsWith(t))return s;if(s.startsWith(e)||this.sdoAdapter.equateVocabularyProtocols&&s.startsWith(this.util.switchIRIProtocol(e)))return this.util.toCompactIRI(s,this.context,this.sdoAdapter.equateVocabularyProtocols)}}}else{const e=Object.keys(this.classes);for(const t of e)if(!0===this.containsLabel(this.classes[t],s))return t;const t=Object.keys(this.properties);for(const e of t)if(!0===this.containsLabel(this.properties[e],s))return e;const i=Object.keys(this.dataTypes);for(const e of i)if(!0===this.containsLabel(this.dataTypes[e],s))return e;const r=Object.keys(this.enumerations);for(const e of r)if(!0===this.containsLabel(this.enumerations[e],s))return e;const o=Object.keys(this.enumerationMembers);for(const e of o)if(!0===this.containsLabel(this.enumerationMembers[e],s))return e}return null}containsLabel(s,e){if(s&&this.util.isObject(s["rdfs:label"])){const t=Object.keys(s["rdfs:label"]);for(const i of t)if(s["rdfs:label"][i]===e)return!0}return!1}}module.exports=Graph;

},{"./Class":70,"./DataType":71,"./Enumeration":72,"./EnumerationMember":73,"./Property":75,"./ReasoningEngine":76,"./utilities":79}],75:[function(_dereq_,module,exports){
const Term=_dereq_("./Term");class Property extends Term{constructor(e,r){super(e,r)}getTermType(){return"rdf:Property"}getTermObj(){return this.graph.properties[this.IRI]}getRanges(e=!0,r){let t=this.getTermObj(),s=[];if(s.push(...t["schema:rangeIncludes"]),e){for(const e of s)s.push(...this.graph.reasoner.inferSubDataTypes(e));for(const e of s)s.push(...this.graph.reasoner.inferSubClasses(e))}return this.util.applyFilter(this.util.uniquifyArray(s),r,this.graph)}getDomains(e=!0,r){let t=this.getTermObj(),s=[];if(s.push(...t["schema:domainIncludes"]),e){let e=[];for(const r of s)e.push(...this.graph.reasoner.inferSubClasses(r));s.push(...e)}return this.util.applyFilter(this.util.uniquifyArray(s),r,this.graph)}getSuperProperties(e=!0,r){let t=this.getTermObj(),s=[];return e?s.push(...this.graph.reasoner.inferSuperProperties(this.IRI)):s.push(...t["rdfs:subPropertyOf"]),this.util.applyFilter(this.util.uniquifyArray(s),r,this.graph)}getSubProperties(e=!0,r){let t=this.getTermObj(),s=[];return e?s.push(...this.graph.reasoner.inferSubProperties(this.IRI)):s.push(...t["soa:superPropertyOf"]),this.util.applyFilter(this.util.uniquifyArray(s),r,this.graph)}getInverseOf(){return this.getTermObj()["schema:inverseOf"]}toJSON(e=!0,r){const t=super.toJSON();return t.ranges=this.getRanges(e,r),t.domains=this.getDomains(e,r),t.superProperties=this.getSuperProperties(e,r),t.subProperties=this.getSubProperties(e,r),t.inverseOf=this.getInverseOf(),t}}module.exports=Property;

},{"./Term":78}],76:[function(_dereq_,module,exports){
class ReasoningEngine{constructor(s){this.graph=s,this.util=_dereq_("./utilities")}inferPropertiesFromSuperClasses(s){const t=[];for(const i of s){let s=this.graph.classes[i]||this.graph.enumerations[i];s&&(t.push(...s["soa:hasProperty"]),0!==s["rdfs:subClassOf"].length&&t.push(...this.inferPropertiesFromSuperClasses(s["rdfs:subClassOf"])))}return this.util.uniquifyArray(t)}inferSuperClasses(s){let t=[];const i=this.graph.classes[s]||this.graph.enumerations[s];if(i){t.push(...i["rdfs:subClassOf"]);let s=this.util.cloneJson(t);do{let i=[];for(const t of s){let s=this.graph.classes[t]||this.graph.enumerations[t];s&&i.push(...s["rdfs:subClassOf"])}i=this.util.uniquifyArray(i),s=this.util.cloneJson(i),t.push(...i)}while(0!==s.length);t=this.util.uniquifyArray(t)}return t}inferSubClasses(s){let t=[];const i=this.graph.classes[s]||this.graph.enumerations[s];if(i){t.push(...i["soa:superClassOf"]);let s=this.util.cloneJson(t);do{let i=[];for(const t of s){let s=this.graph.classes[t]||this.graph.enumerations[t];s&&i.push(...s["soa:superClassOf"])}i=this.util.uniquifyArray(i),s=this.util.cloneJson(i),t.push(...i)}while(0!==s.length);t=this.util.uniquifyArray(t)}return t}inferSuperDataTypes(s){let t=[];const i=this.graph.dataTypes[s];if(i){t.push(...i["rdfs:subClassOf"]);let s=this.util.cloneJson(t);do{let i=[];for(const t of s){const s=this.graph.dataTypes[t];s&&i.push(...s["rdfs:subClassOf"])}i=this.util.uniquifyArray(i),s=this.util.cloneJson(i),t.push(...i)}while(0!==s.length);t=this.util.uniquifyArray(t)}return t}inferSubDataTypes(s){let t=[];const i=this.graph.dataTypes[s];if(i){t.push(...i["soa:superClassOf"]);let s=this.util.cloneJson(t);do{let i=[];for(const t of s){const s=this.graph.dataTypes[t];s&&i.push(...s["soa:superClassOf"])}i=this.util.uniquifyArray(i),s=this.util.cloneJson(i),t.push(...i)}while(0!==s.length);t=this.util.uniquifyArray(t)}return t}inferSuperProperties(s){let t=[];const i=this.graph.properties[s];if(i){t.push(...i["rdfs:subPropertyOf"]);let s=this.util.cloneJson(t);do{let i=[];for(let t of s){const s=this.graph.properties[t];s&&i.push(...s["rdfs:subPropertyOf"])}i=this.util.uniquifyArray(i),s=this.util.cloneJson(i),t.push(...i)}while(0!==s.length);t=this.util.uniquifyArray(t)}return t}inferSubProperties(s){let t=[];const i=this.graph.properties[s];if(i){t.push(...i["soa:superPropertyOf"]);let s=this.util.cloneJson(t);do{let i=[];for(const t of s){const s=this.graph.properties[t];s&&i.push(...s["soa:superPropertyOf"])}i=this.util.uniquifyArray(i),s=this.util.cloneJson(i),t.push(...i)}while(0!==s.length);t=this.util.uniquifyArray(t)}return t}inferRangeOf(s){const t=this.graph.classes[s]||this.graph.enumerations[s];let i=[];if(t){i.push(...t["soa:isRangeOf"]);let e=this.inferSuperClasses(s);for(const s of e){let t=this.graph.classes[s]||this.graph.enumerations[s];t&&i.push(...t["soa:isRangeOf"])}}else{const t=this.graph.dataTypes[s];if(t){i.push(...t["soa:isRangeOf"]);let e=this.inferSuperDataTypes(s);for(const s of e){let t=this.graph.dataTypes[s];t&&i.push(...t["soa:isRangeOf"])}}}return this.util.uniquifyArray(i)}}module.exports=ReasoningEngine;

},{"./utilities":79}],77:[function(_dereq_,module,exports){
const Graph=_dereq_("./Graph"),Term=_dereq_("./Term"),Class=_dereq_("./Class"),Property=_dereq_("./Property"),DataType=_dereq_("./DataType"),Enumeration=_dereq_("./Enumeration"),EnumerationMember=_dereq_("./EnumerationMember"),axios=_dereq_("axios"),URI_SEMANTIFY_GITHUB="https://raw.githubusercontent.com/semantifyit/schemaorg/main/",URI_SEMANTIFY_RELEASES=URI_SEMANTIFY_GITHUB+"data/releases/",URI_SEMANTIFY_VERSIONS=URI_SEMANTIFY_GITHUB+"versions.json";class SDOAdapter{constructor(t){this.util=_dereq_("./utilities"),this.retrievalMemory={versionsFile:null,latest:null},t&&t.commitBase&&(this.commitBase=t.commitBase),t&&"function"==typeof t.onError?this.onError=t.onError:this.onError=function(){},t&&void 0!==t.schemaHttps?this.schemaHttps=t.schemaHttps:this.schemaHttps=!0,t&&void 0!==t.equateVocabularyProtocols?this.equateVocabularyProtocols=t.equateVocabularyProtocols:this.equateVocabularyProtocols=!1,this.graph=new Graph(this)}async addVocabularies(t){if(this.util.isArray(t)||!this.util.isString(t)&&!this.util.isObject(t)||(t=[t]),!this.util.isArray(t))throw new Error("The first argument of the function must be an Array of vocabularies or a single vocabulary (JSON-LD as Object/String)");for(const e of t)if(this.util.isString(e))if(e.startsWith("www")||e.startsWith("http"))try{let t=await this.fetchVocabularyFromURL(e);this.util.isString(t)&&(t=JSON.parse(t)),await this.graph.addVocabulary(t,e)}catch(t){throw console.log(t),new Error("The given URL "+e+" did not contain a valid JSON-LD vocabulary.")}else try{await this.graph.addVocabulary(JSON.parse(e))}catch(t){throw new Error("Parsing of vocabulary string produced an invalid JSON-LD.")}else{if(!this.util.isObject(e))throw new Error("The first argument of the function must be an Array of vocabularies or a single vocabulary (JSON-LD as Object/String)");await this.graph.addVocabulary(e)}return!0}async fetchVocabularyFromURL(t){return new Promise(function(e,r){axios.get(t,{headers:{Accept:"application/ld+json, application/json"}}).then(function(t){e(t.data)}).catch(function(){r("Could not find any resource at the given URL.")})})}getTerm(t,e){return this.graph.getTerm(t,e)}getAllTerms(t){const e=[],r=this.getListOfClasses(t),s=this.getListOfEnumerations(t),i=this.getListOfProperties(t),a=this.getListOfDataTypes(t),o=this.getListOfEnumerationMembers(t);for(let t of r)try{e.push(this.getClass(t))}catch(e){throw new Error("There is no class with the IRI "+t)}for(let t of s)try{e.push(this.getEnumeration(t))}catch(e){throw new Error("There is no enumeration with the IRI "+t)}for(let t of i)try{e.push(this.getProperty(t))}catch(e){throw new Error("There is no property with the IRI "+t)}for(let t of a)try{e.push(this.getDataType(t))}catch(e){throw new Error("There is no data type with the IRI "+t)}for(let t of o)try{e.push(this.getEnumerationMember(t))}catch(e){throw new Error("There is no enumeration member with the IRI "+t)}return e}getListOfTerms(t){let e=[];return e.push(...Object.keys(this.graph.classes)),e.push(...Object.keys(this.graph.enumerations)),e.push(...Object.keys(this.graph.properties)),e.push(...Object.keys(this.graph.dataTypes)),e.push(...Object.keys(this.graph.enumerationMembers)),this.util.applyFilter(e,t,this.graph)}getClass(t,e){return this.graph.getClass(t,e)}getAllClasses(t){const e=[],r=this.getListOfClasses(t);for(let t of r)try{e.push(this.getClass(t))}catch(e){throw new Error("There is no class with the IRI "+t)}return e}getListOfClasses(t){return this.util.applyFilter(Object.keys(this.graph.classes),t,this.graph)}getProperty(t,e){return this.graph.getProperty(t,e)}getAllProperties(t){const e=[],r=this.getListOfProperties(t);for(let t of r)try{e.push(this.getProperty(t))}catch(e){throw new Error("There is no property with the IRI "+t)}return e}getListOfProperties(t){return this.util.applyFilter(Object.keys(this.graph.properties),t,this.graph)}getDataType(t,e){return this.graph.getDataType(t,e)}getAllDataTypes(t){const e=[],r=this.getListOfDataTypes(t);for(let t of r)try{e.push(this.getDataType(t))}catch(e){throw new Error("There is no data type with the IRI "+t)}return e}getListOfDataTypes(t){return this.util.applyFilter(Object.keys(this.graph.dataTypes),t,this.graph)}getEnumeration(t,e){return this.graph.getEnumeration(t,e)}getAllEnumerations(t){const e=[],r=this.getListOfEnumerations(t);for(let t of r)try{e.push(this.getEnumeration(t))}catch(e){throw new Error("There is no enumeration with the IRI "+t)}return e}getListOfEnumerations(t){return this.util.applyFilter(Object.keys(this.graph.enumerations),t,this.graph)}getEnumerationMember(t,e){return this.graph.getEnumerationMember(t,e)}getAllEnumerationMembers(t){const e=[],r=this.getListOfEnumerationMembers(t);for(let t of r)try{e.push(this.getEnumerationMember(t))}catch(e){throw new Error("There is no enumeration member with the IRI "+t)}return e}getListOfEnumerationMembers(t){return this.util.applyFilter(Object.keys(this.graph.enumerationMembers),t,this.graph)}getVocabularies(){const t=Object.keys(this.graph.context),e={},r=["soa","xsd","rdf","rdfa","rdfs","dc"];for(let s=0;s<t.length;s++)this.util.isString(this.graph.context[t[s]])&&-1===r.indexOf(t[s])&&(e[t[s]]=this.graph.context[t[s]]);return e}async constructSDOVocabularyURL(t="latest"){if("latest"===t)try{this.retrievalMemory.versionsFile||await this.getSDOVersionFile(),t=this.retrievalMemory.latest}catch(t){throw console.error("Could not determine/retrieve the latest version of schema.org"),t}const e=this.util.getFileNameForSchemaOrgVersion(t,this.schemaHttps);return this.getReleasesURI()+t+"/"+e}async getSDOVersionFile(){let t;try{t=await axios.get(this.getVersionFileURI())}catch(t){throw this.onError("Unable to retrieve the schema.org versions file at "+this.getVersionFileURI()),t}if(t&&t.data){if(this.retrievalMemory.versionsFile=t.data,this.retrievalMemory.versionsFile.schemaversion){if(await this.checkURL(await this.constructSDOVocabularyURL(this.retrievalMemory.versionsFile.schemaversion)))this.retrievalMemory.latest=this.retrievalMemory.versionsFile.schemaversion;else{if(this.retrievalMemory.versionsFile.releaseLog){const t=this.util.sortReleaseEntriesByDate(this.retrievalMemory.versionsFile.releaseLog);for(const e of t)if(await this.checkURL(await this.constructSDOVocabularyURL(e[0]))){this.retrievalMemory.latest=e[0];break}}if(!this.retrievalMemory.latest){let t='Could not find any valid vocabulary file in the Schema.org versions file (to be declared as "latest".';throw this.onError(t),new Error(t)}}return!0}let e="Schema.org versions file has an unexpected structure!";throw this.onError(e+" -> "+this.getVersionFileURI()),new Error(e)}return!0}async checkURL(t){try{return await axios.head(t),!0}catch(t){return!1}}async getLatestSDOVersion(){return this.retrievalMemory.latest||await this.getSDOVersionFile(),this.retrievalMemory.latest}getReleasesURI(){return this.commitBase?"https://raw.githubusercontent.com/schemaorg/schemaorg/"+this.commitBase+"/data/releases/":URI_SEMANTIFY_RELEASES}getVersionFileURI(){return this.commitBase?"https://raw.githubusercontent.com/schemaorg/schemaorg/"+this.commitBase+"/versions.json":URI_SEMANTIFY_VERSIONS}}module.exports=SDOAdapter;

},{"./Class":70,"./DataType":71,"./Enumeration":72,"./EnumerationMember":73,"./Graph":74,"./Property":75,"./Term":78,"./utilities":79,"axios":1}],78:[function(_dereq_,module,exports){
const Graph=_dereq_("./Graph");class Term{constructor(t,e){this.IRI=t,this.graph=e,this.util=_dereq_("./utilities")}getIRI(t=!1){return t?this.IRI:this.util.toAbsoluteIRI(this.IRI,this.graph.context)}getTermType(){throw new Error("must be implemented by subclass!")}getTermObj(){throw new Error("must be implemented by subclass!")}getVocabURLs(){let t=this.getTermObj();return this.util.isNil(t.vocabURLs)?null:t.vocabURLs}getVocabulary(){let t=this.getTermObj();return this.util.isNil(t["schema:isPartOf"])?null:t["schema:isPartOf"]}getSource(){let t=this.getTermObj();return this.util.isNil(t["dc:source"])?this.util.isNil(t["schema:source"])?null:t["schema:source"]:t["dc:source"]}isSupersededBy(){let t=this.getTermObj();return this.util.isString(t["schema:supersededBy"])?t["schema:supersededBy"]:null}getName(t="en"){let e=this.getTermObj()["rdfs:label"];return this.util.isNil(e)||this.util.isNil(e[t])?null:e[t]}getDescription(t="en"){let e=this.getTermObj()["rdfs:comment"];return this.util.isNil(e)||this.util.isNil(e[t])?null:e[t]}toString(){return JSON.stringify(this.toJSON(!1,null),null,2)}toJSON(){const t={};return t.id=this.getIRI(!0),t.IRI=this.getIRI(),t.type=this.getTermType(),t.vocabURLs=this.getVocabURLs(),t.vocabulary=this.getVocabulary(),t.source=this.getSource(),t.supersededBy=this.isSupersededBy(),t.name=this.getName(),t.description=this.getDescription(),t}}module.exports=Term;

},{"./Graph":74,"./utilities":79}],79:[function(_dereq_,module,exports){
const jsonld=_dereq_("jsonld"),Graph=_dereq_("./Graph");function applyFilter(e,s,r){if(!Array.isArray(e)||0===e.length||!s||0===Object.keys(s).length)return e;const t=[],o=r.context;if(isString(s.fromVocabulary)){for(const e of Object.keys(o))if(o[e]===s.fromVocabulary){s.fromVocabulary=e;break}}else if(isArray(s.fromVocabulary))for(let e=0;e<s.fromVocabulary.length;e++)for(let r=0;r<Object.keys(o).length;r++)if(o[Object.keys(o)[r]]===s.fromVocabulary[e]){s.fromVocabulary[e]=Object.keys(o)[r];break}for(let o=0;o<e.length;o++){const c=r.getTerm(e[o]);if(void 0!==s.isSuperseded){if(!1===s.isSuperseded&&null!=c.isSupersededBy())continue;if(!0===s.isSuperseded&&null==c.isSupersededBy())continue}if(s.fromVocabulary){let e=!1;if(isString(s.fromVocabulary))s.fromVocabulary&&c.getIRI(!0).startsWith(s.fromVocabulary)&&(e=!0);else if(isArray(s.fromVocabulary))for(let r=0;r<s.fromVocabulary.length;r++)c.getIRI(!0).startsWith(s.fromVocabulary[r])&&(e=!0);if(!e)continue}if(s.termType){let e=!1,r=[];isString(s.termType)?r.push(s.termType):isArray(s.termType)&&(r=s.termType);for(let s=0;s<r.length;s++){let t;switch(r[s]){case"Class":t="rdfs:Class";break;case"Property":t="rdf:Property";break;case"Enumeration":t="schema:Enumeration";break;case"EnumerationMember":t="soa:EnumerationMember";break;case"DataType":t="schema:DataType";break;default:throw new Error("Invalid filter.termType "+r[s])}if(t===c.getTermType()){e=!0;break}}if(!e)continue}t.push(e[o])}return t}function cloneJson(e){if(void 0!==e)return JSON.parse(JSON.stringify(e))}function isObject(e){return!Array.isArray(e)&&(!isNil(e)&&"object"==typeof e)}function isNil(e){return null==e}function isString(e){return!isNil(e)&&("string"==typeof e||e instanceof String)}function isArray(e){return Array.isArray(e)}function uniquifyArray(e){const s={},r=[];for(const t of e)s[t]||(s[t]=1,r.push(t));return r}function generateContext(e,s){const r=Object.keys(e),t=Object.keys(s);let o=cloneJson(e);for(const e of t)if(isString(s[e])){let t=!1;for(const c of r)if(isString(o[c])&&o[c]===s[e]){t=!0;break}if(t)continue;if(o[e]){if(o[e]!==s[e]){let r=!1,t=1;for(;!1===r;){const c=e+t++;o[c]||(r=!0,o[c]=s[e])}}}else o[e]=s[e]}const c={};Object.keys(o).sort().forEach(function(e){c[e]=o[e]}),o=c;const a=Object.keys(o),n={};for(const e of a)isString(o[e])&&(n[e]=o[e]);for(const e of a)isObject(o[e])&&(n[e]=o[e]);return n}async function preProcessVocab(e,s){let r=!1;do{const s=[];r=!1;for(let t=0;t<e["@graph"].length;t++)void 0!==e["@graph"][t]["@graph"]?(s.push(...cloneJson(e["@graph"][t]["@graph"])),r=!0):s.push(cloneJson(e["@graph"][t]));e["@graph"]=cloneJson(s)}while(!0===r);const t=await jsonld.compact(e,s);return void 0===t["@graph"]?(delete t["@context"],{"@context":s,"@graph":[t]}):t}function curateVocabNode(e,s){if(void 0!==e["rdfs:comment"]){if(isString(e["rdfs:comment"]))e["rdfs:comment"]={en:e["rdfs:comment"]};else if(isObject(e["rdfs:comment"])){const s={};s[e["rdfs:comment"]["@language"]]=e["rdfs:comment"]["@value"],e["rdfs:comment"]=cloneJson(s)}else if(isArray(e["rdfs:comment"])){const s={};for(let r=0;r<e["rdfs:comment"].length;r++)isObject(e["rdfs:comment"][r])&&(s[e["rdfs:comment"][r]["@language"]]=e["rdfs:comment"][r]["@value"]);e["rdfs:comment"]=cloneJson(s)}}else e["rdfs:comment"]={};if(void 0!==e["rdfs:label"]){if(isString(e["rdfs:label"]))e["rdfs:label"]={en:e["rdfs:label"]};else if(isObject(e["rdfs:label"])){const s={};s[e["rdfs:label"]["@language"]]=e["rdfs:label"]["@value"],e["rdfs:label"]=cloneJson(s)}else if(isArray(e["rdfs:label"])){const s={};for(let r=0;r<e["rdfs:label"].length;r++)isObject(e["rdfs:label"][r])&&(s[e["rdfs:label"][r]["@language"]]=e["rdfs:label"][r]["@value"]);e["rdfs:label"]=cloneJson(s)}}else e["rdfs:label"]={};if(isString(e["rdfs:subClassOf"])?e["rdfs:subClassOf"]=[e["rdfs:subClassOf"]]:void 0===e["rdfs:subClassOf"]&&"rdfs:Class"===e["@type"]&&(e["rdfs:subClassOf"]=[]),isString(e["rdfs:subPropertyOf"])?e["rdfs:subPropertyOf"]=[e["rdfs:subPropertyOf"]]:void 0===e["rdfs:subPropertyOf"]&&"rdf:Property"===e["@type"]&&(e["rdfs:subPropertyOf"]=[]),isString(e["schema:domainIncludes"])?e["schema:domainIncludes"]=[e["schema:domainIncludes"]]:void 0===e["schema:domainIncludes"]&&"rdf:Property"===e["@type"]&&(e["schema:domainIncludes"]=[]),isString(e["schema:rangeIncludes"])?e["schema:rangeIncludes"]=[e["schema:rangeIncludes"]]:void 0===e["schema:rangeIncludes"]&&"rdf:Property"===e["@type"]&&(e["schema:rangeIncludes"]=[]),void 0===e["schema:inverseOf"]&&"rdf:Property"===e["@type"]&&(e["schema:inverseOf"]=null),!isString(e["schema:isPartOf"])){const r=Object.keys(s);let t;for(let o=0;o<r.length;o++)if(e["@id"].substring(0,e["@id"].indexOf(":"))===r[o]){t=s[r[o]];break}if(void 0!==t){let s;do{s=!1,(t.endsWith("/")||t.endsWith("#"))&&(t=t.substring(0,t.length-1),s=!0)}while(!0===s);e["schema:isPartOf"]=t}}return e}function toCompactIRI(e,s,r=!1){for(const t of Object.keys(s)){const o=s[t];if(isString(o)&&e.startsWith(o))return t+":"+e.substring(o.length);if(r&&isString(o)){const s=switchIRIProtocol(o);if(e.startsWith(s))return t+":"+e.substring(s.length)}}return null}function toAbsoluteIRI(e,s){const r=Object.keys(s);for(let t=0;t<r.length;t++){const o=s[r[t]];if(e.substring(0,e.indexOf(":"))===r[t])return o.concat(e.substring(e.indexOf(":")+1))}return null}function sortReleaseEntriesByDate(e){return Object.entries(e).sort((e,s)=>new Date(s[1])-new Date(e[1]))}function getFileNameForSchemaOrgVersion(e,s=!0){switch(e){case"2.0":case"2.1":case"2.2":case"3.0":throw new Error("There is no jsonld file for that schema.org version.");case"3.1":case"3.2":case"3.3":case"3.4":case"3.5":case"3.6":case"3.7":case"3.8":case"3.9":case"4.0":case"5.0":case"6.0":case"7.0":case"7.01":case"7.02":case"7.03":case"7.04":case"8.0":return"all-layers.jsonld";case"9.0":default:return s?"schemaorg-all-https.jsonld":"schemaorg-all-http.jsonld"}}function discoverUsedSchemaOrgProtocol(e){const s="https://schema.org/",r="http://schema.org/";if(e["@context"])for(const t of Object.values(e["@context"]))if(isObject(t)&&t["@vocab"]){if(t["@vocab"]===s)return"https";if(t["@vocab"]===r)return"http"}else if(isString(t)){if(t===s)return"https";if(t===r)return"http"}const t=JSON.stringify(e),o=t.split(s).length-1,c=t.split(r).length-1;return o>c?"https":c>o?"http":s}function discoverEquateNamespaces(e,s){let r=new Set,t=[];return Object.values(e).forEach(function(e){isString(e)&&t.push(switchIRIProtocol(e))}),s["@context"]&&Object.values(s["@context"]).forEach(function(e){isString(e)&&t.includes(e)&&r.add(e)}),Array.isArray(s["@graph"])&&s["@graph"].forEach(function(e){checkIfNamespaceFromListIsUsed(e["@id"],t,r),checkIfNamespaceFromListIsUsed(e["@type"],t,r),checkIfNamespaceFromListIsUsed(e["rdfs:subClassOf"],t,r),checkIfNamespaceFromListIsUsed(e["http://www.w3.org/2000/01/rdf-schema#subClassOf"],t,r),checkIfNamespaceFromListIsUsed(e["schema:domainIncludes"],t,r),checkIfNamespaceFromListIsUsed(e["http://schema.org/domainIncludes"],t,r),checkIfNamespaceFromListIsUsed(e["https://schema.org/domainIncludes"],t,r),checkIfNamespaceFromListIsUsed(e["schema:rangeIncludes"],t,r),checkIfNamespaceFromListIsUsed(e["http://schema.org/rangeIncludes"],t,r),checkIfNamespaceFromListIsUsed(e["https://schema.org/rangeIncludes"],t,r),checkIfNamespaceFromListIsUsed(e["rdfs:subPropertyOf"],t,r),checkIfNamespaceFromListIsUsed(e["http://www.w3.org/2000/01/rdf-schema#subPropertyOf"],t,r),checkIfNamespaceFromListIsUsed(e["schema:inverseOf"],t,r),checkIfNamespaceFromListIsUsed(e["http://schema.org/inverseOf"],t,r),checkIfNamespaceFromListIsUsed(e["https://schema.org/inverseOf"],t,r)}),Array.from(r)}function checkIfNamespaceFromListIsUsed(e,s,r){if(Array.isArray(e))e.forEach(function(e){checkIfNamespaceFromListIsUsed(e,s,r)});else{let t;if(isObject(e)&&isString(e["@id"])?t=e["@id"]:isString(e)&&(t=e),isString(t)&&t.startsWith("http")){let e=s.find(e=>t.startsWith(e));e&&!r.has(e)&&r.add(e)}}}function switchIRIProtocol(e){return e.startsWith("https://")?"http"+e.substring(5):e.startsWith("http://")?"https"+e.substring(4):e}module.exports={applyFilter:applyFilter,cloneJson:cloneJson,isArray:isArray,isString:isString,isObject:isObject,isNil:isNil,uniquifyArray:uniquifyArray,preProcessVocab:preProcessVocab,generateContext:generateContext,curateVocabNode:curateVocabNode,toCompactIRI:toCompactIRI,toAbsoluteIRI:toAbsoluteIRI,sortReleaseEntriesByDate:sortReleaseEntriesByDate,getFileNameForSchemaOrgVersion:getFileNameForSchemaOrgVersion,discoverUsedSchemaOrgProtocol:discoverUsedSchemaOrgProtocol,discoverEquateNamespaces:discoverEquateNamespaces,switchIRIProtocol:switchIRIProtocol};

},{"./Graph":74,"jsonld":47}]},{},[77])(77)
});
