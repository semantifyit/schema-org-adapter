(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.SDOAdapter = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(_dereq_,module,exports){
module.exports=_dereq_("./lib/axios");

},{"./lib/axios":3}],2:[function(_dereq_,module,exports){
"use strict";var utils=_dereq_("./../utils"),settle=_dereq_("./../core/settle"),buildURL=_dereq_("./../helpers/buildURL"),buildFullPath=_dereq_("../core/buildFullPath"),parseHeaders=_dereq_("./../helpers/parseHeaders"),isURLSameOrigin=_dereq_("./../helpers/isURLSameOrigin"),createError=_dereq_("../core/createError");module.exports=function(e){return new Promise(function(r,t){var s=e.data,o=e.headers;utils.isFormData(s)&&delete o["Content-Type"];var a=new XMLHttpRequest;if(e.auth){var n=e.auth.username||"",i=e.auth.password||"";o.Authorization="Basic "+btoa(n+":"+i)}var u=buildFullPath(e.baseURL,e.url);if(a.open(e.method.toUpperCase(),buildURL(u,e.params,e.paramsSerializer),!0),a.timeout=e.timeout,a.onreadystatechange=function(){if(a&&4===a.readyState&&(0!==a.status||a.responseURL&&0===a.responseURL.indexOf("file:"))){var s="getAllResponseHeaders"in a?parseHeaders(a.getAllResponseHeaders()):null,o={data:e.responseType&&"text"!==e.responseType?a.response:a.responseText,status:a.status,statusText:a.statusText,headers:s,config:e,request:a};settle(r,t,o),a=null}},a.onabort=function(){a&&(t(createError("Request aborted",e,"ECONNABORTED",a)),a=null)},a.onerror=function(){t(createError("Network Error",e,null,a)),a=null},a.ontimeout=function(){var r="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(r=e.timeoutErrorMessage),t(createError(r,e,"ECONNABORTED",a)),a=null},utils.isStandardBrowserEnv()){var l=_dereq_("./../helpers/cookies"),d=(e.withCredentials||isURLSameOrigin(u))&&e.xsrfCookieName?l.read(e.xsrfCookieName):void 0;d&&(o[e.xsrfHeaderName]=d)}if("setRequestHeader"in a&&utils.forEach(o,function(e,r){void 0===s&&"content-type"===r.toLowerCase()?delete o[r]:a.setRequestHeader(r,e)}),utils.isUndefined(e.withCredentials)||(a.withCredentials=!!e.withCredentials),e.responseType)try{a.responseType=e.responseType}catch(r){if("json"!==e.responseType)throw r}"function"==typeof e.onDownloadProgress&&a.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&a.upload&&a.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){a&&(a.abort(),t(e),a=null)}),void 0===s&&(s=null),a.send(s)})};

},{"../core/buildFullPath":9,"../core/createError":10,"./../core/settle":14,"./../helpers/buildURL":18,"./../helpers/cookies":20,"./../helpers/isURLSameOrigin":22,"./../helpers/parseHeaders":24,"./../utils":26}],3:[function(_dereq_,module,exports){
"use strict";var utils=_dereq_("./utils"),bind=_dereq_("./helpers/bind"),Axios=_dereq_("./core/Axios"),mergeConfig=_dereq_("./core/mergeConfig"),defaults=_dereq_("./defaults");function createInstance(e){var r=new Axios(e),i=bind(Axios.prototype.request,r);return utils.extend(i,Axios.prototype,r),utils.extend(i,r),i}var axios=createInstance(defaults);axios.Axios=Axios,axios.create=function(e){return createInstance(mergeConfig(axios.defaults,e))},axios.Cancel=_dereq_("./cancel/Cancel"),axios.CancelToken=_dereq_("./cancel/CancelToken"),axios.isCancel=_dereq_("./cancel/isCancel"),axios.all=function(e){return Promise.all(e)},axios.spread=_dereq_("./helpers/spread"),module.exports=axios,module.exports.default=axios;

},{"./cancel/Cancel":4,"./cancel/CancelToken":5,"./cancel/isCancel":6,"./core/Axios":7,"./core/mergeConfig":13,"./defaults":16,"./helpers/bind":17,"./helpers/spread":25,"./utils":26}],4:[function(_dereq_,module,exports){
"use strict";function Cancel(e){this.message=e}Cancel.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},Cancel.prototype.__CANCEL__=!0,module.exports=Cancel;

},{}],5:[function(_dereq_,module,exports){
"use strict";var Cancel=_dereq_("./Cancel");function CancelToken(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(e){n=e});var o=this;e(function(e){o.reason||(o.reason=new Cancel(e),n(o.reason))})}CancelToken.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},CancelToken.source=function(){var e;return{token:new CancelToken(function(n){e=n}),cancel:e}},module.exports=CancelToken;

},{"./Cancel":4}],6:[function(_dereq_,module,exports){
"use strict";module.exports=function(t){return!(!t||!t.__CANCEL__)};

},{}],7:[function(_dereq_,module,exports){
"use strict";var utils=_dereq_("./../utils"),buildURL=_dereq_("../helpers/buildURL"),InterceptorManager=_dereq_("./InterceptorManager"),dispatchRequest=_dereq_("./dispatchRequest"),mergeConfig=_dereq_("./mergeConfig");function Axios(e){this.defaults=e,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}Axios.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=mergeConfig(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[dispatchRequest,void 0],r=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)r=r.then(t.shift(),t.shift());return r},Axios.prototype.getUri=function(e){return e=mergeConfig(this.defaults,e),buildURL(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},utils.forEach(["delete","get","head","options"],function(e){Axios.prototype[e]=function(t,r){return this.request(utils.merge(r||{},{method:e,url:t}))}}),utils.forEach(["post","put","patch"],function(e){Axios.prototype[e]=function(t,r,o){return this.request(utils.merge(o||{},{method:e,url:t,data:r}))}}),module.exports=Axios;

},{"../helpers/buildURL":18,"./../utils":26,"./InterceptorManager":8,"./dispatchRequest":11,"./mergeConfig":13}],8:[function(_dereq_,module,exports){
"use strict";var utils=_dereq_("./../utils");function InterceptorManager(){this.handlers=[]}InterceptorManager.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},InterceptorManager.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},InterceptorManager.prototype.forEach=function(e){utils.forEach(this.handlers,function(t){null!==t&&e(t)})},module.exports=InterceptorManager;

},{"./../utils":26}],9:[function(_dereq_,module,exports){
"use strict";var isAbsoluteURL=_dereq_("../helpers/isAbsoluteURL"),combineURLs=_dereq_("../helpers/combineURLs");module.exports=function(e,s){return e&&!isAbsoluteURL(s)?combineURLs(e,s):s};

},{"../helpers/combineURLs":19,"../helpers/isAbsoluteURL":21}],10:[function(_dereq_,module,exports){
"use strict";var enhanceError=_dereq_("./enhanceError");module.exports=function(r,e,n,o,a){var c=new Error(r);return enhanceError(c,e,n,o,a)};

},{"./enhanceError":12}],11:[function(_dereq_,module,exports){
"use strict";var utils=_dereq_("./../utils"),transformData=_dereq_("./transformData"),isCancel=_dereq_("../cancel/isCancel"),defaults=_dereq_("../defaults");function throwIfCancellationRequested(e){e.cancelToken&&e.cancelToken.throwIfRequested()}module.exports=function(e){return throwIfCancellationRequested(e),e.headers=e.headers||{},e.data=transformData(e.data,e.headers,e.transformRequest),e.headers=utils.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),utils.forEach(["delete","get","head","post","put","patch","common"],function(a){delete e.headers[a]}),(e.adapter||defaults.adapter)(e).then(function(a){return throwIfCancellationRequested(e),a.data=transformData(a.data,a.headers,e.transformResponse),a},function(a){return isCancel(a)||(throwIfCancellationRequested(e),a&&a.response&&(a.response.data=transformData(a.response.data,a.response.headers,e.transformResponse))),Promise.reject(a)})};

},{"../cancel/isCancel":6,"../defaults":16,"./../utils":26,"./transformData":15}],12:[function(_dereq_,module,exports){
"use strict";module.exports=function(e,i,s,t,n){return e.config=i,s&&(e.code=s),e.request=t,e.response=n,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e};

},{}],13:[function(_dereq_,module,exports){
"use strict";var utils=_dereq_("../utils");module.exports=function(e,t){t=t||{};var r={},o=["url","method","params","data"],s=["headers","auth","proxy"],i=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];utils.forEach(o,function(e){void 0!==t[e]&&(r[e]=t[e])}),utils.forEach(s,function(o){utils.isObject(t[o])?r[o]=utils.deepMerge(e[o],t[o]):void 0!==t[o]?r[o]=t[o]:utils.isObject(e[o])?r[o]=utils.deepMerge(e[o]):void 0!==e[o]&&(r[o]=e[o])}),utils.forEach(i,function(o){void 0!==t[o]?r[o]=t[o]:void 0!==e[o]&&(r[o]=e[o])});var a=o.concat(s).concat(i),n=Object.keys(t).filter(function(e){return-1===a.indexOf(e)});return utils.forEach(n,function(o){void 0!==t[o]?r[o]=t[o]:void 0!==e[o]&&(r[o]=e[o])}),r};

},{"../utils":26}],14:[function(_dereq_,module,exports){
"use strict";var createError=_dereq_("./createError");module.exports=function(r,t,e){var a=e.config.validateStatus;!a||a(e.status)?r(e):t(createError("Request failed with status code "+e.status,e.config,null,e.request,e))};

},{"./createError":10}],15:[function(_dereq_,module,exports){
"use strict";var utils=_dereq_("./../utils");module.exports=function(t,u,r){return utils.forEach(r,function(r){t=r(t,u)}),t};

},{"./../utils":26}],16:[function(_dereq_,module,exports){
(function (process){
"use strict";var utils=_dereq_("./utils"),normalizeHeaderName=_dereq_("./helpers/normalizeHeaderName"),DEFAULT_CONTENT_TYPE={"Content-Type":"application/x-www-form-urlencoded"};function setContentTypeIfUnset(e,t){!utils.isUndefined(e)&&utils.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function getDefaultAdapter(){var e;return"undefined"!=typeof XMLHttpRequest?e=_dereq_("./adapters/xhr"):"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process)&&(e=_dereq_("./adapters/http")),e}var defaults={adapter:getDefaultAdapter(),transformRequest:[function(e,t){return normalizeHeaderName(t,"Accept"),normalizeHeaderName(t,"Content-Type"),utils.isFormData(e)||utils.isArrayBuffer(e)||utils.isBuffer(e)||utils.isStream(e)||utils.isFile(e)||utils.isBlob(e)?e:utils.isArrayBufferView(e)?e.buffer:utils.isURLSearchParams(e)?(setContentTypeIfUnset(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):utils.isObject(e)?(setContentTypeIfUnset(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};utils.forEach(["delete","get","head"],function(e){defaults.headers[e]={}}),utils.forEach(["post","put","patch"],function(e){defaults.headers[e]=utils.merge(DEFAULT_CONTENT_TYPE)}),module.exports=defaults;

}).call(this,_dereq_('_process'))
},{"./adapters/http":2,"./adapters/xhr":2,"./helpers/normalizeHeaderName":23,"./utils":26,"_process":59}],17:[function(_dereq_,module,exports){
"use strict";module.exports=function(r,n){return function(){for(var t=new Array(arguments.length),e=0;e<t.length;e++)t[e]=arguments[e];return r.apply(n,t)}};

},{}],18:[function(_dereq_,module,exports){
"use strict";var utils=_dereq_("./../utils");function encode(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}module.exports=function(e,i,r){if(!i)return e;var t;if(r)t=r(i);else if(utils.isURLSearchParams(i))t=i.toString();else{var n=[];utils.forEach(i,function(e,i){null!=e&&(utils.isArray(e)?i+="[]":e=[e],utils.forEach(e,function(e){utils.isDate(e)?e=e.toISOString():utils.isObject(e)&&(e=JSON.stringify(e)),n.push(encode(i)+"="+encode(e))}))}),t=n.join("&")}if(t){var c=e.indexOf("#");-1!==c&&(e=e.slice(0,c)),e+=(-1===e.indexOf("?")?"?":"&")+t}return e};

},{"./../utils":26}],19:[function(_dereq_,module,exports){
"use strict";module.exports=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e};

},{}],20:[function(_dereq_,module,exports){
"use strict";var utils=_dereq_("./../utils");module.exports=utils.isStandardBrowserEnv()?{write:function(e,t,n,i,u,o){var r=[];r.push(e+"="+encodeURIComponent(t)),utils.isNumber(n)&&r.push("expires="+new Date(n).toGMTString()),utils.isString(i)&&r.push("path="+i),utils.isString(u)&&r.push("domain="+u),!0===o&&r.push("secure"),document.cookie=r.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};

},{"./../utils":26}],21:[function(_dereq_,module,exports){
"use strict";module.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)};

},{}],22:[function(_dereq_,module,exports){
"use strict";var utils=_dereq_("./../utils");module.exports=utils.isStandardBrowserEnv()?function(){var t,r=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a");function o(t){var o=t;return r&&(e.setAttribute("href",o),o=e.href),e.setAttribute("href",o),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:"/"===e.pathname.charAt(0)?e.pathname:"/"+e.pathname}}return t=o(window.location.href),function(r){var e=utils.isString(r)?o(r):r;return e.protocol===t.protocol&&e.host===t.host}}():function(){return!0};

},{"./../utils":26}],23:[function(_dereq_,module,exports){
"use strict";var utils=_dereq_("../utils");module.exports=function(e,t){utils.forEach(e,function(r,s){s!==t&&s.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[s])})};

},{"../utils":26}],24:[function(_dereq_,module,exports){
"use strict";var utils=_dereq_("./../utils"),ignoreDuplicateOf=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];module.exports=function(t){var e,i,r,o={};return t?(utils.forEach(t.split("\n"),function(t){if(r=t.indexOf(":"),e=utils.trim(t.substr(0,r)).toLowerCase(),i=utils.trim(t.substr(r+1)),e){if(o[e]&&ignoreDuplicateOf.indexOf(e)>=0)return;o[e]="set-cookie"===e?(o[e]?o[e]:[]).concat([i]):o[e]?o[e]+", "+i:i}}),o):o};

},{"./../utils":26}],25:[function(_dereq_,module,exports){
"use strict";module.exports=function(n){return function(t){return n.apply(null,t)}};

},{}],26:[function(_dereq_,module,exports){
"use strict";var bind=_dereq_("./helpers/bind"),toString=Object.prototype.toString;function isArray(r){return"[object Array]"===toString.call(r)}function isUndefined(r){return void 0===r}function isBuffer(r){return null!==r&&!isUndefined(r)&&null!==r.constructor&&!isUndefined(r.constructor)&&"function"==typeof r.constructor.isBuffer&&r.constructor.isBuffer(r)}function isArrayBuffer(r){return"[object ArrayBuffer]"===toString.call(r)}function isFormData(r){return"undefined"!=typeof FormData&&r instanceof FormData}function isArrayBufferView(r){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(r):r&&r.buffer&&r.buffer instanceof ArrayBuffer}function isString(r){return"string"==typeof r}function isNumber(r){return"number"==typeof r}function isObject(r){return null!==r&&"object"==typeof r}function isDate(r){return"[object Date]"===toString.call(r)}function isFile(r){return"[object File]"===toString.call(r)}function isBlob(r){return"[object Blob]"===toString.call(r)}function isFunction(r){return"[object Function]"===toString.call(r)}function isStream(r){return isObject(r)&&isFunction(r.pipe)}function isURLSearchParams(r){return"undefined"!=typeof URLSearchParams&&r instanceof URLSearchParams}function trim(r){return r.replace(/^\s*/,"").replace(/\s*$/,"")}function isStandardBrowserEnv(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)}function forEach(r,e){if(null!=r)if("object"!=typeof r&&(r=[r]),isArray(r))for(var t=0,n=r.length;t<n;t++)e.call(null,r[t],t,r);else for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.call(null,r[i],i,r)}function merge(){var r={};function e(e,t){"object"==typeof r[t]&&"object"==typeof e?r[t]=merge(r[t],e):r[t]=e}for(var t=0,n=arguments.length;t<n;t++)forEach(arguments[t],e);return r}function deepMerge(){var r={};function e(e,t){"object"==typeof r[t]&&"object"==typeof e?r[t]=deepMerge(r[t],e):r[t]="object"==typeof e?deepMerge({},e):e}for(var t=0,n=arguments.length;t<n;t++)forEach(arguments[t],e);return r}function extend(r,e,t){return forEach(e,function(e,n){r[n]=t&&"function"==typeof e?bind(e,t):e}),r}module.exports={isArray:isArray,isArrayBuffer:isArrayBuffer,isBuffer:isBuffer,isFormData:isFormData,isArrayBufferView:isArrayBufferView,isString:isString,isNumber:isNumber,isObject:isObject,isUndefined:isUndefined,isDate:isDate,isFile:isFile,isBlob:isBlob,isFunction:isFunction,isStream:isStream,isURLSearchParams:isURLSearchParams,isStandardBrowserEnv:isStandardBrowserEnv,forEach:forEach,merge:merge,deepMerge:deepMerge,extend:extend,trim:trim};

},{"./helpers/bind":17}],27:[function(_dereq_,module,exports){

},{}],28:[function(_dereq_,module,exports){
"use strict";module.exports=function(r){return function r(t){if(null===t||"object"!=typeof t||null!=t.toJSON)return JSON.stringify(t);if(Array.isArray(t)&&0===t.length)return"[]";if(Array.isArray(t)&&1===t.length)return"["+r(t[0])+"]";if(Array.isArray(t))return"["+t.reduce((t,e,n)=>(t=1===n?r(t):t)+","+r(e))+"]";const e=Object.keys(t);if(0===e.length)return"{}";if(1===e.length)return"{"+r(e[0])+":"+r(t[e[0]])+"}";return"{"+e.sort().reduce((e,n,u)=>(e=1===u?r(e)+":"+r(t[e]):e)+","+r(n)+":"+r(t[n]))+"}"}(r)};

},{}],29:[function(_dereq_,module,exports){
"use strict";const{isArray:_isArray,isObject:_isObject,isString:_isString}=_dereq_("./types"),{asArray:_asArray}=_dereq_("./util"),{prependBase:prependBase}=_dereq_("./url"),JsonLdError=_dereq_("./JsonLdError"),ResolvedContext=_dereq_("./ResolvedContext"),MAX_CONTEXT_URLS=10;function _throwInvalidLocalContext(e){throw new JsonLdError("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:e})}function _resolveContextUrls({context:e,base:t}){if(!e)return;const o=e["@context"];if(_isString(o))e["@context"]=prependBase(t,o);else if(_isArray(o))for(let e=0;e<o.length;++e){const r=o[e];_isString(r)?o[e]=prependBase(t,r):_isObject(r)&&_resolveContextUrls({context:{"@context":r},base:t})}else if(_isObject(o))for(const e in o)_resolveContextUrls({context:o[e],base:t})}module.exports=class{constructor({sharedCache:e}){this.perOpCache=new Map,this.sharedCache=e}async resolve({activeCtx:e,context:t,documentLoader:o,base:r,cycles:n=new Set}){t&&_isObject(t)&&t["@context"]&&(t=t["@context"]),t=_asArray(t);const s=[];for(const c of t){if(_isString(c)){let t=this._get(c);t||(t=await this._resolveRemoteContext({activeCtx:e,url:c,documentLoader:o,base:r,cycles:n})),_isArray(t)?s.push(...t):s.push(t);continue}if(null===c){s.push(new ResolvedContext({document:null}));continue}_isObject(c)||_throwInvalidLocalContext(t);const a=JSON.stringify(c);let i=this._get(a);i||(i=new ResolvedContext({document:c}),this._cacheResolvedContext({key:a,resolved:i,tag:"static"})),s.push(i)}return s}_get(e){let t=this.perOpCache.get(e);if(!t){const o=this.sharedCache.get(e);o&&(t=o.get("static"))&&this.perOpCache.set(e,t)}return t}_cacheResolvedContext({key:e,resolved:t,tag:o}){if(this.perOpCache.set(e,t),void 0!==o){let r=this.sharedCache.get(e);r||(r=new Map,this.sharedCache.set(e,r)),r.set(o,t)}return t}async _resolveRemoteContext({activeCtx:e,url:t,documentLoader:o,base:r,cycles:n}){t=prependBase(r,t);const{context:s,remoteDoc:c}=await this._fetchContext({activeCtx:e,url:t,documentLoader:o,cycles:n});_resolveContextUrls({context:s,base:r=c.documentUrl||t});const a=await this.resolve({activeCtx:e,context:s,documentLoader:o,base:r,cycles:n});return this._cacheResolvedContext({key:t,resolved:a,tag:c.tag}),a}async _fetchContext({activeCtx:e,url:t,documentLoader:o,cycles:r}){if(r.size>10)throw new JsonLdError("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"json-ld-1.0"===e.processingMode?"loading remote context failed":"context overflow",max:10});if(r.has(t))throw new JsonLdError("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"json-ld-1.0"===e.processingMode?"recursive context inclusion":"context overflow",url:t});let n,s;r.add(t);try{n=(s=await o(t)).document||null,_isString(n)&&(n=JSON.parse(n))}catch(e){throw new JsonLdError("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:t,cause:e})}if(!_isObject(n))throw new JsonLdError("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:t});return n="@context"in n?{"@context":n["@context"]}:{"@context":{}},s.contextUrl&&(_isArray(n["@context"])||(n["@context"]=[n["@context"]]),n["@context"].push(s.contextUrl)),{context:n,remoteDoc:s}}};

},{"./JsonLdError":30,"./ResolvedContext":35,"./types":49,"./url":50,"./util":51}],30:[function(_dereq_,module,exports){
"use strict";module.exports=class extends Error{constructor(r="An unspecified JSON-LD error occurred.",s="jsonld.Error",e={}){super(r),this.name=s,this.message=r,this.details=e}};

},{}],31:[function(_dereq_,module,exports){
"use strict";module.exports=(e=>{class t{toString(){return"[object JsonLdProcessor]"}}return Object.defineProperty(t,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(t.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:t}),t.compact=function(t,r){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):e.compact(t,r)},t.expand=function(t){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):e.expand(t)},t.flatten=function(t){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):e.flatten(t)},t});

},{}],32:[function(_dereq_,module,exports){
"use strict";module.exports=_dereq_("rdf-canonize").NQuads;

},{"rdf-canonize":69}],33:[function(_dereq_,module,exports){
"use strict";const{RDF_LANGSTRING:RDF_LANGSTRING,RDF_PLAIN_LITERAL:RDF_PLAIN_LITERAL,RDF_OBJECT:RDF_OBJECT,RDF_XML_LITERAL:RDF_XML_LITERAL,XSD_STRING:XSD_STRING}=_dereq_("./constants");let _Node;function getXMLSerializerClass(){return"undefined"==typeof XMLSerializer?_dereq_("xmldom").XMLSerializer:XMLSerializer}_Node="undefined"!=typeof Node?Node:{ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12},module.exports=class{parse(e){const t={"@default":[]},N=e.getSubjects();for(let l=0;l<N.length;++l){const _=N[l];if(null===_)continue;const n=e.getSubjectTriples(_);if(null===n)continue;const E=n.predicates;for(const e in E){const N=E[e].objects;for(let l=0;l<N.length;++l){const n=N[l],E={};0===_.indexOf("_:")?E.subject={type:"blank node",value:_}:E.subject={type:"IRI",value:_},0===e.indexOf("_:")?E.predicate={type:"blank node",value:e}:E.predicate={type:"IRI",value:e};let a=n.value;if(n.type===RDF_XML_LITERAL){const e=new(getXMLSerializerClass());a="";for(let t=0;t<n.value.length;t++)n.value[t].nodeType===_Node.ELEMENT_NODE?a+=e.serializeToString(n.value[t]):n.value[t].nodeType===_Node.TEXT_NODE&&(a+=n.value[t].nodeValue)}E.object={},n.type===RDF_OBJECT?0===n.value.indexOf("_:")?E.object.type="blank node":E.object.type="IRI":(E.object.type="literal",n.type===RDF_PLAIN_LITERAL?n.language?(E.object.datatype=RDF_LANGSTRING,E.object.language=n.language):E.object.datatype=XSD_STRING:E.object.datatype=n.type),E.object.value=a,t["@default"].push(E)}}}return t}};

},{"./constants":37,"xmldom":27}],34:[function(_dereq_,module,exports){
"use strict";module.exports=class{constructor(){this._requests={}}wrapLoader(e){const t=this;return t._loader=e,function(){return t.add.apply(t,arguments)}}async add(e){let t=this._requests[e];if(t)return Promise.resolve(t);t=this._requests[e]=this._loader(e);try{return await t}finally{delete this._requests[e]}}};

},{}],35:[function(_dereq_,module,exports){
"use strict";const LRU=_dereq_("lru-cache"),MAX_ACTIVE_CONTEXTS=10;module.exports=class{constructor({document:e}){this.document=e,this.cache=new LRU({max:10})}getProcessed(e){return this.cache.get(e)}setProcessed(e,c){this.cache.set(e,c)}};

},{"lru-cache":52}],36:[function(_dereq_,module,exports){
"use strict";const JsonLdError=_dereq_("./JsonLdError"),{isArray:_isArray,isObject:_isObject,isString:_isString,isUndefined:_isUndefined}=_dereq_("./types"),{isList:_isList,isValue:_isValue,isGraph:_isGraph,isSimpleGraph:_isSimpleGraph,isSubjectReference:_isSubjectReference}=_dereq_("./graphTypes"),{expandIri:_expandIri,getContextValue:_getContextValue,isKeyword:_isKeyword,process:_processContext,processingMode:_processingMode}=_dereq_("./context"),{removeBase:_removeBase,prependBase:_prependBase}=_dereq_("./url"),{addValue:_addValue,asArray:_asArray,compareShortestLeast:_compareShortestLeast}=_dereq_("./util"),api={};function _selectTerm(e,i,t,a,n,r){null===r&&(r="@null");const o=[];if(("@id"===r||"@reverse"===r)&&_isObject(t)&&"@id"in t){"@reverse"===r&&o.push("@reverse");const i=api.compactIri({activeCtx:e,iri:t["@id"],relativeTo:{vocab:!0}});e.mappings.has(i)&&e.mappings.get(i)&&e.mappings.get(i)["@id"]===t["@id"]?o.push.apply(o,["@vocab","@id"]):o.push.apply(o,["@id","@vocab"])}else{o.push(r);const e=o.find(e=>e.includes("_"));e&&o.push(e.replace(/^[^_]+_/,"_"))}o.push("@none");const s=e.inverse[i];for(const e of a){if(!(e in s))continue;const i=s[e][n];for(const e of o)if(e in i)return i[e]}return null}function _checkNestProperty(e,i,t){if("@nest"!==_expandIri(e,i,{vocab:!0},t))throw new JsonLdError("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}module.exports=api,api.compact=(async({activeCtx:e,activeProperty:i=null,element:t,options:a={},compactionMap:n=(()=>void 0)})=>{if(_isArray(t)){let r=[];for(let o=0;o<t.length;++o){let s=await api.compact({activeCtx:e,activeProperty:i,element:t[o],options:a,compactionMap:n});null===s&&void 0===(s=await n({unmappedValue:t[o],activeCtx:e,activeProperty:i,parent:t,index:o,options:a}))||r.push(s)}if(a.compactArrays&&1===r.length){0===(_getContextValue(e,i,"@container")||[]).length&&(r=r[0])}return r}const r=_getContextValue(e,i,"@context");if(_isUndefined(r)||(e=await _processContext({activeCtx:e,localCtx:r,propagate:!0,overrideProtected:!0,options:a})),_isObject(t)){if(a.link&&"@id"in t&&a.link.hasOwnProperty(t["@id"])){const e=a.link[t["@id"]];for(let i=0;i<e.length;++i)if(e[i].expanded===t)return e[i].compacted}if(_isValue(t)||_isSubjectReference(t)){const n=api.compactValue({activeCtx:e,activeProperty:i,value:t,options:a});return a.link&&_isSubjectReference(t)&&(a.link.hasOwnProperty(t["@id"])||(a.link[t["@id"]]=[]),a.link[t["@id"]].push({expanded:t,compacted:n})),n}if(_isList(t)){if((_getContextValue(e,i,"@container")||[]).includes("@list"))return api.compact({activeCtx:e,activeProperty:i,element:t["@list"],options:a,compactionMap:n})}const r="@reverse"===i,o={},s=e;_isValue(t)||_isSubjectReference(t)||(e=e.revertToPreviousContext());const c=_getContextValue(s,i,"@context");_isUndefined(c)||(e=await _processContext({activeCtx:e,localCtx:c,propagate:!0,overrideProtected:!0,options:a})),a.link&&"@id"in t&&(a.link.hasOwnProperty(t["@id"])||(a.link[t["@id"]]=[]),a.link[t["@id"]].push({expanded:t,compacted:o}));let l=t["@type"]||[];l.length>1&&(l=Array.from(l).sort());const p=e;for(const i of l){const t=api.compactIri({activeCtx:p,iri:i,relativeTo:{vocab:!0}}),n=_getContextValue(s,t,"@context");_isUndefined(n)||(e=await _processContext({activeCtx:e,localCtx:n,options:a,propagate:!1}))}const d=Object.keys(t).sort();for(const c of d){const l=t[c];if("@id"!==c)if("@type"!==c)if("@reverse"!==c)if("@preserve"!==c)if("@index"!==c)if("@graph"!==c&&"@list"!==c&&"@included"!==c&&_isKeyword(c)){const i=api.compactIri({activeCtx:e,iri:c,relativeTo:{vocab:!0}});_addValue(o,i,l)}else{if(!_isArray(l))throw new JsonLdError("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");if(0===l.length){const i=api.compactIri({activeCtx:e,iri:c,value:l,relativeTo:{vocab:!0},reverse:r}),t=e.mappings.has(i)?e.mappings.get(i)["@nest"]:null;let n=o;t&&(_checkNestProperty(e,t,a),_isObject(o[t])||(o[t]={}),n=o[t]),_addValue(n,i,l,{propertyIsArray:!0})}for(const i of l){const t=api.compactIri({activeCtx:e,iri:c,value:i,relativeTo:{vocab:!0},reverse:r}),s=e.mappings.has(t)?e.mappings.get(t)["@nest"]:null;let l=o;s&&(_checkNestProperty(e,s,a),_isObject(o[s])||(o[s]={}),l=o[s]);const p=_getContextValue(e,t,"@container")||[],d=_isGraph(i),u=_isList(i);let v;u?v=i["@list"]:d&&(v=i["@graph"]);let g=await api.compact({activeCtx:e,activeProperty:t,element:u||d?v:i,options:a,compactionMap:n});if(u){if(_isArray(g)||(g=[g]),p.includes("@list")){_addValue(l,t,g,{valueIsArray:!0,allowDuplicate:!0});continue}g={[api.compactIri({activeCtx:e,iri:"@list",relativeTo:{vocab:!0}})]:g},"@index"in i&&(g[api.compactIri({activeCtx:e,iri:"@index",relativeTo:{vocab:!0}})]=i["@index"])}if(d)if(p.includes("@graph")&&(p.includes("@id")||p.includes("@index")&&_isSimpleGraph(i))){let n;l.hasOwnProperty(t)?n=l[t]:l[t]=n={};const r=(p.includes("@id")?i["@id"]:i["@index"])||api.compactIri({activeCtx:e,iri:"@none",relativeTo:{vocab:!0}});_addValue(n,r,g,{propertyIsArray:!a.compactArrays||p.includes("@set")})}else p.includes("@graph")&&_isSimpleGraph(i)?(_isArray(g)&&g.length>1&&(g={"@included":g}),_addValue(l,t,g,{propertyIsArray:!a.compactArrays||p.includes("@set")})):(_isArray(g)&&1===g.length&&a.compactArrays&&(g=g[0]),g={[api.compactIri({activeCtx:e,iri:"@graph",relativeTo:{vocab:!0}})]:g},"@id"in i&&(g[api.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}})]=i["@id"]),"@index"in i&&(g[api.compactIri({activeCtx:e,iri:"@index",relativeTo:{vocab:!0}})]=i["@index"]),_addValue(l,t,g,{propertyIsArray:!a.compactArrays||p.includes("@set")}));else if(p.includes("@language")||p.includes("@index")||p.includes("@id")||p.includes("@type")){let r,o;if(l.hasOwnProperty(t)?r=l[t]:l[t]=r={},p.includes("@language"))_isValue(g)&&(g=g["@value"]),o=i["@language"];else if(p.includes("@index")){const a=_getContextValue(e,t,"@index")||"@index",n=api.compactIri({activeCtx:e,iri:a,relativeTo:{vocab:!0}});if("@index"===a)o=i["@index"],delete g[n];else{let e;if([o,...e]=_asArray(g[a]||[]),_isString(o))switch(e.length){case 0:delete g[a];break;case 1:g[a]=e[0];break;default:g[a]=e}else o=null}}else if(p.includes("@id")){const i=api.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}});o=g[i],delete g[i]}else if(p.includes("@type")){const r=api.compactIri({activeCtx:e,iri:"@type",relativeTo:{vocab:!0}});let s;switch([o,...s]=_asArray(g[r]||[]),s.length){case 0:delete g[r];break;case 1:g[r]=s[0];break;default:g[r]=s}1===Object.keys(g).length&&"@id"in i&&(g=await api.compact({activeCtx:e,activeProperty:t,element:{"@id":i["@id"]},options:a,compactionMap:n}))}o||(o=api.compactIri({activeCtx:e,iri:"@none",relativeTo:{vocab:!0}})),_addValue(r,o,g,{propertyIsArray:p.includes("@set")})}else{const e=!a.compactArrays||p.includes("@set")||p.includes("@list")||_isArray(g)&&0===g.length||"@list"===c||"@graph"===c;_addValue(l,t,g,{propertyIsArray:e})}}}else{if((_getContextValue(e,i,"@container")||[]).includes("@index"))continue;const t=api.compactIri({activeCtx:e,iri:c,relativeTo:{vocab:!0}});_addValue(o,t,l)}else{const t=await api.compact({activeCtx:e,activeProperty:i,element:l,options:a,compactionMap:n});_isArray(t)&&0===t.length||_addValue(o,c,t)}else{const i=await api.compact({activeCtx:e,activeProperty:"@reverse",element:l,options:a,compactionMap:n});for(const t in i)if(e.mappings.has(t)&&e.mappings.get(t).reverse){const n=i[t],r=(_getContextValue(e,t,"@container")||[]).includes("@set")||!a.compactArrays;_addValue(o,t,n,{propertyIsArray:r}),delete i[t]}if(Object.keys(i).length>0){const t=api.compactIri({activeCtx:e,iri:c,relativeTo:{vocab:!0}});_addValue(o,t,i)}}else{let i=_asArray(l).map(e=>api.compactIri({activeCtx:s,iri:e,relativeTo:{vocab:!0}}));1===i.length&&(i=i[0]);const t=api.compactIri({activeCtx:e,iri:"@type",relativeTo:{vocab:!0}}),a=(_getContextValue(e,t,"@container")||[]).includes("@set")&&_processingMode(e,1.1)||_isArray(i)&&0===l.length;_addValue(o,t,i,{propertyIsArray:a})}else{let i=_asArray(l).map(i=>api.compactIri({activeCtx:e,iri:i,relativeTo:{vocab:!1},base:a.base}));1===i.length&&(i=i[0]),o[api.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}})]=i}}return o}return t}),api.compactIri=(({activeCtx:e,iri:i,value:t=null,relativeTo:a={vocab:!1},reverse:n=!1,base:r=null})=>{if(null===i)return i;e.isPropertyTermScoped&&e.previousContext&&(e=e.previousContext);const o=e.getInverse();if(_isKeyword(i)&&i in o&&"@none"in o[i]&&"@type"in o[i]["@none"]&&"@none"in o[i]["@none"]["@type"])return o[i]["@none"]["@type"]["@none"];if(a.vocab&&i in o){const a=e["@language"]||"@none",r=[];_isObject(t)&&"@index"in t&&!("@graph"in t)&&r.push("@index","@index@set"),_isObject(t)&&"@preserve"in t&&(t=t["@preserve"][0]),_isGraph(t)?("@index"in t&&r.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in t&&r.push("@graph@id","@graph@id@set"),r.push("@graph","@graph@set","@set"),"@index"in t||r.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in t||r.push("@graph@id","@graph@id@set")):_isObject(t)&&!_isValue(t)&&r.push("@id","@id@set","@type","@set@type");let o="@language",s="@null";if(n)o="@type",s="@reverse",r.push("@set");else if(_isList(t)){"@index"in t||r.push("@list");const e=t["@list"];if(0===e.length)o="@any",s="@none";else{let i=0===e.length?a:null,t=null;for(let a=0;a<e.length;++a){const n=e[a];let r="@none",o="@none";if(_isValue(n))if("@direction"in n){r=`${(n["@language"]||"").toLowerCase()}_${n["@direction"]}`}else"@language"in n?r=n["@language"].toLowerCase():"@type"in n?o=n["@type"]:r="@null";else o="@id";if(null===i?i=r:r!==i&&_isValue(n)&&(i="@none"),null===t?t=o:o!==t&&(t="@none"),"@none"===i&&"@none"===t)break}i=i||"@none","@none"!==(t=t||"@none")?(o="@type",s=t):s=i}}else{if(_isValue(t))if("@language"in t&&!("@index"in t)){r.push("@language","@language@set"),s=t["@language"];const e=t["@direction"];e&&(s=`${s}_${e}`)}else"@direction"in t&&!("@index"in t)?s=`_${t["@direction"]}`:"@type"in t&&(o="@type",s=t["@type"]);else o="@type",s="@id";r.push("@set")}r.push("@none"),!_isObject(t)||"@index"in t||r.push("@index","@index@set"),_isValue(t)&&1===Object.keys(t).length&&r.push("@language","@language@set");const c=_selectTerm(e,i,t,r,o,s);if(null!==c)return c}if(a.vocab&&"@vocab"in e){const t=e["@vocab"];if(0===i.indexOf(t)&&i!==t){const a=i.substr(t.length);if(!e.mappings.has(a))return a}}let s=null;const c=[];let l=e.fastCurieMap;const p=i.length-1;for(let e=0;e<p&&i[e]in l;++e)""in(l=l[i[e]])&&c.push(l[""][0]);for(let a=c.length-1;a>=0;--a){const n=c[a],r=n.terms;for(const a of r){const r=a+":"+i.substr(n.iri.length);e.mappings.get(a)._prefix&&(!e.mappings.has(r)||null===t&&e.mappings.get(r)["@id"]===i)&&(null===s||_compareShortestLeast(r,s)<0)&&(s=r)}}if(null!==s)return s;for(const[t,a]of e.mappings)if(a&&a._prefix&&i.startsWith(t+":"))throw new JsonLdError(`Absolute IRI "${i}" confused with prefix "${t}".`,"jsonld.SyntaxError",{code:"IRI confused with prefix",context:e});return a.vocab?i:"@base"in e?e["@base"]?_removeBase(_prependBase(r,e["@base"]),i):i:_removeBase(r,i)}),api.compactValue=(({activeCtx:e,activeProperty:i,value:t,options:a})=>{if(_isValue(t)){const a=_getContextValue(e,i,"@type"),n=_getContextValue(e,i,"@language"),r=_getContextValue(e,i,"@direction"),o=_getContextValue(e,i,"@container")||[],s="@index"in t&&!o.includes("@index");if(!s&&"@none"!==a){if(t["@type"]===a)return t["@value"];if("@language"in t&&t["@language"]===n&&"@direction"in t&&t["@direction"]===r)return t["@value"];if("@language"in t&&t["@language"]===n)return t["@value"];if("@direction"in t&&t["@direction"]===r)return t["@value"]}const c=Object.keys(t).length,l=1===c||2===c&&"@index"in t&&!s,p="@language"in e,d=_isString(t["@value"]),u=e.mappings.has(i)&&null===e.mappings.get(i)["@language"];if(l&&"@none"!==a&&(!p||!d||u))return t["@value"];const v={};return s&&(v[api.compactIri({activeCtx:e,iri:"@index",relativeTo:{vocab:!0}})]=t["@index"]),"@type"in t?v[api.compactIri({activeCtx:e,iri:"@type",relativeTo:{vocab:!0}})]=api.compactIri({activeCtx:e,iri:t["@type"],relativeTo:{vocab:!0}}):"@language"in t&&(v[api.compactIri({activeCtx:e,iri:"@language",relativeTo:{vocab:!0}})]=t["@language"]),"@direction"in t&&(v[api.compactIri({activeCtx:e,iri:"@direction",relativeTo:{vocab:!0}})]=t["@direction"]),v[api.compactIri({activeCtx:e,iri:"@value",relativeTo:{vocab:!0}})]=t["@value"],v}const n=_expandIri(e,i,{vocab:!0},a),r=_getContextValue(e,i,"@type"),o=api.compactIri({activeCtx:e,iri:t["@id"],relativeTo:{vocab:"@vocab"===r},base:a.base});return"@id"===r||"@vocab"===r||"@graph"===n?o:{[api.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}})]:o}});

},{"./JsonLdError":30,"./context":38,"./graphTypes":45,"./types":49,"./url":50,"./util":51}],37:[function(_dereq_,module,exports){
"use strict";const RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",XSD="http://www.w3.org/2001/XMLSchema#";module.exports={LINK_HEADER_REL:"http://www.w3.org/ns/json-ld#context",LINK_HEADER_CONTEXT:"http://www.w3.org/ns/json-ld#context",RDF:RDF,RDF_LIST:RDF+"List",RDF_FIRST:RDF+"first",RDF_REST:RDF+"rest",RDF_NIL:RDF+"nil",RDF_TYPE:RDF+"type",RDF_PLAIN_LITERAL:RDF+"PlainLiteral",RDF_XML_LITERAL:RDF+"XMLLiteral",RDF_JSON_LITERAL:RDF+"JSON",RDF_OBJECT:RDF+"object",RDF_LANGSTRING:RDF+"langString",XSD:XSD,XSD_BOOLEAN:XSD+"boolean",XSD_DOUBLE:XSD+"double",XSD_INTEGER:XSD+"integer",XSD_STRING:XSD+"string"};

},{}],38:[function(_dereq_,module,exports){
"use strict";const util=_dereq_("./util"),JsonLdError=_dereq_("./JsonLdError"),{isArray:_isArray,isObject:_isObject,isString:_isString,isUndefined:_isUndefined}=_dereq_("./types"),{isAbsolute:_isAbsoluteIri,isRelative:_isRelativeIri,prependBase:prependBase,parse:parseUrl}=_dereq_("./url"),{asArray:_asArray,compareShortestLeast:_compareShortestLeast}=_dereq_("./util"),INITIAL_CONTEXT_CACHE=new Map,INITIAL_CONTEXT_CACHE_MAX_SIZE=1e4,KEYWORD_PATTERN=/^@[a-zA-Z]+$/,api={};function _expandIri(e,n,t,o,r,i){if(null===n||!_isString(n)||api.isKeyword(n))return n;if(n.match(KEYWORD_PATTERN))return null;if(o&&o.hasOwnProperty(n)&&!0!==r.get(n)&&api.createTermDefinition({activeCtx:e,localCtx:o,term:n,defined:r,options:i}),(t=t||{}).vocab){const t=e.mappings.get(n);if(null===t)return null;if(_isObject(t)&&"@id"in t)return t["@id"]}const s=n.indexOf(":");if(s>0){const t=n.substr(0,s),a=n.substr(s+1);if("_"===t||0===a.indexOf("//"))return n;o&&o.hasOwnProperty(t)&&api.createTermDefinition({activeCtx:e,localCtx:o,term:t,defined:r,options:i});const d=e.mappings.get(t);if(d&&d._prefix)return d["@id"]+a;if(_isAbsoluteIri(n))return n}if(t.vocab&&"@vocab"in e)return e["@vocab"]+n;if(t.base&&"@base"in e){if(e["@base"])return prependBase(prependBase(i.base,e["@base"]),n)}else if(t.base)return prependBase(i.base,n);return n}function _deepCompare(e,n){if(!e||"object"!=typeof e||!n||"object"!=typeof n)return e===n;const t=Array.isArray(e);if(t!==Array.isArray(n))return!1;if(t){if(e.length!==n.length)return!1;for(let t=0;t<e.length;++t)if(!_deepCompare(e[t],n[t]))return!1;return!0}const o=Object.keys(e),r=Object.keys(n);if(o.length!==r.length)return!1;for(const t in e){let o=e[t],r=n[t];if("@container"===t&&Array.isArray(o)&&Array.isArray(r)&&(o=o.slice().sort(),r=r.slice().sort()),!_deepCompare(o,r))return!1}return!0}module.exports=api,api.process=(async({activeCtx:e,localCtx:n,options:t,propagate:o=!0,overrideProtected:r=!1,cycles:i=new Set})=>{if(_isObject(n)&&"@context"in n&&_isArray(n["@context"])&&(n=n["@context"]),0===_asArray(n).length)return e;const s=await t.contextResolver.resolve({activeCtx:e,context:n,documentLoader:t.documentLoader,base:t.base});_isObject(s[0].document)&&"boolean"==typeof s[0].document["@propagate"]&&(o=s[0].document["@propagate"]);let a=e;o||a.previousContext||((a=a.clone()).previousContext=e);for(const o of s){let{document:s}=o;if(e=a,null===s){if(!r&&0!==Object.keys(e.protected).length){const r=t&&t.protectedMode||"error";if("error"===r)throw new JsonLdError("Tried to nullify a context with protected terms outside of a term definition.","jsonld.SyntaxError",{code:"invalid context nullification"});if("warn"===r){console.warn("WARNING: invalid context nullification");const n=o.getProcessed(e);if(n){a=e=n;continue}const r=e;a=e=api.getInitialContext(t).clone();for(const[n,t]of Object.entries(r.protected))t&&(e.mappings[n]=util.clone(r.mappings[n]));e.protected=util.clone(r.protected),o.setProcessed(r,a);continue}throw new JsonLdError("Invalid protectedMode.","jsonld.SyntaxError",{code:"invalid protected mode",context:n,protectedMode:r})}a=e=api.getInitialContext(t).clone();continue}const d=o.getProcessed(e);if(d){a=e=d;continue}if(_isObject(s)&&"@context"in s&&(s=s["@context"]),!_isObject(s))throw new JsonLdError("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:s});a=a.clone();const c=new Map;if("@version"in s){if(1.1!==s["@version"])throw new JsonLdError("Unsupported JSON-LD version: "+s["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:s});if(e.processingMode&&"json-ld-1.0"===e.processingMode)throw new JsonLdError("@version: "+s["@version"]+" not compatible with "+e.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:s});a.processingMode="json-ld-1.1",a["@version"]=s["@version"],c.set("@version",!0)}if(a.processingMode=a.processingMode||e.processingMode,"@base"in s){let e=s["@base"];if(null===e||_isAbsoluteIri(e));else{if(!_isRelativeIri(e))throw new JsonLdError('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:s});e=prependBase(a["@base"],e)}a["@base"]=e,c.set("@base",!0)}if("@vocab"in s){const e=s["@vocab"];if(null===e)delete a["@vocab"];else{if(!_isString(e))throw new JsonLdError('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:s});if(!_isAbsoluteIri(e)&&api.processingMode(a,1))throw new JsonLdError('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:s});a["@vocab"]=_expandIri(a,e,{vocab:!0,base:!0},void 0,void 0,t)}c.set("@vocab",!0)}if("@language"in s){const e=s["@language"];if(null===e)delete a["@language"];else{if(!_isString(e))throw new JsonLdError('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:s});a["@language"]=e.toLowerCase()}c.set("@language",!0)}if("@direction"in s){const n=s["@direction"];if("json-ld-1.0"===e.processingMode)throw new JsonLdError("Invalid JSON-LD syntax; @direction not compatible with "+e.processingMode,"jsonld.SyntaxError",{code:"invalid context member",context:s});if(null===n)delete a["@direction"];else{if("ltr"!==n&&"rtl"!==n)throw new JsonLdError('Invalid JSON-LD syntax; the value of "@direction" in a @context must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:s});a["@direction"]=n}c.set("@direction",!0)}if("@propagate"in s){const t=s["@propagate"];if("json-ld-1.0"===e.processingMode)throw new JsonLdError("Invalid JSON-LD syntax; @propagate not compatible with "+e.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:s});if("boolean"!=typeof t)throw new JsonLdError("Invalid JSON-LD syntax; @propagate value must be a boolean.","jsonld.SyntaxError",{code:"invalid @propagate value",context:n});c.set("@propagate",!0)}if("@import"in s){const o=s["@import"];if("json-ld-1.0"===e.processingMode)throw new JsonLdError("Invalid JSON-LD syntax; @import not compatible with "+e.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:s});if(!_isString(o))throw new JsonLdError("Invalid JSON-LD syntax; @import must be a string.","jsonld.SyntaxError",{code:"invalid @import value",context:n});const r=await t.contextResolver.resolve({activeCtx:e,context:o,documentLoader:t.documentLoader,base:t.base});if(1!==r.length)throw new JsonLdError("Invalid JSON-LD syntax; @import must reference a single context.","jsonld.SyntaxError",{code:"invalid remote context",context:n});const i=r[0].getProcessed(e);if(i)s=i;else{const t=r[0].document;if("@import"in t)throw new JsonLdError("Invalid JSON-LD syntax: imported context must not include @import.","jsonld.SyntaxError",{code:"invalid context entry",context:n});for(const e in t)s.hasOwnProperty(e)||(s[e]=t[e]);r[0].setProcessed(e,s)}c.set("@import",!0)}c.set("@protected",s["@protected"]||!1);for(const e in s)if(api.createTermDefinition({activeCtx:a,localCtx:s,term:e,defined:c,options:t,overrideProtected:r}),_isObject(s[e])&&"@context"in s[e]){const n=s[e]["@context"];let o=!0;if(_isString(n)){const e=prependBase(t.base,n);i.has(e)?o=!1:i.add(e)}if(o)try{await api.process({activeCtx:a,localCtx:s[e]["@context"],overrideProtected:!0,options:t,cycles:i})}catch(n){throw new JsonLdError("Invalid JSON-LD syntax; invalid scoped context.","jsonld.SyntaxError",{code:"invalid scoped context",context:s[e]["@context"],term:e})}}o.setProcessed(e,a)}return a}),api.createTermDefinition=(({activeCtx:e,localCtx:n,term:t,defined:o,options:r,overrideProtected:i=!1})=>{if(o.has(t)){if(o.get(t))return;throw new JsonLdError("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:n,term:t})}let s;if(o.set(t,!1),n.hasOwnProperty(t)&&(s=n[t]),"@type"===t&&_isObject(s)&&"@set"===(s["@container"]||"@set")&&api.processingMode(e,1.1)){const e=["@container","@id","@protected"],o=Object.keys(s);if(0===o.length||o.some(n=>!e.includes(n)))throw new JsonLdError("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:n,term:t})}else{if(api.isKeyword(t))throw new JsonLdError("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:n,term:t});if(t.match(KEYWORD_PATTERN))return void console.warn('WARNING: terms beginning with "@" are reserved for future use and ignored',{term:t});if(""===t)throw new JsonLdError("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:n})}const a=e.mappings.get(t);e.mappings.has(t)&&e.mappings.delete(t);let d=!1;if((_isString(s)||null===s)&&(d=!0,s={"@id":s}),!_isObject(s))throw new JsonLdError("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:n});const c={};e.mappings.set(t,c),c.reverse=!1;const l=["@container","@id","@language","@reverse","@type"];api.processingMode(e,1.1)&&l.push("@context","@direction","@index","@nest","@prefix","@protected");for(const e in s)if(!l.includes(e))throw new JsonLdError("Invalid JSON-LD syntax; a term definition must not contain "+e,"jsonld.SyntaxError",{code:"invalid term definition",context:n});const p=t.indexOf(":");if(c._termHasColon=p>0,"@reverse"in s){if("@id"in s)throw new JsonLdError("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:n});if("@nest"in s)throw new JsonLdError("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:n});const i=s["@reverse"];if(!_isString(i))throw new JsonLdError("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:n});if(!api.isKeyword(i)&&i.match(KEYWORD_PATTERN))return console.warn('WARNING: values beginning with "@" are reserved for future use and ignored',{reverse:i}),void(a?e.mappings.set(t,a):e.mappings.delete(t));const d=_expandIri(e,i,{vocab:!0,base:!1},n,o,r);if(!_isAbsoluteIri(d))throw new JsonLdError("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:n});c["@id"]=d,c.reverse=!0}else if("@id"in s){let i=s["@id"];if(i&&!_isString(i))throw new JsonLdError("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:n});if(null===i)c["@id"]=null;else{if(!api.isKeyword(i)&&i.match(KEYWORD_PATTERN))return console.warn('WARNING: values beginning with "@" are reserved for future use and ignored',{id:i}),void(a?e.mappings.set(t,a):e.mappings.delete(t));if(i!==t){if(i=_expandIri(e,i,{vocab:!0,base:!1},n,o,r),!_isAbsoluteIri(i)&&!api.isKeyword(i))throw new JsonLdError("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:n});if(t.match(/(?::[^:])|\//)){if(_expandIri(e,t,{vocab:!0,base:!1},n,new Map(o).set(t,!0),r)!==i)throw new JsonLdError("Invalid JSON-LD syntax; term in form of IRI must expand to definition.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:n})}c["@id"]=i,c._prefix=d&&!c._termHasColon&&i.match(/[:\/\?#\[\]@]$/)}}}if(!("@id"in c))if(c._termHasColon){const i=t.substr(0,p);if(n.hasOwnProperty(i)&&api.createTermDefinition({activeCtx:e,localCtx:n,term:i,defined:o,options:r}),e.mappings.has(i)){const n=t.substr(p+1);c["@id"]=e.mappings.get(i)["@id"]+n}else c["@id"]=t}else if("@type"===t)c["@id"]=t;else{if(!("@vocab"in e))throw new JsonLdError("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:n,term:t});c["@id"]=e["@vocab"]+t}if((!0===s["@protected"]||!0===o.get("@protected")&&!1!==s["@protected"])&&(e.protected[t]=!0,c.protected=!0),o.set(t,!0),"@type"in s){let t=s["@type"];if(!_isString(t))throw new JsonLdError("Invalid JSON-LD syntax; an @context @type value must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:n});if("@json"===t||"@none"===t){if(api.processingMode(e,1))throw new JsonLdError("Invalid JSON-LD syntax; an @context @type value must not be "+`"${t}" in JSON-LD 1.0 mode.`,"jsonld.SyntaxError",{code:"invalid type mapping",context:n})}else if("@id"!==t&&"@vocab"!==t){if(t=_expandIri(e,t,{vocab:!0,base:!1},n,o,r),!_isAbsoluteIri(t))throw new JsonLdError("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:n});if(0===t.indexOf("_:"))throw new JsonLdError("Invalid JSON-LD syntax; an @context @type value must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:n})}c["@type"]=t}if("@container"in s){const t=_isString(s["@container"])?[s["@container"]]:s["@container"]||[],o=["@list","@set","@index","@language"];let r=!0;const i=t.includes("@set");if(api.processingMode(e,1.1)){if(o.push("@graph","@id","@type"),t.includes("@list")){if(1!==t.length)throw new JsonLdError("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:n})}else if(t.includes("@graph")){if(t.some(e=>"@graph"!==e&&"@id"!==e&&"@index"!==e&&"@set"!==e))throw new JsonLdError("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:n})}else r&=t.length<=(i?2:1);if(t.includes("@type")&&(c["@type"]=c["@type"]||"@id",!["@id","@vocab"].includes(c["@type"])))throw new JsonLdError("Invalid JSON-LD syntax; container: @type requires @type to be @id or @vocab.","jsonld.SyntaxError",{code:"invalid type mapping",context:n})}else r&=!_isArray(s["@container"]),r&=t.length<=1;if(r&=t.every(e=>o.includes(e)),!(r&=!(i&&t.includes("@list"))))throw new JsonLdError("Invalid JSON-LD syntax; @context @container value must be one of the following: "+o.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:n});if(c.reverse&&!t.every(e=>["@index","@set"].includes(e)))throw new JsonLdError("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:n});c["@container"]=t}if("@index"in s){if(!("@container"in s&&c["@container"].includes("@index")))throw new JsonLdError("Invalid JSON-LD syntax; @index without @index in @container: "+`"${s["@index"]}" on term "${t}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:n});if(!_isString(s["@index"])||0===s["@index"].indexOf("@"))throw new JsonLdError("Invalid JSON-LD syntax; @index must expand to an IRI: "+`"${s["@index"]}" on term "${t}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:n});c["@index"]=s["@index"]}if("@context"in s&&(c["@context"]=s["@context"]),"@language"in s&&!("@type"in s)){let e=s["@language"];if(null!==e&&!_isString(e))throw new JsonLdError("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:n});null!==e&&(e=e.toLowerCase()),c["@language"]=e}if("@prefix"in s){if(t.match(/:|\//))throw new JsonLdError("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:n});if(api.isKeyword(c["@id"]))throw new JsonLdError("Invalid JSON-LD syntax; keywords may not be used as prefixes","jsonld.SyntaxError",{code:"invalid term definition",context:n});if("boolean"!=typeof s["@prefix"])throw new JsonLdError("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:n});c._prefix=!0===s["@prefix"]}if("@direction"in s){const e=s["@direction"];if(null!==e&&"ltr"!==e&&"rtl"!==e)throw new JsonLdError('Invalid JSON-LD syntax; @direction value must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:n});c["@direction"]=e}if("@nest"in s){const e=s["@nest"];if(!_isString(e)||"@nest"!==e&&0===e.indexOf("@"))throw new JsonLdError("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:n});c["@nest"]=e}const x=c["@id"];if("@context"===x||"@preserve"===x)throw new JsonLdError("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:n});if(a&&a.protected&&!i&&(e.protected[t]=!0,c.protected=!0,!_deepCompare(a,c))){const e=r&&r.protectedMode||"error";if("error"===e)throw new JsonLdError("Invalid JSON-LD syntax; tried to redefine a protected term.","jsonld.SyntaxError",{code:"protected term redefinition",context:n,term:t});if("warn"===e)return void console.warn("WARNING: protected term redefinition",{term:t});throw new JsonLdError("Invalid protectedMode.","jsonld.SyntaxError",{code:"invalid protected mode",context:n,term:t,protectedMode:e})}}),api.expandIri=((e,n,t,o)=>_expandIri(e,n,t,void 0,void 0,o)),api.getInitialContext=(e=>{const n=JSON.stringify({processingMode:e.processingMode}),t=INITIAL_CONTEXT_CACHE.get(n);if(t)return t;const o={processingMode:e.processingMode,mappings:new Map,inverse:null,getInverse:function(){const e=this;if(e.inverse)return e.inverse;const n=e.inverse={},t=e.fastCurieMap={},o={},s=(e["@language"]||"@none").toLowerCase(),a=e["@direction"],d=e.mappings,c=[...d.keys()].sort(_compareShortestLeast);for(const e of c){const r=d.get(e);if(null===r)continue;let c=r["@container"]||"@none";if(c=[].concat(c).sort().join(""),null===r["@id"])continue;const l=_asArray(r["@id"]);for(const d of l){let l=n[d];const p=api.isKeyword(d);if(l)p||r._termHasColon||o[d].push(e);else if(n[d]=l={},!p&&!r._termHasColon){o[d]=[e];const n={iri:d,terms:o[d]};d[0]in t?t[d[0]].push(n):t[d[0]]=[n]}if(l[c]||(l[c]={"@language":{},"@type":{},"@any":{}}),l=l[c],i(e,l["@any"],"@none"),r.reverse)i(e,l["@type"],"@reverse");else if("@none"===r["@type"])i(e,l["@any"],"@none"),i(e,l["@language"],"@none"),i(e,l["@type"],"@none");else if("@type"in r)i(e,l["@type"],r["@type"]);else if("@language"in r&&"@direction"in r){const n=r["@language"],t=r["@direction"];i(e,l["@language"],n&&t?`${n}_${t}`.toLowerCase():n?n.toLowerCase():t?`_${t}`:"@null")}else"@language"in r?i(e,l["@language"],(r["@language"]||"@null").toLowerCase()):"@direction"in r?r["@direction"]?i(e,l["@language"],`_${r["@direction"]}`):i(e,l["@language"],"@none"):a?(i(e,l["@language"],`_${a}`),i(e,l["@language"],"@none"),i(e,l["@type"],"@none")):(i(e,l["@language"],s),i(e,l["@language"],"@none"),i(e,l["@type"],"@none"))}}for(const e in t)r(t,e,1);return n},clone:function(){const e={};e.mappings=util.clone(this.mappings),e.clone=this.clone,e.inverse=null,e.getInverse=this.getInverse,e.protected=util.clone(this.protected),this.previousContext&&(e.previousContext=this.previousContext.clone());e.revertToPreviousContext=this.revertToPreviousContext,"@base"in this&&(e["@base"]=this["@base"]);"@language"in this&&(e["@language"]=this["@language"]);"@vocab"in this&&(e["@vocab"]=this["@vocab"]);return e},revertToPreviousContext:function(){if(!this.previousContext)return this;return this.previousContext.clone()},protected:{}};return 1e4===INITIAL_CONTEXT_CACHE.size&&INITIAL_CONTEXT_CACHE.clear(),INITIAL_CONTEXT_CACHE.set(n,o),o;function r(e,n,t){const o=e[n],i=e[n]={};let s,a;for(const e of o)(a=t>=(s=e.iri).length?"":s[t])in i?i[a].push(e):i[a]=[e];for(const e in i)""!==e&&r(i,e,t+1)}function i(e,n,t){n.hasOwnProperty(t)||(n[t]=e)}}),api.getContextValue=((e,n,t)=>{if(null===n){if("@context"===t)return;return null}if(e.mappings.has(n)){const o=e.mappings.get(n);if(_isUndefined(t))return o;if(o.hasOwnProperty(t))return o[t]}return"@language"===t&&t in e?e[t]:"@direction"===t&&t in e?e[t]:"@context"!==t?null:void 0}),api.processingMode=((e,n)=>n.toString()>="1.1"?!e.processingMode||e.processingMode>="json-ld-"+n.toString():"json-ld-1.0"===e.processingMode),api.isKeyword=(e=>{if(!_isString(e)||"@"!==e[0])return!1;switch(e){case"@base":case"@container":case"@context":case"@default":case"@direction":case"@embed":case"@explicit":case"@graph":case"@id":case"@included":case"@index":case"@json":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@protected":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1});

},{"./JsonLdError":30,"./types":49,"./url":50,"./util":51}],39:[function(_dereq_,module,exports){
"use strict";const{parseLinkHeader:parseLinkHeader,buildHeaders:buildHeaders}=_dereq_("../util"),{LINK_HEADER_CONTEXT:LINK_HEADER_CONTEXT}=_dereq_("../constants"),JsonLdError=_dereq_("../JsonLdError"),RequestQueue=_dereq_("../RequestQueue"),{prependBase:prependBase}=_dereq_("../url");function _request(e,r){return new Promise((t,n)=>{e(r,(e,r,d)=>{e?n(e):t({res:r,body:d})})})}module.exports=(({secure:e,strictSSL:r=!0,maxRedirects:t=-1,request:n,headers:d={}}={strictSSL:!0,maxRedirects:-1,headers:{}})=>{d=buildHeaders(d),n=n||_dereq_("request");const o=_dereq_("http");return(new RequestQueue).wrapLoader(function(s){return async function s(a,i){if(0!==a.indexOf("http:")&&0!==a.indexOf("https:"))throw new JsonLdError('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:a});if(e&&0!==a.indexOf("https"))throw new JsonLdError('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:a});let u=null;if(null!==u)return u;let l;let c=null;try{l=await _request(n,{url:a,headers:d,strictSSL:r,followRedirect:!1})}catch(e){throw new JsonLdError("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:a,cause:e})}const{res:h,body:p}=l;u={contextUrl:null,documentUrl:a,document:p||null};const f=o.STATUS_CODES[h.statusCode];if(h.statusCode>=400)throw new JsonLdError(`URL "${a}" could not be dereferenced: ${f}`,"jsonld.InvalidUrl",{code:"loading document failed",url:a,httpStatusCode:h.statusCode});if(h.headers.link&&"application/ld+json"!==h.headers["content-type"]){const e=parseLinkHeader(h.headers.link),r=e[LINK_HEADER_CONTEXT];if(Array.isArray(r))throw new JsonLdError("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:a});r&&(u.contextUrl=r.target),(c=e.alternate)&&"application/ld+json"==c.type&&!(h.headers["content-type"]||"").match(/^application\/(\w*\+)?json$/)&&(h.headers.location=prependBase(a,c.target))}if((c||h.statusCode>=300&&h.statusCode<400)&&h.headers.location){if(i.length===t)throw new JsonLdError("URL could not be dereferenced; there were too many redirects.","jsonld.TooManyRedirects",{code:"loading document failed",url:a,httpStatusCode:h.statusCode,redirects:i});if(-1!==i.indexOf(a))throw new JsonLdError("URL could not be dereferenced; infinite redirection was detected.","jsonld.InfiniteRedirectDetected",{code:"recursive context inclusion",url:a,httpStatusCode:h.statusCode,redirects:i});return i.push(a),s(h.headers.location,i)}i.push(a);return u}(s,[])})});

},{"../JsonLdError":30,"../RequestQueue":34,"../constants":37,"../url":50,"../util":51,"http":27,"request":27}],40:[function(_dereq_,module,exports){
"use strict";const{parseLinkHeader:parseLinkHeader,buildHeaders:buildHeaders}=_dereq_("../util"),{LINK_HEADER_CONTEXT:LINK_HEADER_CONTEXT}=_dereq_("../constants"),JsonLdError=_dereq_("../JsonLdError"),RequestQueue=_dereq_("../RequestQueue"),{prependBase:prependBase}=_dereq_("../url"),REGEX_LINK_HEADER=/(^|(\r\n))link:/i;function _get(e,r,t){const n=new(e=e||XMLHttpRequest);return new Promise((e,o)=>{n.onload=(()=>e(n)),n.onerror=(e=>o(e)),n.open("GET",r,!0);for(const e in t)n.setRequestHeader(e,t[e]);n.send()})}module.exports=(({secure:e,headers:r={},xhr:t}={headers:{}})=>{return r=buildHeaders(r),(new RequestQueue).wrapLoader(async function n(o){if(0!==o.indexOf("http:")&&0!==o.indexOf("https:"))throw new JsonLdError('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:o});if(e&&0!==o.indexOf("https"))throw new JsonLdError('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:o});let d;try{d=await _get(t,o,r)}catch(e){throw new JsonLdError("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:o,cause:e})}if(d.status>=400)throw new JsonLdError("URL could not be dereferenced: "+d.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:o,httpStatusCode:d.status});let s={contextUrl:null,documentUrl:o,document:d.response};let a=null;const l=d.getResponseHeader("Content-Type");let u;REGEX_LINK_HEADER.test(d.getAllResponseHeaders())&&(u=d.getResponseHeader("Link"));if(u&&"application/ld+json"!==l){const e=parseLinkHeader(u),r=e[LINK_HEADER_CONTEXT];if(Array.isArray(r))throw new JsonLdError("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:o});r&&(s.contextUrl=r.target),(a=e.alternate)&&"application/ld+json"==a.type&&!(l||"").match(/^application\/(\w*\+)?json$/)&&(s=await n(prependBase(o,a.target)))}return s})});

},{"../JsonLdError":30,"../RequestQueue":34,"../constants":37,"../url":50,"../util":51}],41:[function(_dereq_,module,exports){
"use strict";const JsonLdError=_dereq_("./JsonLdError"),{isArray:_isArray,isObject:_isObject,isEmptyObject:_isEmptyObject,isString:_isString,isUndefined:_isUndefined}=_dereq_("./types"),{isList:_isList,isValue:_isValue,isGraph:_isGraph,isSubject:_isSubject}=_dereq_("./graphTypes"),{expandIri:_expandIri,getContextValue:_getContextValue,isKeyword:_isKeyword,process:_processContext,processingMode:_processingMode}=_dereq_("./context"),{isAbsolute:_isAbsoluteIri}=_dereq_("./url"),{addValue:_addValue,asArray:_asArray,getValues:_getValues,validateTypeValue:_validateTypeValue}=_dereq_("./util"),api={};module.exports=api;const REGEX_BCP47=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/;async function _expandObject({activeCtx:e,activeProperty:t,expandedActiveProperty:n,element:a,expandedParent:i,options:r={},insideList:o,typeKey:s,typeScopedContext:l,expansionMap:d}){const p=Object.keys(a).sort(),c=[];let u;const v=a[s]&&"@json"===_expandIri(e,_isArray(a[s])?a[s][0]:a[s],{vocab:!0},r);for(const s of p){let p,y=a[s];if("@context"===s)continue;let x=_expandIri(e,s,{vocab:!0},r);if((null===x||!_isAbsoluteIri(x)&&!_isKeyword(x))&&void 0===(x=d({unmappedProperty:s,activeCtx:e,activeProperty:t,parent:a,options:r,insideList:o,value:y,expandedParent:i})))continue;if(_isKeyword(x)){if("@reverse"===n)throw new JsonLdError("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:y});if(x in i&&"@included"!==x&&"@type"!==x)throw new JsonLdError("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:x})}if("@id"===x){if(!_isString(y)){if(!r.isFrame)throw new JsonLdError('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:y});if(_isObject(y)){if(!_isEmptyObject(y))throw new JsonLdError('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:y})}else{if(!_isArray(y))throw new JsonLdError('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:y});if(!y.every(e=>_isString(e)))throw new JsonLdError('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:y})}}_addValue(i,"@id",_asArray(y).map(t=>_isString(t)?_expandIri(e,t,{base:!0},r):t),{propertyIsArray:r.isFrame});continue}if("@type"===x){_isObject(y)&&(y=Object.fromEntries(Object.entries(y).map(([e,t])=>[_expandIri(l,e,{vocab:!0}),_asArray(t).map(e=>_expandIri(l,e,{base:!0,vocab:!0}))]))),_validateTypeValue(y,r.isFrame),_addValue(i,"@type",_asArray(y).map(e=>_isString(e)?_expandIri(l,e,{base:!0,vocab:!0},r):e),{propertyIsArray:r.isFrame});continue}if("@included"===x&&_processingMode(e,1.1)){const n=_asArray(await api.expand({activeCtx:e,activeProperty:t,element:y,options:r,expansionMap:d}));if(!n.every(e=>_isSubject(e)))throw new JsonLdError("Invalid JSON-LD syntax; values of @included must expand to node objects.","jsonld.SyntaxError",{code:"invalid @included value",value:y});_addValue(i,"@included",n,{propertyIsArray:!0});continue}if("@graph"===x&&!_isObject(y)&&!_isArray(y))throw new JsonLdError('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:y});if("@value"===x){u=y,v&&_processingMode(e,1.1)?i["@value"]=y:_addValue(i,"@value",y,{propertyIsArray:r.isFrame});continue}if("@language"===x){if(null===y)continue;if(!_isString(y)&&!r.isFrame)throw new JsonLdError('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:y});y=_asArray(y).map(e=>_isString(e)?e.toLowerCase():e);for(const e of y)_isString(e)&&!e.match(REGEX_BCP47)&&console.warn(`@language must be valid BCP47: ${e}`);_addValue(i,"@language",y,{propertyIsArray:r.isFrame});continue}if("@direction"===x){if(!_isString(y)&&!r.isFrame)throw new JsonLdError('Invalid JSON-LD syntax; "@direction" value must be a string.',"jsonld.SyntaxError",{code:"invalid base direction",value:y});y=_asArray(y);for(const e of y)if(_isString(e)&&"ltr"!==e&&"rtl"!==e)throw new JsonLdError('Invalid JSON-LD syntax; "@direction" must be "ltr" or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",value:y});_addValue(i,"@direction",y,{propertyIsArray:r.isFrame});continue}if("@index"===x){if(!_isString(y))throw new JsonLdError('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:y});_addValue(i,"@index",y);continue}if("@reverse"===x){if(!_isObject(y))throw new JsonLdError('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:y});if("@reverse"in(p=await api.expand({activeCtx:e,activeProperty:"@reverse",element:y,options:r,expansionMap:d})))for(const e in p["@reverse"])_addValue(i,e,p["@reverse"][e],{propertyIsArray:!0});let t=i["@reverse"]||null;for(const e in p){if("@reverse"===e)continue;null===t&&(t=i["@reverse"]={}),_addValue(t,e,[],{propertyIsArray:!0});const n=p[e];for(let a=0;a<n.length;++a){const i=n[a];if(_isValue(i)||_isList(i))throw new JsonLdError('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:p});_addValue(t,e,i,{propertyIsArray:!0})}}continue}if("@nest"===x){c.push(s);continue}let _=e;const g=_getContextValue(e,s,"@context");_isUndefined(g)||(_=await _processContext({activeCtx:e,localCtx:g,propagate:!0,overrideProtected:!0,options:r}));const f=_getContextValue(_,s,"@container")||[];if(f.includes("@language")&&_isObject(y)){p=_expandLanguageMap(_,y,_getContextValue(_,s,"@direction"),r)}else if(f.includes("@index")&&_isObject(y)){const t=f.includes("@graph"),n=_getContextValue(_,s,"@index")||"@index",a="@index"!==n&&_expandIri(e,n,{vocab:!0},r);p=await _expandIndexMap({activeCtx:_,options:r,activeProperty:s,value:y,expansionMap:d,asGraph:t,indexKey:n,propertyIndex:a})}else if(f.includes("@id")&&_isObject(y)){const e=f.includes("@graph");p=await _expandIndexMap({activeCtx:_,options:r,activeProperty:s,value:y,expansionMap:d,asGraph:e,indexKey:"@id"})}else if(f.includes("@type")&&_isObject(y))p=await _expandIndexMap({activeCtx:_.revertToPreviousContext(),options:r,activeProperty:s,value:y,expansionMap:d,asGraph:!1,indexKey:"@type"});else{const a="@list"===x;if(a||"@set"===x){let e=t;a&&"@graph"===n&&(e=null),p=await api.expand({activeCtx:_,activeProperty:e,element:y,options:r,insideList:a,expansionMap:d})}else p="@json"===_getContextValue(e,s,"@type")?{"@type":"@json","@value":y}:await api.expand({activeCtx:_,activeProperty:s,element:y,options:r,insideList:!1,expansionMap:d})}if(null!==p||"@value"===x||void 0!==(p=d({unmappedValue:y,expandedProperty:x,activeCtx:_,activeProperty:t,parent:a,options:r,insideList:o,key:s,expandedParent:i})))if("@list"!==x&&!_isList(p)&&f.includes("@list")&&(p={"@list":_asArray(p)}),f.includes("@graph")&&!f.some(e=>"@id"===e||"@index"===e)&&(p=_asArray(p).map(e=>({"@graph":_asArray(e)}))),_.mappings.has(s)&&_.mappings.get(s).reverse){const e=i["@reverse"]=i["@reverse"]||{};p=_asArray(p);for(let t=0;t<p.length;++t){const n=p[t];if(_isValue(n)||_isList(n))throw new JsonLdError('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:p});_addValue(e,x,n,{propertyIsArray:!0})}}else _addValue(i,x,p,{propertyIsArray:!0})}if("@value"in i)if("@json"===i["@type"]&&_processingMode(e,1.1));else if((_isObject(u)||_isArray(u))&&!r.isFrame)throw new JsonLdError('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:u});for(const p of c){const c=_isArray(a[p])?a[p]:[a[p]];for(const a of c){if(!_isObject(a)||Object.keys(a).some(t=>"@value"===_expandIri(e,t,{vocab:!0},r)))throw new JsonLdError("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:a});await _expandObject({activeCtx:e,activeProperty:t,expandedActiveProperty:n,element:a,expandedParent:i,options:r,insideList:o,typeScopedContext:l,typeKey:s,expansionMap:d})}}}function _expandValue({activeCtx:e,activeProperty:t,value:n,options:a}){if(null==n)return null;const i=_expandIri(e,t,{vocab:!0},a);if("@id"===i)return _expandIri(e,n,{base:!0},a);if("@type"===i)return _expandIri(e,n,{vocab:!0,base:!0},a);const r=_getContextValue(e,t,"@type");if(("@id"===r||"@graph"===i)&&_isString(n))return{"@id":_expandIri(e,n,{base:!0},a)};if("@vocab"===r&&_isString(n))return{"@id":_expandIri(e,n,{vocab:!0,base:!0},a)};if(_isKeyword(i))return n;const o={};if(r&&!["@id","@vocab","@none"].includes(r))o["@type"]=r;else if(_isString(n)){const n=_getContextValue(e,t,"@language");null!==n&&(o["@language"]=n);const a=_getContextValue(e,t,"@direction");null!==a&&(o["@direction"]=a)}return["boolean","number","string"].includes(typeof n)||(n=n.toString()),o["@value"]=n,o}function _expandLanguageMap(e,t,n,a){const i=[],r=Object.keys(t).sort();for(const o of r){const r=_expandIri(e,o,{vocab:!0},a);let s=t[o];_isArray(s)||(s=[s]);for(const e of s){if(null===e)continue;if(!_isString(e))throw new JsonLdError("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:t});const a={"@value":e};"@none"!==r&&(a["@language"]=o.toLowerCase()),n&&(a["@direction"]=n),i.push(a)}}return i}async function _expandIndexMap({activeCtx:e,options:t,activeProperty:n,value:a,expansionMap:i,asGraph:r,indexKey:o,propertyIndex:s}){const l=[],d=Object.keys(a).sort(),p="@type"===o;for(let c of d){if(p){const n=_getContextValue(e,c,"@context");_isUndefined(n)||(e=await _processContext({activeCtx:e,localCtx:n,propagate:!1,options:t}))}let d,u=a[c];_isArray(u)||(u=[u]),u=await api.expand({activeCtx:e,activeProperty:n,element:u,options:t,insideList:!1,insideIndex:!0,expansionMap:i}),d=s?"@none"===c?"@none":_expandValue({activeCtx:e,activeProperty:o,value:c,options:t}):_expandIri(e,c,{vocab:!0},t),"@id"===o?c=_expandIri(e,c,{base:!0},t):p&&(c=d);for(let e of u){if(r&&!_isGraph(e)&&(e={"@graph":[e]}),"@type"===o)"@none"===d||(e["@type"]?e["@type"]=[c].concat(e["@type"]):e["@type"]=[c]);else{if(_isValue(e)&&!["@language","@type","@index"].includes(o))throw new JsonLdError("Invalid JSON-LD syntax; Attempt to add illegal key to value "+`object: "${o}".`,"jsonld.SyntaxError",{code:"invalid value object",value:e});s?"@none"!==d&&_addValue(e,s,d,{propertyIsArray:!0,prependValue:!0}):"@none"===d||o in e||(e[o]=c)}l.push(e)}}return l}api.expand=(async({activeCtx:e,activeProperty:t=null,element:n,options:a={},insideList:i=!1,insideIndex:r=!1,typeScopedContext:o=null,expansionMap:s=(()=>void 0)})=>{if(null==n)return null;if("@default"===t&&(a=Object.assign({},a,{isFrame:!1})),!_isArray(n)&&!_isObject(n)){if(!i&&(null===t||"@graph"===_expandIri(e,t,{vocab:!0},a))){const r=await s({unmappedValue:n,activeCtx:e,activeProperty:t,options:a,insideList:i});return void 0===r?null:r}return _expandValue({activeCtx:e,activeProperty:t,value:n,options:a})}if(_isArray(n)){let l=[];const d=_getContextValue(e,t,"@container")||[];i=i||d.includes("@list");for(let d=0;d<n.length;++d){let p=await api.expand({activeCtx:e,activeProperty:t,element:n[d],options:a,expansionMap:s,insideIndex:r,typeScopedContext:o});i&&_isArray(p)&&(p={"@list":p}),null===p&&void 0===(p=await s({unmappedValue:n[d],activeCtx:e,activeProperty:t,parent:n,index:d,options:a,expandedParent:l,insideList:i}))||(_isArray(p)?l=l.concat(p):l.push(p))}return l}const l=_expandIri(e,t,{vocab:!0},a),d=_getContextValue(e,t,"@context");o=o||(e.previousContext?e:null);let p=Object.keys(n).sort(),c=!r;if(c&&o&&p.length<=2&&!p.includes("@context"))for(const t of p){const n=_expandIri(o,t,{vocab:!0},a);if("@value"===n){c=!1,e=o;break}if("@id"===n&&1===p.length){c=!1;break}}c&&(e=e.revertToPreviousContext()),_isUndefined(d)||(e=await _processContext({activeCtx:e,localCtx:d,propagate:!0,overrideProtected:!0,options:a})),"@context"in n&&(e=await _processContext({activeCtx:e,localCtx:n["@context"],options:a})),o=e;let u=null;for(const t of p){if("@type"===_expandIri(e,t,{vocab:!0},a)){u=u||t;const i=n[t],r=Array.isArray(i)?i.length>1?i.slice().sort():i:[i];for(const t of r){const n=_getContextValue(o,t,"@context");_isUndefined(n)||(e=await _processContext({activeCtx:e,localCtx:n,options:a,propagate:!1}))}}}let v={};await _expandObject({activeCtx:e,activeProperty:t,expandedActiveProperty:l,element:n,expandedParent:v,options:a,insideList:i,typeKey:u,typeScopedContext:o,expansionMap:s});let y=(p=Object.keys(v)).length;if("@value"in v){if("@type"in v&&("@language"in v||"@direction"in v))throw new JsonLdError('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and either "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:v});let r=y-1;if("@type"in v&&(r-=1),"@index"in v&&(r-=1),"@language"in v&&(r-=1),"@direction"in v&&(r-=1),0!==r)throw new JsonLdError('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and either "@type" or either or both "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:v});const o=null===v["@value"]?[]:_asArray(v["@value"]),l=_getValues(v,"@type");if(_processingMode(e,1.1)&&l.includes("@json")&&1===l.length);else if(0===o.length){const r=await s({unmappedValue:v,activeCtx:e,activeProperty:t,element:n,options:a,insideList:i});v=void 0!==r?r:null}else{if(!o.every(e=>_isString(e)||_isEmptyObject(e))&&"@language"in v)throw new JsonLdError("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:v});if(!l.every(e=>_isAbsoluteIri(e)&&!(_isString(e)&&0===e.indexOf("_:"))||_isEmptyObject(e)))throw new JsonLdError('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:v})}}else if("@type"in v&&!_isArray(v["@type"]))v["@type"]=[v["@type"]];else if("@set"in v||"@list"in v){if(y>1&&!(2===y&&"@index"in v))throw new JsonLdError('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:v});"@set"in v&&(v=v["@set"],y=(p=Object.keys(v)).length)}else if(1===y&&"@language"in v){const r=await s(v,{unmappedValue:v,activeCtx:e,activeProperty:t,element:n,options:a,insideList:i});v=void 0!==r?r:null}if(_isObject(v)&&!a.keepFreeFloatingNodes&&!i&&(null===t||"@graph"===l)&&(0===y||"@value"in v||"@list"in v||1===y&&"@id"in v)){const r=await s({unmappedValue:v,activeCtx:e,activeProperty:t,element:n,options:a,insideList:i});v=void 0!==r?r:null}return v});

},{"./JsonLdError":30,"./context":38,"./graphTypes":45,"./types":49,"./url":50,"./util":51}],42:[function(_dereq_,module,exports){
"use strict";const{isSubjectReference:_isSubjectReference}=_dereq_("./graphTypes"),{createMergedNodeMap:_createMergedNodeMap}=_dereq_("./nodeMap"),api={};module.exports=api,api.flatten=(e=>{const r=_createMergedNodeMap(e),t=[],c=Object.keys(r).sort();for(let e=0;e<c.length;++e){const s=r[c[e]];_isSubjectReference(s)||t.push(s)}return t});

},{"./graphTypes":45,"./nodeMap":47}],43:[function(_dereq_,module,exports){
"use strict";const{isKeyword:isKeyword}=_dereq_("./context"),graphTypes=_dereq_("./graphTypes"),types=_dereq_("./types"),util=_dereq_("./util"),url=_dereq_("./url"),JsonLdError=_dereq_("./JsonLdError"),{createNodeMap:_createNodeMap,mergeNodeMapGraphs:_mergeNodeMapGraphs}=_dereq_("./nodeMap"),api={};function _createImplicitFrame(e){const r={};for(const t in e)void 0!==e[t]&&(r["@"+t]=[e[t]]);return[r]}function _createsCircularReference(e,r,t){for(let i=t.length-1;i>=0;--i){const s=t[i];if(s.graph===r&&s.subject["@id"]===e["@id"])return!0}return!1}function _getFrameFlag(e,r,t){const i="@"+t;let s=i in e?e[i][0]:r[t];if("embed"===t)if(!0===s)s="@once";else if(!1===s)s="@never";else if("@always"!==s&&"@never"!==s&&"@link"!==s&&"@first"!==s&&"@last"!==s&&"@once"!==s)throw new JsonLdError("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:e});return s}function _validateFrame(e){if(!types.isArray(e)||1!==e.length||!types.isObject(e[0]))throw new JsonLdError("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:e});if("@id"in e[0])for(const r of util.asArray(e[0]["@id"]))if(!types.isObject(r)&&!url.isAbsolute(r)||types.isString(r)&&0===r.indexOf("_:"))throw new JsonLdError("Invalid JSON-LD syntax; invalid @id in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:e});if("@type"in e[0])for(const r of util.asArray(e[0]["@type"]))if(!types.isObject(r)&&!url.isAbsolute(r)||types.isString(r)&&0===r.indexOf("_:"))throw new JsonLdError("Invalid JSON-LD syntax; invalid @type in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:e})}function _filterSubjects(e,r,t,i){const s={};for(const n of r){const r=e.graphMap[e.graph][n];_filterSubject(e,r,t,i)&&(s[n]=r)}return s}function _filterSubject(e,r,t,i){let s=!0,n=!1;for(const a in t){let l=!1;const u=util.getValues(r,a),p=0===util.getValues(t,a).length;if("@id"===a){if(types.isEmptyObject(t["@id"][0]||{})?l=!0:t["@id"].length>=0&&(l=t["@id"].includes(u[0])),!i.requireAll)return l}else if("@type"===a){if(s=!1,p){if(u.length>0)return!1;l=!0}else if(1===t["@type"].length&&types.isEmptyObject(t["@type"][0]))l=u.length>0;else for(const e of t["@type"])l=!!(types.isObject(e)&&"@default"in e)||(l||u.some(r=>r===e));if(!i.requireAll)return l}else{if(isKeyword(a))continue;{const r=util.getValues(t,a)[0];let n=!1;if(r&&(_validateFrame([r]),n="@default"in r),s=!1,0===u.length&&n)continue;if(u.length>0&&p)return!1;if(void 0===r){if(u.length>0)return!1;l=!0}else if(graphTypes.isList(r)){const t=r["@list"][0];if(graphTypes.isList(u[0])){const r=u[0]["@list"];graphTypes.isValue(t)?l=r.some(e=>_valueMatch(t,e)):(graphTypes.isSubject(t)||graphTypes.isSubjectReference(t))&&(l=r.some(r=>_nodeMatch(e,t,r,i)))}}else l=graphTypes.isValue(r)?u.some(e=>_valueMatch(r,e)):graphTypes.isSubjectReference(r)?u.some(t=>_nodeMatch(e,r,t,i)):!!types.isObject(r)&&u.length>0}}if(!l&&i.requireAll)return!1;n=n||l}return s||n}function _removeEmbed(e,r){const t=e.uniqueEmbeds[e.graph],i=t[r],s=i.parent,n=i.property,a={"@id":r};if(types.isArray(s)){for(let e=0;e<s.length;++e)if(util.compareValues(s[e],a)){s[e]=a;break}}else{const e=types.isArray(s[n]);util.removeValue(s,n,a,{propertyIsArray:e}),util.addValue(s,n,a,{propertyIsArray:e})}const l=e=>{const r=Object.keys(t);for(const i of r)i in t&&types.isObject(t[i].parent)&&t[i].parent["@id"]===e&&(delete t[i],l(i))};l(r)}function _cleanupPreserve(e,r){if(types.isArray(e))return e.map(e=>_cleanupPreserve(e,r));if(types.isObject(e)){if("@preserve"in e)return e["@preserve"][0];if(graphTypes.isValue(e))return e;if(graphTypes.isList(e))return e["@list"]=_cleanupPreserve(e["@list"],r),e;if("@id"in e){const t=e["@id"];if(r.link.hasOwnProperty(t)){const i=r.link[t].indexOf(e);if(-1!==i)return r.link[t][i];r.link[t].push(e)}else r.link[t]=[e]}for(const t in e)"@id"===t&&r.bnodesToClear.includes(e[t])?delete e["@id"]:e[t]=_cleanupPreserve(e[t],r)}return e}function _addFrameOutput(e,r,t){types.isObject(e)?util.addValue(e,r,t,{propertyIsArray:!0}):e.push(t)}function _nodeMatch(e,r,t,i){if(!("@id"in t))return!1;const s=e.subjects[t["@id"]];return s&&_filterSubject(e,s,r,i)}function _valueMatch(e,r){const t=r["@value"],i=r["@type"],s=r["@language"],n=e["@value"]?types.isArray(e["@value"])?e["@value"]:[e["@value"]]:[],a=e["@type"]?types.isArray(e["@type"])?e["@type"]:[e["@type"]]:[],l=e["@language"]?types.isArray(e["@language"])?e["@language"]:[e["@language"]]:[];return 0===n.length&&0===a.length&&0===l.length||!(!n.includes(t)&&!types.isEmptyObject(n[0]))&&(!!(!i&&0===a.length||a.includes(i)||i&&types.isEmptyObject(a[0]))&&!!(!s&&0===l.length||l.includes(s)||s&&types.isEmptyObject(l[0])))}module.exports=api,api.frameMergedOrDefault=((e,r,t)=>{const i={options:t,embedded:!1,graph:"@default",graphMap:{"@default":{}},subjectStack:[],link:{},bnodeMap:{}},s=new util.IdentifierIssuer("_:b");_createNodeMap(e,i.graphMap,"@default",s),t.merged&&(i.graphMap["@merged"]=_mergeNodeMapGraphs(i.graphMap),i.graph="@merged"),i.subjects=i.graphMap[i.graph];const n=[];return api.frame(i,Object.keys(i.subjects).sort(),r,n),t.pruneBlankNodeIdentifiers&&(t.bnodesToClear=Object.keys(i.bnodeMap).filter(e=>1===i.bnodeMap[e].length)),t.link={},_cleanupPreserve(n,t)}),api.frame=((e,r,t,i,s=null)=>{_validateFrame(t),t=t[0];const n=e.options,a={embed:_getFrameFlag(t,n,"embed"),explicit:_getFrameFlag(t,n,"explicit"),requireAll:_getFrameFlag(t,n,"requireAll")};e.link.hasOwnProperty(e.graph)||(e.link[e.graph]={});const l=e.link[e.graph],u=_filterSubjects(e,r,t,a),p=Object.keys(u).sort();for(const o of p){const p=u[o];if(null===s?e.uniqueEmbeds={[e.graph]:{}}:e.uniqueEmbeds[e.graph]=e.uniqueEmbeds[e.graph]||{},"@link"===a.embed&&o in l){_addFrameOutput(i,s,l[o]);continue}const d={"@id":o};if(0===o.indexOf("_:")&&util.addValue(e.bnodeMap,o,d,{propertyIsArray:!0}),l[o]=d,("@first"===a.embed||"@last"===a.embed)&&e.is11)throw new JsonLdError("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:t});if(e.embedded||!e.uniqueEmbeds[e.graph].hasOwnProperty(o))if(!e.embedded||"@never"!==a.embed&&!_createsCircularReference(p,e.graph,e.subjectStack))if(!e.embedded||"@first"!=a.embed&&"@once"!=a.embed||!e.uniqueEmbeds[e.graph].hasOwnProperty(o)){if("@last"===a.embed&&o in e.uniqueEmbeds[e.graph]&&_removeEmbed(e,o),e.uniqueEmbeds[e.graph][o]={parent:i,property:s},e.subjectStack.push({subject:p,graph:e.graph}),o in e.graphMap){let r=!1,i=null;"@graph"in t?(i=t["@graph"][0],r=!("@merged"===o||"@default"===o),types.isObject(i)||(i={})):(r="@merged"!==e.graph,i={}),r&&api.frame({...e,graph:o,embedded:!1},Object.keys(e.graphMap[o]).sort(),[i],d,"@graph")}"@included"in t&&api.frame({...e,embedded:!1},r,t["@included"],d,"@included");for(const r of Object.keys(p).sort())if(isKeyword(r)){if(d[r]=util.clone(p[r]),"@type"===r)for(const r of p["@type"])0===r.indexOf("_:")&&util.addValue(e.bnodeMap,r,d,{propertyIsArray:!0})}else if(!a.explicit||r in t)for(const i of p[r]){const s=r in t?t[r]:_createImplicitFrame(a);if(graphTypes.isList(i)){const s=t[r]&&t[r][0]&&t[r][0]["@list"]?t[r][0]["@list"]:_createImplicitFrame(a),n={"@list":[]};_addFrameOutput(d,r,n);const l=i["@list"];for(const r of l)graphTypes.isSubjectReference(r)?api.frame({...e,embedded:!0},[r["@id"]],s,n,"@list"):_addFrameOutput(n,"@list",util.clone(r))}else graphTypes.isSubjectReference(i)?api.frame({...e,embedded:!0},[i["@id"]],s,d,r):_valueMatch(s[0],i)&&_addFrameOutput(d,r,util.clone(i))}for(const e of Object.keys(t).sort()){if("@type"===e){if(!(types.isObject(t[e][0])&&"@default"in t[e][0]))continue}else if(isKeyword(e))continue;const r=t[e][0]||{};if(!(_getFrameFlag(r,n,"omitDefault")||e in d)){let t="@null";"@default"in r&&(t=util.clone(r["@default"])),types.isArray(t)||(t=[t]),d[e]=[{"@preserve":t}]}}for(const r of Object.keys(t["@reverse"]||{}).sort()){const i=t["@reverse"][r];for(const t of Object.keys(e.subjects)){util.getValues(e.subjects[t],r).some(e=>e["@id"]===o)&&(d["@reverse"]=d["@reverse"]||{},util.addValue(d["@reverse"],r,[],{propertyIsArray:!0}),api.frame({...e,embedded:!0},[t],i,d["@reverse"][r],s))}}_addFrameOutput(i,s,d),e.subjectStack.pop()}else _addFrameOutput(i,s,d);else _addFrameOutput(i,s,d)}}),api.cleanupNull=((e,r)=>{if(types.isArray(e)){return e.map(e=>api.cleanupNull(e,r)).filter(e=>e)}if("@null"===e)return null;if(types.isObject(e)){if("@id"in e){const t=e["@id"];if(r.link.hasOwnProperty(t)){const i=r.link[t].indexOf(e);if(-1!==i)return r.link[t][i];r.link[t].push(e)}else r.link[t]=[e]}for(const t in e)e[t]=api.cleanupNull(e[t],r)}return e});

},{"./JsonLdError":30,"./context":38,"./graphTypes":45,"./nodeMap":47,"./types":49,"./url":50,"./util":51}],44:[function(_dereq_,module,exports){
"use strict";const JsonLdError=_dereq_("./JsonLdError"),graphTypes=_dereq_("./graphTypes"),types=_dereq_("./types"),util=_dereq_("./util"),{RDF_LIST:RDF_LIST,RDF_FIRST:RDF_FIRST,RDF_REST:RDF_REST,RDF_NIL:RDF_NIL,RDF_TYPE:RDF_TYPE,RDF_JSON_LITERAL:RDF_JSON_LITERAL,XSD_BOOLEAN:XSD_BOOLEAN,XSD_DOUBLE:XSD_DOUBLE,XSD_INTEGER:XSD_INTEGER,XSD_STRING:XSD_STRING}=_dereq_("./constants"),REGEX_BCP47=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/,api={};function _RDFToObject(e,t,s){if(e.termType.endsWith("Node"))return{"@id":e.value};const a={"@value":e.value};if(e.language)a["@language"]=e.language;else{let r=e.datatype.value;if(r||(r=XSD_STRING),r===RDF_JSON_LITERAL){r="@json";try{a["@value"]=JSON.parse(a["@value"])}catch(e){throw new JsonLdError("JSON literal could not be parsed.","jsonld.InvalidJsonLiteral",{code:"invalid JSON literal",value:a["@value"],cause:e})}}if(t){if(r===XSD_BOOLEAN)"true"===a["@value"]?a["@value"]=!0:"false"===a["@value"]&&(a["@value"]=!1);else if(types.isNumeric(a["@value"]))if(r===XSD_INTEGER){const e=parseInt(a["@value"],10);e.toFixed(0)===a["@value"]&&(a["@value"]=e)}else r===XSD_DOUBLE&&(a["@value"]=parseFloat(a["@value"]));[XSD_BOOLEAN,XSD_INTEGER,XSD_DOUBLE,XSD_STRING].includes(r)||(a["@type"]=r)}else if("i18n-datatype"===s&&r.startsWith("https://www.w3.org/ns/i18n#")){const[,e,t]=r.split(/[#_]/);e.length>0&&(a["@language"]=e,e.match(REGEX_BCP47)||console.warn(`@language must be valid BCP47: ${e}`)),a["@direction"]=t}else r!==XSD_STRING&&(a["@type"]=r)}return a}module.exports=api,api.fromRDF=(async(e,{useRdfType:t=!1,useNativeTypes:s=!1,rdfDirection:a=null})=>{const r={},l={"@default":r},u={};for(const n of e){const e="DefaultGraph"===n.graph.termType?"@default":n.graph.value;e in l||(l[e]={}),"@default"===e||e in r||(r[e]={"@id":e});const o=l[e],i=n.subject.value,p=n.predicate.value,R=n.object;i in o||(o[i]={"@id":i});const c=o[i],D=R.termType.endsWith("Node");if(!D||R.value in o||(o[R.value]={"@id":R.value}),p===RDF_TYPE&&!t&&D){util.addValue(c,"@type",R.value,{propertyIsArray:!0});continue}const _=_RDFToObject(R,s,a);if(util.addValue(c,p,_,{propertyIsArray:!0}),D)if(R.value===RDF_NIL){const e=o[R.value];"usages"in e||(e.usages=[]),e.usages.push({node:c,property:p,value:_})}else R.value in u?u[R.value]=!1:u[R.value]={node:c,property:p,value:_}}for(const e in l){const t=l[e];if(!(RDF_NIL in t))continue;const s=t[RDF_NIL];if(s.usages){for(let e of s.usages){let s=e.node,a=e.property,r=e.value;const l=[],n=[];let o=Object.keys(s).length;for(;a===RDF_REST&&types.isObject(u[s["@id"]])&&types.isArray(s[RDF_FIRST])&&1===s[RDF_FIRST].length&&types.isArray(s[RDF_REST])&&1===s[RDF_REST].length&&(3===o||4===o&&types.isArray(s["@type"])&&1===s["@type"].length&&s["@type"][0]===RDF_LIST)&&(l.push(s[RDF_FIRST][0]),n.push(s["@id"]),s=(e=u[s["@id"]]).node,a=e.property,r=e.value,o=Object.keys(s).length,graphTypes.isBlankNode(s)););delete r["@id"],r["@list"]=l.reverse();for(const e of n)delete t[e]}delete s.usages}}const n=[],o=Object.keys(r).sort();for(const e of o){const t=r[e];if(e in l){const s=t["@graph"]=[],a=l[e],r=Object.keys(a).sort();for(const e of r){const t=a[e];graphTypes.isSubjectReference(t)||s.push(t)}}graphTypes.isSubjectReference(t)||n.push(t)}return n});

},{"./JsonLdError":30,"./constants":37,"./graphTypes":45,"./types":49,"./util":51}],45:[function(_dereq_,module,exports){
"use strict";const types=_dereq_("./types"),api={};module.exports=api,api.isSubject=(i=>{if(types.isObject(i)&&!("@value"in i||"@set"in i||"@list"in i)){return Object.keys(i).length>1||!("@id"in i)}return!1}),api.isSubjectReference=(i=>types.isObject(i)&&1===Object.keys(i).length&&"@id"in i),api.isValue=(i=>types.isObject(i)&&"@value"in i),api.isList=(i=>types.isObject(i)&&"@list"in i),api.isGraph=(i=>types.isObject(i)&&"@graph"in i&&1===Object.keys(i).filter(i=>"@id"!==i&&"@index"!==i).length),api.isSimpleGraph=(i=>api.isGraph(i)&&!("@id"in i)),api.isBlankNode=(i=>!!types.isObject(i)&&("@id"in i?0===i["@id"].indexOf("_:"):0===Object.keys(i).length||!("@value"in i||"@set"in i||"@list"in i)));

},{"./types":49}],46:[function(_dereq_,module,exports){
(function (process,global){
const canonize=_dereq_("rdf-canonize"),util=_dereq_("./util"),ContextResolver=_dereq_("./ContextResolver"),IdentifierIssuer=util.IdentifierIssuer,JsonLdError=_dereq_("./JsonLdError"),LRU=_dereq_("lru-cache"),NQuads=_dereq_("./NQuads"),Rdfa=_dereq_("./Rdfa"),{expand:_expand}=_dereq_("./expand"),{flatten:_flatten}=_dereq_("./flatten"),{fromRDF:_fromRDF}=_dereq_("./fromRdf"),{toRDF:_toRDF}=_dereq_("./toRdf"),{frameMergedOrDefault:_frameMergedOrDefault,cleanupNull:_cleanupNull}=_dereq_("./frame"),{isArray:_isArray,isObject:_isObject,isString:_isString}=_dereq_("./types"),{isSubjectReference:_isSubjectReference}=_dereq_("./graphTypes"),{expandIri:_expandIri,getInitialContext:_getInitialContext,process:_processContext,processingMode:_processingMode}=_dereq_("./context"),{compact:_compact,compactIri:_compactIri}=_dereq_("./compact"),{createNodeMap:_createNodeMap,createMergedNodeMap:_createMergedNodeMap,mergeNodeMaps:_mergeNodeMaps}=_dereq_("./nodeMap"),_nodejs="undefined"!=typeof process&&process.versions&&process.versions.node,_browser=!_nodejs&&("undefined"!=typeof window||"undefined"!=typeof self),wrapper=function(e){const t={},n=new LRU({max:100});function o(t,{documentLoader:n=e.documentLoader,...o}){return Object.assign({},{documentLoader:n},o,t)}return e.compact=async function(t,r,a){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");if(null===r)throw new JsonLdError("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});if(null===t)return null;let i;(a=o(a,{base:_isString(t)?t:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new IdentifierIssuer("_:b"),contextResolver:new ContextResolver({sharedCache:n})})).link&&(a.skipExpansion=!0),a.compactToRelative||delete a.base,i=a.skipExpansion?t:await e.expand(t,a);const s=await e.processContext(_getInitialContext(a),r,a);let c=await _compact({activeCtx:s,element:i,options:a,compactionMap:a.compactionMap});a.compactArrays&&!a.graph&&_isArray(c)?1===c.length?c=c[0]:0===c.length&&(c={}):a.graph&&_isObject(c)&&(c=[c]),_isObject(r)&&"@context"in r&&(r=r["@context"]),r=util.clone(r),_isArray(r)||(r=[r]);const u=r;r=[];for(let e=0;e<u.length;++e)(!_isObject(u[e])||Object.keys(u[e]).length>0)&&r.push(u[e]);const d=r.length>0;if(1===r.length&&(r=r[0]),_isArray(c)){const e=_compactIri({activeCtx:s,iri:"@graph",relativeTo:{vocab:!0}}),t=c;c={},d&&(c["@context"]=r),c[e]=t}else if(_isObject(c)&&d){const e=c;c={"@context":r};for(const t in e)c[t]=e[t]}return c},e.expand=async function(t,r){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");!1===(r=o(r,{keepFreeFloatingNodes:!1,contextResolver:new ContextResolver({sharedCache:n})})).expansionMap&&(r.expansionMap=void 0);const a={},i=[];if("expandContext"in r){const e=util.clone(r.expandContext);_isObject(e)&&"@context"in e?a.expandContext=e:a.expandContext={"@context":e},i.push(a.expandContext)}let s;if(_isString(t)){const n=await e.get(t,r);s=n.documentUrl,a.input=n.document,n.contextUrl&&(a.remoteContext={"@context":n.contextUrl},i.push(a.remoteContext))}else a.input=util.clone(t);"base"in r||(r.base=s||"");let c=_getInitialContext(r);for(const e of i)c=await _processContext({activeCtx:c,localCtx:e,options:r});let u=await _expand({activeCtx:c,element:a.input,options:r,expansionMap:r.expansionMap});return _isObject(u)&&"@graph"in u&&1===Object.keys(u).length?u=u["@graph"]:null===u&&(u=[]),_isArray(u)||(u=[u]),u},e.flatten=async function(t,r,a){if(arguments.length<1)return new TypeError("Could not flatten, too few arguments.");r="function"==typeof r?null:r||null,a=o(a,{base:_isString(t)?t:"",contextResolver:new ContextResolver({sharedCache:n})});const i=await e.expand(t,a),s=_flatten(i);return null===r?s:(a.graph=!0,a.skipExpansion=!0,await e.compact(s,r,a))},e.frame=async function(t,r,a){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");if(a=o(a,{base:_isString(t)?t:"",embed:"@once",explicit:!1,requireAll:!1,omitDefault:!1,bnodesToClear:[],contextResolver:new ContextResolver({sharedCache:n})}),_isString(r)){const t=await e.get(r,a);if(r=t.document,t.contextUrl){let e=r["@context"];e?_isArray(e)?e.push(t.contextUrl):e=[e,t.contextUrl]:e=t.contextUrl,r["@context"]=e}}const i=r&&r["@context"]||{},s=await e.processContext(_getInitialContext(a),i,a);a.hasOwnProperty("omitGraph")||(a.omitGraph=_processingMode(s,1.1)),a.hasOwnProperty("pruneBlankNodeIdentifiers")||(a.pruneBlankNodeIdentifiers=_processingMode(s,1.1));const c=await e.expand(t,a),u={...a};u.isFrame=!0,u.keepFreeFloatingNodes=!0;const d=await e.expand(r,u),l=Object.keys(r).map(e=>_expandIri(s,e,{vocab:!0}));u.merged=!l.includes("@graph"),u.is11=_processingMode(s,1.1);const p=_frameMergedOrDefault(c,d,u);u.graph=!a.omitGraph,u.skipExpansion=!0,u.link={},u.framing=!0;let f=await e.compact(p,i,u);return u.link={},f=_cleanupNull(f,u)},e.link=async function(t,n,o){const r={};return n&&(r["@context"]=n),r["@embed"]="@link",e.frame(t,r,o)},e.normalize=e.canonize=async function(t,r){if(arguments.length<1)throw new TypeError("Could not canonize, too few arguments.");if("inputFormat"in(r=o(r,{base:_isString(t)?t:"",algorithm:"URDNA2015",skipExpansion:!1,contextResolver:new ContextResolver({sharedCache:n})}))){if("application/n-quads"!==r.inputFormat&&"application/nquads"!==r.inputFormat)throw new JsonLdError("Unknown canonicalization input format.","jsonld.CanonizeError");const e=NQuads.parse(t);return canonize.canonize(e,r)}const a={...r};delete a.format,a.produceGeneralizedRdf=!1;const i=await e.toRDF(t,a);return canonize.canonize(i,r)},e.fromRDF=async function(e,n){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");n=o(n,{format:_isString(e)?"application/n-quads":void 0});const{format:r}=n;let{rdfParser:a}=n;if(r){if(!(a=a||t[r]))throw new JsonLdError("Unknown input format.","jsonld.UnknownFormat",{format:r})}else a=(()=>e);const i=await a(e);return _fromRDF(i,n)},e.toRDF=async function(t,r){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");let a;a=(r=o(r,{base:_isString(t)?t:"",skipExpansion:!1,contextResolver:new ContextResolver({sharedCache:n})})).skipExpansion?t:await e.expand(t,r);const i=_toRDF(a,r);if(r.format){if("application/n-quads"===r.format||"application/nquads"===r.format)return await NQuads.serialize(i);throw new JsonLdError("Unknown output format.","jsonld.UnknownFormat",{format:r.format})}return i},e.createNodeMap=async function(t,r){if(arguments.length<1)throw new TypeError("Could not create node map, too few arguments.");r=o(r,{base:_isString(t)?t:"",contextResolver:new ContextResolver({sharedCache:n})});const a=await e.expand(t,r);return _createMergedNodeMap(a,r)},e.merge=async function(t,r,a){if(arguments.length<1)throw new TypeError("Could not merge, too few arguments.");if(!_isArray(t))throw new TypeError('Could not merge, "docs" must be an array.');r="function"==typeof r?null:r||null,a=o(a,{contextResolver:new ContextResolver({sharedCache:n})});const i=await Promise.all(t.map(t=>{const n={...a};return e.expand(t,n)}));let s=!0;"mergeNodes"in a&&(s=a.mergeNodes);const c=a.issuer||new IdentifierIssuer("_:b"),u={"@default":{}};for(let e=0;e<i.length;++e){const t=util.relabelBlankNodes(i[e],{issuer:new IdentifierIssuer("_:b"+e+"-")}),n=s||0===e?u:{"@default":{}};if(_createNodeMap(t,n,"@default",c),n!==u)for(const e in n){const t=n[e];if(!(e in u)){u[e]=t;continue}const o=u[e];for(const e in t)e in o||(o[e]=t[e])}}const d=_mergeNodeMaps(u),l=[],p=Object.keys(d).sort();for(let e=0;e<p.length;++e){const t=d[p[e]];_isSubjectReference(t)||l.push(t)}return null===r?l:(a.graph=!0,a.skipExpansion=!0,await e.compact(l,r,a))},Object.defineProperty(e,"documentLoader",{get:()=>e._documentLoader,set:t=>e._documentLoader=t}),e.documentLoader=(async e=>{throw new JsonLdError("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:e})}),e.get=async function(t,n){let o;o="function"==typeof n.documentLoader?n.documentLoader:e.documentLoader;const r=await o(t);try{if(!r.document)throw new JsonLdError("No remote document found at the given URL.","jsonld.NullRemoteDocument");_isString(r.document)&&(r.document=JSON.parse(r.document))}catch(e){throw new JsonLdError("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:e,remoteDoc:r})}return r},e.processContext=async function(e,t,r){return r=o(r,{base:"",contextResolver:new ContextResolver({sharedCache:n})}),null===t?_getInitialContext(r):(t=util.clone(t),_isObject(t)&&"@context"in t||(t={"@context":t}),_processContext({activeCtx:e,localCtx:t,options:r}))},e.getContextValue=_dereq_("./context").getContextValue,e.documentLoaders={},e.documentLoaders.node=_dereq_("./documentLoaders/node"),e.documentLoaders.xhr=_dereq_("./documentLoaders/xhr"),e.useDocumentLoader=function(t){if(!(t in e.documentLoaders))throw new JsonLdError('Unknown document loader type: "'+t+'"',"jsonld.UnknownDocumentLoader",{type:t});e.documentLoader=e.documentLoaders[t].apply(e,Array.prototype.slice.call(arguments,1))},e.registerRDFParser=function(e,n){t[e]=n},e.unregisterRDFParser=function(e){delete t[e]},e.registerRDFParser("application/n-quads",NQuads.parse),e.registerRDFParser("application/nquads",NQuads.parse),e.registerRDFParser("rdfa-api",Rdfa.parse),e.url=_dereq_("./url"),e.util=util,Object.assign(e,util),e.promises=e,e.RequestQueue=_dereq_("./RequestQueue"),e.JsonLdProcessor=_dereq_("./JsonLdProcessor")(e),_browser&&void 0===global.JsonLdProcessor&&Object.defineProperty(global,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:e.JsonLdProcessor}),_nodejs?e.useDocumentLoader("node"):"undefined"!=typeof XMLHttpRequest&&e.useDocumentLoader("xhr"),e},factory=function(){return wrapper(function(){return factory()})};wrapper(factory),module.exports=factory;

}).call(this,_dereq_('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"./ContextResolver":29,"./JsonLdError":30,"./JsonLdProcessor":31,"./NQuads":32,"./Rdfa":33,"./RequestQueue":34,"./compact":36,"./context":38,"./documentLoaders/node":39,"./documentLoaders/xhr":40,"./expand":41,"./flatten":42,"./frame":43,"./fromRdf":44,"./graphTypes":45,"./nodeMap":47,"./toRdf":48,"./types":49,"./url":50,"./util":51,"_process":59,"lru-cache":52,"rdf-canonize":69}],47:[function(_dereq_,module,exports){
"use strict";const{isKeyword:isKeyword}=_dereq_("./context"),graphTypes=_dereq_("./graphTypes"),types=_dereq_("./types"),util=_dereq_("./util"),JsonLdError=_dereq_("./JsonLdError"),api={};module.exports=api,api.createMergedNodeMap=((e,t)=>{const r=(t=t||{}).issuer||new util.IdentifierIssuer("_:b"),i={"@default":{}};return api.createNodeMap(e,i,"@default",r),api.mergeNodeMaps(i)}),api.createNodeMap=((e,t,r,i,o,s)=>{if(types.isArray(e)){for(const o of e)api.createNodeMap(o,t,r,i,void 0,s);return}if(!types.isObject(e))return void(s&&s.push(e));if(graphTypes.isValue(e)){if("@type"in e){let t=e["@type"];0===t.indexOf("_:")&&(e["@type"]=t=i.getId(t))}return void(s&&s.push(e))}if(s&&graphTypes.isList(e)){const a=[];return api.createNodeMap(e["@list"],t,r,i,o,a),void s.push({"@list":a})}if("@type"in e){const t=e["@type"];for(const e of t)0===e.indexOf("_:")&&i.getId(e)}types.isUndefined(o)&&(o=graphTypes.isBlankNode(e)?i.getId(e["@id"]):e["@id"]),s&&s.push({"@id":o});const a=t[r],p=a[o]=a[o]||{};p["@id"]=o;const n=Object.keys(e).sort();for(let s of n){if("@id"===s)continue;if("@reverse"===s){const s={"@id":o},p=e["@reverse"];for(const e in p){const o=p[e];for(const p of o){let o=p["@id"];graphTypes.isBlankNode(p)&&(o=i.getId(o)),api.createNodeMap(p,t,r,i,o),util.addValue(a[o],e,s,{propertyIsArray:!0,allowDuplicate:!1})}}continue}if("@graph"===s){o in t||(t[o]={}),api.createNodeMap(e[s],t,o,i);continue}if("@included"===s){api.createNodeMap(e[s],t,r,i);continue}if("@type"!==s&&isKeyword(s)){if("@index"===s&&s in p&&(e[s]!==p[s]||e[s]["@id"]!==p[s]["@id"]))throw new JsonLdError("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:p});p[s]=e[s];continue}const n=e[s];if(0===s.indexOf("_:")&&(s=i.getId(s)),0!==n.length)for(let e of n)if("@type"===s&&(e=0===e.indexOf("_:")?i.getId(e):e),graphTypes.isSubject(e)||graphTypes.isSubjectReference(e)){if("@id"in e&&!e["@id"])continue;const o=graphTypes.isBlankNode(e)?i.getId(e["@id"]):e["@id"];util.addValue(p,s,{"@id":o},{propertyIsArray:!0,allowDuplicate:!1}),api.createNodeMap(e,t,r,i,o)}else if(graphTypes.isValue(e))util.addValue(p,s,e,{propertyIsArray:!0,allowDuplicate:!1});else if(graphTypes.isList(e)){const a=[];api.createNodeMap(e["@list"],t,r,i,o,a),e={"@list":a},util.addValue(p,s,e,{propertyIsArray:!0,allowDuplicate:!1})}else api.createNodeMap(e,t,r,i,o),util.addValue(p,s,e,{propertyIsArray:!0,allowDuplicate:!1});else util.addValue(p,s,[],{propertyIsArray:!0})}}),api.mergeNodeMapGraphs=(e=>{const t={};for(const r of Object.keys(e).sort())for(const i of Object.keys(e[r]).sort()){const o=e[r][i];i in t||(t[i]={"@id":i});const s=t[i];for(const e of Object.keys(o).sort())if(isKeyword(e)&&"@type"!==e)s[e]=util.clone(o[e]);else for(const t of o[e])util.addValue(s,e,util.clone(t),{propertyIsArray:!0,allowDuplicate:!1})}return t}),api.mergeNodeMaps=(e=>{const t=e["@default"],r=Object.keys(e).sort();for(const i of r){if("@default"===i)continue;const r=e[i];let o=t[i];o?"@graph"in o||(o["@graph"]=[]):t[i]=o={"@id":i,"@graph":[]};const s=o["@graph"];for(const e of Object.keys(r).sort()){const t=r[e];graphTypes.isSubjectReference(t)||s.push(t)}}return t});

},{"./JsonLdError":30,"./context":38,"./graphTypes":45,"./types":49,"./util":51}],48:[function(_dereq_,module,exports){
"use strict";const{createNodeMap:createNodeMap}=_dereq_("./nodeMap"),{isKeyword:isKeyword}=_dereq_("./context"),graphTypes=_dereq_("./graphTypes"),jsonCanonicalize=_dereq_("canonicalize"),types=_dereq_("./types"),util=_dereq_("./util"),{RDF_FIRST:RDF_FIRST,RDF_REST:RDF_REST,RDF_NIL:RDF_NIL,RDF_TYPE:RDF_TYPE,RDF_JSON_LITERAL:RDF_JSON_LITERAL,RDF_LANGSTRING:RDF_LANGSTRING,XSD_BOOLEAN:XSD_BOOLEAN,XSD_DOUBLE:XSD_DOUBLE,XSD_INTEGER:XSD_INTEGER,XSD_STRING:XSD_STRING}=_dereq_("./constants"),{isAbsolute:_isAbsoluteIri}=_dereq_("./url"),api={};function _graphToRDF(e,t,a,o,s){const i=Object.keys(t).sort();for(const r of i){const i=t[r],l=Object.keys(i).sort();for(let t of l){const l=i[t];if("@type"===t)t=RDF_TYPE;else if(isKeyword(t))continue;for(const i of l){const l={termType:r.startsWith("_:")?"BlankNode":"NamedNode",value:r};if(!_isAbsoluteIri(r))continue;const u={termType:t.startsWith("_:")?"BlankNode":"NamedNode",value:t};if(!_isAbsoluteIri(t))continue;if("BlankNode"===u.termType&&!s.produceGeneralizedRdf)continue;const n=_objectToRDF(i,o,e,a,s.rdfDirection);n&&e.push({subject:l,predicate:u,object:n,graph:a})}}}}function _listToRDF(e,t,a,o,s){const i={termType:"NamedNode",value:RDF_FIRST},r={termType:"NamedNode",value:RDF_REST},l={termType:"NamedNode",value:RDF_NIL},u=e.pop(),n=u?{termType:"BlankNode",value:t.getId()}:l;let p=n;for(const l of e){const e=_objectToRDF(l,t,a,o,s),u={termType:"BlankNode",value:t.getId()};a.push({subject:p,predicate:i,object:e,graph:o}),a.push({subject:p,predicate:r,object:u,graph:o}),p=u}if(u){const e=_objectToRDF(u,t,a,o,s);a.push({subject:p,predicate:i,object:e,graph:o}),a.push({subject:p,predicate:r,object:l,graph:o})}return n}function _objectToRDF(e,t,a,o,s){const i={};if(graphTypes.isValue(e)){i.termType="Literal",i.value=void 0,i.datatype={termType:"NamedNode"};let t=e["@value"];const a=e["@type"]||null;if("@json"===a)i.value=jsonCanonicalize(t),i.datatype.value=RDF_JSON_LITERAL;else if(types.isBoolean(t))i.value=t.toString(),i.datatype.value=a||XSD_BOOLEAN;else if(types.isDouble(t)||a===XSD_DOUBLE)types.isDouble(t)||(t=parseFloat(t)),i.value=t.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),i.datatype.value=a||XSD_DOUBLE;else if(types.isNumber(t))i.value=t.toFixed(0),i.datatype.value=a||XSD_INTEGER;else if("i18n-datatype"===s&&"@direction"in e){const a="https://www.w3.org/ns/i18n#"+(e["@language"]||"")+`_${e["@direction"]}`;i.datatype.value=a,i.value=t}else"@language"in e?(i.value=t,i.datatype.value=a||RDF_LANGSTRING,i.language=e["@language"]):(i.value=t,i.datatype.value=a||XSD_STRING)}else if(graphTypes.isList(e)){const r=_listToRDF(e["@list"],t,a,o,s);i.termType=r.termType,i.value=r.value}else{const t=types.isObject(e)?e["@id"]:e;i.termType=t.startsWith("_:")?"BlankNode":"NamedNode",i.value=t}return"NamedNode"!==i.termType||_isAbsoluteIri(i.value)?i:null}module.exports=api,api.toRDF=((e,t)=>{const a=new util.IdentifierIssuer("_:b"),o={"@default":{}};createNodeMap(e,o,"@default",a);const s=[],i=Object.keys(o).sort();for(const e of i){let i;if("@default"===e)i={termType:"DefaultGraph",value:""};else{if(!_isAbsoluteIri(e))continue;(i=e.startsWith("_:")?{termType:"BlankNode"}:{termType:"NamedNode"}).value=e}_graphToRDF(s,o[e],i,a,t)}return s});

},{"./constants":37,"./context":38,"./graphTypes":45,"./nodeMap":47,"./types":49,"./url":50,"./util":51,"canonicalize":28}],49:[function(_dereq_,module,exports){
"use strict";const api={};module.exports=api,api.isArray=Array.isArray,api.isBoolean=(t=>"boolean"==typeof t||"[object Boolean]"===Object.prototype.toString.call(t)),api.isDouble=(t=>api.isNumber(t)&&(-1!==String(t).indexOf(".")||Math.abs(t)>=1e21)),api.isEmptyObject=(t=>api.isObject(t)&&0===Object.keys(t).length),api.isNumber=(t=>"number"==typeof t||"[object Number]"===Object.prototype.toString.call(t)),api.isNumeric=(t=>!isNaN(parseFloat(t))&&isFinite(t)),api.isObject=(t=>"[object Object]"===Object.prototype.toString.call(t)),api.isString=(t=>"string"==typeof t||"[object String]"===Object.prototype.toString.call(t)),api.isUndefined=(t=>void 0===t);

},{}],50:[function(_dereq_,module,exports){
"use strict";const types=_dereq_("./types"),api={};module.exports=api,api.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},api.parse=((e,t)=>{const r={},a=api.parsers[t||"full"],s=a.regex.exec(e);let p=a.keys.length;for(;p--;)r[a.keys[p]]=void 0===s[p]?null:s[p];return("https"===r.scheme&&"443"===r.port||"http"===r.scheme&&"80"===r.port)&&(r.href=r.href.replace(":"+r.port,""),r.authority=r.authority.replace(":"+r.port,""),r.port=null),r.normalizedPath=api.removeDotSegments(r.path),r}),api.prependBase=((e,t)=>{if(null===e)return t;if(api.isAbsolute(t))return t;e&&!types.isString(e)||(e=api.parse(e||""));const r=api.parse(t),a={protocol:e.protocol||""};if(null!==r.authority)a.authority=r.authority,a.path=r.path,a.query=r.query;else if(a.authority=e.authority,""===r.path)a.path=e.path,null!==r.query?a.query=r.query:a.query=e.query;else{if(0===r.path.indexOf("/"))a.path=r.path;else{let t=e.path;((t=t.substr(0,t.lastIndexOf("/")+1)).length>0||e.authority)&&"/"!==t.substr(-1)&&(t+="/"),t+=r.path,a.path=t}a.query=r.query}""!==r.path&&(a.path=api.removeDotSegments(a.path));let s=a.protocol;return null!==a.authority&&(s+="//"+a.authority),s+=a.path,null!==a.query&&(s+="?"+a.query),null!==r.fragment&&(s+="#"+r.fragment),""===s&&(s="./"),s}),api.removeBase=((e,t)=>{if(null===e)return t;e&&!types.isString(e)||(e=api.parse(e||""));let r="";if(""!==e.href?r+=(e.protocol||"")+"//"+(e.authority||""):t.indexOf("//")&&(r+="//"),0!==t.indexOf(r))return t;const a=api.parse(t.substr(r.length)),s=e.normalizedPath.split("/"),p=a.normalizedPath.split("/"),i=a.fragment||a.query?0:1;for(;s.length>0&&p.length>i&&s[0]===p[0];)s.shift(),p.shift();let l="";if(s.length>0){s.pop();for(let e=0;e<s.length;++e)l+="../"}return l+=p.join("/"),null!==a.query&&(l+="?"+a.query),null!==a.fragment&&(l+="#"+a.fragment),""===l&&(l="./"),l}),api.removeDotSegments=(e=>{if(0===e.length)return"";const t=e.split("/"),r=[];for(;t.length>0;){const e=t.shift(),a=0===t.length;"."!==e?".."!==e?r.push(e):(r.pop(),a&&r.push("")):a&&r.push("")}return"/"===e[0]&&r.length>0&&""!==r[0]&&r.unshift(""),1===r.length&&""===r[0]?"/":r.join("/")});const isAbsoluteRegex=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;api.isAbsolute=(e=>types.isString(e)&&isAbsoluteRegex.test(e)),api.isRelative=(e=>types.isString(e));

},{"./types":49}],51:[function(_dereq_,module,exports){
"use strict";const graphTypes=_dereq_("./graphTypes"),types=_dereq_("./types"),IdentifierIssuer=_dereq_("rdf-canonize").IdentifierIssuer,JsonLdError=_dereq_("./JsonLdError"),REGEX_LINK_HEADERS=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,REGEX_LINK_HEADER=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,REGEX_LINK_HEADER_PARAMS=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,DEFAULTS={headers:{accept:"application/ld+json, application/json"}},api={};function _labelBlankNodes(e,r){if(types.isArray(r))for(let a=0;a<r.length;++a)r[a]=_labelBlankNodes(e,r[a]);else if(graphTypes.isList(r))r["@list"]=_labelBlankNodes(e,r["@list"]);else if(types.isObject(r)){graphTypes.isBlankNode(r)&&(r["@id"]=e.getId(r["@id"]));const a=Object.keys(r).sort();for(let t=0;t<a.length;++t){const s=a[t];"@id"!==s&&(r[s]=_labelBlankNodes(e,r[s]))}}return r}module.exports=api,api.IdentifierIssuer=IdentifierIssuer,api.clone=function(e){if(e&&"object"==typeof e){let r;if(types.isArray(e)){r=[];for(let a=0;a<e.length;++a)r[a]=api.clone(e[a])}else if(e instanceof Map){r=new Map;for(const[a,t]of e)r.set(a,api.clone(t))}else if(e instanceof Set){r=new Set;for(const a of e)r.add(api.clone(a))}else if(types.isObject(e)){r={};for(const a in e)r[a]=api.clone(e[a])}else r=e.toString();return r}return e},api.asArray=function(e){return Array.isArray(e)?e:[e]},api.buildHeaders=((e={})=>{if(Object.keys(e).some(e=>"accept"===e.toLowerCase()))throw new RangeError('Accept header may not be specified; only "'+DEFAULTS.headers.accept+'" is supported.');return Object.assign({Accept:DEFAULTS.headers.accept},e)}),api.parseLinkHeader=(e=>{const r={},a=e.match(REGEX_LINK_HEADERS);for(let e=0;e<a.length;++e){let t=a[e].match(REGEX_LINK_HEADER);if(!t)continue;const s={target:t[1]},i=t[2];for(;t=REGEX_LINK_HEADER_PARAMS.exec(i);)s[t[1]]=void 0===t[2]?t[3]:t[2];const p=s.rel||"";Array.isArray(r[p])?r[p].push(s):r.hasOwnProperty(p)?r[p]=[r[p],s]:r[p]=s}return r}),api.validateTypeValue=((e,r)=>{if(!(types.isString(e)||types.isArray(e)&&e.every(e=>types.isString(e)))){if(r&&types.isObject(e))switch(Object.keys(e).length){case 0:return;case 1:if("@default"in e&&api.asArray(e["@default"]).every(e=>types.isString(e)))return}throw new JsonLdError('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, an empty object, or a default object.',"jsonld.SyntaxError",{code:"invalid type value",value:e})}}),api.hasProperty=((e,r)=>{if(e.hasOwnProperty(r)){const a=e[r];return!types.isArray(a)||a.length>0}return!1}),api.hasValue=((e,r,a)=>{if(api.hasProperty(e,r)){let t=e[r];const s=graphTypes.isList(t);if(types.isArray(t)||s){s&&(t=t["@list"]);for(let e=0;e<t.length;++e)if(api.compareValues(a,t[e]))return!0}else if(!types.isArray(a))return api.compareValues(a,t)}return!1}),api.addValue=((e,r,a,t)=>{if("propertyIsArray"in(t=t||{})||(t.propertyIsArray=!1),"valueIsArray"in t||(t.valueIsArray=!1),"allowDuplicate"in t||(t.allowDuplicate=!0),"prependValue"in t||(t.prependValue=!1),t.valueIsArray)e[r]=a;else if(types.isArray(a)){0===a.length&&t.propertyIsArray&&!e.hasOwnProperty(r)&&(e[r]=[]),t.prependValue&&(a=a.concat(e[r]),e[r]=[]);for(let s=0;s<a.length;++s)api.addValue(e,r,a[s],t)}else if(e.hasOwnProperty(r)){const s=!t.allowDuplicate&&api.hasValue(e,r,a);types.isArray(e[r])||s&&!t.propertyIsArray||(e[r]=[e[r]]),s||(t.prependValue?e[r].unshift(a):e[r].push(a))}else e[r]=t.propertyIsArray?[a]:a}),api.getValues=((e,r)=>[].concat(e[r]||[])),api.removeProperty=((e,r)=>{delete e[r]}),api.removeValue=((e,r,a,t)=>{"propertyIsArray"in(t=t||{})||(t.propertyIsArray=!1);const s=api.getValues(e,r).filter(e=>!api.compareValues(e,a));0===s.length?api.removeProperty(e,r):1!==s.length||t.propertyIsArray?e[r]=s:e[r]=s[0]}),api.relabelBlankNodes=((e,r)=>{return _labelBlankNodes((r=r||{}).issuer||new IdentifierIssuer("_:b"),e)}),api.compareValues=((e,r)=>e===r||(!(!graphTypes.isValue(e)||!graphTypes.isValue(r)||e["@value"]!==r["@value"]||e["@type"]!==r["@type"]||e["@language"]!==r["@language"]||e["@index"]!==r["@index"])||!!(types.isObject(e)&&"@id"in e&&types.isObject(r)&&"@id"in r)&&e["@id"]===r["@id"])),api.compareShortestLeast=((e,r)=>e.length<r.length?-1:r.length<e.length?1:e===r?0:e<r?-1:1);

},{"./JsonLdError":30,"./graphTypes":45,"./types":49,"rdf-canonize":69}],52:[function(_dereq_,module,exports){
"use strict";const Yallist=_dereq_("yallist"),MAX=Symbol("max"),LENGTH=Symbol("length"),LENGTH_CALCULATOR=Symbol("lengthCalculator"),ALLOW_STALE=Symbol("allowStale"),MAX_AGE=Symbol("maxAge"),DISPOSE=Symbol("dispose"),NO_DISPOSE_ON_SET=Symbol("noDisposeOnSet"),LRU_LIST=Symbol("lruList"),CACHE=Symbol("cache"),UPDATE_AGE_ON_GET=Symbol("updateAgeOnGet"),naiveLength=()=>1;class LRUCache{constructor(t){if("number"==typeof t&&(t={max:t}),t||(t={}),t.max&&("number"!=typeof t.max||t.max<0))throw new TypeError("max must be a non-negative number");this[MAX]=t.max||1/0;const e=t.length||naiveLength;if(this[LENGTH_CALCULATOR]="function"!=typeof e?naiveLength:e,this[ALLOW_STALE]=t.stale||!1,t.maxAge&&"number"!=typeof t.maxAge)throw new TypeError("maxAge must be a number");this[MAX_AGE]=t.maxAge||0,this[DISPOSE]=t.dispose,this[NO_DISPOSE_ON_SET]=t.noDisposeOnSet||!1,this[UPDATE_AGE_ON_GET]=t.updateAgeOnGet||!1,this.reset()}set max(t){if("number"!=typeof t||t<0)throw new TypeError("max must be a non-negative number");this[MAX]=t||1/0,trim(this)}get max(){return this[MAX]}set allowStale(t){this[ALLOW_STALE]=!!t}get allowStale(){return this[ALLOW_STALE]}set maxAge(t){if("number"!=typeof t)throw new TypeError("maxAge must be a non-negative number");this[MAX_AGE]=t,trim(this)}get maxAge(){return this[MAX_AGE]}set lengthCalculator(t){"function"!=typeof t&&(t=naiveLength),t!==this[LENGTH_CALCULATOR]&&(this[LENGTH_CALCULATOR]=t,this[LENGTH]=0,this[LRU_LIST].forEach(t=>{t.length=this[LENGTH_CALCULATOR](t.value,t.key),this[LENGTH]+=t.length})),trim(this)}get lengthCalculator(){return this[LENGTH_CALCULATOR]}get length(){return this[LENGTH]}get itemCount(){return this[LRU_LIST].length}rforEach(t,e){e=e||this;for(let s=this[LRU_LIST].tail;null!==s;){const i=s.prev;forEachStep(this,t,s,e),s=i}}forEach(t,e){e=e||this;for(let s=this[LRU_LIST].head;null!==s;){const i=s.next;forEachStep(this,t,s,e),s=i}}keys(){return this[LRU_LIST].toArray().map(t=>t.key)}values(){return this[LRU_LIST].toArray().map(t=>t.value)}reset(){this[DISPOSE]&&this[LRU_LIST]&&this[LRU_LIST].length&&this[LRU_LIST].forEach(t=>this[DISPOSE](t.key,t.value)),this[CACHE]=new Map,this[LRU_LIST]=new Yallist,this[LENGTH]=0}dump(){return this[LRU_LIST].map(t=>!isStale(this,t)&&{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[LRU_LIST]}set(t,e,s){if((s=s||this[MAX_AGE])&&"number"!=typeof s)throw new TypeError("maxAge must be a number");const i=s?Date.now():0,h=this[LENGTH_CALCULATOR](e,t);if(this[CACHE].has(t)){if(h>this[MAX])return del(this,this[CACHE].get(t)),!1;const n=this[CACHE].get(t).value;return this[DISPOSE]&&(this[NO_DISPOSE_ON_SET]||this[DISPOSE](t,n.value)),n.now=i,n.maxAge=s,n.value=e,this[LENGTH]+=h-n.length,n.length=h,this.get(t),trim(this),!0}const n=new Entry(t,e,h,i,s);return n.length>this[MAX]?(this[DISPOSE]&&this[DISPOSE](t,e),!1):(this[LENGTH]+=n.length,this[LRU_LIST].unshift(n),this[CACHE].set(t,this[LRU_LIST].head),trim(this),!0)}has(t){if(!this[CACHE].has(t))return!1;const e=this[CACHE].get(t).value;return!isStale(this,e)}get(t){return get(this,t,!0)}peek(t){return get(this,t,!1)}pop(){const t=this[LRU_LIST].tail;return t?(del(this,t),t.value):null}del(t){del(this,this[CACHE].get(t))}load(t){this.reset();const e=Date.now();for(let s=t.length-1;s>=0;s--){const i=t[s],h=i.e||0;if(0===h)this.set(i.k,i.v);else{const t=h-e;t>0&&this.set(i.k,i.v,t)}}}prune(){this[CACHE].forEach((t,e)=>get(this,e,!1))}}const get=(t,e,s)=>{const i=t[CACHE].get(e);if(i){const e=i.value;if(isStale(t,e)){if(del(t,i),!t[ALLOW_STALE])return}else s&&(t[UPDATE_AGE_ON_GET]&&(i.value.now=Date.now()),t[LRU_LIST].unshiftNode(i));return e.value}},isStale=(t,e)=>{if(!e||!e.maxAge&&!t[MAX_AGE])return!1;const s=Date.now()-e.now;return e.maxAge?s>e.maxAge:t[MAX_AGE]&&s>t[MAX_AGE]},trim=t=>{if(t[LENGTH]>t[MAX])for(let e=t[LRU_LIST].tail;t[LENGTH]>t[MAX]&&null!==e;){const s=e.prev;del(t,e),e=s}},del=(t,e)=>{if(e){const s=e.value;t[DISPOSE]&&t[DISPOSE](s.key,s.value),t[LENGTH]-=s.length,t[CACHE].delete(s.key),t[LRU_LIST].removeNode(e)}};class Entry{constructor(t,e,s,i,h){this.key=t,this.value=e,this.length=s,this.now=i,this.maxAge=h||0}}const forEachStep=(t,e,s,i)=>{let h=s.value;isStale(t,h)&&(del(t,s),t[ALLOW_STALE]||(h=void 0)),h&&e.call(i,h.value,h.key,t)};module.exports=LRUCache;

},{"yallist":73}],53:[function(_dereq_,module,exports){
(function (Buffer){
var api={};module.exports=api;var _reverseAlphabets={};function _encodeWithByteBuffer(r,e){var t=0,n=e.length,o=e.charAt(0),a=[0];for(t=0;t<r.length();++t){for(var f=0,h=r.at(t);f<a.length;++f)h+=a[f]<<8,a[f]=h%n,h=h/n|0;for(;h>0;)a.push(h%n),h=h/n|0}var i="";for(t=0;0===r.at(t)&&t<r.length()-1;++t)i+=o;for(t=a.length-1;t>=0;--t)i+=e[a[t]];return i}api.encode=function(r,e,t){if("string"!=typeof e)throw new TypeError('"alphabet" must be a string.');if(void 0!==t&&"number"!=typeof t)throw new TypeError('"maxline" must be a number.');var n="";if(r instanceof Uint8Array){var o=0,a=e.length,f=e.charAt(0),h=[0];for(o=0;o<r.length;++o){for(var i=0,p=r[o];i<h.length;++i)p+=h[i]<<8,h[i]=p%a,p=p/a|0;for(;p>0;)h.push(p%a),p=p/a|0}for(o=0;0===r[o]&&o<r.length-1;++o)n+=f;for(o=h.length-1;o>=0;--o)n+=e[h[o]]}else n=_encodeWithByteBuffer(r,e);if(t){var s=new RegExp(".{1,"+t+"}","g");n=n.match(s).join("\r\n")}return n},api.decode=function(r,e){if("string"!=typeof r)throw new TypeError('"input" must be a string.');if("string"!=typeof e)throw new TypeError('"alphabet" must be a string.');var t=_reverseAlphabets[e];if(!t){t=_reverseAlphabets[e]=[];for(var n=0;n<e.length;++n)t[e.charCodeAt(n)]=n}r=r.replace(/\s/g,"");var o=e.length,a=e.charAt(0),f=[0];for(n=0;n<r.length;n++){var h=t[r.charCodeAt(n)];if(void 0===h)return;for(var i=0,p=h;i<f.length;++i)p+=f[i]*o,f[i]=255&p,p>>=8;for(;p>0;)f.push(255&p),p>>=8}for(var s=0;r[s]===a&&s<r.length-1;++s)f.push(0);return"undefined"!=typeof Buffer?Buffer.from(f.reverse()):new Uint8Array(f.reverse())};

}).call(this,_dereq_("buffer").Buffer)
},{"buffer":27}],54:[function(_dereq_,module,exports){
module.exports={options:{usePureJavaScript:!1}};

},{}],55:[function(_dereq_,module,exports){
var forge=_dereq_("./forge");module.exports=forge.md=forge.md||{},forge.md.algorithms=forge.md.algorithms||{};

},{"./forge":54}],56:[function(_dereq_,module,exports){
var forge=_dereq_("./forge");_dereq_("./md"),_dereq_("./util");var sha1=module.exports=forge.sha1=forge.sha1||{};forge.md.sha1=forge.md.algorithms.sha1=sha1,sha1.create=function(){_initialized||_init();var e=null,t=forge.util.createBuffer(),h=new Array(80),g={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){g.messageLength=0,g.fullMessageLength=g.messageLength64=[];for(var h=g.messageLengthSize/4,r=0;r<h;++r)g.fullMessageLength.push(0);return t=forge.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},g}};return g.start(),g.update=function(r,n){"utf8"===n&&(r=forge.util.encodeUtf8(r));var a=r.length;g.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var s=g.fullMessageLength.length-1;s>=0;--s)g.fullMessageLength[s]+=a[1],a[1]=a[0]+(g.fullMessageLength[s]/4294967296>>>0),g.fullMessageLength[s]=g.fullMessageLength[s]>>>0,a[0]=a[1]/4294967296>>>0;return t.putBytes(r),_update(e,h,t),(t.read>2048||0===t.length())&&t.compact(),g},g.digest=function(){var r=forge.util.createBuffer();r.putBytes(t.bytes());var n,a=g.fullMessageLength[g.fullMessageLength.length-1]+g.messageLengthSize&g.blockLength-1;r.putBytes(_padding.substr(0,g.blockLength-a));for(var s=8*g.fullMessageLength[0],u=0;u<g.fullMessageLength.length-1;++u)s+=(n=8*g.fullMessageLength[u+1])/4294967296>>>0,r.putInt32(s>>>0),s=n>>>0;r.putInt32(s);var l={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4};_update(l,h,r);var f=forge.util.createBuffer();return f.putInt32(l.h0),f.putInt32(l.h1),f.putInt32(l.h2),f.putInt32(l.h3),f.putInt32(l.h4),f},g};var _padding=null,_initialized=!1;function _init(){_padding=String.fromCharCode(128),_padding+=forge.util.fillString(String.fromCharCode(0),64),_initialized=!0}function _update(e,t,h){for(var g,r,n,a,s,u,l,f=h.length();f>=64;){for(r=e.h0,n=e.h1,a=e.h2,s=e.h3,u=e.h4,l=0;l<16;++l)g=h.getInt32(),t[l]=g,g=(r<<5|r>>>27)+(s^n&(a^s))+u+1518500249+g,u=s,s=a,a=(n<<30|n>>>2)>>>0,n=r,r=g;for(;l<20;++l)g=(g=t[l-3]^t[l-8]^t[l-14]^t[l-16])<<1|g>>>31,t[l]=g,g=(r<<5|r>>>27)+(s^n&(a^s))+u+1518500249+g,u=s,s=a,a=(n<<30|n>>>2)>>>0,n=r,r=g;for(;l<32;++l)g=(g=t[l-3]^t[l-8]^t[l-14]^t[l-16])<<1|g>>>31,t[l]=g,g=(r<<5|r>>>27)+(n^a^s)+u+1859775393+g,u=s,s=a,a=(n<<30|n>>>2)>>>0,n=r,r=g;for(;l<40;++l)g=(g=t[l-6]^t[l-16]^t[l-28]^t[l-32])<<2|g>>>30,t[l]=g,g=(r<<5|r>>>27)+(n^a^s)+u+1859775393+g,u=s,s=a,a=(n<<30|n>>>2)>>>0,n=r,r=g;for(;l<60;++l)g=(g=t[l-6]^t[l-16]^t[l-28]^t[l-32])<<2|g>>>30,t[l]=g,g=(r<<5|r>>>27)+(n&a|s&(n^a))+u+2400959708+g,u=s,s=a,a=(n<<30|n>>>2)>>>0,n=r,r=g;for(;l<80;++l)g=(g=t[l-6]^t[l-16]^t[l-28]^t[l-32])<<2|g>>>30,t[l]=g,g=(r<<5|r>>>27)+(n^a^s)+u+3395469782+g,u=s,s=a,a=(n<<30|n>>>2)>>>0,n=r,r=g;e.h0=e.h0+r|0,e.h1=e.h1+n|0,e.h2=e.h2+a|0,e.h3=e.h3+s|0,e.h4=e.h4+u|0,f-=64}}

},{"./forge":54,"./md":55,"./util":58}],57:[function(_dereq_,module,exports){
var forge=_dereq_("./forge");_dereq_("./md"),_dereq_("./util");var sha256=module.exports=forge.sha256=forge.sha256||{};forge.md.sha256=forge.md.algorithms.sha256=sha256,sha256.create=function(){_initialized||_init();var e=null,t=forge.util.createBuffer(),h=new Array(64),n={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var h=n.messageLengthSize/4,g=0;g<h;++g)n.fullMessageLength.push(0);return t=forge.util.createBuffer(),e={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},n}};return n.start(),n.update=function(g,r){"utf8"===r&&(g=forge.util.encodeUtf8(g));var a=g.length;n.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var u=n.fullMessageLength.length-1;u>=0;--u)n.fullMessageLength[u]+=a[1],a[1]=a[0]+(n.fullMessageLength[u]/4294967296>>>0),n.fullMessageLength[u]=n.fullMessageLength[u]>>>0,a[0]=a[1]/4294967296>>>0;return t.putBytes(g),_update(e,h,t),(t.read>2048||0===t.length())&&t.compact(),n},n.digest=function(){var g=forge.util.createBuffer();g.putBytes(t.bytes());var r,a=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize&n.blockLength-1;g.putBytes(_padding.substr(0,n.blockLength-a));for(var u=8*n.fullMessageLength[0],s=0;s<n.fullMessageLength.length-1;++s)u+=(r=8*n.fullMessageLength[s+1])/4294967296>>>0,g.putInt32(u>>>0),u=r>>>0;g.putInt32(u);var l={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4,h5:e.h5,h6:e.h6,h7:e.h7};_update(l,h,g);var f=forge.util.createBuffer();return f.putInt32(l.h0),f.putInt32(l.h1),f.putInt32(l.h2),f.putInt32(l.h3),f.putInt32(l.h4),f.putInt32(l.h5),f.putInt32(l.h6),f.putInt32(l.h7),f},n};var _padding=null,_initialized=!1,_k=null;function _init(){_padding=String.fromCharCode(128),_padding+=forge.util.fillString(String.fromCharCode(0),64),_k=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],_initialized=!0}function _update(e,t,h){for(var n,g,r,a,u,s,l,f,i,o,d,p,L,c=h.length();c>=64;){for(u=0;u<16;++u)t[u]=h.getInt32();for(;u<64;++u)n=((n=t[u-2])>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,g=((g=t[u-15])>>>7|g<<25)^(g>>>18|g<<14)^g>>>3,t[u]=n+t[u-7]+g+t[u-16]|0;for(s=e.h0,l=e.h1,f=e.h2,i=e.h3,o=e.h4,d=e.h5,p=e.h6,L=e.h7,u=0;u<64;++u)r=(s>>>2|s<<30)^(s>>>13|s<<19)^(s>>>22|s<<10),a=s&l|f&(s^l),n=L+((o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7))+(p^o&(d^p))+_k[u]+t[u],L=p,p=d,d=o,o=i+n>>>0,i=f,f=l,l=s,s=n+(g=r+a)>>>0;e.h0=e.h0+s|0,e.h1=e.h1+l|0,e.h2=e.h2+f|0,e.h3=e.h3+i|0,e.h4=e.h4+o|0,e.h5=e.h5+d|0,e.h6=e.h6+p|0,e.h7=e.h7+L|0,c-=64}}

},{"./forge":54,"./md":55,"./util":58}],58:[function(_dereq_,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,setImmediate){
var forge=_dereq_("./forge"),baseN=_dereq_("./baseN"),util=module.exports=forge.util=forge.util||{};function _checkBitsParam(t){if(8!==t&&16!==t&&24!==t&&32!==t)throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}function ByteStringBuffer(t){if(this.data="",this.read=0,"string"==typeof t)this.data=t;else if(util.isArrayBuffer(t)||util.isArrayBufferView(t))if("undefined"!=typeof Buffer&&t instanceof Buffer)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch(t){for(var r=0;r<e.length;++r)this.putByte(e[r])}}else(t instanceof ByteStringBuffer||"object"==typeof t&&"string"==typeof t.data&&"number"==typeof t.read)&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}!function(){if("undefined"!=typeof process&&process.nextTick&&!process.browser)return util.nextTick=process.nextTick,void("function"==typeof setImmediate?util.setImmediate=setImmediate:util.setImmediate=util.nextTick);if("function"==typeof setImmediate)return util.setImmediate=function(){return setImmediate.apply(void 0,arguments)},void(util.nextTick=function(t){return setImmediate(t)});if(util.setImmediate=function(t){setTimeout(t,0)},"undefined"!=typeof window&&"function"==typeof window.postMessage){var t="forge.setImmediate",e=[];util.setImmediate=function(r){e.push(r),1===e.length&&window.postMessage(t,"*")},window.addEventListener("message",function(r){if(r.source===window&&r.data===t){r.stopPropagation();var i=e.slice();e.length=0,i.forEach(function(t){t()})}},!0)}if("undefined"!=typeof MutationObserver){var r=Date.now(),i=!0,n=document.createElement("div");e=[];new MutationObserver(function(){var t=e.slice();e.length=0,t.forEach(function(t){t()})}).observe(n,{attributes:!0});var a=util.setImmediate;util.setImmediate=function(t){Date.now()-r>15?(r=Date.now(),a(t)):(e.push(t),1===e.length&&n.setAttribute("a",i=!i))}}util.nextTick=util.setImmediate}(),util.isNodejs="undefined"!=typeof process&&process.versions&&process.versions.node,util.globalScope=util.isNodejs?global:"undefined"==typeof self?window:self,util.isArray=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},util.isArrayBuffer=function(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer},util.isArrayBufferView=function(t){return t&&util.isArrayBuffer(t.buffer)&&void 0!==t.byteLength},util.ByteBuffer=ByteStringBuffer,util.ByteStringBuffer=ByteStringBuffer;var _MAX_CONSTRUCTED_STRING_LENGTH=4096;function DataBuffer(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var r=util.isArrayBuffer(t),i=util.isArrayBufferView(t);if(r||i)return this.data=r?new DataView(t):new DataView(t.buffer,t.byteOffset,t.byteLength),void(this.write="writeOffset"in e?e.writeOffset:this.data.byteLength);this.data=new DataView(new ArrayBuffer(0)),this.write=0,null!=t&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)}util.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>_MAX_CONSTRUCTED_STRING_LENGTH&&(this.data.substr(0,1),this._constructedStringLength=0)},util.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},util.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},util.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))},util.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var r=this.data;e>0;)1&e&&(r+=t),(e>>>=1)>0&&(t+=t);return this.data=r,this._optimizeConstructedString(e),this},util.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this},util.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(util.encodeUtf8(t))},util.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},util.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},util.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},util.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255))},util.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))},util.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))},util.ByteStringBuffer.prototype.putInt=function(t,e){_checkBitsParam(e);var r="";do{e-=8,r+=String.fromCharCode(t>>e&255)}while(e>0);return this.putBytes(r)},util.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)},util.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())},util.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},util.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t},util.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t},util.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t},util.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t},util.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t},util.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t},util.ByteStringBuffer.prototype.getInt=function(t){_checkBitsParam(t);var e=0;do{e=(e<<8)+this.data.charCodeAt(this.read++),t-=8}while(t>0);return e},util.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e},util.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):0===t?e="":(e=0===this.read?this.data:this.data.slice(this.read),this.clear()),e},util.ByteStringBuffer.prototype.bytes=function(t){return void 0===t?this.data.slice(this.read):this.data.slice(this.read,this.read+t)},util.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)},util.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this},util.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},util.ByteStringBuffer.prototype.copy=function(){var t=util.createBuffer(this.data);return t.read=this.read,t},util.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},util.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this},util.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this},util.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var r=this.data.charCodeAt(e);r<16&&(t+="0"),t+=r.toString(16)}return t},util.ByteStringBuffer.prototype.toString=function(){return util.decodeUtf8(this.bytes())},util.DataBuffer=DataBuffer,util.DataBuffer.prototype.length=function(){return this.write-this.read},util.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},util.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),i=new Uint8Array(this.length()+e);return i.set(r),this.data=new DataView(i.buffer),this},util.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this},util.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var r=0;r<e;++r)this.data.setUint8(t);return this},util.DataBuffer.prototype.putBytes=function(t,e){if(util.isArrayBufferView(t)){var r=(i=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)).byteLength-i.byteOffset;return this.accommodate(r),new Uint8Array(this.data.buffer,this.write).set(i),this.write+=r,this}if(util.isArrayBuffer(t)){var i=new Uint8Array(t);return this.accommodate(i.byteLength),new Uint8Array(this.data.buffer).set(i,this.write),this.write+=i.byteLength,this}if(t instanceof util.DataBuffer||"object"==typeof t&&"number"==typeof t.read&&"number"==typeof t.write&&util.isArrayBufferView(t.data)){i=new Uint8Array(t.data.byteLength,t.read,t.length());return this.accommodate(i.byteLength),new Uint8Array(t.data.byteLength,this.write).set(i),this.write+=i.byteLength,this}if(t instanceof util.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary","string"==typeof t){var n;if("hex"===e)return this.accommodate(Math.ceil(t.length/2)),n=new Uint8Array(this.data.buffer,this.write),this.write+=util.binary.hex.decode(t,n,this.write),this;if("base64"===e)return this.accommodate(3*Math.ceil(t.length/4)),n=new Uint8Array(this.data.buffer,this.write),this.write+=util.binary.base64.decode(t,n,this.write),this;if("utf8"===e&&(t=util.encodeUtf8(t),e="binary"),"binary"===e||"raw"===e)return this.accommodate(t.length),n=new Uint8Array(this.data.buffer,this.write),this.write+=util.binary.raw.decode(n),this;if("utf16"===e)return this.accommodate(2*t.length),n=new Uint16Array(this.data.buffer,this.write),this.write+=util.text.utf16.encode(n),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)},util.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this},util.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")},util.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this},util.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this},util.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this},util.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this},util.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this},util.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this},util.DataBuffer.prototype.putInt=function(t,e){_checkBitsParam(e),this.accommodate(e/8);do{e-=8,this.data.setInt8(this.write++,t>>e&255)}while(e>0);return this},util.DataBuffer.prototype.putSignedInt=function(t,e){return _checkBitsParam(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)},util.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},util.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t},util.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t},util.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t},util.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t},util.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t},util.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t},util.DataBuffer.prototype.getInt=function(t){_checkBitsParam(t);var e=0;do{e=(e<<8)+this.data.getInt8(this.read++),t-=8}while(t>0);return e},util.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e},util.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):0===t?e="":(e=0===this.read?this.data:this.data.slice(this.read),this.clear()),e},util.DataBuffer.prototype.bytes=function(t){return void 0===t?this.data.slice(this.read):this.data.slice(this.read,this.read+t)},util.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)},util.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this},util.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},util.DataBuffer.prototype.copy=function(){return new util.DataBuffer(this)},util.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this},util.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},util.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this},util.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var r=this.data.getUint8(e);r<16&&(t+="0"),t+=r.toString(16)}return t},util.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if("binary"===(t=t||"utf8")||"raw"===t)return util.binary.raw.encode(e);if("hex"===t)return util.binary.hex.encode(e);if("base64"===t)return util.binary.base64.encode(e);if("utf8"===t)return util.text.utf8.decode(e);if("utf16"===t)return util.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)},util.createBuffer=function(t,e){return e=e||"raw",void 0!==t&&"utf8"===e&&(t=util.encodeUtf8(t)),new util.ByteBuffer(t)},util.fillString=function(t,e){for(var r="";e>0;)1&e&&(r+=t),(e>>>=1)>0&&(t+=t);return r},util.xorBytes=function(t,e,r){for(var i="",n="",a="",u=0,o=0;r>0;--r,++u)n=t.charCodeAt(u)^e.charCodeAt(u),o>=10&&(i+=a,a="",o=0),a+=String.fromCharCode(n),++o;return i+=a},util.hexToBytes=function(t){var e="",r=0;for(!0&t.length&&(r=1,e+=String.fromCharCode(parseInt(t[0],16)));r<t.length;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e},util.bytesToHex=function(t){return util.createBuffer(t).toHex()},util.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t)};var _base64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_base64Idx=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],_base58="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";util.encode64=function(t,e){for(var r,i,n,a="",u="",o=0;o<t.length;)r=t.charCodeAt(o++),i=t.charCodeAt(o++),n=t.charCodeAt(o++),a+=_base64.charAt(r>>2),a+=_base64.charAt((3&r)<<4|i>>4),isNaN(i)?a+="==":(a+=_base64.charAt((15&i)<<2|n>>6),a+=isNaN(n)?"=":_base64.charAt(63&n)),e&&a.length>e&&(u+=a.substr(0,e)+"\r\n",a=a.substr(e));return u+=a},util.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e,r,i,n,a="",u=0;u<t.length;)e=_base64Idx[t.charCodeAt(u++)-43],r=_base64Idx[t.charCodeAt(u++)-43],i=_base64Idx[t.charCodeAt(u++)-43],n=_base64Idx[t.charCodeAt(u++)-43],a+=String.fromCharCode(e<<2|r>>4),64!==i&&(a+=String.fromCharCode((15&r)<<4|i>>2),64!==n&&(a+=String.fromCharCode((3&i)<<6|n)));return a},util.encodeUtf8=function(t){return unescape(encodeURIComponent(t))},util.decodeUtf8=function(t){return decodeURIComponent(escape(t))},util.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:baseN.encode,decode:baseN.decode}},util.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)},util.binary.raw.decode=function(t,e,r){var i=e;i||(i=new Uint8Array(t.length));for(var n=r=r||0,a=0;a<t.length;++a)i[n++]=t.charCodeAt(a);return e?n-r:i},util.binary.hex.encode=util.bytesToHex,util.binary.hex.decode=function(t,e,r){var i=e;i||(i=new Uint8Array(Math.ceil(t.length/2)));var n=0,a=r=r||0;for(1&t.length&&(n=1,i[a++]=parseInt(t[0],16));n<t.length;n+=2)i[a++]=parseInt(t.substr(n,2),16);return e?a-r:i},util.binary.base64.encode=function(t,e){for(var r,i,n,a="",u="",o=0;o<t.byteLength;)r=t[o++],i=t[o++],n=t[o++],a+=_base64.charAt(r>>2),a+=_base64.charAt((3&r)<<4|i>>4),isNaN(i)?a+="==":(a+=_base64.charAt((15&i)<<2|n>>6),a+=isNaN(n)?"=":_base64.charAt(63&n)),e&&a.length>e&&(u+=a.substr(0,e)+"\r\n",a=a.substr(e));return u+=a},util.binary.base64.decode=function(t,e,r){var i,n,a,u,o=e;o||(o=new Uint8Array(3*Math.ceil(t.length/4))),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var s=0,f=r=r||0;s<t.length;)i=_base64Idx[t.charCodeAt(s++)-43],n=_base64Idx[t.charCodeAt(s++)-43],a=_base64Idx[t.charCodeAt(s++)-43],u=_base64Idx[t.charCodeAt(s++)-43],o[f++]=i<<2|n>>4,64!==a&&(o[f++]=(15&n)<<4|a>>2,64!==u&&(o[f++]=(3&a)<<6|u));return e?f-r:o.subarray(0,f)},util.binary.base58.encode=function(t,e){return util.binary.baseN.encode(t,_base58,e)},util.binary.base58.decode=function(t,e){return util.binary.baseN.decode(t,_base58,e)},util.text={utf8:{},utf16:{}},util.text.utf8.encode=function(t,e,r){t=util.encodeUtf8(t);var i=e;i||(i=new Uint8Array(t.length));for(var n=r=r||0,a=0;a<t.length;++a)i[n++]=t.charCodeAt(a);return e?n-r:i},util.text.utf8.decode=function(t){return util.decodeUtf8(String.fromCharCode.apply(null,t))},util.text.utf16.encode=function(t,e,r){var i=e;i||(i=new Uint8Array(2*t.length));for(var n=new Uint16Array(i.buffer),a=r=r||0,u=r,o=0;o<t.length;++o)n[u++]=t.charCodeAt(o),a+=2;return e?a-r:i},util.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))},util.deflate=function(t,e,r){if(e=util.decode64(t.deflate(util.encode64(e)).rval),r){var i=2;32&e.charCodeAt(1)&&(i=6),e=e.substring(i,e.length-4)}return e},util.inflate=function(t,e,r){var i=t.inflate(util.encode64(e)).rval;return null===i?null:util.decode64(i)};var _setStorageObject=function(t,e,r){if(!t)throw new Error("WebStorage not available.");var i;if(null===r?i=t.removeItem(e):(r=util.encode64(JSON.stringify(r)),i=t.setItem(e,r)),void 0!==i&&!0!==i.rval){var n=new Error(i.error.message);throw n.id=i.error.id,n.name=i.error.name,n}},_getStorageObject=function(t,e){if(!t)throw new Error("WebStorage not available.");var r=t.getItem(e);if(t.init)if(null===r.rval){if(r.error){var i=new Error(r.error.message);throw i.id=r.error.id,i.name=r.error.name,i}r=null}else r=r.rval;return null!==r&&(r=JSON.parse(util.decode64(r))),r},_setItem=function(t,e,r,i){var n=_getStorageObject(t,e);null===n&&(n={}),n[r]=i,_setStorageObject(t,e,n)},_getItem=function(t,e,r){var i=_getStorageObject(t,e);return null!==i&&(i=r in i?i[r]:null),i},_removeItem=function(t,e,r){var i=_getStorageObject(t,e);if(null!==i&&r in i){delete i[r];var n=!0;for(var a in i){n=!1;break}n&&(i=null),_setStorageObject(t,e,i)}},_clearItems=function(t,e){_setStorageObject(t,e,null)},_callStorageFunction=function(t,e,r){var i,n=null;void 0===r&&(r=["web","flash"]);var a=!1,u=null;for(var o in r){i=r[o];try{if("flash"===i||"both"===i){if(null===e[0])throw new Error("Flash local storage not available.");n=t.apply(this,e),a="flash"===i}"web"!==i&&"both"!==i||(e[0]=localStorage,n=t.apply(this,e),a=!0)}catch(t){u=t}if(a)break}if(!a)throw u;return n};util.setItem=function(t,e,r,i,n){_callStorageFunction(_setItem,arguments,n)},util.getItem=function(t,e,r,i){return _callStorageFunction(_getItem,arguments,i)},util.removeItem=function(t,e,r,i){_callStorageFunction(_removeItem,arguments,i)},util.clearItems=function(t,e,r){_callStorageFunction(_clearItems,arguments,r)},util.parseUrl=function(t){var e=/^(https?):\/\/([^:&^\/]*):?(\d*)(.*)$/g;e.lastIndex=0;var r=e.exec(t),i=null===r?null:{full:t,scheme:r[1],host:r[2],port:r[3],path:r[4]};return i&&(i.fullHost=i.host,i.port?80!==i.port&&"http"===i.scheme?i.fullHost+=":"+i.port:443!==i.port&&"https"===i.scheme&&(i.fullHost+=":"+i.port):"http"===i.scheme?i.port=80:"https"===i.scheme&&(i.port=443),i.full=i.scheme+"://"+i.fullHost),i};var _queryVariables=null;util.getQueryVariables=function(t){var e,r=function(t){for(var e={},r=t.split("&"),i=0;i<r.length;i++){var n,a,u=r[i].indexOf("=");u>0?(n=r[i].substring(0,u),a=r[i].substring(u+1)):(n=r[i],a=null),n in e||(e[n]=[]),n in Object.prototype||null===a||e[n].push(unescape(a))}return e};return void 0===t?(null===_queryVariables&&(_queryVariables="undefined"!=typeof window&&window.location&&window.location.search?r(window.location.search.substring(1)):{}),e=_queryVariables):e=r(t),e},util.parseFragment=function(t){var e=t,r="",i=t.indexOf("?");i>0&&(e=t.substring(0,i),r=t.substring(i+1));var n=e.split("/");return n.length>0&&""===n[0]&&n.shift(),{pathString:e,queryString:r,path:n,query:""===r?{}:util.getQueryVariables(r)}},util.makeRequest=function(t){var e=util.parseFragment(t),r={path:e.pathString,query:e.queryString,getPath:function(t){return void 0===t?e.path:e.path[t]},getQuery:function(t,r){var i;return void 0===t?i=e.query:(i=e.query[t])&&void 0!==r&&(i=i[r]),i},getQueryLast:function(t,e){var i=r.getQuery(t);return i?i[i.length-1]:e}};return r},util.makeLink=function(t,e,r){t=jQuery.isArray(t)?t.join("/"):t;var i=jQuery.param(e||{});return r=r||"",t+(i.length>0?"?"+i:"")+(r.length>0?"#"+r:"")},util.setPath=function(t,e,r){if("object"==typeof t&&null!==t)for(var i=0,n=e.length;i<n;){var a=e[i++];if(i==n)t[a]=r;else{var u=a in t;(!u||u&&"object"!=typeof t[a]||u&&null===t[a])&&(t[a]={}),t=t[a]}}},util.getPath=function(t,e,r){for(var i=0,n=e.length,a=!0;a&&i<n&&"object"==typeof t&&null!==t;){var u=e[i++];(a=u in t)&&(t=t[u])}return a?t:r},util.deletePath=function(t,e){if("object"==typeof t&&null!==t)for(var r=0,i=e.length;r<i;){var n=e[r++];if(r==i)delete t[n];else{if(!(n in t)||"object"!=typeof t[n]||null===t[n])break;t=t[n]}}},util.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},util.format=function(t){for(var e,r,i=/%./g,n=0,a=[],u=0;e=i.exec(t);){(r=t.substring(u,i.lastIndex-2)).length>0&&a.push(r),u=i.lastIndex;var o=e[0][1];switch(o){case"s":case"o":n<arguments.length?a.push(arguments[1+n++]):a.push("<?>");break;case"%":a.push("%");break;default:a.push("<%"+o+"?>")}}return a.push(t.substring(u)),a.join("")},util.formatNumber=function(t,e,r,i){var n=t,a=isNaN(e=Math.abs(e))?2:e,u=void 0===r?",":r,o=void 0===i?".":i,s=n<0?"-":"",f=parseInt(n=Math.abs(+n||0).toFixed(a),10)+"",h=f.length>3?f.length%3:0;return s+(h?f.substr(0,h)+o:"")+f.substr(h).replace(/(\d{3})(?=\d)/g,"$1"+o)+(a?u+Math.abs(n-f).toFixed(a).slice(2):"")},util.formatSize=function(t){return t=t>=1073741824?util.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?util.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?util.formatNumber(t/1024,0)+" KiB":util.formatNumber(t,0)+" bytes"},util.bytesFromIP=function(t){return-1!==t.indexOf(".")?util.bytesFromIPv4(t):-1!==t.indexOf(":")?util.bytesFromIPv6(t):null},util.bytesFromIPv4=function(t){if(4!==(t=t.split(".")).length)return null;for(var e=util.createBuffer(),r=0;r<t.length;++r){var i=parseInt(t[r],10);if(isNaN(i))return null;e.putByte(i)}return e.getBytes()},util.bytesFromIPv6=function(t){for(var e=0,r=2*(8-(t=t.split(":").filter(function(t){return 0===t.length&&++e,!0})).length+e),i=util.createBuffer(),n=0;n<8;++n)if(t[n]&&0!==t[n].length){var a=util.hexToBytes(t[n]);a.length<2&&i.putByte(0),i.putBytes(a)}else i.fillWithByte(0,r),r=0;return i.getBytes()},util.bytesToIP=function(t){return 4===t.length?util.bytesToIPv4(t):16===t.length?util.bytesToIPv6(t):null},util.bytesToIPv4=function(t){if(4!==t.length)return null;for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e.join(".")},util.bytesToIPv6=function(t){if(16!==t.length)return null;for(var e=[],r=[],i=0,n=0;n<t.length;n+=2){for(var a=util.bytesToHex(t[n]+t[n+1]);"0"===a[0]&&"0"!==a;)a=a.substr(1);if("0"===a){var u=r[r.length-1],o=e.length;u&&o===u.end+1?(u.end=o,u.end-u.start>r[i].end-r[i].start&&(i=r.length-1)):r.push({start:o,end:o})}e.push(a)}if(r.length>0){var s=r[i];s.end-s.start>0&&(e.splice(s.start,s.end-s.start+1,""),0===s.start&&e.unshift(""),7===s.end&&e.push(""))}return e.join(":")},util.estimateCores=function(t,e){if("function"==typeof t&&(e=t,t={}),t=t||{},"cores"in util&&!t.update)return e(null,util.cores);if("undefined"!=typeof navigator&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return util.cores=navigator.hardwareConcurrency,e(null,util.cores);if("undefined"==typeof Worker)return util.cores=1,e(null,util.cores);if("undefined"==typeof Blob)return util.cores=2,e(null,util.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(t){for(var e=Date.now(),r=e+4;Date.now()<r;);self.postMessage({st:e,et:r})})}.toString(),")()"],{type:"application/javascript"}));!function t(i,n,a){if(0===n){var u=Math.floor(i.reduce(function(t,e){return t+e},0)/i.length);return util.cores=Math.max(1,u),URL.revokeObjectURL(r),e(null,util.cores)}!function(t,e){for(var i=[],n=[],a=0;a<t;++a){var u=new Worker(r);u.addEventListener("message",function(r){if(n.push(r.data),n.length===t){for(var a=0;a<t;++a)i[a].terminate();e(null,n)}}),i.push(u)}for(var a=0;a<t;++a)i[a].postMessage(a)}(a,function(e,r){i.push(function(t,e){for(var r=[],i=0;i<t;++i)for(var n=e[i],a=r[i]=[],u=0;u<t;++u)if(i!==u){var o=e[u];(n.st>o.st&&n.st<o.et||o.st>n.st&&o.st<n.et)&&a.push(u)}return r.reduce(function(t,e){return Math.max(t,e.length)},0)}(a,r)),t(i,n-1,a)})}([],5,16)};

}).call(this,_dereq_('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},_dereq_("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],_dereq_("timers").setImmediate)
},{"./baseN":53,"./forge":54,"_process":59,"buffer":27,"timers":71}],59:[function(_dereq_,module,exports){
var cachedSetTimeout,cachedClearTimeout,process=module.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(e){if(cachedSetTimeout===setTimeout)return setTimeout(e,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(e,0);try{return cachedSetTimeout(e,0)}catch(t){try{return cachedSetTimeout.call(null,e,0)}catch(t){return cachedSetTimeout.call(this,e,0)}}}function runClearTimeout(e){if(cachedClearTimeout===clearTimeout)return clearTimeout(e);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(e);try{return cachedClearTimeout(e)}catch(t){try{return cachedClearTimeout.call(null,e)}catch(t){return cachedClearTimeout.call(this,e)}}}!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var currentQueue,queue=[],draining=!1,queueIndex=-1;function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var e=runTimeout(cleanUpNextTick);draining=!0;for(var t=queue.length;t;){for(currentQueue=queue,queue=[];++queueIndex<t;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,t=queue.length}currentQueue=null,draining=!1,runClearTimeout(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}process.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];queue.push(new Item(e,t)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.prependListener=noop,process.prependOnceListener=noop,process.listeners=function(e){return[]},process.binding=function(e){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(e){throw new Error("process.chdir is not supported")},process.umask=function(){return 0};

},{}],60:[function(_dereq_,module,exports){
"use strict";const util=_dereq_("./util");module.exports=class{constructor({maxCallStackDepth:t=500,maxTotalCallStackDepth:e=4294967295,timeSlice:i=10}={}){this.schedule={},this.schedule.MAX_DEPTH=t,this.schedule.MAX_TOTAL_DEPTH=e,this.schedule.depth=0,this.schedule.totalDepth=0,this.schedule.timeSlice=i}doWork(t,e){const i=this.schedule;if(i.totalDepth>=i.MAX_TOTAL_DEPTH)return e(new Error("Maximum total call stack depth exceeded; canonicalization aborting."));!function n(){if(i.depth===i.MAX_DEPTH)return i.depth=0,i.running=!1,util.nextTick(n);const l=Date.now();if(i.running||(i.start=Date.now(),i.deadline=i.start+i.timeSlice),l<i.deadline)return i.running=!0,i.depth++,i.totalDepth++,t((t,n)=>{i.depth--,i.totalDepth--,e(t,n)});i.depth=0,i.running=!1,util.setImmediate(n)}()}forEach(t,e,i){const n=this;let l,o,s=0;if(Array.isArray(t))o=t.length,l=(()=>s!==o&&(l.value=t[s++],l.key=s,!0));else{const e=Object.keys(t);o=e.length,l=(()=>s!==o&&(l.key=e[s++],l.value=t[l.key],!0))}!function t(o){return o?i(o):l()?n.doWork(()=>e(l.value,l.key,t)):void i()}()}waterfall(t,e){const i=this;i.forEach(t,(t,e,n)=>i.doWork(t,n),e)}whilst(t,e,i){const n=this;!function l(o){return o?i(o):t()?void n.doWork(e,l):i()}()}};

},{"./util":70}],61:[function(_dereq_,module,exports){
"use strict";const util=_dereq_("./util");module.exports=class t{constructor(t){this.prefix=t,this.counter=0,this.existing={}}clone(){const i=new t(this.prefix);return i.counter=this.counter,i.existing=util.clone(this.existing),i}getId(t){if(t&&t in this.existing)return this.existing[t];const i=this.prefix+this.counter;return this.counter+=1,t&&(this.existing[t]=i),i}hasId(t){return t in this.existing}};

},{"./util":70}],62:[function(_dereq_,module,exports){
"use strict";const forge=_dereq_("node-forge/lib/forge");_dereq_("node-forge/lib/md"),_dereq_("node-forge/lib/sha1"),_dereq_("node-forge/lib/sha256"),module.exports=class{constructor(e){this.md=forge.md[e].create()}update(e){this.md.update(e,"utf8")}digest(){return this.md.digest().toHex()}};

},{"node-forge/lib/forge":54,"node-forge/lib/md":55,"node-forge/lib/sha1":56,"node-forge/lib/sha256":57}],63:[function(_dereq_,module,exports){
"use strict";const TERMS=["subject","predicate","object","graph"],RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",RDF_LANGSTRING=RDF+"langString",XSD_STRING="http://www.w3.org/2001/XMLSchema#string",REGEX={};function _compareTriples(e,a){for(const t in e)if(e[t].termType!==a[t].termType||e[t].value!==a[t].value)return!1;return"Literal"!==e.object.termType||e.object.datatype.termType===a.object.datatype.termType&&e.object.datatype.value===a.object.datatype.value&&e.object.language===a.object.language}REGEX.eoln=/(?:\r\n)|(?:\n)|(?:\r)/g,REGEX.empty=new RegExp("^[ \\t]*$"),REGEX.quad=new RegExp('^[ \\t]*(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z-----------_0-9])(?:(?:[A-Za-z-----------_0-9---.])*(?:[A-Za-z-----------_0-9---]))?))[ \\t]+(?:<([^:]+:[^>]*)>)[ \\t]+(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z-----------_0-9])(?:(?:[A-Za-z-----------_0-9---.])*(?:[A-Za-z-----------_0-9---]))?)|(?:"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"(?:(?:\\^\\^(?:<([^:]+:[^>]*)>))|(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*)))?))[ \\t]*(?:\\.|(?:(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z-----------_0-9])(?:(?:[A-Za-z-----------_0-9---.])*(?:[A-Za-z-----------_0-9---]))?))[ \\t]*\\.))[ \\t]*$'),module.exports=class e{static parse(e){const a=[],t={},r=e.split(REGEX.eoln);let n=0;for(const e of r){if(n++,REGEX.empty.test(e))continue;const r=e.match(REGEX.quad);if(null===r)throw new Error("N-Quads parse error on line "+n+".");const o={};if(void 0!==r[1]?o.subject={termType:"NamedNode",value:r[1]}:o.subject={termType:"BlankNode",value:r[2]},o.predicate={termType:"NamedNode",value:r[3]},void 0!==r[4]?o.object={termType:"NamedNode",value:r[4]}:void 0!==r[5]?o.object={termType:"BlankNode",value:r[5]}:(o.object={termType:"Literal",value:void 0,datatype:{termType:"NamedNode"}},void 0!==r[7]?o.object.datatype.value=r[7]:void 0!==r[8]?(o.object.datatype.value=RDF_LANGSTRING,o.object.language=r[8]):o.object.datatype.value=XSD_STRING,o.object.value=_unescape(r[6])),void 0!==r[9]?o.graph={termType:"NamedNode",value:r[9]}:void 0!==r[10]?o.graph={termType:"BlankNode",value:r[10]}:o.graph={termType:"DefaultGraph",value:""},o.graph.value in t){let e=!0;const r=t[o.graph.value];for(const a of r)if(_compareTriples(a,o)){e=!1;break}e&&(r.push(o),a.push(o))}else t[o.graph.value]=[o],a.push(o)}return a}static serialize(a){Array.isArray(a)||(a=e.legacyDatasetToQuads(a));const t=[];for(const r of a)t.push(e.serializeQuad(r));return t.sort().join("")}static serializeQuad(e){const a=e.subject,t=e.predicate,r=e.object,n=e.graph;let o="";return[a,t].forEach(e=>{"NamedNode"===e.termType?o+="<"+e.value+">":o+=e.value,o+=" "}),"NamedNode"===r.termType?o+="<"+r.value+">":"BlankNode"===r.termType?o+=r.value:(o+='"'+_escape(r.value)+'"',r.datatype.value===RDF_LANGSTRING?r.language&&(o+="@"+r.language):r.datatype.value!==XSD_STRING&&(o+="^^<"+r.datatype.value+">")),"NamedNode"===n.termType?o+=" <"+n.value+">":"BlankNode"===n.termType&&(o+=" "+n.value),o+=" .\n"}static legacyDatasetToQuads(e){const a=[],t={"blank node":"BlankNode",IRI:"NamedNode",literal:"Literal"};for(const r in e){e[r].forEach(e=>{const n={};for(const a in e){const r=e[a],o={termType:t[r.type],value:r.value};"Literal"===o.termType&&(o.datatype={termType:"NamedNode"},"datatype"in r&&(o.datatype.value=r.datatype),"language"in r?("datatype"in r||(o.datatype.value=RDF_LANGSTRING),o.language=r.language):"datatype"in r||(o.datatype.value=XSD_STRING)),n[a]=o}n.graph="@default"===r?{termType:"DefaultGraph",value:""}:{termType:r.startsWith("_:")?"BlankNode":"NamedNode",value:r},a.push(n)})}return a}};const _escapeRegex=/["\\\n\r]/g;function _escape(e){return e.replace(_escapeRegex,function(e){switch(e){case'"':return'\\"';case"\\":return"\\\\";case"\n":return"\\n";case"\r":return"\\r"}})}const _unescapeRegex=/(?:\\([tbnrf"'\\]))|(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g;function _unescape(e){return e.replace(_unescapeRegex,function(e,a,t,r){if(a)switch(a){case"t":return"\t";case"b":return"\b";case"n":return"\n";case"r":return"\r";case"f":return"\f";case'"':return'"';case"'":return"'";case"\\":return"\\"}if(t)return String.fromCharCode(parseInt(t,16));if(r)throw new Error("Unsupported U escape")})}

},{}],64:[function(_dereq_,module,exports){
"use strict";module.exports=class{constructor(t){this.list=t.sort(),this.done=!1,this.left={};for(let s=0;s<t.length;++s)this.left[t[s]]=!0}hasNext(){return!this.done}next(){const t=this.list.slice();let s=null,i=0;const l=this.list.length;for(let t=0;t<l;++t){const e=this.list[t],h=this.left[e];(null===s||e>s)&&(h&&t>0&&e>this.list[t-1]||!h&&t<l-1&&e>this.list[t+1])&&(s=e,i=t)}if(null===s)this.done=!0;else{const t=this.left[s]?i-1:i+1;this.list[i]=this.list[t],this.list[t]=s;for(let t=0;t<l;++t)this.list[t]>s&&(this.left[this.list[t]]=!this.left[this.list[t]])}return t}};

},{}],65:[function(_dereq_,module,exports){
"use strict";const AsyncAlgorithm=_dereq_("./AsyncAlgorithm"),IdentifierIssuer=_dereq_("./IdentifierIssuer"),MessageDigest=_dereq_("./MessageDigest"),Permutator=_dereq_("./Permutator"),NQuads=_dereq_("./NQuads"),util=_dereq_("./util"),POSITIONS={subject:"s",object:"o",graph:"g"};module.exports=class extends AsyncAlgorithm{constructor(e){super(e=e||{}),this.name="URDNA2015",this.options=Object.assign({},e),this.blankNodeInfo={},this.hashToBlankNodes={},this.canonicalIssuer=new IdentifierIssuer("_:c14n"),this.hashAlgorithm="sha256",this.quads}main(e,s){const a=this;let t;a.schedule.start=Date.now(),a.quads=e;const r={};a.waterfall([s=>{a.forEach(e,(e,s,t)=>{a.forEachComponent(e,s=>{if("BlankNode"!==s.termType)return;const t=s.value;t in a.blankNodeInfo?a.blankNodeInfo[t].quads.push(e):(r[t]=!0,a.blankNodeInfo[t]={quads:[e]})}),t()},s)},e=>{let s=!0;a.whilst(()=>s,e=>{s=!1,a.hashToBlankNodes={},a.waterfall([e=>{a.forEach(r,(e,s,t)=>{a.hashFirstDegreeQuads(s,(e,r)=>{if(e)return t(e);r in a.hashToBlankNodes?a.hashToBlankNodes[r].push(s):a.hashToBlankNodes[r]=[s],t()})},e)},e=>{const t=Object.keys(a.hashToBlankNodes).sort();a.forEach(t,(e,t,n)=>{const o=a.hashToBlankNodes[e];if(o.length>1)return n();const h=o[0];a.canonicalIssuer.getId(h),delete r[h],delete a.hashToBlankNodes[e],s=!0,n()},e)}],e)},e)},e=>{const s=Object.keys(a.hashToBlankNodes).sort();a.forEach(s,(e,s,t)=>{const r=[],n=a.hashToBlankNodes[e];a.waterfall([e=>{a.forEach(n,(e,s,t)=>{if(a.canonicalIssuer.hasId(e))return t();const n=new IdentifierIssuer("_:b");n.getId(e),a.hashNDegreeQuads(e,n,(e,s)=>{if(e)return t(e);r.push(s),t()})},e)},e=>{r.sort((e,s)=>e.hash<s.hash?-1:e.hash>s.hash?1:0),a.forEach(r,(e,s,t)=>{for(const s in e.issuer.existing)a.canonicalIssuer.getId(s);t()},e)}],t)},e)},e=>{const s=[];a.waterfall([e=>{a.forEach(a.quads,(e,t,r)=>{a.forEachComponent(e,e=>{"BlankNode"!==e.termType||e.value.startsWith(a.canonicalIssuer.prefix)||(e.value=a.canonicalIssuer.getId(e.value))}),s.push(NQuads.serializeQuad(e)),r()},e)},e=>(s.sort(),t=s.join(""),e())],e)}],e=>s(e,t))}hashFirstDegreeQuads(e,s){const a=this,t=a.blankNodeInfo[e];if("hash"in t)return s(null,t.hash);const r=[],n=t.quads;a.forEach(n,(s,t,n)=>{const o={predicate:s.predicate};a.forEachComponent(s,(s,t)=>{o[t]=a.modifyFirstDegreeComponent(e,s,t)}),r.push(NQuads.serializeQuad(o)),n()},e=>{if(e)return s(e);r.sort();const n=new MessageDigest(a.hashAlgorithm);for(let e=0;e<r.length;++e)n.update(r[e]);t.hash=n.digest(),s(null,t.hash)})}hashRelatedBlankNode(e,s,a,t,r){const n=this;let o;n.waterfall([s=>n.canonicalIssuer.hasId(e)?(o=n.canonicalIssuer.getId(e),s()):a.hasId(e)?(o=a.getId(e),s()):void n.hashFirstDegreeQuads(e,(e,a)=>{if(e)return s(e);o=a,s()})],e=>{if(e)return r(e);const a=new MessageDigest(n.hashAlgorithm);return a.update(t),"g"!==t&&a.update(n.getRelatedPredicate(s)),a.update(o),r(null,a.digest())})}hashNDegreeQuads(e,s,a){const t=this;let r;const n=new MessageDigest(t.hashAlgorithm);t.waterfall([a=>t.createHashToRelated(e,s,(e,s)=>{if(e)return a(e);r=s,a()}),e=>{const a=Object.keys(r).sort();t.forEach(a,(e,a,o)=>{n.update(e);let h,i="";const l=new Permutator(r[e]);t.whilst(()=>l.hasNext(),e=>{const a=l.next();let r=s.clone(),n="";const o=[];t.waterfall([s=>{t.forEach(a,(s,a,h)=>{if(t.canonicalIssuer.hasId(s)?n+=t.canonicalIssuer.getId(s):(r.hasId(s)||o.push(s),n+=r.getId(s)),0!==i.length&&n>i)return e();h()},s)},s=>{t.forEach(o,(s,a,o)=>{t.hashNDegreeQuads(s,r,(a,t)=>a?o(a):(n+=r.getId(s),n+="<"+t.hash+">",r=t.issuer,0!==i.length&&n>i?e():void o()))},s)},e=>{(0===i.length||n<i)&&(i=n,h=r),e()}],e)},e=>{if(e)return o(e);n.update(i),s=h,o()})},e)}],e=>{a(e,{hash:n.digest(),issuer:s})})}modifyFirstDegreeComponent(e,s){return"BlankNode"!==s.termType?s:((s=util.clone(s)).value=s.value===e?"_:a":"_:z",s)}getRelatedPredicate(e){return"<"+e.predicate.value+">"}createHashToRelated(e,s,a){const t=this,r={},n=t.blankNodeInfo[e].quads;t.forEach(n,(a,n,o)=>{t.forEach(a,(n,o,h)=>{if("predicate"===o||"BlankNode"!==n.termType||n.value===e)return h();const i=n.value,l=POSITIONS[o];t.hashRelatedBlankNode(i,a,s,l,(e,s)=>{if(e)return h(e);s in r?r[s].push(i):r[s]=[i],h()})},o)},e=>a(e,r))}forEachComponent(e,s){for(const a in e)"predicate"!==a&&s(e[a],a,e)}};

},{"./AsyncAlgorithm":60,"./IdentifierIssuer":61,"./MessageDigest":62,"./NQuads":63,"./Permutator":64,"./util":70}],66:[function(_dereq_,module,exports){
"use strict";const IdentifierIssuer=_dereq_("./IdentifierIssuer"),MessageDigest=_dereq_("./MessageDigest"),Permutator=_dereq_("./Permutator"),NQuads=_dereq_("./NQuads"),util=_dereq_("./util"),POSITIONS={subject:"s",object:"o",graph:"g"};module.exports=class{constructor(){this.name="URDNA2015",this.blankNodeInfo={},this.hashToBlankNodes={},this.canonicalIssuer=new IdentifierIssuer("_:c14n"),this.hashAlgorithm="sha256",this.quads}main(e){const s=this;s.quads=e;const t={};for(const a of e)s.forEachComponent(a,e=>{if("BlankNode"!==e.termType)return;const n=e.value;n in s.blankNodeInfo?s.blankNodeInfo[n].quads.push(a):(t[n]=!0,s.blankNodeInfo[n]={quads:[a]})});let a=!0;for(;a;){a=!1,s.hashToBlankNodes={};for(const e in t){const t=s.hashFirstDegreeQuads(e);t in s.hashToBlankNodes?s.hashToBlankNodes[t].push(e):s.hashToBlankNodes[t]=[e]}const e=Object.keys(s.hashToBlankNodes).sort();for(let n=0;n<e.length;++n){const o=e[n],r=s.hashToBlankNodes[o];if(r.length>1)continue;const h=r[0];s.canonicalIssuer.getId(h),delete t[h],delete s.hashToBlankNodes[o],a=!0}}const n=Object.keys(s.hashToBlankNodes).sort();for(let e=0;e<n.length;++e){const t=[],a=n[e],o=s.hashToBlankNodes[a];for(let e=0;e<o.length;++e){const a=o[e];if(s.canonicalIssuer.hasId(a))continue;const n=new IdentifierIssuer("_:b");n.getId(a);const r=s.hashNDegreeQuads(a,n);t.push(r)}t.sort((e,s)=>e.hash<s.hash?-1:e.hash>s.hash?1:0);for(let e=0;e<t.length;++e){const a=t[e];for(const e in a.issuer.existing)s.canonicalIssuer.getId(e)}}const o=[];for(let e=0;e<s.quads.length;++e){const t=s.quads[e];s.forEachComponent(t,e=>{"BlankNode"!==e.termType||e.value.startsWith(s.canonicalIssuer.prefix)||(e.value=s.canonicalIssuer.getId(e.value))}),o.push(NQuads.serializeQuad(t))}return o.sort(),o.join("")}hashFirstDegreeQuads(e){const s=this,t=s.blankNodeInfo[e];if("hash"in t)return t.hash;const a=[],n=t.quads;for(let t=0;t<n.length;++t){const o=n[t],r={predicate:o.predicate};s.forEachComponent(o,(t,a)=>{r[a]=s.modifyFirstDegreeComponent(e,t,a)}),a.push(NQuads.serializeQuad(r))}a.sort();const o=new MessageDigest(s.hashAlgorithm);for(let e=0;e<a.length;++e)o.update(a[e]);return t.hash=o.digest(),t.hash}hashRelatedBlankNode(e,s,t,a){const n=this;let o;o=n.canonicalIssuer.hasId(e)?n.canonicalIssuer.getId(e):t.hasId(e)?t.getId(e):n.hashFirstDegreeQuads(e);const r=new MessageDigest(n.hashAlgorithm);return r.update(a),"g"!==a&&r.update(n.getRelatedPredicate(s)),r.update(o),r.digest()}hashNDegreeQuads(e,s){const t=this,a=new MessageDigest(t.hashAlgorithm),n=t.createHashToRelated(e,s),o=Object.keys(n).sort();for(let e=0;e<o.length;++e){const r=o[e];a.update(r);let h,i="";const l=new Permutator(n[r]);for(;l.hasNext();){const e=l.next();let a=s.clone(),n="";const o=[];let r=!1;for(let s=0;s<e.length;++s){const h=e[s];if(t.canonicalIssuer.hasId(h)?n+=t.canonicalIssuer.getId(h):(a.hasId(h)||o.push(h),n+=a.getId(h)),0!==i.length&&n>i){r=!0;break}}if(!r){for(let e=0;e<o.length;++e){const s=o[e],h=t.hashNDegreeQuads(s,a);if(n+=a.getId(s),n+="<"+h.hash+">",a=h.issuer,0!==i.length&&n>i){r=!0;break}}r||(0===i.length||n<i)&&(i=n,h=a)}}a.update(i),s=h}return{hash:a.digest(),issuer:s}}modifyFirstDegreeComponent(e,s){return"BlankNode"!==s.termType?s:((s=util.clone(s)).value=s.value===e?"_:a":"_:z",s)}getRelatedPredicate(e){return"<"+e.predicate.value+">"}createHashToRelated(e,s){const t=this,a={},n=t.blankNodeInfo[e].quads;for(let o=0;o<n.length;++o){const r=n[o];for(const n in r){const o=r[n];if("predicate"===n||"BlankNode"!==o.termType||o.value===e)continue;const h=o.value,i=POSITIONS[n],l=t.hashRelatedBlankNode(h,r,s,i);l in a?a[l].push(h):a[l]=[h]}}return a}forEachComponent(e,s){for(const t in e)"predicate"!==t&&s(e[t],t,e)}};

},{"./IdentifierIssuer":61,"./MessageDigest":62,"./NQuads":63,"./Permutator":64,"./util":70}],67:[function(_dereq_,module,exports){
"use strict";const URDNA2015=_dereq_("./URDNA2015"),util=_dereq_("./util");module.exports=class extends URDNA2015{constructor(e){super(e),this.name="URGNA2012",this.hashAlgorithm="sha1"}modifyFirstDegreeComponent(e,t,a){return"BlankNode"!==t.termType?t:((t=util.clone(t)).value="name"===a?"_:g":t.value===e?"_:a":"_:z",t)}getRelatedPredicate(e){return e.predicate.value}createHashToRelated(e,t,a){const r=this,u={},l=r.blankNodeInfo[e].quads;r.forEach(l,(a,l,s)=>{let o,n;if("BlankNode"===a.subject.termType&&a.subject.value!==e)n=a.subject.value,o="p";else{if("BlankNode"!==a.object.termType||a.object.value===e)return s();n=a.object.value,o="r"}r.hashRelatedBlankNode(n,a,t,o,(e,t)=>{if(e)return s(e);t in u?u[t].push(n):u[t]=[n],s()})},e=>a(e,u))}};

},{"./URDNA2015":65,"./util":70}],68:[function(_dereq_,module,exports){
"use strict";const URDNA2015Sync=_dereq_("./URDNA2015Sync"),util=_dereq_("./util");module.exports=class extends URDNA2015Sync{constructor(){super(),this.name="URGNA2012",this.hashAlgorithm="sha1"}modifyFirstDegreeComponent(e,t,a){return"BlankNode"!==t.termType?t:((t=util.clone(t)).value="name"===a?"_:g":t.value===e?"_:a":"_:z",t)}getRelatedPredicate(e){return e.predicate.value}createHashToRelated(e,t){const a=this,n={},l=a.blankNodeInfo[e].quads;for(let r=0;r<l.length;++r){const s=l[r];let o,u;if("BlankNode"===s.subject.termType&&s.subject.value!==e)u=s.subject.value,o="p";else{if("BlankNode"!==s.object.termType||s.object.value===e)continue;u=s.object.value,o="r"}const c=a.hashRelatedBlankNode(u,s,t,o);c in n?n[c].push(u):n[c]=[u]}return n}};

},{"./URDNA2015Sync":66,"./util":70}],69:[function(_dereq_,module,exports){
"use strict";const util=_dereq_("./util"),URDNA2015=_dereq_("./URDNA2015"),URGNA2012=_dereq_("./URGNA2012"),URDNA2015Sync=_dereq_("./URDNA2015Sync"),URGNA2012Sync=_dereq_("./URGNA2012Sync");let rdfCanonizeNative;try{rdfCanonizeNative=_dereq_("rdf-canonize-native")}catch(i){}const api={};module.exports=api,api.NQuads=_dereq_("./NQuads"),api.IdentifierIssuer=_dereq_("./IdentifierIssuer"),api._rdfCanonizeNative=function(i){return i&&(rdfCanonizeNative=i),rdfCanonizeNative},api.canonize=util.callbackify(async function(i,a){let e;const n=new Promise((i,a)=>{e=((e,n)=>{if(e)return a(e);i(n)})});if(Array.isArray(i)||(i=api.NQuads.legacyDatasetToQuads(i)),a.useNative){if(!rdfCanonizeNative)throw new Error("rdf-canonize-native not available");rdfCanonizeNative.canonize(i,a,e)}else if("URDNA2015"===a.algorithm)new URDNA2015(a).main(i,e);else{if("URGNA2012"!==a.algorithm)throw"algorithm"in a?new Error("Invalid RDF Dataset Canonicalization algorithm: "+a.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.");new URGNA2012(a).main(i,e)}return n}),api.canonizeSync=function(i,a){if(Array.isArray(i)||(i=api.NQuads.legacyDatasetToQuads(i)),a.useNative){if(rdfCanonizeNative)return rdfCanonizeNative.canonizeSync(i,a);throw new Error("rdf-canonize-native not available")}if("URDNA2015"===a.algorithm)return new URDNA2015Sync(a).main(i);if("URGNA2012"===a.algorithm)return new URGNA2012Sync(a).main(i);if(!("algorithm"in a))throw new Error("No RDF Dataset Canonicalization algorithm specified.");throw new Error("Invalid RDF Dataset Canonicalization algorithm: "+a.algorithm)};

},{"./IdentifierIssuer":61,"./NQuads":63,"./URDNA2015":65,"./URDNA2015Sync":66,"./URGNA2012":67,"./URGNA2012Sync":68,"./util":70,"rdf-canonize-native":27}],70:[function(_dereq_,module,exports){
(function (process,setImmediate){
"use strict";const api={};module.exports=api;const _setImmediate="function"==typeof setImmediate&&setImmediate,_delay=_setImmediate?e=>_setImmediate(e):e=>setTimeout(e,0);function _invokeCallback(e,t,i){try{return e(t,i)}catch(e){process.nextTick(()=>{throw e})}}"object"==typeof process&&"function"==typeof process.nextTick?api.nextTick=process.nextTick:api.nextTick=_delay,api.setImmediate=_setImmediate?_delay:api.nextTick,api.clone=function(e){if(e&&"object"==typeof e){let t;if(Array.isArray(e)){t=[];for(let i=0;i<e.length;++i)t[i]=api.clone(e[i])}else if(api.isObject(e)){t={};for(const i in e)t[i]=api.clone(e[i])}else t=e.toString();return t}return e},api.isObject=(e=>"[object Object]"===Object.prototype.toString.call(e)),api.isUndefined=(e=>void 0===e),api.callbackify=(e=>(async function(...t){const i=t[t.length-1];let n;"function"==typeof i&&t.pop();try{n=await e.apply(null,t)}catch(e){if("function"==typeof i)return _invokeCallback(i,e);throw e}return"function"==typeof i?_invokeCallback(i,null,n):n}));

}).call(this,_dereq_('_process'),_dereq_("timers").setImmediate)
},{"_process":59,"timers":71}],71:[function(_dereq_,module,exports){
(function (setImmediate,clearImmediate){
var nextTick=_dereq_("process/browser.js").nextTick,apply=Function.prototype.apply,slice=Array.prototype.slice,immediateIds={},nextImmediateId=0;function Timeout(e,t){this._id=e,this._clearFn=t}exports.setTimeout=function(){return new Timeout(apply.call(setTimeout,window,arguments),clearTimeout)},exports.setInterval=function(){return new Timeout(apply.call(setInterval,window,arguments),clearInterval)},exports.clearTimeout=exports.clearInterval=function(e){e.close()},Timeout.prototype.unref=Timeout.prototype.ref=function(){},Timeout.prototype.close=function(){this._clearFn.call(window,this._id)},exports.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},exports.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},exports._unrefActive=exports.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},exports.setImmediate="function"==typeof setImmediate?setImmediate:function(e){var t=nextImmediateId++,i=!(arguments.length<2)&&slice.call(arguments,1);return immediateIds[t]=!0,nextTick(function(){immediateIds[t]&&(i?e.apply(null,i):e.call(null),exports.clearImmediate(t))}),t},exports.clearImmediate="function"==typeof clearImmediate?clearImmediate:function(e){delete immediateIds[e]};

}).call(this,_dereq_("timers").setImmediate,_dereq_("timers").clearImmediate)
},{"process/browser.js":59,"timers":71}],72:[function(_dereq_,module,exports){
"use strict";module.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}};

},{}],73:[function(_dereq_,module,exports){
"use strict";function Yallist(t){var e=this;if(e instanceof Yallist||(e=new Yallist),e.tail=null,e.head=null,e.length=0,t&&"function"==typeof t.forEach)t.forEach(function(t){e.push(t)});else if(arguments.length>0)for(var l=0,i=arguments.length;l<i;l++)e.push(arguments[l]);return e}function insert(t,e,l){var i=e===t.head?new Node(l,null,e,t):new Node(l,e,e.next,t);return null===i.next&&(t.tail=i),null===i.prev&&(t.head=i),t.length++,i}function push(t,e){t.tail=new Node(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function unshift(t,e){t.head=new Node(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function Node(t,e,l,i){if(!(this instanceof Node))return new Node(t,e,l,i);this.list=i,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,l?(l.prev=this,this.next=l):this.next=null}module.exports=Yallist,Yallist.Node=Node,Yallist.create=Yallist,Yallist.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,l=t.prev;return e&&(e.prev=l),l&&(l.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=l),t.list.length--,t.next=null,t.prev=null,t.list=null,e},Yallist.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}},Yallist.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}},Yallist.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)push(this,arguments[t]);return this.length},Yallist.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)unshift(this,arguments[t]);return this.length},Yallist.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}},Yallist.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}},Yallist.prototype.forEach=function(t,e){e=e||this;for(var l=this.head,i=0;null!==l;i++)t.call(e,l.value,i,this),l=l.next},Yallist.prototype.forEachReverse=function(t,e){e=e||this;for(var l=this.tail,i=this.length-1;null!==l;i--)t.call(e,l.value,i,this),l=l.prev},Yallist.prototype.get=function(t){for(var e=0,l=this.head;null!==l&&e<t;e++)l=l.next;if(e===t&&null!==l)return l.value},Yallist.prototype.getReverse=function(t){for(var e=0,l=this.tail;null!==l&&e<t;e++)l=l.prev;if(e===t&&null!==l)return l.value},Yallist.prototype.map=function(t,e){e=e||this;for(var l=new Yallist,i=this.head;null!==i;)l.push(t.call(e,i.value,this)),i=i.next;return l},Yallist.prototype.mapReverse=function(t,e){e=e||this;for(var l=new Yallist,i=this.tail;null!==i;)l.push(t.call(e,i.value,this)),i=i.prev;return l},Yallist.prototype.reduce=function(t,e){var l,i=this.head;if(arguments.length>1)l=e;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");i=this.head.next,l=this.head.value}for(var n=0;null!==i;n++)l=t(l,i.value,n),i=i.next;return l},Yallist.prototype.reduceReverse=function(t,e){var l,i=this.tail;if(arguments.length>1)l=e;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");i=this.tail.prev,l=this.tail.value}for(var n=this.length-1;null!==i;n--)l=t(l,i.value,n),i=i.prev;return l},Yallist.prototype.toArray=function(){for(var t=new Array(this.length),e=0,l=this.head;null!==l;e++)t[e]=l.value,l=l.next;return t},Yallist.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,l=this.tail;null!==l;e++)t[e]=l.value,l=l.prev;return t},Yallist.prototype.slice=function(t,e){(e=e||this.length)<0&&(e+=this.length),(t=t||0)<0&&(t+=this.length);var l=new Yallist;if(e<t||e<0)return l;t<0&&(t=0),e>this.length&&(e=this.length);for(var i=0,n=this.head;null!==n&&i<t;i++)n=n.next;for(;null!==n&&i<e;i++,n=n.next)l.push(n.value);return l},Yallist.prototype.sliceReverse=function(t,e){(e=e||this.length)<0&&(e+=this.length),(t=t||0)<0&&(t+=this.length);var l=new Yallist;if(e<t||e<0)return l;t<0&&(t=0),e>this.length&&(e=this.length);for(var i=this.length,n=this.tail;null!==n&&i>e;i--)n=n.prev;for(;null!==n&&i>t;i--,n=n.prev)l.push(n.value);return l},Yallist.prototype.splice=function(t,e){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var l=0,i=this.head;null!==i&&l<t;l++)i=i.next;var n=[];for(l=0;i&&l<e;l++)n.push(i.value),i=this.removeNode(i);null===i&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(l=2;l<arguments.length;l++)i=insert(this,i,arguments[l]);return n},Yallist.prototype.reverse=function(){for(var t=this.head,e=this.tail,l=t;null!==l;l=l.prev){var i=l.prev;l.prev=l.next,l.next=i}return this.head=e,this.tail=t,this};try{_dereq_("./iterator.js")(Yallist)}catch(t){}

},{"./iterator.js":72}],74:[function(_dereq_,module,exports){
"use strict";var util=_dereq_("./utilities");class Class{constructor(s,e){this.IRI=s,this.graph=e}getIRI(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?this.IRI:util.toAbsoluteIRI(this.IRI,this.graph.context)}getTermType(){return"rdfs:Class"}getVocabulary(){var s=this.graph.classes[this.IRI];return util.isNil(s["schema:isPartOf"])?null:s["schema:isPartOf"]}getSource(){var s=this.graph.classes[this.IRI];return util.isNil(s["dc:source"])?util.isNil(s["schema:source"])?null:s["schema:source"]:s["dc:source"]}isSupersededBy(){var s=this.graph.classes[this.IRI];return util.isString(s["schema:supersededBy"])?s["schema:supersededBy"]:null}getName(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en",e=this.graph.classes[this.IRI]["rdfs:label"];return util.isNil(e)||util.isNil(e[s])?null:e[s]}getDescription(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en",e=this.graph.classes[this.IRI]["rdfs:comment"];return util.isNil(e)||util.isNil(e[s])?null:e[s]}getProperties(){var s=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=this.graph.classes[this.IRI],i=[];return i.push(...t["soa:hasProperty"]),s&&i.push(...this.graph.reasoner.inferPropertiesFromSuperClasses(t["rdfs:subClassOf"])),util.applyFilter(util.uniquifyArray(i),e,this.graph)}getSuperClasses(){var s=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=this.graph.classes[this.IRI],i=[];return s?i.push(...this.graph.reasoner.inferImplicitSuperClasses(this.IRI)):i.push(...t["rdfs:subClassOf"]),util.applyFilter(util.uniquifyArray(i),e,this.graph)}getSubClasses(){var s=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=this.graph.classes[this.IRI],i=[];return s?i.push(...this.graph.reasoner.inferImplicitSubClasses(this.IRI)):i.push(...t["soa:superClassOf"]),util.applyFilter(util.uniquifyArray(i),e,this.graph)}toString(){return JSON.stringify(this.toJSON(!1,null),null,2)}toJSON(){var s=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t={};return t.id=this.getIRI(!0),t.IRI=this.getIRI(),t.type=this.getTermType(),t.vocabulary=this.getVocabulary(),t.source=this.getSource(),t.supersededBy=this.isSupersededBy(),t.name=this.getName(),t.description=this.getDescription(),t.superClasses=this.getSuperClasses(s,e),t.subClasses=this.getSubClasses(s,e),t.properties=this.getProperties(s,e),t}}module.exports=Class;

},{"./utilities":82}],75:[function(_dereq_,module,exports){
"use strict";var util=_dereq_("./utilities");class DataType{constructor(t,e){this.IRI=t,this.graph=e}getIRI(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?this.IRI:util.toAbsoluteIRI(this.IRI,this.graph.context)}getTermType(){return"schema:DataType"}getVocabulary(){var t=this.graph.dataTypes[this.IRI];return util.isNil(t["schema:isPartOf"])?null:t["schema:isPartOf"]}getSource(){var t=this.graph.dataTypes[this.IRI];return util.isNil(t["dc:source"])?util.isNil(t["schema:source"])?null:t["schema:source"]:t["dc:source"]}isSupersededBy(){var t=this.graph.dataTypes[this.IRI];return util.isString(t["schema:supersededBy"])?t["schema:supersededBy"]:null}getName(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en",e=this.graph.dataTypes[this.IRI]["rdfs:label"];return util.isNil(e)||util.isNil(e[t])?null:e[t]}getDescription(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en",e=this.graph.dataTypes[this.IRI]["rdfs:comment"];return util.isNil(e)||util.isNil(e[t])?null:e[t]}getSuperDataTypes(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=this.graph.dataTypes[this.IRI],i=[];return t?i.push(...this.graph.reasoner.inferImplicitSuperDataTypes(this.IRI)):i.push(...s["rdfs:subClassOf"]),util.applyFilter(util.uniquifyArray(i),e,this.graph)}getSubDataTypes(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=this.graph.dataTypes[this.IRI],i=[];return t?i.push(...this.graph.reasoner.inferImplicitSubDataTypes(this.IRI)):i.push(...s["soa:superClassOf"]),util.applyFilter(util.uniquifyArray(i),e,this.graph)}toString(){return JSON.stringify(this.toJSON(!1,null),null,2)}toJSON(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s={};return s.id=this.getIRI(!0),s.IRI=this.getIRI(),s.type=this.getTermType(),s.vocabulary=this.getVocabulary(),s.source=this.getSource(),s.supersededBy=this.isSupersededBy(),s.name=this.getName(),s.description=this.getDescription(),s.superDataTypes=this.getSuperDataTypes(t,e),s.subDataTypes=this.getSubDataTypes(t,e),s}}module.exports=DataType;

},{"./utilities":82}],76:[function(_dereq_,module,exports){
"use strict";var util=_dereq_("./utilities");class Enumeration{constructor(e,s){this.IRI=e,this.graph=s}getIRI(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?this.IRI:util.toAbsoluteIRI(this.IRI,this.graph.context)}getTermType(){return"schema:Enumeration"}getVocabulary(){var e=this.graph.enumerations[this.IRI];return util.isNil(e["schema:isPartOf"])?null:e["schema:isPartOf"]}getSource(){var e=this.graph.enumerations[this.IRI];return util.isNil(e["dc:source"])?util.isNil(e["schema:source"])?null:e["schema:source"]:e["dc:source"]}isSupersededBy(){var e=this.graph.enumerations[this.IRI];return util.isString(e["schema:supersededBy"])?e["schema:supersededBy"]:null}getName(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en",s=this.graph.enumerations[this.IRI]["rdfs:label"];return util.isNil(s)||util.isNil(s[e])?null:s[e]}getDescription(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en",s=this.graph.enumerations[this.IRI]["rdfs:comment"];return util.isNil(s)||util.isNil(s[e])?null:s[e]}getEnumerationMembers(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=this.graph.enumerations[this.IRI],i=[];if(i.push(...t["soa:hasEnumerationMember"]),e){var r=this.getSubClasses(!0,null);for(var u of r){var a=this.graph.enumerations[u];util.isNil(a)||i.push(...a["soa:hasEnumerationMember"])}}return util.applyFilter(util.uniquifyArray(i),s,this.graph)}getProperties(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=this.graph.enumerations[this.IRI],i=[];return i.push(...t["soa:hasProperty"]),e&&i.push(...this.graph.reasoner.inferPropertiesFromSuperClasses(t["rdfs:subClassOf"])),util.applyFilter(util.uniquifyArray(i),s,this.graph)}getSuperClasses(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=this.graph.enumerations[this.IRI],i=[];return e?i.push(...this.graph.reasoner.inferImplicitSuperClasses(this.IRI)):i.push(...t["rdfs:subClassOf"]),util.applyFilter(util.uniquifyArray(i),s,this.graph)}getSubClasses(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=this.graph.enumerations[this.IRI],i=[];return e?i.push(...this.graph.reasoner.inferImplicitSubClasses(this.IRI)):i.push(...t["soa:superClassOf"]),util.applyFilter(util.uniquifyArray(i),s,this.graph)}toString(){return JSON.stringify(this.toJSON(!1,null),null,2)}toJSON(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t={};return t.id=this.getIRI(!0),t.IRI=this.getIRI(),t.type=this.getTermType(),t.vocabulary=this.getVocabulary(),t.source=this.getSource(),t.supersededBy=this.isSupersededBy(),t.name=this.getName(),t.description=this.getDescription(),t.enumerationMembers=this.getEnumerationMembers(e,s),t.superClasses=this.getSuperClasses(e,s),t.subClasses=this.getSubClasses(e,s),t.properties=this.getProperties(e,s),t}}module.exports=Enumeration;

},{"./utilities":82}],77:[function(_dereq_,module,exports){
"use strict";var util=_dereq_("./utilities");class EnumerationMember{constructor(e,t){this.IRI=e,this.graph=t}getIRI(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?this.IRI:util.toAbsoluteIRI(this.IRI,this.graph.context)}getTermType(){return"soa:EnumerationMember"}getVocabulary(){var e=this.graph.enumerationMembers[this.IRI];return util.isNil(e["schema:isPartOf"])?null:e["schema:isPartOf"]}getSource(){var e=this.graph.enumerationMembers[this.IRI];return util.isNil(e["dc:source"])?util.isNil(e["schema:source"])?null:e["schema:source"]:e["dc:source"]}isSupersededBy(){var e=this.graph.enumerationMembers[this.IRI];return util.isString(e["schema:supersededBy"])?e["schema:supersededBy"]:null}getName(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en",t=this.graph.enumerationMembers[this.IRI]["rdfs:label"];return util.isNil(t)||util.isNil(t[e])?null:t[e]}getDescription(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en",t=this.graph.enumerationMembers[this.IRI]["rdfs:comment"];return util.isNil(t)||util.isNil(t[e])?null:t[e]}getDomainEnumerations(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=this.graph.enumerationMembers[this.IRI],r=[];if(r.push(...i["soa:enumerationDomainIncludes"]),e){var s=JSON.parse(JSON.stringify(r));for(var n of s)r.push(...this.graph.reasoner.inferImplicitSuperClasses(n));r=util.applyFilter(util.uniquifyArray(r),{termType:"Enumeration"},this.graph)}return util.applyFilter(util.uniquifyArray(r),t,this.graph)}toString(){return JSON.stringify(this.toJSON(!1,null),null,2)}toJSON(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i={};return i.id=this.getIRI(!0),i.IRI=this.getIRI(),i.type=this.getTermType(),i.vocabulary=this.getVocabulary(),i.source=this.getSource(),i.supersededBy=this.isSupersededBy(),i.name=this.getName(),i.description=this.getDescription(),i.domainEnumerations=this.getDomainEnumerations(e,t),i}}module.exports=EnumerationMember;

},{"./utilities":82}],78:[function(_dereq_,module,exports){
"use strict";function asyncGeneratorStep(e,s,r,a,t,i,o){try{var n=e[i](o),u=n.value}catch(e){return void r(e)}n.done?s(u):Promise.resolve(u).then(a,t)}function _asyncToGenerator(e){return function(){var s=this,r=arguments;return new Promise(function(a,t){var i=e.apply(s,r);function o(e){asyncGeneratorStep(i,a,t,o,n,"next",e)}function n(e){asyncGeneratorStep(i,a,t,o,n,"throw",e)}o(void 0)})}}var util=_dereq_("./utilities"),Class=_dereq_("./Class"),Property=_dereq_("./Property"),Enumeration=_dereq_("./Enumeration"),EnumerationMember=_dereq_("./EnumerationMember"),DataType=_dereq_("./DataType"),ReasoningEngine=_dereq_("./ReasoningEngine");class Graph{constructor(e){this.sdoAdapter=e,this.reasoner=new ReasoningEngine(this),this.context={rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",xsd:"http://www.w3.org/2001/XMLSchema#",dc:"http://purl.org/dc/terms/",schema:"http://schema.org/",soa:"http://schema-org-adapter.at/vocabTerms/","soa:superClassOf":{"@id":"soa:superClassOf","@type":"@id"},"soa:superPropertyOf":{"@id":"soa:superPropertyOf","@type":"@id"},"soa:hasProperty":{"@id":"soa:hasProperty","@type":"@id"},"soa:isRangeOf":{"@id":"soa:isRangeOf","@type":"@id"},"soa:hasEnumerationMember":{"@id":"soa:hasEnumerationMember","@type":"@id"},"soa:enumerationDomainIncludes":{"@id":"soa:enumerationDomainIncludes","@type":"@id"},"rdfs:subClassOf":{"@id":"rdfs:subClassOf","@type":"@id"},"rdfs:subPropertyOf":{"@id":"rdfs:subPropertyOf","@type":"@id"},"schema:isPartOf":{"@id":"schema:isPartOf","@type":"@id"},"schema:domainIncludes":{"@id":"schema:domainIncludes","@type":"@id"},"schema:rangeIncludes":{"@id":"schema:rangeIncludes","@type":"@id"},"schema:supersededBy":{"@id":"schema:supersededBy","@type":"@id"},"schema:inverseOf":{"@id":"schema:inverseOf","@type":"@id"},"dc:source":{"@id":"dc:source","@type":"@id"},"schema:source":{"@id":"schema:source","@type":"@id"}},this.classes={},this.properties={},this.dataTypes={},this.enumerations={},this.enumerationMembers={}}addVocabulary(e){var s=this;return _asyncToGenerator(function*(){try{s.context=util.generateContext(s.context,e["@context"]),e=yield util.preProcessVocab(e,s.context);var r,a,t=s.sdoAdapter.getVocabularies();for(var i of e["@graph"])i=util.curateVocabNode(i,t);for(var o=0;o<e["@graph"].length;o++){var n=JSON.parse(JSON.stringify(e["@graph"][o]));if(util.isString(n["@type"]))switch(n["@type"]){case"rdfs:Class":s.addGraphNode(s.classes,n);break;case"rdf:Property":s.addGraphNode(s.properties,n);break;default:s.addGraphNode(s.enumerationMembers,n)}else util.isArray(n["@type"])?n["@type"].includes("rdfs:Class")&&n["@type"].includes("schema:DataType")?s.addGraphNode(s.dataTypes,n):s.addGraphNode(s.enumerationMembers,n):(console.log("unexpected @type format for the following node:"),console.log(JSON.stringify(n,null,2)))}do{r=!1;var u=Object.keys(s.classes),l=Object.keys(s.enumerations);for(var f of u)if(void 0!==s.classes[f]["rdfs:subClassOf"]){var c=s.classes[f]["rdfs:subClassOf"];for(var h of c)("schema:Enumeration"===h||l.includes(h))&&s.classes[f]&&!s.enumerations[f]&&(r=!0,s.enumerations[f]=JSON.parse(JSON.stringify(s.classes[f])),delete s.classes[f])}}while(r);do{a=!1;var p=Object.keys(s.classes),d=Object.keys(s.dataTypes);for(var m of p)if(void 0!==s.classes[m]["rdfs:subClassOf"]){var y=s.classes[m]["rdfs:subClassOf"];for(var v of y)("schema:DataType"===v||d.includes(v))&&s.classes[m]&&!s.dataTypes[m]&&(a=!0,s.dataTypes[m]=JSON.parse(JSON.stringify(s.classes[m])),delete s.classes[m])}}while(a);var O=Object.keys(s.dataTypes);for(var b of O)s.dataTypes[b]["@type"]="schema:DataType";var g=Object.keys(s.classes);for(var w of g){var I=s.classes[w]["rdfs:subClassOf"];for(var C of(s.classes[w]["soa:superClassOf"]||(s.classes[w]["soa:superClassOf"]=[]),I)){var P=s.classes[C];P||(P=s.enumerations[C]),P&&(P["soa:superClassOf"]?P["soa:superClassOf"].includes(w)||P["soa:superClassOf"].push(w):P["soa:superClassOf"]=[w])}}var E=Object.keys(s.enumerations);for(var T of E){var R=s.enumerations[T]["rdfs:subClassOf"];for(var M of(s.enumerations[T]["soa:superClassOf"]||(s.enumerations[T]["soa:superClassOf"]=[]),R)){var N=s.classes[M];N||(N=s.enumerations[M]),N&&(N["soa:superClassOf"]?N["soa:superClassOf"].includes(T)||N["soa:superClassOf"].push(T):N["soa:superClassOf"]=[T])}}var k=Object.keys(s.dataTypes);for(var j of k){var D=s.dataTypes[j]["rdfs:subClassOf"];if(s.dataTypes[j]["soa:superClassOf"]||(s.dataTypes[j]["soa:superClassOf"]=[]),D)for(var x of D){var G=s.dataTypes[x];G&&(G["soa:superClassOf"]?G["soa:superClassOf"].includes(j)||G["soa:superClassOf"].push(j):G["soa:superClassOf"]=[j])}else s.dataTypes[j]["rdfs:subClassOf"]=[]}var S=Object.keys(s.properties);for(var A of S){var q=s.properties[A]["rdfs:subPropertyOf"];if(s.properties[A]["soa:superPropertyOf"]||(s.properties[A]["soa:superPropertyOf"]=[]),q)for(var J of q){var L=s.properties[J];L&&(L["soa:superPropertyOf"]?L["soa:superPropertyOf"].includes(A)||L["soa:superPropertyOf"].push(A):L["soa:superPropertyOf"]=[A])}else s.properties[A]["rdfs:subPropertyOf"]=[]}for(var F of g=Object.keys(s.classes))s.classes[F]["soa:hasProperty"]||(s.classes[F]["soa:hasProperty"]=[]),s.classes[F]["soa:isRangeOf"]||(s.classes[F]["soa:isRangeOf"]=[]);for(var B of E=Object.keys(s.enumerations))s.enumerations[B]["soa:hasEnumerationMember"]||(s.enumerations[B]["soa:hasEnumerationMember"]=[]),s.enumerations[B]["soa:isRangeOf"]||(s.enumerations[B]["soa:isRangeOf"]=[]),s.enumerations[B]["soa:hasProperty"]||(s.enumerations[B]["soa:hasProperty"]=[]);var V=Object.keys(s.enumerationMembers);for(var U of V)s.enumerationMembers[U]["soa:enumerationDomainIncludes"]||(s.enumerationMembers[U]["soa:enumerationDomainIncludes"]=[]);for(var W of S=Object.keys(s.properties)){var _=s.properties[W]["schema:domainIncludes"];if(util.isArray(_))for(var X of _){var z=s.classes[X];z||(z=s.enumerations[X]),z&&util.isArray(z["soa:hasProperty"])&&!z["soa:hasProperty"].includes(W)&&z["soa:hasProperty"].push(W)}var H=s.properties[W]["schema:rangeIncludes"];if(util.isArray(H))for(var K of H){var Q=s.classes[K];Q||(Q=s.enumerations[K]),Q&&util.isArray(Q["soa:isRangeOf"])&&!Q["soa:isRangeOf"].includes(W)&&Q["soa:isRangeOf"].push(W)}}for(var Y of V=Object.keys(s.enumerationMembers)){var Z=s.enumerationMembers[Y],$=Z["@type"];for(var ee of(util.isArray($)||($=[$]),$)){var se=s.enumerations[ee];se&&util.isArray(se["soa:hasEnumerationMember"])&&!se["soa:hasEnumerationMember"].includes(Y)&&(se["soa:hasEnumerationMember"].push(Y),util.isArray(Z["soa:enumerationDomainIncludes"])?Z["soa:enumerationDomainIncludes"].push(ee):Z["soa:enumerationDomainIncludes"]=[ee])}}return!0}catch(e){return console.log(e),!1}})()}addGraphNode(e,s){try{if(e[s["@id"]]){var r=e[s["@id"]];if(util.isNil(s["schema:isPartOf"])||(r["schema:isPartOf"]=s["schema:isPartOf"]),util.isNil(s["dc:source"])||(r["dc:source"]=s["dc:source"]),util.isNil(s["schema:source"])||(r["schema:source"]=s["schema:source"]),util.isNil(s["schema:category"])||(r["schema:category"]=s["schema:category"]),util.isNil(s["schema:supersededBy"])||(r["schema:supersededBy"]=s["schema:supersededBy"]),!util.isNil(s["rdfs:label"])){var a=Object.keys(s["rdfs:label"]);for(var t of a)r["rdfs:label"][t]=s["rdfs:label"][t]}if(!util.isNil(s["rdfs:comment"])){var i=Object.keys(s["rdfs:comment"]);for(var o of i)r["rdfs:comment"][o]=s["rdfs:comment"][o]}if(!util.isNil(s["rdfs:subClassOf"]))for(var n of s["rdfs:subClassOf"])r["rdfs:subClassOf"].includes(n)||r["rdfs:subClassOf"].push(n);if(!util.isNil(s["soa:superClassOf"]))for(var u of s["soa:superClassOf"])r["soa:superClassOf"].includes(u)||r["soa:superClassOf"].push(u);if(!util.isNil(s["soa:hasProperty"]))for(var l of s["soa:hasProperty"])r["soa:hasProperty"].includes(l)||r["soa:hasProperty"].push(l);if(!util.isNil(s["soa:isRangeOf"]))for(var f of s["soa:isRangeOf"])r["soa:isRangeOf"].includes(f)||r["soa:isRangeOf"].push(f);if(!util.isNil(s["soa:enumerationDomainIncludes"]))for(var c of s["soa:enumerationDomainIncludes"])r["soa:enumerationDomainIncludes"].includes(c)||r["soa:enumerationDomainIncludes"].push(c);if(!util.isNil(s["soa:hasEnumerationMember"]))for(var h of s["soa:hasEnumerationMember"])r["soa:hasEnumerationMember"].includes(h)||r["soa:hasEnumerationMember"].push(h);if(!util.isNil(s["rdfs:subPropertyOf"]))for(var p of s["rdfs:subPropertyOf"])r["rdfs:subPropertyOf"].includes(p)||r["rdfs:subPropertyOf"].push(p);if(!util.isNil(s["schema:domainIncludes"]))for(var d of s["schema:domainIncludes"])r["schema:domainIncludes"].includes(d)||r["schema:domainIncludes"].push(d);if(!util.isNil(s["schema:rangeIncludes"]))for(var m of s["schema:rangeIncludes"])r["schema:rangeIncludes"].includes(m)||r["schema:rangeIncludes"].push(m);if(!util.isNil(s["schema:superPropertyOf"]))for(var y of s["schema:superPropertyOf"])r["schema:superPropertyOf"].includes(y)||r["schema:superPropertyOf"].push(y)}else e[s["@id"]]=s;return!0}catch(e){return console.log(e),!1}}getTerm(e){var s,r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=this.discoverCompactIRI(e),i=0;do{switch(i){case 0:s=this.classes[t],r="Class";break;case 1:s=this.properties[t],r="Property";break;case 2:s=this.dataTypes[t],r="DataType";break;case 3:s=this.enumerations[t],r="Enumeration";break;case 4:s=this.enumerationMembers[t],r="EnumerationMember"}i++}while(!s&&i<6);if(!s)throw new Error("There is no term with the IRI "+e);if(0===(s=util.applyFilter([s["@id"]],a,this)).length)throw new Error("There is no term with that IRI and filter settings.");switch(r){case"Class":return new Class(t,this);case"Property":return new Property(t,this);case"Enumeration":return new Enumeration(t,this);case"EnumerationMember":return new EnumerationMember(t,this);case"DataType":return new DataType(t,this)}}getClass(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=this.discoverCompactIRI(e);if(r){var a=this.classes[r];if(a){if(0===(a=util.applyFilter([r],s,this)).length)throw new Error("There is no class with that IRI and filter settings.");return new Class(r,this)}if(a=this.enumerations[r])try{return this.getEnumeration(r,s)}catch(e){throw new Error("There is no class with that IRI and filter settings.")}}throw new Error("There is no class with the IRI "+e)}getProperty(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=this.discoverCompactIRI(e);if(r){var a=this.properties[r];if(a){if(0===(a=util.applyFilter([r],s,this)).length)throw new Error("There is no property with that URI and filter settings.");return new Property(r,this)}}throw new Error("There is no property with that URI.")}getDataType(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=this.discoverCompactIRI(e);if(r){var a=this.dataTypes[r];if(a){if(0===(a=util.applyFilter([r],s,this)).length)throw new Error("There is no data-type with that IRI and filter settings.");return new DataType(r,this)}}throw new Error("There is no data-type with the IRI "+e)}getEnumeration(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=this.discoverCompactIRI(e);if(r){var a=this.enumerations[r];if(a){if(0===(a=util.applyFilter([r],s,this)).length)throw new Error("There is no enumeration with that IRI and filter settings.");return new Enumeration(r,this)}}throw new Error("There is no enumeration with the IRI "+e)}getEnumerationMember(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=this.discoverCompactIRI(e);if(r){var a=this.enumerationMembers[r];if(a){if(0===(a=util.applyFilter([r],s,this)).length)throw new Error("There is no EnumerationMember with that IRI and filter settings.");return new EnumerationMember(r,this)}}throw new Error("There is no EnumerationMember with the IRI "+e)}discoverCompactIRI(e){if(-1!==e.indexOf(":")){var s=Object.keys(this.context);for(var r of s){var a=this.context[r];if(util.isString(a)){if(e.startsWith(r))return e;if(e.startsWith(a))return util.toCompactIRI(e,this.context)}}}else{var t=Object.keys(this.classes);for(var i of t)if(!0===this.containsLabel(this.classes[i],e))return i;var o=Object.keys(this.properties);for(var n of o)if(!0===this.containsLabel(this.properties[n],e))return n;var u=Object.keys(this.dataTypes);for(var l of u)if(!0===this.containsLabel(this.dataTypes[l],e))return l;var f=Object.keys(this.enumerations);for(var c of f)if(!0===this.containsLabel(this.enumerations[c],e))return c;var h=Object.keys(this.enumerationMembers);for(var p of h)if(!0===this.containsLabel(this.enumerationMembers[p],e))return p}return null}containsLabel(e,s){if(e&&util.isObject(e["rdfs:label"])){var r=Object.keys(e["rdfs:label"]);for(var a of r)if(e["rdfs:label"][a]===s)return!0}return!1}}module.exports=Graph;

},{"./Class":74,"./DataType":75,"./Enumeration":76,"./EnumerationMember":77,"./Property":79,"./ReasoningEngine":80,"./utilities":82}],79:[function(_dereq_,module,exports){
"use strict";var util=_dereq_("./utilities");class Property{constructor(e,r){this.IRI=e,this.graph=r}getIRI(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?this.IRI:util.toAbsoluteIRI(this.IRI,this.graph.context)}getTermType(){return"rdf:Property"}getVocabulary(){var e=this.graph.properties[this.IRI];return util.isNil(e["schema:isPartOf"])?null:e["schema:isPartOf"]}getSource(){var e=this.graph.properties[this.IRI];return util.isNil(e["dc:source"])?util.isNil(e["schema:source"])?null:e["schema:source"]:e["dc:source"]}isSupersededBy(){var e=this.graph.properties[this.IRI];return util.isString(e["schema:supersededBy"])?e["schema:supersededBy"]:null}getName(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en",r=this.graph.properties[this.IRI]["rdfs:label"];return util.isNil(r)||util.isNil(r[e])?null:r[e]}getDescription(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en",r=this.graph.properties[this.IRI]["rdfs:comment"];return util.isNil(r)||util.isNil(r[e])?null:r[e]}getRanges(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=this.graph.properties[this.IRI],i=[];if(i.push(...t["schema:rangeIncludes"]),e){var s=[];for(var h of i)s.push(...this.graph.reasoner.inferImplicitSubClasses(h));i.push(...s),i=i.filter(function(e){return null!==e})}return util.applyFilter(util.uniquifyArray(i),r,this.graph)}getDomains(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=this.graph.properties[this.IRI],i=[];if(i.push(...t["schema:domainIncludes"]),e){var s=[];for(var h of i)s.push(...this.graph.reasoner.inferImplicitSubClasses(h));i.push(...s)}return util.applyFilter(util.uniquifyArray(i),r,this.graph)}getSuperProperties(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=this.graph.properties[this.IRI],i=[];return e?i.push(...this.graph.reasoner.inferSuperProperties(this.IRI)):i.push(...t["rdfs:subPropertyOf"]),util.applyFilter(util.uniquifyArray(i),r,this.graph)}getSubProperties(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=this.graph.properties[this.IRI],i=[];return e?i.push(...this.graph.reasoner.inferSubProperties(this.IRI)):i.push(...t["soa:superPropertyOf"]),util.applyFilter(util.uniquifyArray(i),r,this.graph)}getInverseOf(){return this.graph.properties[this.IRI]["schema:inverseOf"]}toString(){return JSON.stringify(this.toJSON(!1,null),null,2)}toJSON(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t={};return t.id=this.getIRI(!0),t.IRI=this.getIRI(),t.type=this.getTermType(),t.vocabulary=this.getVocabulary(),t.source=this.getSource(),t.supersededBy=this.isSupersededBy(),t.name=this.getName(),t.description=this.getDescription(),t.ranges=this.getRanges(e,r),t.domains=this.getDomains(e,r),t.superProperties=this.getSuperProperties(e,r),t.subProperties=this.getSubProperties(e,r),t.inverseOf=this.getInverseOf(),t}}module.exports=Property;

},{"./utilities":82}],80:[function(_dereq_,module,exports){
"use strict";var util=_dereq_("./utilities");class ReasoningEngine{constructor(r){this.graph=r}inferPropertiesFromSuperClasses(r){for(var s=[],i=0;i<r.length;i++){var a=this.graph.classes[r[i]];void 0===a&&(a=this.graph.enumerations[r[i]]),void 0!==a&&(s.push(...a["soa:hasProperty"]),0!==a["rdfs:subClassOf"].length&&s.push(...this.inferPropertiesFromSuperClasses(a["rdfs:subClassOf"])))}return util.uniquifyArray(s)}inferImplicitSuperClasses(r){var s=this.graph.classes[r],i=[];if(void 0===s&&(s=this.graph.enumerations[r]),void 0!==s){i.push(...s["rdfs:subClassOf"]);var a=util.copByVal(i);do{for(var u=[],e=0;e<a.length;e++){var t=this.graph.classes[a[e]];void 0===t&&(t=this.graph.enumerations[a[e]]),void 0!==t&&u.push(...t["rdfs:subClassOf"])}u=util.uniquifyArray(u),a=util.copByVal(u),i.push(...u)}while(0!==a.length);i=util.uniquifyArray(i)}return i}inferImplicitSubClasses(r){var s=this.graph.classes[r],i=[];if(void 0===s&&(s=this.graph.enumerations[r]),void 0!==s){i.push(...s["soa:superClassOf"]);var a=util.copByVal(i);do{for(var u=[],e=0;e<a.length;e++){var t=this.graph.classes[a[e]];void 0===t&&(t=this.graph.enumerations[a[e]]),void 0!==t&&u.push(...t["soa:superClassOf"])}u=util.uniquifyArray(u),a=util.copByVal(u),i.push(...u)}while(0!==a.length);return i=util.uniquifyArray(i)}return i}inferImplicitSuperDataTypes(r){var s=this.graph.dataTypes[r],i=[];if(void 0!==s){i.push(...s["rdfs:subClassOf"]);var a=util.copByVal(i);do{for(var u=[],e=0;e<a.length;e++){var t=this.graph.dataTypes[a[e]];void 0!==t&&u.push(...t["rdfs:subClassOf"])}u=util.uniquifyArray(u),a=util.copByVal(u),i.push(...u)}while(0!==a.length);i=util.uniquifyArray(i)}return i}inferImplicitSubDataTypes(r){var s=this.graph.dataTypes[r],i=[];if(void 0!==s){i.push(...s["soa:superClassOf"]);var a=util.copByVal(i);do{for(var u=[],e=0;e<a.length;e++){var t=this.graph.dataTypes[a[e]];void 0!==t&&u.push(...t["soa:superClassOf"])}u=util.uniquifyArray(u),a=util.copByVal(u),i.push(...u)}while(0!==a.length);i=util.uniquifyArray(i)}return i}inferSubProperties(r){var s=this.graph.properties[r],i=[];if(void 0!==s){i.push(...s["soa:superPropertyOf"]);var a=util.copByVal(i);do{for(var u=[],e=0;e<a.length;e++){var t=this.graph.properties[a[e]];void 0!==t&&u.push(...t["soa:superPropertyOf"])}u=util.uniquifyArray(u),a=util.copByVal(u),i.push(...u)}while(0!==a.length);i=util.uniquifyArray(i)}return i}inferSuperProperties(r){var s=this.graph.properties[r],i=[];if(void 0!==s){i.push(...s["rdfs:subPropertyOf"]);var a=util.copByVal(i);do{for(var u=[],e=0;e<a.length;e++){var t=this.graph.properties[a[e]];void 0!==t&&u.push(...t["rdfs:subPropertyOf"])}u=util.uniquifyArray(u),a=util.copByVal(u),i.push(...u)}while(0!==a.length);i=util.uniquifyArray(i)}return i}}module.exports=ReasoningEngine;

},{"./utilities":82}],81:[function(_dereq_,module,exports){
"use strict";function asyncGeneratorStep(e,r,t,a,i,n,s){try{var o=e[n](s),l=o.value}catch(e){return void t(e)}o.done?r(l):Promise.resolve(l).then(a,i)}function _asyncToGenerator(e){return function(){var r=this,t=arguments;return new Promise(function(a,i){var n=e.apply(r,t);function s(e){asyncGeneratorStep(n,a,i,s,o,"next",e)}function o(e){asyncGeneratorStep(n,a,i,s,o,"throw",e)}s(void 0)})}}var Graph=_dereq_("./Graph"),util=_dereq_("./utilities"),axios=_dereq_("axios"),URI_SEMANTIFY_GITHUB="https://raw.githubusercontent.com/semantifyit/schemaorg/main/",URI_SEMANTIFY_RELEASES=URI_SEMANTIFY_GITHUB+"data/releases/",URI_SEMANTIFY_VERSIONS=URI_SEMANTIFY_GITHUB+"versions.json";class SDOAdapter{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.graph=new Graph(this),this.retrievalMemory={versionsFile:null,latest:null},this.commitBase=e}addVocabularies(e){var r=this;return _asyncToGenerator(function*(){if(util.isArray(e)||!util.isString(e)&&!util.isObject(e)||(e=[e]),!util.isArray(e))throw new Error("The first argument of the function must be an Array of vocabularies or a single vocabulary (JSON-LD as Object/String)");for(var t=0;t<e.length;t++)if(util.isString(e[t]))if(e[t].startsWith("www")||e[t].startsWith("http"))try{var a=yield r.fetchVocabularyFromURL(e[t]);yield r.graph.addVocabulary(a)}catch(r){throw new Error("The given URL "+e[t]+" did not contain a valid JSON-LD vocabulary.")}else try{yield r.graph.addVocabulary(JSON.parse(e[t]))}catch(e){throw new Error("Parsing of vocabulary string produced an invalid JSON-LD.")}else{if(!util.isObject(e[t]))throw new Error("The first argument of the function must be an Array of vocabularies or a single vocabulary (JSON-LD as Object/String)");yield r.graph.addVocabulary(e[t])}})()}fetchVocabularyFromURL(e){return _asyncToGenerator(function*(){return new Promise(function(r,t){axios.get(e).then(function(e){r(e.data)}).catch(function(e){t("Could not find any resource at the given URL.")})})})()}getTerm(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.graph.getTerm(e,r)}getClass(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.graph.getClass(e,r)}getAllClasses(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=this.getListOfClasses(e),t=[],a=0;a<r.length;a++)try{t.push(this.getClass(r[a]))}catch(e){throw new Error("There is no class with the IRI "+r[a])}return t}getListOfClasses(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return util.applyFilter(Object.keys(this.graph.classes),e,this.graph)}getProperty(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.graph.getProperty(e,r)}getAllProperties(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=this.getListOfProperties(e),t=[],a=0;a<r.length;a++)try{t.push(this.getProperty(r[a]))}catch(e){throw new Error("There is no property with the IRI "+r[a])}return t}getListOfProperties(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return util.applyFilter(Object.keys(this.graph.properties),e,this.graph)}getDataType(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.graph.getDataType(e,r)}getAllDataTypes(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=this.getListOfDataTypes(e),t=[],a=0;a<r.length;a++)try{t.push(this.getDataType(r[a]))}catch(e){throw new Error("There is no data type with the IRI "+r[a])}return t}getListOfDataTypes(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return util.applyFilter(Object.keys(this.graph.dataTypes),e,this.graph)}getEnumeration(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.graph.getEnumeration(e,r)}getAllEnumerations(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=this.getListOfEnumerations(e),t=[],a=0;a<r.length;a++)try{t.push(this.getEnumeration(r[a]))}catch(e){throw new Error("There is no enumeration with the IRI "+r[a])}return t}getListOfEnumerations(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return util.applyFilter(Object.keys(this.graph.enumerations),e,this.graph)}getEnumerationMember(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.graph.getEnumerationMember(e,r)}getAllEnumerationMembers(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=this.getListOfEnumerationMembers(e),t=[],a=0;a<r.length;a++)try{t.push(this.getEnumerationMember(r[a]))}catch(e){throw new Error("There is no enumeration member with the IRI "+r[a])}return t}getListOfEnumerationMembers(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return util.applyFilter(Object.keys(this.graph.enumerationMembers),e,this.graph)}getVocabularies(){for(var e=Object.keys(this.graph.context),r={},t=["soa","xsd","rdf","rdfa","rdfs","dc"],a=0;a<e.length;a++)util.isString(this.graph.context[e[a]])&&-1===t.indexOf(e[a])&&(r[e[a]]=this.graph.context[e[a]]);return r}constructSDOVocabularyURL(){var e=arguments,r=this;return _asyncToGenerator(function*(){var t=e.length>0&&void 0!==e[0]?e[0]:"latest";if("latest"===t)try{r.retrievalMemory.versionsFile||(yield r.getSDOVersionFile()),t=r.retrievalMemory.latest}catch(e){throw console.error("Could not determine/retrieve the latest version of schema.org"),e}var a=util.getFileNameForSchemaOrgVersion(t);return r.getReleasesURI()+t+"/"+a})()}getSDOVersionFile(){var e=this;return _asyncToGenerator(function*(){var r;try{r=yield axios.get(e.getVersionFileURI())}catch(r){throw console.log("Unable to retrieve the schema.org versions file at "+e.getVersionFileURI()),r}if(r&&r.data){if(e.retrievalMemory.versionsFile=r.data,e.retrievalMemory.versionsFile.schemaversion){if(yield e.checkURL(yield e.constructSDOVocabularyURL(e.retrievalMemory.versionsFile.schemaversion)))e.retrievalMemory.latest=e.retrievalMemory.versionsFile.schemaversion;else{if(e.retrievalMemory.versionsFile.releaseLog){var t=util.sortReleaseEntriesByDate(e.retrievalMemory.versionsFile.releaseLog);for(var a of t)if(yield e.checkURL(yield e.constructSDOVocabularyURL(a[0]))){e.retrievalMemory.latest=a[0];break}}if(!e.retrievalMemory.latest){var i='Could not find any valid vocabulary file in the Schema.org versions file (to be declared as "latest".';throw console.log(i),new Error(i)}}return}var n="Schema.org versions file has an unexpected structure!";throw console.log(n+" -> "+e.getVersionFileURI()),new Error(n)}})()}checkURL(e){return _asyncToGenerator(function*(){try{return yield axios.head(e),!0}catch(e){return!1}})()}getLatestSDOVersion(){var e=this;return _asyncToGenerator(function*(){return e.retrievalMemory.latest||(yield e.getSDOVersionFile()),e.retrievalMemory.latest})()}getReleasesURI(){return this.commitBase?"https://raw.githubusercontent.com/schemaorg/schemaorg/"+this.commitBase+"/data/releases/":URI_SEMANTIFY_RELEASES}getVersionFileURI(){return this.commitBase?"https://raw.githubusercontent.com/schemaorg/schemaorg/"+this.commitBase+"/versions.json":URI_SEMANTIFY_VERSIONS}}module.exports=SDOAdapter;

},{"./Graph":78,"./utilities":82,"axios":1}],82:[function(_dereq_,module,exports){
"use strict";function asyncGeneratorStep(e,r,s,a,t,n,o){try{var i=e[n](o),c=i.value}catch(e){return void s(e)}i.done?r(c):Promise.resolve(c).then(a,t)}function _asyncToGenerator(e){return function(){var r=this,s=arguments;return new Promise(function(a,t){var n=e.apply(r,s);function o(e){asyncGeneratorStep(n,a,t,o,i,"next",e)}function i(e){asyncGeneratorStep(n,a,t,o,i,"throw",e)}o(void 0)})}}var jsonld=_dereq_("jsonld");function applyFilter(e,r,s){if(!Array.isArray(e)||0===e.length||null===r||0===Object.keys(r).length)return e;var a=[],t=s.context;if(isString(r.fromVocabulary)){for(var n of Object.keys(t))if(t[n]===r.fromVocabulary){r.fromVocabulary=n;break}}else if(isArray(r.fromVocabulary))for(var o=0;o<r.fromVocabulary.length;o++)for(var i=0;i<Object.keys(t).length;i++)if(t[Object.keys(t)[i]]===r.fromVocabulary[o]){r.fromVocabulary[o]=Object.keys(t)[i];break}for(var c=0;c<e.length;c++){var l=s.getTerm(e[c]);if(void 0!==r.isSuperseded){if(!1===r.isSuperseded&&null!=l.isSupersededBy())continue;if(!0===r.isSuperseded&&null==l.isSupersededBy())continue}if(r.fromVocabulary){var f=!1;if(isString(r.fromVocabulary))r.fromVocabulary&&l.getIRI(!0).startsWith(r.fromVocabulary)&&(f=!0);else if(isArray(r.fromVocabulary))for(var u=0;u<r.fromVocabulary.length;u++)l.getIRI(!0).startsWith(r.fromVocabulary[u])&&(f=!0);if(!f)continue}if(r.termType){var d=!1,y=[];isString(r.termType)?y.push(r.termType):isArray(r.termType)&&(y=r.termType);for(var m=0;m<y.length;m++){var b=void 0;switch(y[m]){case"Class":b="rdfs:Class";break;case"Property":b="rdf:Property";break;case"Enumeration":b="schema:Enumeration";break;case"EnumerationMember":b="soa:EnumerationMember";break;case"DataType":b="schema:DataType";break;default:throw new Error("Invalid filter.termType "+y[m])}if(b===l.getTermType()){d=!0;break}}if(!d)continue}a.push(e[c])}return a}function copByVal(e){if(void 0!==e)return JSON.parse(JSON.stringify(e))}function isObject(e){return!Array.isArray(e)&&(!isNil(e)&&"object"==typeof e)}function isNil(e){return null==e}function isString(e){return!isNil(e)&&("string"==typeof e||e instanceof String)}function isArray(e){return Array.isArray(e)}function uniquifyArray(e){var r={},s=[];for(var a of e)r[a]||(r[a]=1,s.push(a));return s}function generateContext(e,r){for(var s=Object.keys(e),a=Object.keys(r),t=JSON.parse(JSON.stringify(e)),n=0;n<a.length;n++){var o=a[n];if(isString(r[o])){for(var i=!1,c=0;c<s.length;c++)if(isString(t[s[c]])&&t[s[c]]===r[o]){i=!0;break}if(i)continue;if(t[o]){if(t[o]!==r[o])for(var l=!1,f=1;!1===l;){var u=o+f++;t[u]||(l=!0,t[u]=r[o])}}else t[o]=r[o]}}var d={};Object.keys(t).sort().forEach(function(e){d[e]=t[e]}),t=d;for(var y=Object.keys(t),m={},b=0;b<y.length;b++)isString(t[y[b]])&&(m[y[b]]=t[y[b]]);for(var p=0;p<y.length;p++)isObject(t[y[p]])&&(m[y[p]]=t[y[p]]);return m}function preProcessVocab(e,r){return _preProcessVocab.apply(this,arguments)}function _preProcessVocab(){return(_preProcessVocab=_asyncToGenerator(function*(e,r){var s=!1;do{var a=[];s=!1;for(var t=0;t<e["@graph"].length;t++)void 0!==e["@graph"][t]["@graph"]?(a.push(...copByVal(e["@graph"][t]["@graph"])),s=!0):a.push(copByVal(e["@graph"][t]));e["@graph"]=copByVal(a)}while(!0===s);var n=yield jsonld.expand(e),o=yield jsonld.compact(n,r);return void 0===o["@graph"]?(delete o["@context"],{"@context":r,"@graph":[o]}):o})).apply(this,arguments)}function curateVocabNode(e,r){if(void 0!==e["rdfs:comment"]){if(isString(e["rdfs:comment"]))e["rdfs:comment"]={en:e["rdfs:comment"]};else if(isObject(e["rdfs:comment"])){var s={};s[e["rdfs:comment"]["@language"]]=e["rdfs:comment"]["@value"],e["rdfs:comment"]=copByVal(s)}else if(isArray(e["rdfs:comment"])){for(var a={},t=0;t<e["rdfs:comment"].length;t++)isObject(e["rdfs:comment"][t])&&(a[e["rdfs:comment"][t]["@language"]]=e["rdfs:comment"][t]["@value"]);e["rdfs:comment"]=copByVal(a)}}else e["rdfs:comment"]={};if(void 0!==e["rdfs:label"]){if(isString(e["rdfs:label"]))e["rdfs:label"]={en:e["rdfs:label"]};else if(isObject(e["rdfs:label"])){var n={};n[e["rdfs:label"]["@language"]]=e["rdfs:label"]["@value"],e["rdfs:label"]=copByVal(n)}else if(isArray(e["rdfs:label"])){for(var o={},i=0;i<e["rdfs:label"].length;i++)isObject(e["rdfs:label"][i])&&(o[e["rdfs:label"][i]["@language"]]=e["rdfs:label"][i]["@value"]);e["rdfs:label"]=copByVal(o)}}else e["rdfs:label"]={};if(isString(e["rdfs:subClassOf"])?e["rdfs:subClassOf"]=[e["rdfs:subClassOf"]]:void 0===e["rdfs:subClassOf"]&&"rdfs:Class"===e["@type"]&&(e["rdfs:subClassOf"]=[]),isString(e["rdfs:subPropertyOf"])?e["rdfs:subPropertyOf"]=[e["rdfs:subPropertyOf"]]:void 0===e["rdfs:subPropertyOf"]&&"rdf:Property"===e["@type"]&&(e["rdfs:subPropertyOf"]=[]),isString(e["schema:domainIncludes"])?e["schema:domainIncludes"]=[e["schema:domainIncludes"]]:void 0===e["schema:domainIncludes"]&&"rdf:Property"===e["@type"]&&(e["schema:domainIncludes"]=[]),isString(e["schema:rangeIncludes"])?e["schema:rangeIncludes"]=[e["schema:rangeIncludes"]]:void 0===e["schema:rangeIncludes"]&&"rdf:Property"===e["@type"]&&(e["schema:rangeIncludes"]=[]),!isString(e["schema:isPartOf"])){for(var c,l=Object.keys(r),f=0;f<l.length;f++)if(e["@id"].substring(0,e["@id"].indexOf(":"))===l[f]){c=r[l[f]];break}if(void 0!==c){var u;do{u=!1,(c.endsWith("/")||c.endsWith("#"))&&(c=c.substring(0,c.length-1),u=!0)}while(!0===u);e["schema:isPartOf"]=c}}return e}function toCompactIRI(e,r){for(var s=Object.keys(r),a=0;a<s.length;a++){var t=r[s[a]];if(isString(t)&&e.startsWith(t))return s[a]+":"+e.substring(t.length)}return null}function toAbsoluteIRI(e,r){for(var s=Object.keys(r),a=0;a<s.length;a++){var t=r[s[a]];if(e.substring(0,e.indexOf(":"))===s[a])return t.concat(e.substring(e.indexOf(":")+1))}return null}function sortReleaseEntriesByDate(e){return Object.entries(e).sort((e,r)=>new Date(r[1])-new Date(e[1]))}function getFileNameForSchemaOrgVersion(e){switch(e){case"2.0":case"2.1":case"2.2":case"3.0":throw new Error("There is no jsonld file for that schema.org version.");case"3.1":case"3.2":case"3.3":case"3.4":case"3.5":case"3.6":case"3.7":case"3.8":case"3.9":case"4.0":case"5.0":case"6.0":case"7.0":case"7.01":case"7.02":case"7.03":case"7.04":case"8.0":return"all-layers.jsonld";case"9.0":default:return"schemaorg-all-http.jsonld"}}module.exports={applyFilter:applyFilter,copByVal:copByVal,isArray:isArray,isString:isString,isObject:isObject,isNil:isNil,uniquifyArray:uniquifyArray,preProcessVocab:preProcessVocab,generateContext:generateContext,curateVocabNode:curateVocabNode,toCompactIRI:toCompactIRI,toAbsoluteIRI:toAbsoluteIRI,sortReleaseEntriesByDate:sortReleaseEntriesByDate,getFileNameForSchemaOrgVersion:getFileNameForSchemaOrgVersion};

},{"jsonld":46}]},{},[81])(81)
});
