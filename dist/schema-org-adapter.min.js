(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.SDOAdapter = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
module.exports=require("./lib/axios");

},{"./lib/axios":3}],2:[function(require,module,exports){
"use strict";var utils=require("./../utils"),settle=require("./../core/settle"),buildURL=require("./../helpers/buildURL"),buildFullPath=require("../core/buildFullPath"),parseHeaders=require("./../helpers/parseHeaders"),isURLSameOrigin=require("./../helpers/isURLSameOrigin"),createError=require("../core/createError");module.exports=function(e){return new Promise(function(r,t){var s=e.data,o=e.headers;utils.isFormData(s)&&delete o["Content-Type"];var a=new XMLHttpRequest;if(e.auth){var n=e.auth.username||"",i=e.auth.password||"";o.Authorization="Basic "+btoa(n+":"+i)}var u=buildFullPath(e.baseURL,e.url);if(a.open(e.method.toUpperCase(),buildURL(u,e.params,e.paramsSerializer),!0),a.timeout=e.timeout,a.onreadystatechange=function(){if(a&&4===a.readyState&&(0!==a.status||a.responseURL&&0===a.responseURL.indexOf("file:"))){var s="getAllResponseHeaders"in a?parseHeaders(a.getAllResponseHeaders()):null,o={data:e.responseType&&"text"!==e.responseType?a.response:a.responseText,status:a.status,statusText:a.statusText,headers:s,config:e,request:a};settle(r,t,o),a=null}},a.onabort=function(){a&&(t(createError("Request aborted",e,"ECONNABORTED",a)),a=null)},a.onerror=function(){t(createError("Network Error",e,null,a)),a=null},a.ontimeout=function(){var r="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(r=e.timeoutErrorMessage),t(createError(r,e,"ECONNABORTED",a)),a=null},utils.isStandardBrowserEnv()){var l=require("./../helpers/cookies"),d=(e.withCredentials||isURLSameOrigin(u))&&e.xsrfCookieName?l.read(e.xsrfCookieName):void 0;d&&(o[e.xsrfHeaderName]=d)}if("setRequestHeader"in a&&utils.forEach(o,function(e,r){void 0===s&&"content-type"===r.toLowerCase()?delete o[r]:a.setRequestHeader(r,e)}),utils.isUndefined(e.withCredentials)||(a.withCredentials=!!e.withCredentials),e.responseType)try{a.responseType=e.responseType}catch(r){if("json"!==e.responseType)throw r}"function"==typeof e.onDownloadProgress&&a.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&a.upload&&a.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){a&&(a.abort(),t(e),a=null)}),void 0===s&&(s=null),a.send(s)})};

},{"../core/buildFullPath":9,"../core/createError":10,"./../core/settle":14,"./../helpers/buildURL":18,"./../helpers/cookies":20,"./../helpers/isURLSameOrigin":22,"./../helpers/parseHeaders":25,"./../utils":27}],3:[function(require,module,exports){
"use strict";var utils=require("./utils"),bind=require("./helpers/bind"),Axios=require("./core/Axios"),mergeConfig=require("./core/mergeConfig"),defaults=require("./defaults");function createInstance(e){var r=new Axios(e),i=bind(Axios.prototype.request,r);return utils.extend(i,Axios.prototype,r),utils.extend(i,r),i}var axios=createInstance(defaults);axios.Axios=Axios,axios.create=function(e){return createInstance(mergeConfig(axios.defaults,e))},axios.Cancel=require("./cancel/Cancel"),axios.CancelToken=require("./cancel/CancelToken"),axios.isCancel=require("./cancel/isCancel"),axios.all=function(e){return Promise.all(e)},axios.spread=require("./helpers/spread"),module.exports=axios,module.exports.default=axios;

},{"./cancel/Cancel":4,"./cancel/CancelToken":5,"./cancel/isCancel":6,"./core/Axios":7,"./core/mergeConfig":13,"./defaults":16,"./helpers/bind":17,"./helpers/spread":26,"./utils":27}],4:[function(require,module,exports){
"use strict";function Cancel(e){this.message=e}Cancel.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},Cancel.prototype.__CANCEL__=!0,module.exports=Cancel;

},{}],5:[function(require,module,exports){
"use strict";var Cancel=require("./Cancel");function CancelToken(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(e){n=e});var o=this;e(function(e){o.reason||(o.reason=new Cancel(e),n(o.reason))})}CancelToken.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},CancelToken.source=function(){var e;return{token:new CancelToken(function(n){e=n}),cancel:e}},module.exports=CancelToken;

},{"./Cancel":4}],6:[function(require,module,exports){
"use strict";module.exports=function(t){return!(!t||!t.__CANCEL__)};

},{}],7:[function(require,module,exports){
"use strict";var utils=require("./../utils"),buildURL=require("../helpers/buildURL"),InterceptorManager=require("./InterceptorManager"),dispatchRequest=require("./dispatchRequest"),mergeConfig=require("./mergeConfig");function Axios(e){this.defaults=e,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}Axios.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=mergeConfig(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[dispatchRequest,void 0],r=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)r=r.then(t.shift(),t.shift());return r},Axios.prototype.getUri=function(e){return e=mergeConfig(this.defaults,e),buildURL(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},utils.forEach(["delete","get","head","options"],function(e){Axios.prototype[e]=function(t,r){return this.request(utils.merge(r||{},{method:e,url:t}))}}),utils.forEach(["post","put","patch"],function(e){Axios.prototype[e]=function(t,r,o){return this.request(utils.merge(o||{},{method:e,url:t,data:r}))}}),module.exports=Axios;

},{"../helpers/buildURL":18,"./../utils":27,"./InterceptorManager":8,"./dispatchRequest":11,"./mergeConfig":13}],8:[function(require,module,exports){
"use strict";var utils=require("./../utils");function InterceptorManager(){this.handlers=[]}InterceptorManager.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},InterceptorManager.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},InterceptorManager.prototype.forEach=function(e){utils.forEach(this.handlers,function(t){null!==t&&e(t)})},module.exports=InterceptorManager;

},{"./../utils":27}],9:[function(require,module,exports){
"use strict";var isAbsoluteURL=require("../helpers/isAbsoluteURL"),combineURLs=require("../helpers/combineURLs");module.exports=function(e,s){return e&&!isAbsoluteURL(s)?combineURLs(e,s):s};

},{"../helpers/combineURLs":19,"../helpers/isAbsoluteURL":21}],10:[function(require,module,exports){
"use strict";var enhanceError=require("./enhanceError");module.exports=function(r,e,n,o,a){var c=new Error(r);return enhanceError(c,e,n,o,a)};

},{"./enhanceError":12}],11:[function(require,module,exports){
"use strict";var utils=require("./../utils"),transformData=require("./transformData"),isCancel=require("../cancel/isCancel"),defaults=require("../defaults");function throwIfCancellationRequested(e){e.cancelToken&&e.cancelToken.throwIfRequested()}module.exports=function(e){return throwIfCancellationRequested(e),e.headers=e.headers||{},e.data=transformData(e.data,e.headers,e.transformRequest),e.headers=utils.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),utils.forEach(["delete","get","head","post","put","patch","common"],function(a){delete e.headers[a]}),(e.adapter||defaults.adapter)(e).then(function(a){return throwIfCancellationRequested(e),a.data=transformData(a.data,a.headers,e.transformResponse),a},function(a){return isCancel(a)||(throwIfCancellationRequested(e),a&&a.response&&(a.response.data=transformData(a.response.data,a.response.headers,e.transformResponse))),Promise.reject(a)})};

},{"../cancel/isCancel":6,"../defaults":16,"./../utils":27,"./transformData":15}],12:[function(require,module,exports){
"use strict";module.exports=function(e,i,s,t,n){return e.config=i,s&&(e.code=s),e.request=t,e.response=n,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e};

},{}],13:[function(require,module,exports){
"use strict";var utils=require("../utils");module.exports=function(e,t){t=t||{};var r={},o=["url","method","params","data"],s=["headers","auth","proxy"],i=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];utils.forEach(o,function(e){void 0!==t[e]&&(r[e]=t[e])}),utils.forEach(s,function(o){utils.isObject(t[o])?r[o]=utils.deepMerge(e[o],t[o]):void 0!==t[o]?r[o]=t[o]:utils.isObject(e[o])?r[o]=utils.deepMerge(e[o]):void 0!==e[o]&&(r[o]=e[o])}),utils.forEach(i,function(o){void 0!==t[o]?r[o]=t[o]:void 0!==e[o]&&(r[o]=e[o])});var a=o.concat(s).concat(i),n=Object.keys(t).filter(function(e){return-1===a.indexOf(e)});return utils.forEach(n,function(o){void 0!==t[o]?r[o]=t[o]:void 0!==e[o]&&(r[o]=e[o])}),r};

},{"../utils":27}],14:[function(require,module,exports){
"use strict";var createError=require("./createError");module.exports=function(r,t,e){var a=e.config.validateStatus;!a||a(e.status)?r(e):t(createError("Request failed with status code "+e.status,e.config,null,e.request,e))};

},{"./createError":10}],15:[function(require,module,exports){
"use strict";var utils=require("./../utils");module.exports=function(t,u,r){return utils.forEach(r,function(r){t=r(t,u)}),t};

},{"./../utils":27}],16:[function(require,module,exports){
(function (process){
"use strict";var utils=require("./utils"),normalizeHeaderName=require("./helpers/normalizeHeaderName"),DEFAULT_CONTENT_TYPE={"Content-Type":"application/x-www-form-urlencoded"};function setContentTypeIfUnset(e,t){!utils.isUndefined(e)&&utils.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function getDefaultAdapter(){var e;return"undefined"!=typeof XMLHttpRequest?e=require("./adapters/xhr"):"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process)&&(e=require("./adapters/http")),e}var defaults={adapter:getDefaultAdapter(),transformRequest:[function(e,t){return normalizeHeaderName(t,"Accept"),normalizeHeaderName(t,"Content-Type"),utils.isFormData(e)||utils.isArrayBuffer(e)||utils.isBuffer(e)||utils.isStream(e)||utils.isFile(e)||utils.isBlob(e)?e:utils.isArrayBufferView(e)?e.buffer:utils.isURLSearchParams(e)?(setContentTypeIfUnset(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):utils.isObject(e)?(setContentTypeIfUnset(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};utils.forEach(["delete","get","head"],function(e){defaults.headers[e]={}}),utils.forEach(["post","put","patch"],function(e){defaults.headers[e]=utils.merge(DEFAULT_CONTENT_TYPE)}),module.exports=defaults;

}).call(this,require('_process'))
},{"./adapters/http":2,"./adapters/xhr":2,"./helpers/normalizeHeaderName":24,"./utils":27,"_process":60}],17:[function(require,module,exports){
"use strict";module.exports=function(r,n){return function(){for(var t=new Array(arguments.length),e=0;e<t.length;e++)t[e]=arguments[e];return r.apply(n,t)}};

},{}],18:[function(require,module,exports){
"use strict";var utils=require("./../utils");function encode(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}module.exports=function(e,i,r){if(!i)return e;var t;if(r)t=r(i);else if(utils.isURLSearchParams(i))t=i.toString();else{var n=[];utils.forEach(i,function(e,i){null!=e&&(utils.isArray(e)?i+="[]":e=[e],utils.forEach(e,function(e){utils.isDate(e)?e=e.toISOString():utils.isObject(e)&&(e=JSON.stringify(e)),n.push(encode(i)+"="+encode(e))}))}),t=n.join("&")}if(t){var c=e.indexOf("#");-1!==c&&(e=e.slice(0,c)),e+=(-1===e.indexOf("?")?"?":"&")+t}return e};

},{"./../utils":27}],19:[function(require,module,exports){
"use strict";module.exports=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e};

},{}],20:[function(require,module,exports){
"use strict";var utils=require("./../utils");module.exports=utils.isStandardBrowserEnv()?{write:function(e,t,n,i,u,o){var r=[];r.push(e+"="+encodeURIComponent(t)),utils.isNumber(n)&&r.push("expires="+new Date(n).toGMTString()),utils.isString(i)&&r.push("path="+i),utils.isString(u)&&r.push("domain="+u),!0===o&&r.push("secure"),document.cookie=r.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};

},{"./../utils":27}],21:[function(require,module,exports){
"use strict";module.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)};

},{}],22:[function(require,module,exports){
"use strict";var utils=require("./../utils"),isValidXss=require("./isValidXss");module.exports=utils.isStandardBrowserEnv()?function(){var t,r=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a");function o(t){var o=t;if(isValidXss(t))throw new Error("URL contains XSS injection attempt");return r&&(e.setAttribute("href",o),o=e.href),e.setAttribute("href",o),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:"/"===e.pathname.charAt(0)?e.pathname:"/"+e.pathname}}return t=o(window.location.href),function(r){var e=utils.isString(r)?o(r):r;return e.protocol===t.protocol&&e.host===t.host}}():function(){return!0};

},{"./../utils":27,"./isValidXss":23}],23:[function(require,module,exports){
"use strict";module.exports=function(t){return/(\b)(on\w+)=|javascript|(<\s*)(\/*)script/gi.test(t)};

},{}],24:[function(require,module,exports){
"use strict";var utils=require("../utils");module.exports=function(e,t){utils.forEach(e,function(r,s){s!==t&&s.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[s])})};

},{"../utils":27}],25:[function(require,module,exports){
"use strict";var utils=require("./../utils"),ignoreDuplicateOf=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];module.exports=function(t){var e,i,r,o={};return t?(utils.forEach(t.split("\n"),function(t){if(r=t.indexOf(":"),e=utils.trim(t.substr(0,r)).toLowerCase(),i=utils.trim(t.substr(r+1)),e){if(o[e]&&ignoreDuplicateOf.indexOf(e)>=0)return;o[e]="set-cookie"===e?(o[e]?o[e]:[]).concat([i]):o[e]?o[e]+", "+i:i}}),o):o};

},{"./../utils":27}],26:[function(require,module,exports){
"use strict";module.exports=function(n){return function(t){return n.apply(null,t)}};

},{}],27:[function(require,module,exports){
"use strict";var bind=require("./helpers/bind"),toString=Object.prototype.toString;function isArray(r){return"[object Array]"===toString.call(r)}function isUndefined(r){return void 0===r}function isBuffer(r){return null!==r&&!isUndefined(r)&&null!==r.constructor&&!isUndefined(r.constructor)&&"function"==typeof r.constructor.isBuffer&&r.constructor.isBuffer(r)}function isArrayBuffer(r){return"[object ArrayBuffer]"===toString.call(r)}function isFormData(r){return"undefined"!=typeof FormData&&r instanceof FormData}function isArrayBufferView(r){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(r):r&&r.buffer&&r.buffer instanceof ArrayBuffer}function isString(r){return"string"==typeof r}function isNumber(r){return"number"==typeof r}function isObject(r){return null!==r&&"object"==typeof r}function isDate(r){return"[object Date]"===toString.call(r)}function isFile(r){return"[object File]"===toString.call(r)}function isBlob(r){return"[object Blob]"===toString.call(r)}function isFunction(r){return"[object Function]"===toString.call(r)}function isStream(r){return isObject(r)&&isFunction(r.pipe)}function isURLSearchParams(r){return"undefined"!=typeof URLSearchParams&&r instanceof URLSearchParams}function trim(r){return r.replace(/^\s*/,"").replace(/\s*$/,"")}function isStandardBrowserEnv(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)}function forEach(r,e){if(null!=r)if("object"!=typeof r&&(r=[r]),isArray(r))for(var t=0,n=r.length;t<n;t++)e.call(null,r[t],t,r);else for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.call(null,r[i],i,r)}function merge(){var r={};function e(e,t){"object"==typeof r[t]&&"object"==typeof e?r[t]=merge(r[t],e):r[t]=e}for(var t=0,n=arguments.length;t<n;t++)forEach(arguments[t],e);return r}function deepMerge(){var r={};function e(e,t){"object"==typeof r[t]&&"object"==typeof e?r[t]=deepMerge(r[t],e):r[t]="object"==typeof e?deepMerge({},e):e}for(var t=0,n=arguments.length;t<n;t++)forEach(arguments[t],e);return r}function extend(r,e,t){return forEach(e,function(e,n){r[n]=t&&"function"==typeof e?bind(e,t):e}),r}module.exports={isArray:isArray,isArrayBuffer:isArrayBuffer,isBuffer:isBuffer,isFormData:isFormData,isArrayBufferView:isArrayBufferView,isString:isString,isNumber:isNumber,isObject:isObject,isUndefined:isUndefined,isDate:isDate,isFile:isFile,isBlob:isBlob,isFunction:isFunction,isStream:isStream,isURLSearchParams:isURLSearchParams,isStandardBrowserEnv:isStandardBrowserEnv,forEach:forEach,merge:merge,deepMerge:deepMerge,extend:extend,trim:trim};

},{"./helpers/bind":17}],28:[function(require,module,exports){

},{}],29:[function(require,module,exports){
"use strict";module.exports=function(r){return function r(t){if(null===t||"object"!=typeof t||null!=t.toJSON)return JSON.stringify(t);if(Array.isArray(t)&&0===t.length)return"[]";if(Array.isArray(t)&&1===t.length)return"["+r(t[0])+"]";if(Array.isArray(t))return"["+t.reduce((t,e,n)=>(t=1===n?r(t):t)+","+r(e))+"]";const e=Object.keys(t);if(0===e.length)return"{}";if(1===e.length)return"{"+r(e[0])+":"+r(t[e[0]])+"}";return"{"+e.sort().reduce((e,n,u)=>(e=1===u?r(e)+":"+r(t[e]):e)+","+r(n)+":"+r(t[n]))+"}"}(r)};

},{}],30:[function(require,module,exports){
"use strict";const{isArray:_isArray,isObject:_isObject,isString:_isString}=require("./types"),{prependBase:prependBase}=require("./url"),JsonLdError=require("./JsonLdError"),ResolvedContext=require("./ResolvedContext"),MAX_CONTEXT_URLS=10;function _throwInvalidLocalContext(e){throw new JsonLdError("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:e})}function _resolveContextUrls({context:e,base:t}){const o=e["@context"];if(_isString(o))e["@context"]=prependBase(t,o);else if(_isArray(o))for(let e=0;e<o.length;++e){const n=o[e];_isString(n)?o[e]=prependBase(t,n):_isObject(n)&&_resolveContextUrls({context:{"@context":n},base:t})}else if(_isObject(o))for(const e in o)_resolveContextUrls({context:o[e],base:t})}module.exports=class{constructor({sharedCache:e}){this.perOpCache=new Map,this.sharedCache=e}async resolve({context:e,documentLoader:t,base:o,cycles:n=new Set}){e&&_isObject(e)&&e["@context"]&&(e=e["@context"]),_isArray(e)||(e=[e]);const r=[];for(const s of e){if(_isString(s)){let e=this._get(s);e||(e=await this._resolveRemoteContext({url:s,documentLoader:t,base:o,cycles:n})),_isArray(e)?r.push(...e):r.push(e);continue}if(null===s){r.push(new ResolvedContext({document:null}));continue}_isObject(s)||_throwInvalidLocalContext(e);const c=JSON.stringify(s);let a=this._get(c);a||(a=new ResolvedContext({document:s}),this._cacheResolvedContext({key:c,resolved:a,tag:"static"})),r.push(a)}return r}_get(e){let t=this.perOpCache.get(e);if(!t){const o=this.sharedCache.get(e);o&&(t=o.get("static"))&&this.perOpCache.set(e,t)}return t}_cacheResolvedContext({key:e,resolved:t,tag:o}){if(this.perOpCache.set(e,t),void 0!==o){let n=this.sharedCache.get(e);n||(n=new Map,this.sharedCache.set(e,n)),n.set(o,t)}return t}async _resolveRemoteContext({url:e,documentLoader:t,base:o,cycles:n}){e=prependBase(o,e);const{context:r,remoteDoc:s}=await this._fetchContext({url:e,documentLoader:t,cycles:n});_resolveContextUrls({context:r,base:o=s.documentUrl||e});const c=await this.resolve({context:r,documentLoader:t,base:o,cycles:n});return this._cacheResolvedContext({key:e,resolved:c,tag:s.tag}),c}async _fetchContext({url:e,documentLoader:t,cycles:o}){if(o.size>10)throw new JsonLdError("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"loading remote context failed",max:10});if(o.has(e))throw new JsonLdError("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"recursive context inclusion",url:e});let n,r;o.add(e);try{n=(r=await t(e)).document||null,_isString(n)&&(n=JSON.parse(n))}catch(t){throw new JsonLdError("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:e,cause:t})}if(!_isObject(n))throw new JsonLdError("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:e});return n="@context"in n?{"@context":n["@context"]}:{"@context":{}},r.contextUrl&&(_isArray(n["@context"])||(n["@context"]=[n["@context"]]),n["@context"].push(r.contextUrl)),{context:n,remoteDoc:r}}};

},{"./JsonLdError":31,"./ResolvedContext":36,"./types":50,"./url":51}],31:[function(require,module,exports){
"use strict";module.exports=class extends Error{constructor(r="An unspecified JSON-LD error occurred.",s="jsonld.Error",e={}){super(r),this.name=s,this.message=r,this.details=e}};

},{}],32:[function(require,module,exports){
"use strict";module.exports=(e=>{class t{toString(){return"[object JsonLdProcessor]"}}return Object.defineProperty(t,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(t.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:t}),t.compact=function(t,r){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):e.compact(t,r)},t.expand=function(t){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):e.expand(t)},t.flatten=function(t){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):e.flatten(t)},t});

},{}],33:[function(require,module,exports){
"use strict";module.exports=require("rdf-canonize").NQuads;

},{"rdf-canonize":70}],34:[function(require,module,exports){
"use strict";const{RDF_LANGSTRING:RDF_LANGSTRING,RDF_PLAIN_LITERAL:RDF_PLAIN_LITERAL,RDF_OBJECT:RDF_OBJECT,RDF_XML_LITERAL:RDF_XML_LITERAL,XSD_STRING:XSD_STRING}=require("./constants");let _Node;function getXMLSerializerClass(){return"undefined"==typeof XMLSerializer?require("xmldom").XMLSerializer:XMLSerializer}_Node="undefined"!=typeof Node?Node:{ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12},module.exports=class{parse(e){const t={"@default":[]},N=e.getSubjects();for(let l=0;l<N.length;++l){const _=N[l];if(null===_)continue;const n=e.getSubjectTriples(_);if(null===n)continue;const E=n.predicates;for(const e in E){const N=E[e].objects;for(let l=0;l<N.length;++l){const n=N[l],E={};0===_.indexOf("_:")?E.subject={type:"blank node",value:_}:E.subject={type:"IRI",value:_},0===e.indexOf("_:")?E.predicate={type:"blank node",value:e}:E.predicate={type:"IRI",value:e};let a=n.value;if(n.type===RDF_XML_LITERAL){const e=new(getXMLSerializerClass());a="";for(let t=0;t<n.value.length;t++)n.value[t].nodeType===_Node.ELEMENT_NODE?a+=e.serializeToString(n.value[t]):n.value[t].nodeType===_Node.TEXT_NODE&&(a+=n.value[t].nodeValue)}E.object={},n.type===RDF_OBJECT?0===n.value.indexOf("_:")?E.object.type="blank node":E.object.type="IRI":(E.object.type="literal",n.type===RDF_PLAIN_LITERAL?n.language?(E.object.datatype=RDF_LANGSTRING,E.object.language=n.language):E.object.datatype=XSD_STRING:E.object.datatype=n.type),E.object.value=a,t["@default"].push(E)}}}return t}};

},{"./constants":38,"xmldom":28}],35:[function(require,module,exports){
"use strict";module.exports=class{constructor(){this._requests={}}wrapLoader(e){const t=this;return t._loader=e,function(){return t.add.apply(t,arguments)}}async add(e){let t=this._requests[e];if(t)return Promise.resolve(t);t=this._requests[e]=this._loader(e);try{return await t}finally{delete this._requests[e]}}};

},{}],36:[function(require,module,exports){
"use strict";const LRU=require("lru-cache"),MAX_ACTIVE_CONTEXTS=10;module.exports=class{constructor({document:e}){this.document=e,this.cache=new LRU({max:10})}getProcessed(e){return this.cache.get(e)}setProcessed(e,c){this.cache.set(e,c)}};

},{"lru-cache":53}],37:[function(require,module,exports){
"use strict";const JsonLdError=require("./JsonLdError"),{isArray:_isArray,isObject:_isObject,isString:_isString,isUndefined:_isUndefined}=require("./types"),{isList:_isList,isValue:_isValue,isGraph:_isGraph,isSimpleGraph:_isSimpleGraph,isSubjectReference:_isSubjectReference}=require("./graphTypes"),{expandIri:_expandIri,getContextValue:_getContextValue,isKeyword:_isKeyword,process:_processContext,processingMode:_processingMode}=require("./context"),{removeBase:_removeBase}=require("./url"),{addValue:_addValue,asArray:_asArray,compareShortestLeast:_compareShortestLeast}=require("./util"),api={};function _selectTerm(e,i,t,a,n,r){null===r&&(r="@null");const o=[];if(("@id"===r||"@reverse"===r)&&_isObject(t)&&"@id"in t){"@reverse"===r&&o.push("@reverse");const i=api.compactIri({activeCtx:e,iri:t["@id"],relativeTo:{vocab:!0}});e.mappings.has(i)&&e.mappings.get(i)&&e.mappings.get(i)["@id"]===t["@id"]?o.push.apply(o,["@vocab","@id"]):o.push.apply(o,["@id","@vocab"])}else o.push(r);o.push("@none");const s=e.inverse[i];for(let e=0;e<a.length;++e){const i=a[e];if(!(i in s))continue;const t=s[i][n];for(let e=0;e<o.length;++e){const i=o[e];if(i in t)return t[i]}}return null}function _checkNestProperty(e,i,t){if("@nest"!==_expandIri(e,i,{vocab:!0},t))throw new JsonLdError("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}module.exports=api,api.compact=(async({activeCtx:e,activeProperty:i=null,element:t,options:a={},compactionMap:n=(()=>void 0)})=>{if(_isArray(t)){let r=[];for(let o=0;o<t.length;++o){let s=await api.compact({activeCtx:e,activeProperty:i,element:t[o],options:a,compactionMap:n});null===s&&void 0===(s=await n({unmappedValue:t[o],activeCtx:e,activeProperty:i,parent:t,index:o,options:a}))||r.push(s)}if(a.compactArrays&&1===r.length){0===(_getContextValue(e,i,"@container")||[]).length&&(r=r[0])}return r}const r=_getContextValue(e,i,"@context");if(_isUndefined(r)||(e=await _processContext({activeCtx:e,localCtx:r,propagate:!0,overrideProtected:!0,options:a})),_isObject(t)){if(a.link&&"@id"in t&&a.link.hasOwnProperty(t["@id"])){const e=a.link[t["@id"]];for(let i=0;i<e.length;++i)if(e[i].expanded===t)return e[i].compacted}if(_isValue(t)||_isSubjectReference(t)){const n=api.compactValue({activeCtx:e,activeProperty:i,value:t,options:a});return a.link&&_isSubjectReference(t)&&(a.link.hasOwnProperty(t["@id"])||(a.link[t["@id"]]=[]),a.link[t["@id"]].push({expanded:t,compacted:n})),n}if(_isList(t)){if((_getContextValue(e,i,"@container")||[]).includes("@list"))return api.compact({activeCtx:e,activeProperty:i,element:t["@list"],options:a,compactionMap:n})}const r="@reverse"===i,o={},s=e;_isValue(t)||_isSubjectReference(t)||(e=e.revertToPreviousContext());const c=_getContextValue(s,i,"@context");_isUndefined(c)||(e=await _processContext({activeCtx:e,localCtx:c,propagate:!0,overrideProtected:!0,options:a})),a.link&&"@id"in t&&(a.link.hasOwnProperty(t["@id"])||(a.link[t["@id"]]=[]),a.link[t["@id"]].push({expanded:t,compacted:o}));let l=t["@type"]||[];l.length>1&&(l=Array.from(l).sort());const p=e;for(const i of l){const t=api.compactIri({activeCtx:p,iri:i,relativeTo:{vocab:!0}}),n=_getContextValue(s,t,"@context");_isUndefined(n)||(e=await _processContext({activeCtx:e,localCtx:n,options:a,propagate:!1}))}const u=Object.keys(t).sort();for(const c of u){const l=t[c];if("@id"!==c)if("@type"!==c)if("@reverse"!==c)if("@preserve"!==c)if("@index"!==c)if("@graph"!==c&&"@list"!==c&&_isKeyword(c)){const i=api.compactIri({activeCtx:e,iri:c,relativeTo:{vocab:!0}});_addValue(o,i,l)}else{if(!_isArray(l))throw new JsonLdError("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");if(0===l.length){const i=api.compactIri({activeCtx:e,iri:c,value:l,relativeTo:{vocab:!0},reverse:r}),t=e.mappings.has(i)?e.mappings.get(i)["@nest"]:null;let n=o;t&&(_checkNestProperty(e,t,a),_isObject(o[t])||(o[t]={}),n=o[t]),_addValue(n,i,l,{propertyIsArray:!0})}for(const i of l){const t=api.compactIri({activeCtx:e,iri:c,value:i,relativeTo:{vocab:!0},reverse:r}),s=e.mappings.has(t)?e.mappings.get(t)["@nest"]:null;let l=o;s&&(_checkNestProperty(e,s,a),_isObject(o[s])||(o[s]={}),l=o[s]);const p=_getContextValue(e,t,"@container")||[],u=_isGraph(i),d=_isList(i);let v;d?v=i["@list"]:u&&(v=i["@graph"]);let g=await api.compact({activeCtx:e,activeProperty:t,element:d||u?v:i,options:a,compactionMap:n});if(d){if(_isArray(g)||(g=[g]),p.includes("@list")){_addValue(l,t,g,{valueIsArray:!0,allowDuplicate:!0});continue}g={[api.compactIri({activeCtx:e,iri:"@list",relativeTo:{vocab:!0}})]:g},"@index"in i&&(g[api.compactIri({activeCtx:e,iri:"@index",relativeTo:{vocab:!0}})]=i["@index"])}if(u)if(p.includes("@graph")&&(p.includes("@id")||p.includes("@index")&&_isSimpleGraph(i))){let n;l.hasOwnProperty(t)?n=l[t]:l[t]=n={};const r=(p.includes("@id")?i["@id"]:i["@index"])||api.compactIri({activeCtx:e,iri:"@none",vocab:!0});_addValue(n,r,g,{propertyIsArray:!a.compactArrays||p.includes("@set")})}else p.includes("@graph")&&_isSimpleGraph(i)?(_isArray(g)&&g.length>1&&(g={"@included":g}),_addValue(l,t,g,{propertyIsArray:!a.compactArrays||p.includes("@set")})):(_isArray(g)&&1===g.length&&a.compactArrays&&(g=g[0]),g={[api.compactIri({activeCtx:e,iri:"@graph",relativeTo:{vocab:!0}})]:g},"@id"in i&&(g[api.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}})]=i["@id"]),"@index"in i&&(g[api.compactIri({activeCtx:e,iri:"@index",relativeTo:{vocab:!0}})]=i["@index"]),_addValue(l,t,g,{propertyIsArray:!a.compactArrays||p.includes("@set")}));else if(p.includes("@language")||p.includes("@index")||p.includes("@id")||p.includes("@type")){let r,o;if(l.hasOwnProperty(t)?r=l[t]:l[t]=r={},p.includes("@language"))_isValue(g)&&(g=g["@value"]),o=i["@language"];else if(p.includes("@index")){const a=_getContextValue(e,t,"@index")||"@index",n=api.compactIri({activeCtx:e,iri:a,vocab:!0});if("@index"===a)o=i["@index"],delete g[n];else{let e;if([o,...e]=_asArray(g[a]||[]),_isString(o))switch(e.length){case 0:delete g[a];break;case 1:g[a]=e[0];break;default:g[a]=e}else o=null}}else if(p.includes("@id")){const i=api.compactIri({activeCtx:e,iri:"@id",vocab:!0});o=g[i],delete g[i]}else if(p.includes("@type")){const r=api.compactIri({activeCtx:e,iri:"@type",vocab:!0});let s;switch([o,...s]=_asArray(g[r]||[]),s.length){case 0:delete g[r];break;case 1:g[r]=s[0];break;default:g[r]=s}1===Object.keys(g).length&&"@id"in i&&(g=await api.compact({activeCtx:e,activeProperty:t,element:{"@id":i["@id"]},options:a,compactionMap:n}))}o||(o=api.compactIri({activeCtx:e,iri:"@none",vocab:!0})),_addValue(r,o,g,{propertyIsArray:p.includes("@set")})}else{const e=!a.compactArrays||p.includes("@set")||p.includes("@list")||_isArray(g)&&0===g.length||"@list"===c||"@graph"===c;_addValue(l,t,g,{propertyIsArray:e})}}}else{if((_getContextValue(e,i,"@container")||[]).includes("@index"))continue;const t=api.compactIri({activeCtx:e,iri:c,relativeTo:{vocab:!0}});_addValue(o,t,l)}else{const t=await api.compact({activeCtx:e,activeProperty:i,element:l,options:a,compactionMap:n});_isArray(t)&&0===t.length||_addValue(o,c,t)}else{const i=await api.compact({activeCtx:e,activeProperty:"@reverse",element:l,options:a,compactionMap:n});for(const t in i)if(e.mappings.has(t)&&e.mappings.get(t).reverse){const n=i[t],r=(_getContextValue(e,t,"@container")||[]).includes("@set")||!a.compactArrays;_addValue(o,t,n,{propertyIsArray:r}),delete i[t]}if(Object.keys(i).length>0){const t=api.compactIri({activeCtx:e,iri:c,relativeTo:{vocab:!0}});_addValue(o,t,i)}}else{let i=_asArray(l).map(e=>api.compactIri({activeCtx:s,iri:e,relativeTo:{vocab:!0}}));1===i.length&&(i=i[0]);const t=api.compactIri({activeCtx:e,iri:"@type",relativeTo:{vocab:!0}}),a=(_getContextValue(e,t,"@container")||[]).includes("@set")&&_processingMode(e,1.1)||_isArray(i)&&0===l.length;_addValue(o,t,i,{propertyIsArray:a})}else{let i=_asArray(l).map(i=>api.compactIri({activeCtx:e,iri:i,relativeTo:{vocab:!1}}));1===i.length&&(i=i[0]),o[api.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}})]=i}}return o}return t}),api.compactIri=(({activeCtx:e,iri:i,value:t=null,relativeTo:a={vocab:!1},reverse:n=!1})=>{if(null===i)return i;e.isPropertyTermScoped&&e.previousContext&&(e=e.previousContext);const r=e.getInverse();if(_isKeyword(i)&&i in r&&"@none"in r[i]&&"@type"in r[i]["@none"]&&"@none"in r[i]["@none"]["@type"])return r[i]["@none"]["@type"]["@none"];if(a.vocab&&i in r){const a=e["@language"]||"@none",r=[];_isObject(t)&&"@index"in t&&!("@graph"in t)&&r.push("@index","@index@set"),_isObject(t)&&"@preserve"in t&&(t=t["@preserve"][0]),_isGraph(t)?("@index"in t&&r.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in t&&r.push("@graph@id","@graph@id@set"),r.push("@graph","@graph@set","@set"),"@index"in t||r.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in t||r.push("@graph@id","@graph@id@set")):_isObject(t)&&!_isValue(t)&&r.push("@id","@id@set","@type","@set@type");let o="@language",s="@null";if(n)o="@type",s="@reverse",r.push("@set");else if(_isList(t)){"@index"in t||r.push("@list");const e=t["@list"];if(0===e.length)o="@any",s="@none";else{let i=0===e.length?a:null,t=null;for(let a=0;a<e.length;++a){const n=e[a];let r="@none",o="@none";if(_isValue(n)?"@language"in n?r=n["@language"]:"@type"in n?o=n["@type"]:r="@null":o="@id",null===i?i=r:r!==i&&_isValue(n)&&(i="@none"),null===t?t=o:o!==t&&(t="@none"),"@none"===i&&"@none"===t)break}i=i||"@none","@none"!==(t=t||"@none")?(o="@type",s=t):s=i}}else _isValue(t)?"@language"in t&&!("@index"in t)?(r.push("@language","@language@set"),s=t["@language"]):"@type"in t&&(o="@type",s=t["@type"]):(o="@type",s="@id"),r.push("@set");r.push("@none"),!_isObject(t)||"@index"in t||r.push("@index","@index@set"),_isValue(t)&&1===Object.keys(t).length&&r.push("@language","@language@set");const c=_selectTerm(e,i,t,r,o,s);if(null!==c)return c}if(a.vocab&&"@vocab"in e){const t=e["@vocab"];if(0===i.indexOf(t)&&i!==t){const a=i.substr(t.length);if(!e.mappings.has(a))return a}}let o=null;const s=[];let c=e.fastCurieMap;const l=i.length-1;for(let e=0;e<l&&i[e]in c;++e)""in(c=c[i[e]])&&s.push(c[""][0]);for(let a=s.length-1;a>=0;--a){const n=s[a],r=n.terms;for(const a of r){const r=a+":"+i.substr(n.iri.length);e.mappings.get(a)._prefix&&(!e.mappings.has(r)||null===t&&e.mappings.get(r)["@id"]===i)&&(null===o||_compareShortestLeast(r,o)<0)&&(o=r)}}if(null!==o)return o;for(const[t,a]of e.mappings)if(a&&a._prefix&&i.startsWith(t+":"))throw new JsonLdError(`Absolute IRI "${i}" confused with prefix "${t}".`,"jsonld.SyntaxError",{code:"IRI confused with prefix",context:e});return a.vocab?i:_removeBase(e["@base"],i)}),api.compactValue=(({activeCtx:e,activeProperty:i,value:t,options:a})=>{if(_isValue(t)){const a=_getContextValue(e,i,"@type"),n=_getContextValue(e,i,"@language"),r=_getContextValue(e,i,"@container")||[],o="@index"in t&&!r.includes("@index");if(!o&&(t["@type"]===a||t["@language"]===n))return t["@value"];const s=Object.keys(t).length,c=1===s||2===s&&"@index"in t&&!o,l="@language"in e,p=_isString(t["@value"]),u=e.mappings.has(i)&&null===e.mappings.get(i)["@language"];if(c&&(!l||!p||u))return t["@value"];const d={};return o&&(d[api.compactIri({activeCtx:e,iri:"@index",relativeTo:{vocab:!0}})]=t["@index"]),"@type"in t?d[api.compactIri({activeCtx:e,iri:"@type",relativeTo:{vocab:!0}})]=api.compactIri({activeCtx:e,iri:t["@type"],relativeTo:{vocab:!0}}):"@language"in t&&(d[api.compactIri({activeCtx:e,iri:"@language",relativeTo:{vocab:!0}})]=t["@language"]),d[api.compactIri({activeCtx:e,iri:"@value",relativeTo:{vocab:!0}})]=t["@value"],d}const n=_expandIri(e,i,{vocab:!0},a),r=_getContextValue(e,i,"@type"),o=api.compactIri({activeCtx:e,iri:t["@id"],relativeTo:{vocab:"@vocab"===r}});return"@id"===r||"@vocab"===r||"@graph"===n?o:{[api.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}})]:o}}),api.removePreserve=((e,i,t)=>{if(_isArray(i)){const a=[];for(let n=0;n<i.length;++n){const r=api.removePreserve(e,i[n],t);null!==r&&a.push(r)}i=a}else if(_isObject(i)){if("@preserve"in i)return"@null"===i["@preserve"]?null:i["@preserve"];if(_isValue(i))return i;if(_isList(i))return i["@list"]=api.removePreserve(e,i["@list"],t),i;const a=api.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}});if(i.hasOwnProperty(a)){const e=i[a];if(t.link.hasOwnProperty(e)){const a=t.link[e].indexOf(i);if(-1!==a)return t.link[e][a];t.link[e].push(i)}else t.link[e]=[i]}const n=api.compactIri({activeCtx:e,iri:"@graph",relativeTo:{vocab:!0}});for(const r in i){if(r===a&&t.bnodesToClear.includes(i[r])){delete i[a];continue}let o=api.removePreserve(e,i[r],t);const s=_getContextValue(e,r,"@container")||[];t.compactArrays&&_isArray(o)&&1===o.length&&0===s.length&&r!==n&&(o=o[0]),i[r]=o}}return i});

},{"./JsonLdError":31,"./context":39,"./graphTypes":46,"./types":50,"./url":51,"./util":52}],38:[function(require,module,exports){
"use strict";const RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",XSD="http://www.w3.org/2001/XMLSchema#";module.exports={LINK_HEADER_REL:"http://www.w3.org/ns/json-ld#context",RDF:RDF,RDF_LIST:RDF+"List",RDF_FIRST:RDF+"first",RDF_REST:RDF+"rest",RDF_NIL:RDF+"nil",RDF_TYPE:RDF+"type",RDF_PLAIN_LITERAL:RDF+"PlainLiteral",RDF_XML_LITERAL:RDF+"XMLLiteral",RDF_JSON_LITERAL:RDF+"JSON",RDF_OBJECT:RDF+"object",RDF_LANGSTRING:RDF+"langString",XSD:XSD,XSD_BOOLEAN:XSD+"boolean",XSD_DOUBLE:XSD+"double",XSD_INTEGER:XSD+"integer",XSD_STRING:XSD+"string"};

},{}],39:[function(require,module,exports){
"use strict";const util=require("./util"),JsonLdError=require("./JsonLdError"),{isArray:_isArray,isObject:_isObject,isString:_isString,isUndefined:_isUndefined}=require("./types"),{isAbsolute:_isAbsoluteIri,isRelative:_isRelativeIri,prependBase:prependBase,parse:parseUrl}=require("./url"),{asArray:_asArray,compareShortestLeast:_compareShortestLeast}=require("./util"),INITIAL_CONTEXT_CACHE=new Map,INITIAL_CONTEXT_CACHE_MAX_SIZE=1e4,api={};function _expandIri(e,n,t,o,r,i){if(null===n||!_isString(n)||api.isKeyword(n))return n;if(o&&o.hasOwnProperty(n)&&!0!==r.get(n)&&api.createTermDefinition({activeCtx:e,localCtx:o,term:n,defined:r,options:i}),(t=t||{}).vocab){const t=e.mappings.get(n);if(null===t)return null;if(t)return t["@id"]}const s=n.indexOf(":");if(s>0){const t=n.substr(0,s),a=n.substr(s+1);if("_"===t||0===a.indexOf("//"))return n;o&&o.hasOwnProperty(t)&&api.createTermDefinition({activeCtx:e,localCtx:o,term:t,defined:r,options:i});const d=e.mappings.get(t);if(d&&d._prefix)return d["@id"]+a;if(_isAbsoluteIri(n))return n}return t.vocab&&"@vocab"in e?e["@vocab"]+n:t.base?prependBase(e["@base"],n):n}function _deepCompare(e,n){if(!e||"object"!=typeof e||!n||"object"!=typeof n)return e===n;const t=Array.isArray(e);if(t!==Array.isArray(n))return!1;if(t){if(e.length!==n.length)return!1;for(let t=0;t<e.length;++t)if(!_deepCompare(e[t],n[t]))return!1;return!0}const o=Object.keys(e),r=Object.keys(n);if(o.length!==r.length)return!1;for(const t in e){let o=e[t],r=n[t];if("@container"===t&&Array.isArray(o)&&Array.isArray(r)&&(o=o.slice().sort(),r=r.slice().sort()),!_deepCompare(o,r))return!1}return!0}module.exports=api,api.process=(async({activeCtx:e,localCtx:n,options:t,propagate:o=!0,overrideProtected:r=!1})=>{if(_isObject(n)&&"@context"in n&&_isArray(n["@context"])&&(n=n["@context"]),0===_asArray(n).length)return e;const i=await t.contextResolver.resolve({context:n,documentLoader:t.documentLoader,base:t.base});_isObject(i[0].document)&&"boolean"==typeof i[0].document["@propagate"]&&(o=i[0].document["@propagate"]);let s=e;o||s.previousContext||((s=s.clone()).previousContext=e);for(const o of i){let{document:i}=o;if(e=s,null===i){if(!r&&0!==Object.keys(e.protected).length){const r=t&&t.protectedMode||"error";if("error"===r)throw new JsonLdError("Tried to nullify a context with protected terms outside of a term definition.","jsonld.SyntaxError",{code:"invalid context nullification"});if("warn"===r){console.warn("WARNING: invalid context nullification");const n=e;s=e=api.getInitialContext(t).clone();for(const[t,o]of Object.entries(n.protected))o&&(e.mappings[t]=util.clone(n.mappings[t]));e.protected=util.clone(n.protected),o.setProcessed(n,s);continue}throw new JsonLdError("Invalid protectedMode.","jsonld.SyntaxError",{code:"invalid protected mode",context:n,protectedMode:r})}s=e=api.getInitialContext(t).clone();continue}const a=o.getProcessed(e);if(a){s=e=a;continue}if(_isObject(i)&&"@context"in i&&(i=i["@context"]),!_isObject(i))throw new JsonLdError("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:i});s=s.clone();const d=new Map;if("@version"in i){if(1.1!==i["@version"])throw new JsonLdError("Unsupported JSON-LD version: "+i["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:i});if(e.processingMode&&"json-ld-1.0"===e.processingMode)throw new JsonLdError("@version: "+i["@version"]+" not compatible with "+e.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:i});s.processingMode="json-ld-1.1",s["@version"]=i["@version"],d.set("@version",!0)}if(s.processingMode=s.processingMode||e.processingMode,"@base"in i){let e=i["@base"];if(null===e);else if(_isAbsoluteIri(e))e=parseUrl(e);else{if(!_isRelativeIri(e))throw new JsonLdError('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:i});e=parseUrl(prependBase(s["@base"].href,e))}s["@base"]=e,d.set("@base",!0)}if("@vocab"in i){const e=i["@vocab"];if(null===e)delete s["@vocab"];else{if(!_isString(e))throw new JsonLdError('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:i});if(!_isAbsoluteIri(e)&&api.processingMode(s,1))throw new JsonLdError('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:i});s["@vocab"]=_expandIri(s,e,{vocab:!0,base:!0},void 0,void 0,t)}d.set("@vocab",!0)}if("@language"in i){const e=i["@language"];if(null===e)delete s["@language"];else{if(!_isString(e))throw new JsonLdError('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:i});s["@language"]=e.toLowerCase()}d.set("@language",!0)}if("@propagate"in i){const t=i["@propagate"];if("json-ld-1.0"===e.processingMode)throw new JsonLdError("Invalid JSON-LD syntax; @propagate not compatible with "+e.processingMode,"jsonld.SyntaxError",{code:"invalid context member",context:i});if("boolean"!=typeof t)throw new JsonLdError("Invalid JSON-LD syntax; @propagate value must be a boolean.","jsonld.SyntaxError",{code:"invalid @propagate value",context:n});d.set("@propagate",!0)}d.set("@protected",i["@protected"]||!1);for(const e in i)api.createTermDefinition({activeCtx:s,localCtx:i,term:e,defined:d,options:t,overrideProtected:r});o.setProcessed(e,s)}return s}),api.createTermDefinition=(({activeCtx:e,localCtx:n,term:t,defined:o,options:r,overrideProtected:i=!1})=>{if(o.has(t)){if(o.get(t))return;throw new JsonLdError("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:n,term:t})}let s;if(o.set(t,!1),n.hasOwnProperty(t)&&(s=n[t]),"@type"===t&&_isObject(s)&&"@set"===s["@container"]&&api.processingMode(e,1.1)){const e=["@container","@id","@protected"];if(Object.keys(s).some(n=>!e.includes(n)))throw new JsonLdError("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:n,term:t})}else{if(api.isKeyword(t))throw new JsonLdError("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:n,term:t});if(""===t)throw new JsonLdError("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:n})}const a=e.mappings.get(t);if(e.mappings.has(t)&&e.mappings.delete(t),null===s||_isObject(s)&&null===s["@id"])return e.mappings.set(t,null),void o.set(t,!0);let d=!1;if(_isString(s)&&(d=!0,s={"@id":s}),!_isObject(s))throw new JsonLdError("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:n});const c={};e.mappings.set(t,c),c.reverse=!1;const l=["@container","@id","@language","@reverse","@type"];api.processingMode(e,1.1)&&l.push("@context","@index","@nest","@prefix","@protected");for(const e in s)if(!l.includes(e))throw new JsonLdError("Invalid JSON-LD syntax; a term definition must not contain "+e,"jsonld.SyntaxError",{code:"invalid term definition",context:n});const p=t.indexOf(":");if(c._termHasColon=p>0,"@reverse"in s){if("@id"in s)throw new JsonLdError("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:n});if("@nest"in s)throw new JsonLdError("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:n});const t=s["@reverse"];if(!_isString(t))throw new JsonLdError("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:n});const i=_expandIri(e,t,{vocab:!0,base:!1},n,o,r);if(!_isAbsoluteIri(i))throw new JsonLdError("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:n});c["@id"]=i,c.reverse=!0}else if("@id"in s){let i=s["@id"];if(!_isString(i))throw new JsonLdError("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:n});if(i!==t){if(i=_expandIri(e,i,{vocab:!0,base:!1},n,o,r),!_isAbsoluteIri(i)&&!api.isKeyword(i))throw new JsonLdError("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:n});c["@id"]=i,c._prefix=d&&!c._termHasColon&&i.match(/[:\/\?#\[\]@]$/)}}if(!("@id"in c))if(c._termHasColon){const i=t.substr(0,p);if(n.hasOwnProperty(i)&&api.createTermDefinition({activeCtx:e,localCtx:n,term:i,defined:o,options:r}),e.mappings.has(i)){const n=t.substr(p+1);c["@id"]=e.mappings.get(i)["@id"]+n}else c["@id"]=t}else if("@type"==t)c["@id"]=t;else{if(!("@vocab"in e))throw new JsonLdError("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:n,term:t});c["@id"]=e["@vocab"]+t}if((!0===s["@protected"]||!0===o.get("@protected")&&!1!==s["@protected"])&&(e.protected[t]=!0,c.protected=!0),o.set(t,!0),"@type"in s){let t=s["@type"];if(!_isString(t))throw new JsonLdError("Invalid JSON-LD syntax; an @context @type value must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:n});if("@id"!==t&&"@vocab"!==t&&"@json"!==t){if(t=_expandIri(e,t,{vocab:!0,base:!1},n,o,r),!_isAbsoluteIri(t))throw new JsonLdError("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:n});if(0===t.indexOf("_:"))throw new JsonLdError("Invalid JSON-LD syntax; an @context @type value must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:n})}c["@type"]=t}if("@container"in s){const t=_isString(s["@container"])?[s["@container"]]:s["@container"]||[],o=["@list","@set","@index","@language"];let r=!0;const i=t.includes("@set");if(api.processingMode(e,1.1)){if(o.push("@graph","@id","@type"),t.includes("@list")){if(1!==t.length)throw new JsonLdError("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:n})}else if(t.includes("@graph")){if(t.some(e=>"@graph"!==e&&"@id"!==e&&"@index"!==e&&"@set"!==e))throw new JsonLdError("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:n})}else r&=t.length<=(i?2:1);if(t.includes("@type")&&(c["@type"]=c["@type"]||"@id",!["@id","@vocab"].includes(c["@type"])))throw new JsonLdError("Invalid JSON-LD syntax; container: @type requires @type to be @id or @vocab.","jsonld.SyntaxError",{code:"invalid type mapping",context:n})}else r&=!_isArray(s["@container"]),r&=t.length<=1;if(r&=t.every(e=>o.includes(e)),!(r&=!(i&&t.includes("@list"))))throw new JsonLdError("Invalid JSON-LD syntax; @context @container value must be one of the following: "+o.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:n});if(c.reverse&&!t.every(e=>["@index","@set"].includes(e)))throw new JsonLdError("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:n});c["@container"]=t}if("@index"in s){if(!("@container"in s&&c["@container"].includes("@index")))throw new JsonLdError("Invalid JSON-LD syntax; @index without @index in @container: "+`"${s["@index"]}" on term "${t}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:n});if(!_isString(s["@index"])||0===s["@index"].indexOf("@"))throw new JsonLdError("Invalid JSON-LD syntax; @index must expand to an IRI: "+`"${s["@index"]}" on term "${t}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:n});c["@index"]=s["@index"]}if("@context"in s&&(c["@context"]=s["@context"]),"@language"in s&&!("@type"in s)){let e=s["@language"];if(null!==e&&!_isString(e))throw new JsonLdError("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:n});null!==e&&(e=e.toLowerCase()),c["@language"]=e}if("@prefix"in s){if(c._termHasColon)throw new JsonLdError("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:n});if("boolean"!=typeof s["@prefix"])throw new JsonLdError("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:n});c._prefix=!0===s["@prefix"]}if("@nest"in s){const e=s["@nest"];if(!_isString(e)||"@nest"!==e&&0===e.indexOf("@"))throw new JsonLdError("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:n});c["@nest"]=e}const x=c["@id"];if("@context"===x||"@preserve"===x)throw new JsonLdError("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:n});if(a&&a.protected&&!i&&(e.protected[t]=!0,c.protected=!0,!_deepCompare(a,c))){const e=r&&r.protectedMode||"error";if("error"===e)throw new JsonLdError("Invalid JSON-LD syntax; tried to redefine a protected term.","jsonld.SyntaxError",{code:"protected term redefinition",context:n,term:t});if("warn"===e)return void console.warn("WARNING: protected term redefinition",{term:t});throw new JsonLdError("Invalid protectedMode.","jsonld.SyntaxError",{code:"invalid protected mode",context:n,term:t,protectedMode:e})}}),api.expandIri=((e,n,t,o)=>_expandIri(e,n,t,void 0,void 0,o)),api.getInitialContext=(e=>{const n=parseUrl(e.base||""),t=JSON.stringify({base:n,processingMode:e.processingMode}),o=INITIAL_CONTEXT_CACHE.get(t);if(o)return o;const r={"@base":n,processingMode:e.processingMode,mappings:new Map,inverse:null,getInverse:function(){const e=this;if(e.inverse)return e.inverse;const n=e.inverse={},t=e.fastCurieMap={},o={},r=e["@language"]||"@none",a=e.mappings,d=[...a.keys()].sort(_compareShortestLeast);for(const e of d){const i=a.get(e);if(null===i)continue;let d=i["@container"]||"@none";d=[].concat(d).sort().join("");const c=_asArray(i["@id"]);for(const a of c){let c=n[a];const l=api.isKeyword(a);if(c)l||i._termHasColon||o[a].push(e);else if(n[a]=c={},!l&&!i._termHasColon){o[a]=[e];const n={iri:a,terms:o[a]};a[0]in t?t[a[0]].push(n):t[a[0]]=[n]}if(c[d]||(c[d]={"@language":{},"@type":{},"@any":{}}),c=c[d],s(e,c["@any"],"@none"),i.reverse)s(e,c["@type"],"@reverse");else if("@type"in i)s(e,c["@type"],i["@type"]);else if("@language"in i){const n=i["@language"]||"@null";s(e,c["@language"],n)}else s(e,c["@language"],r),s(e,c["@type"],"@none"),s(e,c["@language"],"@none")}}for(const e in t)i(t,e,1);return n},clone:function(){const e={};e["@base"]=this["@base"],e.mappings=util.clone(this.mappings),e.clone=this.clone,e.inverse=null,e.getInverse=this.getInverse,e.protected=util.clone(this.protected),this.previousContext&&(e.previousContext=this.previousContext.clone());e.revertToPreviousContext=this.revertToPreviousContext,"@language"in this&&(e["@language"]=this["@language"]);"@vocab"in this&&(e["@vocab"]=this["@vocab"]);return e},revertToPreviousContext:function(){if(!this.previousContext)return this;return this.previousContext.clone()},protected:{}};return 1e4===INITIAL_CONTEXT_CACHE.size&&INITIAL_CONTEXT_CACHE.clear(),INITIAL_CONTEXT_CACHE.set(t,r),r;function i(e,n,t){const o=e[n],r=e[n]={};let s,a;for(const e of o)(a=t>=(s=e.iri).length?"":s[t])in r?r[a].push(e):r[a]=[e];for(const e in r)""!==e&&i(r,e,t+1)}function s(e,n,t){n.hasOwnProperty(t)||(n[t]=e)}}),api.getContextValue=((e,n,t)=>{if(null===n){if("@context"===t)return;return null}if(e.mappings.has(n)){const o=e.mappings.get(n);if(_isUndefined(t))return o;if(o.hasOwnProperty(t))return o[t]}return"@language"===t&&e.hasOwnProperty(t)?e[t]:"@context"!==t?null:void 0}),api.processingMode=((e,n)=>n.toString()>="1.1"?!e.processingMode||e.processingMode>="json-ld-"+n.toString():"json-ld-1.0"===e.processingMode),api.isKeyword=(e=>{if(!_isString(e))return!1;switch(e){case"@base":case"@container":case"@context":case"@default":case"@embed":case"@explicit":case"@graph":case"@id":case"@index":case"@json":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@protected":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1});

},{"./JsonLdError":31,"./types":50,"./url":51,"./util":52}],40:[function(require,module,exports){
"use strict";const{parseLinkHeader:parseLinkHeader,buildHeaders:buildHeaders}=require("../util"),{LINK_HEADER_REL:LINK_HEADER_REL}=require("../constants"),JsonLdError=require("../JsonLdError"),RequestQueue=require("../RequestQueue");function _request(e,r){return new Promise((t,d)=>{e(r,(e,r,o)=>{e?d(e):t({res:r,body:o})})})}module.exports=(({secure:e,strictSSL:r=!0,maxRedirects:t=-1,request:d,headers:o={}}={strictSSL:!0,maxRedirects:-1,headers:{}})=>{o=buildHeaders(o),d=d||require("request");const n=require("http");return(new RequestQueue).wrapLoader(function(s){return async function s(i,u){if(0!==i.indexOf("http:")&&0!==i.indexOf("https:"))throw new JsonLdError('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:i});if(e&&0!==i.indexOf("https"))throw new JsonLdError('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:i});let a=null;if(null!==a)return a;let c;try{c=await _request(d,{url:i,headers:o,strictSSL:r,followRedirect:!1})}catch(e){throw new JsonLdError("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:i,cause:e})}const{res:l,body:h}=c;a={contextUrl:null,documentUrl:i,document:h||null};const L=n.STATUS_CODES[l.statusCode];if(l.statusCode>=400)throw new JsonLdError(`URL "${i}" could not be dereferenced: ${L}`,"jsonld.InvalidUrl",{code:"loading document failed",url:i,httpStatusCode:l.statusCode});if(l.headers.link&&"application/ld+json"!==l.headers["content-type"]){const e=parseLinkHeader(l.headers.link)[LINK_HEADER_REL];if(Array.isArray(e))throw new JsonLdError("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:i});e&&(a.contextUrl=e.target)}if(l.statusCode>=300&&l.statusCode<400&&l.headers.location){if(u.length===t)throw new JsonLdError("URL could not be dereferenced; there were too many redirects.","jsonld.TooManyRedirects",{code:"loading document failed",url:i,httpStatusCode:l.statusCode,redirects:u});if(-1!==u.indexOf(i))throw new JsonLdError("URL could not be dereferenced; infinite redirection was detected.","jsonld.InfiniteRedirectDetected",{code:"recursive context inclusion",url:i,httpStatusCode:l.statusCode,redirects:u});return u.push(i),s(l.headers.location,u)}u.push(i);return a}(s,[])})});

},{"../JsonLdError":31,"../RequestQueue":35,"../constants":38,"../util":52,"http":28,"request":28}],41:[function(require,module,exports){
"use strict";const{parseLinkHeader:parseLinkHeader,buildHeaders:buildHeaders}=require("../util"),{LINK_HEADER_REL:LINK_HEADER_REL}=require("../constants"),JsonLdError=require("../JsonLdError"),RequestQueue=require("../RequestQueue"),REGEX_LINK_HEADER=/(^|(\r\n))link:/i;function _get(e,r,n){const t=new(e=e||XMLHttpRequest);return new Promise((e,o)=>{t.onload=(()=>e(t)),t.onerror=(e=>o(e)),t.open("GET",r,!0);for(const e in n)t.setRequestHeader(e,n[e]);t.send()})}module.exports=(({secure:e,headers:r={},xhr:n}={headers:{}})=>{return r=buildHeaders(r),(new RequestQueue).wrapLoader(async function(t){if(0!==t.indexOf("http:")&&0!==t.indexOf("https:"))throw new JsonLdError('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:t});if(e&&0!==t.indexOf("https"))throw new JsonLdError('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:t});let o;try{o=await _get(n,t,r)}catch(e){throw new JsonLdError("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:t,cause:e})}if(o.status>=400)throw new JsonLdError("URL could not be dereferenced: "+o.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:t,httpStatusCode:o.status});const d={contextUrl:null,documentUrl:t,document:o.response},s=o.getResponseHeader("Content-Type");let a;REGEX_LINK_HEADER.test(o.getAllResponseHeaders())&&(a=o.getResponseHeader("Link"));if(a&&"application/ld+json"!==s){if(a=parseLinkHeader(a)[LINK_HEADER_REL],Array.isArray(a))throw new JsonLdError("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:t});a&&(d.contextUrl=a.target)}return d})});

},{"../JsonLdError":31,"../RequestQueue":35,"../constants":38,"../util":52}],42:[function(require,module,exports){
"use strict";const JsonLdError=require("./JsonLdError"),{isArray:_isArray,isObject:_isObject,isEmptyObject:_isEmptyObject,isString:_isString,isUndefined:_isUndefined}=require("./types"),{isList:_isList,isValue:_isValue,isGraph:_isGraph}=require("./graphTypes"),{expandIri:_expandIri,getContextValue:_getContextValue,isKeyword:_isKeyword,process:_processContext,processingMode:_processingMode}=require("./context"),{isAbsolute:_isAbsoluteIri}=require("./url"),{addValue:_addValue,asArray:_asArray,getValues:_getValues,validateTypeValue:_validateTypeValue}=require("./util"),api={};async function _expandObject({activeCtx:e,activeProperty:t,expandedActiveProperty:n,element:a,expandedParent:i,options:r={},insideList:o,typeScopedContext:s,expansionMap:l}){const d=Object.keys(a).sort(),p=[];let c;for(const u of d){let d,v=a[u];if("@context"===u)continue;let y=_expandIri(e,u,{vocab:!0},r);if((null===y||!_isAbsoluteIri(y)&&!_isKeyword(y))&&void 0===(y=l({unmappedProperty:u,activeCtx:e,activeProperty:t,parent:a,options:r,insideList:o,value:v,expandedParent:i})))continue;if(_isKeyword(y)){if("@reverse"===n)throw new JsonLdError("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:v});if(y in i)throw new JsonLdError("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:y})}if("@id"===y){if(!_isString(v)){if(!r.isFrame)throw new JsonLdError('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:v});if(_isObject(v)){if(!_isEmptyObject(v))throw new JsonLdError('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:v})}else{if(!_isArray(v))throw new JsonLdError('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:v});if(!v.every(e=>_isString(e)))throw new JsonLdError('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:v})}}_addValue(i,"@id",_asArray(v).map(t=>_isString(t)?_expandIri(e,t,{base:!0},r):t),{propertyIsArray:r.isFrame});continue}if("@type"===y){_validateTypeValue(v),_addValue(i,"@type",_asArray(v).map(e=>_isString(e)?_expandIri(s,e,{base:!0,vocab:!0},r):e),{propertyIsArray:r.isFrame});continue}if("@graph"===y&&!_isObject(v)&&!_isArray(v))throw new JsonLdError('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:v});if("@value"===y){c=v,_addValue(i,"@value",v,{propertyIsArray:r.isFrame});continue}if("@language"===y){if(null===v)continue;if(!_isString(v)&&!r.isFrame)throw new JsonLdError('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:v});v=_asArray(v).map(e=>_isString(e)?e.toLowerCase():e),_addValue(i,"@language",v,{propertyIsArray:r.isFrame});continue}if("@index"===y){if(!_isString(v))throw new JsonLdError('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:v});_addValue(i,"@index",v);continue}if("@reverse"===y){if(!_isObject(v))throw new JsonLdError('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:v});if("@reverse"in(d=await api.expand({activeCtx:e,activeProperty:"@reverse",element:v,options:r,expansionMap:l})))for(const e in d["@reverse"])_addValue(i,e,d["@reverse"][e],{propertyIsArray:!0});let t=i["@reverse"]||null;for(const e in d){if("@reverse"===e)continue;null===t&&(t=i["@reverse"]={}),_addValue(t,e,[],{propertyIsArray:!0});const n=d[e];for(let a=0;a<n.length;++a){const i=n[a];if(_isValue(i)||_isList(i))throw new JsonLdError('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:d});_addValue(t,e,i,{propertyIsArray:!0})}}continue}if("@nest"===y){p.push(u);continue}let x=e;const _=_getContextValue(e,u,"@context");_isUndefined(_)||(x=await _processContext({activeCtx:e,localCtx:_,propagate:!0,overrideProtected:!0,options:r}));const g=_getContextValue(x,u,"@container")||[];if(g.includes("@language")&&_isObject(v))d=_expandLanguageMap(x,v,r);else if(g.includes("@index")&&_isObject(v)){const t=g.includes("@graph"),n=_getContextValue(x,u,"@index")||"@index",a="@index"!==n&&_expandIri(e,n,{vocab:!0},r);d=await _expandIndexMap({activeCtx:x,options:r,activeProperty:u,value:v,expansionMap:l,asGraph:t,indexKey:n,propertyIndex:a})}else if(g.includes("@id")&&_isObject(v)){const e=g.includes("@graph");d=await _expandIndexMap({activeCtx:x,options:r,activeProperty:u,value:v,expansionMap:l,asGraph:e,indexKey:"@id"})}else if(g.includes("@type")&&_isObject(v))d=await _expandIndexMap({activeCtx:x.revertToPreviousContext(),options:r,activeProperty:u,value:v,expansionMap:l,asGraph:!1,indexKey:"@type"});else{const a="@list"===y;if(a||"@set"===y){let e=t;a&&"@graph"===n&&(e=null),d=await api.expand({activeCtx:x,activeProperty:e,element:v,options:r,insideList:a,expansionMap:l})}else d="@json"===_getContextValue(e,u,"@type")?{"@type":"@json","@value":v}:await api.expand({activeCtx:x,activeProperty:u,element:v,options:r,insideList:!1,expansionMap:l})}if(null!==d||"@value"===y||void 0!==(d=l({unmappedValue:v,expandedProperty:y,activeCtx:x,activeProperty:t,parent:a,options:r,insideList:o,key:u,expandedParent:i})))if("@list"!==y&&!_isList(d)&&g.includes("@list")&&(d={"@list":_asArray(d)}),g.includes("@graph")&&!g.some(e=>"@id"===e||"@index"===e)&&(d=_asArray(d).map(e=>({"@graph":_asArray(e)}))),x.mappings.has(u)&&x.mappings.get(u).reverse){const e=i["@reverse"]=i["@reverse"]||{};d=_asArray(d);for(let t=0;t<d.length;++t){const n=d[t];if(_isValue(n)||_isList(n))throw new JsonLdError('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:d});_addValue(e,y,n,{propertyIsArray:!0})}}else _addValue(i,y,d,{propertyIsArray:!0})}if("@value"in i)if("@json"===i["@type"]&&_processingMode(e,1.1));else if((_isObject(c)||_isArray(c))&&!r.isFrame)throw new JsonLdError('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:c});for(const s of p){const d=_isArray(a[s])?a[s]:[a[s]];for(const a of d){if(!_isObject(a)||Object.keys(a).some(t=>"@value"===_expandIri(e,t,{vocab:!0},r)))throw new JsonLdError("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:a});await _expandObject({activeCtx:e,activeProperty:t,expandedActiveProperty:n,element:a,expandedParent:i,options:r,insideList:o,expansionMap:l})}}}function _expandValue({activeCtx:e,activeProperty:t,value:n,options:a}){if(null==n)return null;const i=_expandIri(e,t,{vocab:!0},a);if("@id"===i)return _expandIri(e,n,{base:!0},a);if("@type"===i)return _expandIri(e,n,{vocab:!0,base:!0},a);const r=_getContextValue(e,t,"@type");if(("@id"===r||"@graph"===i)&&_isString(n))return{"@id":_expandIri(e,n,{base:!0},a)};if("@vocab"===r&&_isString(n))return{"@id":_expandIri(e,n,{vocab:!0,base:!0},a)};if(_isKeyword(i))return n;const o={};if(r&&!["@id","@vocab"].includes(r))o["@type"]=r;else if(_isString(n)){const n=_getContextValue(e,t,"@language");null!==n&&(o["@language"]=n)}return["boolean","number","string"].includes(typeof n)||(n=n.toString()),o["@value"]=n,o}function _expandLanguageMap(e,t,n){const a=[],i=Object.keys(t).sort();for(const r of i){const i=_expandIri(e,r,{vocab:!0},n);let o=t[r];_isArray(o)||(o=[o]);for(const e of o){if(null===e)continue;if(!_isString(e))throw new JsonLdError("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:t});const n={"@value":e};"@none"!==i&&(n["@language"]=r.toLowerCase()),a.push(n)}}return a}async function _expandIndexMap({activeCtx:e,options:t,activeProperty:n,value:a,expansionMap:i,asGraph:r,indexKey:o,propertyIndex:s}){const l=[],d=Object.keys(a).sort(),p="@type"===o;for(let c of d){if(p){const n=_getContextValue(e,c,"@context");_isUndefined(n)||(e=await _processContext({activeCtx:e,localCtx:n,propagate:!1,options:t}))}let d,u=a[c];_isArray(u)||(u=[u]),u=await api.expand({activeCtx:e,activeProperty:n,element:u,options:t,insideList:!1,insideIndex:!0,expansionMap:i}),d=s?"@none"===c?"@none":_expandValue({activeCtx:e,activeProperty:o,value:c,options:t}):_expandIri(e,c,{vocab:!0},t),"@id"===o?c=_expandIri(e,c,{base:!0},t):p&&(c=d);for(let e of u){if(r&&!_isGraph(e)&&(e={"@graph":[e]}),"@type"===o)"@none"===d||(e["@type"]?e["@type"]=[c].concat(e["@type"]):e["@type"]=[c]);else{if(_isValue(e)&&!["@language","@type","@index"].includes(o))throw new JsonLdError("Invalid JSON-LD syntax; Attempt to add illegal key to value "+`object: "${o}".`,"jsonld.SyntaxError",{code:"invalid value object",value:e});s?"@none"!==d&&_addValue(e,s,d,{propertyIsArray:!0,prependValue:!0}):"@none"===d||o in e||(e[o]=c)}l.push(e)}}return l}module.exports=api,api.expand=(async({activeCtx:e,activeProperty:t=null,element:n,options:a={},insideList:i=!1,insideIndex:r=!1,typeScopedContext:o=null,expansionMap:s=(()=>void 0)})=>{if(null==n)return null;if("@default"===t&&(a=Object.assign({},a,{isFrame:!1})),!_isArray(n)&&!_isObject(n)){if(!i&&(null===t||"@graph"===_expandIri(e,t,{vocab:!0},a))){const r=await s({unmappedValue:n,activeCtx:e,activeProperty:t,options:a,insideList:i});return void 0===r?null:r}return _expandValue({activeCtx:e,activeProperty:t,value:n,options:a})}if(_isArray(n)){let l=[];const d=_getContextValue(e,t,"@container")||[];i=i||d.includes("@list");for(let d=0;d<n.length;++d){let p=await api.expand({activeCtx:e,activeProperty:t,element:n[d],options:a,expansionMap:s,insideIndex:r,typeScopedContext:o});i&&_isArray(p)&&(p={"@list":p}),null===p&&void 0===(p=await s({unmappedValue:n[d],activeCtx:e,activeProperty:t,parent:n,index:d,options:a,expandedParent:l,insideList:i}))||(_isArray(p)?l=l.concat(p):l.push(p))}return l}const l=_expandIri(e,t,{vocab:!0},a),d=_getContextValue(e,t,"@context");o=o||(e.previousContext?e:null);let p=Object.keys(n).sort(),c=!r;if(c&&o&&p.length<=2&&!p.includes("@context"))for(const t of p){const n=_expandIri(o,t,{vocab:!0},a);if("@value"===n){c=!1,e=o;break}if("@id"===n&&1===p.length){c=!1;break}}c&&(e=e.revertToPreviousContext()),_isUndefined(d)||(e=await _processContext({activeCtx:e,localCtx:d,propagate:!0,overrideProtected:!0,options:a})),"@context"in n&&(e=await _processContext({activeCtx:e,localCtx:n["@context"],options:a})),o=e;for(const t of p){if("@type"===_expandIri(e,t,{vocab:!0},a)){const i=n[t],r=Array.isArray(i)?i.length>1?i.slice().sort():i:[i];for(const t of r){const n=_getContextValue(o,t,"@context");_isUndefined(n)||(e=await _processContext({activeCtx:e,localCtx:n,options:a,propagate:!1}))}}}let u={};await _expandObject({activeCtx:e,activeProperty:t,expandedActiveProperty:l,element:n,expandedParent:u,options:a,insideList:i,typeScopedContext:o,expansionMap:s});let v=(p=Object.keys(u)).length;if("@value"in u){if("@type"in u&&"@language"in u)throw new JsonLdError('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and "@language".',"jsonld.SyntaxError",{code:"invalid value object",element:u});let r=v-1;if("@type"in u&&(r-=1),"@index"in u&&(r-=1),"@language"in u&&(r-=1),0!==r)throw new JsonLdError('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and at most one other property which can be "@type" or "@language".',"jsonld.SyntaxError",{code:"invalid value object",element:u});const o=null===u["@value"]?[]:_asArray(u["@value"]),l=_getValues(u,"@type");if(0===o.length){const r=await s({unmappedValue:u,activeCtx:e,activeProperty:t,element:n,options:a,insideList:i});u=void 0!==r?r:null}else{if(!o.every(e=>_isString(e)||_isEmptyObject(e))&&"@language"in u)throw new JsonLdError("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:u});if(_processingMode(e,1.1)&&l.includes("@json")&&1===l.length);else if(!l.every(e=>_isAbsoluteIri(e)&&!(_isString(e)&&0===e.indexOf("_:"))||_isEmptyObject(e)))throw new JsonLdError('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:u})}}else if("@type"in u&&!_isArray(u["@type"]))u["@type"]=[u["@type"]];else if("@set"in u||"@list"in u){if(v>1&&!(2===v&&"@index"in u))throw new JsonLdError('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:u});"@set"in u&&(u=u["@set"],v=(p=Object.keys(u)).length)}else if(1===v&&"@language"in u){const r=await s(u,{unmappedValue:u,activeCtx:e,activeProperty:t,element:n,options:a,insideList:i});u=void 0!==r?r:null}if(_isObject(u)&&!a.keepFreeFloatingNodes&&!i&&(null===t||"@graph"===l)&&(0===v||"@value"in u||"@list"in u||1===v&&"@id"in u)){const r=await s({unmappedValue:u,activeCtx:e,activeProperty:t,element:n,options:a,insideList:i});u=void 0!==r?r:null}return u});

},{"./JsonLdError":31,"./context":39,"./graphTypes":46,"./types":50,"./url":51,"./util":52}],43:[function(require,module,exports){
"use strict";const{isSubjectReference:_isSubjectReference}=require("./graphTypes"),{createMergedNodeMap:_createMergedNodeMap}=require("./nodeMap"),api={};module.exports=api,api.flatten=(e=>{const r=_createMergedNodeMap(e),t=[],c=Object.keys(r).sort();for(let e=0;e<c.length;++e){const s=r[c[e]];_isSubjectReference(s)||t.push(s)}return t});

},{"./graphTypes":46,"./nodeMap":48}],44:[function(require,module,exports){
"use strict";const{isKeyword:isKeyword}=require("./context"),graphTypes=require("./graphTypes"),types=require("./types"),util=require("./util"),JsonLdError=require("./JsonLdError"),{createNodeMap:_createNodeMap,mergeNodeMapGraphs:_mergeNodeMapGraphs}=require("./nodeMap"),api={};function _createImplicitFrame(e){const t={};for(const r in e)void 0!==e[r]&&(t["@"+r]=[e[r]]);return[t]}function _createsCircularReference(e,t,r){for(let a=r.length-1;a>=0;--a){const s=r[a];if(s.graph===t&&s.subject["@id"]===e["@id"])return!0}return!1}function _getFrameFlag(e,t,r){const a="@"+r;let s=a in e?e[a][0]:t[r];return"embed"===r&&(!0===s?s="@last":!1===s?s="@never":"@always"!==s&&"@never"!==s&&"@link"!==s&&(s="@last")),s}function _validateFrame(e){if(!types.isArray(e)||1!==e.length||!types.isObject(e[0]))throw new JsonLdError("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:e})}function _filterSubjects(e,t,r,a){const s={};for(const i of t){const t=e.graphMap[e.graph][i];_filterSubject(e,t,r,a)&&(s[i]=t)}return s}function _filterSubject(e,t,r,a){let s=!0,i=!1;for(const n in r){let p=!1;const l=util.getValues(t,n),u=0===util.getValues(r,n).length;if(isKeyword(n)){if("@id"!==n&&"@type"!==n)continue;if(s=!1,"@id"===n){if(r["@id"].length>=0&&!types.isEmptyObject(r["@id"][0]))return r["@id"].includes(l[0]);p=!0;continue}if("@type"in r)if(u){if(l.length>0)return!1;p=!0}else{if(1!==r["@type"].length||!types.isEmptyObject(r["@type"][0])){for(const e of r["@type"])if(l.some(t=>t===e))return!0;return!1}p=l.length>0}}const o=util.getValues(r,n)[0];let c=!1;if(o&&(_validateFrame([o]),c="@default"in o),s=!1,0!==l.length||!c){if(l.length>0&&u)return!1;if(void 0===o){if(l.length>0)return!1;p=!0}else if(types.isObject(o))p=l.length>0;else if(graphTypes.isValue(o))p=l.some(e=>_valueMatch(o,e));else if(graphTypes.isSubject(o)||graphTypes.isSubjectReference(o))p=l.some(t=>_nodeMatch(e,o,t,a));else if(graphTypes.isList(o)){const t=o["@list"][0];if(graphTypes.isList(l[0])){const r=l[0]["@list"];graphTypes.isValue(t)?p=r.some(e=>_valueMatch(t,e)):(graphTypes.isSubject(t)||graphTypes.isSubjectReference(t))&&(p=r.some(r=>_nodeMatch(e,t,r,a)))}else p=!1}if(!p&&a.requireAll)return!1;i=i||p}}return s||i}function _removeEmbed(e,t){const r=e.uniqueEmbeds[e.graph],a=r[t],s=a.parent,i=a.property,n={"@id":t};if(types.isArray(s)){for(let e=0;e<s.length;++e)if(util.compareValues(s[e],n)){s[e]=n;break}}else{const e=types.isArray(s[i]);util.removeValue(s,i,n,{propertyIsArray:e}),util.addValue(s,i,n,{propertyIsArray:e})}const p=e=>{const t=Object.keys(r);for(const a of t)a in r&&types.isObject(r[a].parent)&&r[a].parent["@id"]===e&&(delete r[a],p(a))};p(t)}function _addFrameOutput(e,t,r){types.isObject(e)?util.addValue(e,t,r,{propertyIsArray:!0}):e.push(r)}function _nodeMatch(e,t,r,a){if(!("@id"in r))return!1;const s=e.subjects[r["@id"]];return s&&_filterSubject(e,s,t,a)}function _valueMatch(e,t){const r=t["@value"],a=t["@type"],s=t["@language"],i=e["@value"]?types.isArray(e["@value"])?e["@value"]:[e["@value"]]:[],n=e["@type"]?types.isArray(e["@type"])?e["@type"]:[e["@type"]]:[],p=e["@language"]?types.isArray(e["@language"])?e["@language"]:[e["@language"]]:[];return 0===i.length&&0===n.length&&0===p.length||!(!i.includes(r)&&!types.isEmptyObject(i[0]))&&(!!(!a&&0===n.length||n.includes(a)||a&&types.isEmptyObject(n[0]))&&!!(!s&&0===p.length||p.includes(s)||s&&types.isEmptyObject(p[0])))}module.exports=api,api.frameMergedOrDefault=((e,t,r)=>{const a={options:r,graph:"@default",graphMap:{"@default":{}},graphStack:[],subjectStack:[],link:{},bnodeMap:{}},s=new util.IdentifierIssuer("_:b");_createNodeMap(e,a.graphMap,"@default",s),r.merged&&(a.graphMap["@merged"]=_mergeNodeMapGraphs(a.graphMap),a.graph="@merged"),a.subjects=a.graphMap[a.graph];const i=[];return api.frame(a,Object.keys(a.subjects).sort(),t,i),r.pruneBlankNodeIdentifiers&&(r.bnodesToClear=Object.keys(a.bnodeMap).filter(e=>1===a.bnodeMap[e].length)),i}),api.frame=((e,t,r,a,s=null)=>{_validateFrame(r),r=r[0];const i=e.options,n={embed:_getFrameFlag(r,i,"embed"),explicit:_getFrameFlag(r,i,"explicit"),requireAll:_getFrameFlag(r,i,"requireAll")},p=_filterSubjects(e,t,r,n),l=Object.keys(p).sort();for(const t of l){const l=p[t];if("@link"===n.embed&&t in e.link){_addFrameOutput(a,s,e.link[t]);continue}null===s?e.uniqueEmbeds={[e.graph]:{}}:e.uniqueEmbeds[e.graph]=e.uniqueEmbeds[e.graph]||{};const u={};if(u["@id"]=t,0===t.indexOf("_:")&&util.addValue(e.bnodeMap,t,u,{propertyIsArray:!0}),e.link[t]=u,"@never"===n.embed||_createsCircularReference(l,e.graph,e.subjectStack))_addFrameOutput(a,s,u);else{if("@last"===n.embed&&(t in e.uniqueEmbeds[e.graph]&&_removeEmbed(e,t),e.uniqueEmbeds[e.graph][t]={parent:a,property:s}),e.subjectStack.push({subject:l,graph:e.graph}),t in e.graphMap){let a=!1,s=null;"@graph"in r?(s=r["@graph"][0],types.isObject(s)||(s={}),a=!("@merged"===t||"@default"===t)):(a="@merged"!==e.graph,s={}),a&&(e.graphStack.push(e.graph),e.graph=t,api.frame(e,Object.keys(e.graphMap[t]).sort(),[s],u,"@graph"),e.graph=e.graphStack.pop)}for(const t of Object.keys(l).sort())if(isKeyword(t)){if(u[t]=util.clone(l[t]),"@type"===t)for(const t of l["@type"])0===t.indexOf("_:")&&util.addValue(e.bnodeMap,t,u,{propertyIsArray:!0})}else if(!n.explicit||t in r)for(let a of l[t]){const s=t in r?r[t]:_createImplicitFrame(n);if(graphTypes.isList(a)){const s={"@list":[]};_addFrameOutput(u,t,s);const i=a["@list"];for(const p in i)if(a=i[p],graphTypes.isSubjectReference(a)){const i=t in r?r[t][0]["@list"]:_createImplicitFrame(n);api.frame(e,[a["@id"]],i,s,"@list")}else _addFrameOutput(s,"@list",util.clone(a))}else graphTypes.isSubjectReference(a)?api.frame(e,[a["@id"]],s,u,t):_valueMatch(s[0],a)&&_addFrameOutput(u,t,util.clone(a))}for(const e of Object.keys(r).sort()){if(isKeyword(e))continue;const t=r[e][0]||{};if(!(_getFrameFlag(t,i,"omitDefault")||e in u)){let r="@null";"@default"in t&&(r=util.clone(t["@default"])),types.isArray(r)||(r=[r]),u[e]=[{"@preserve":r}]}}if("@reverse"in r)for(const a of Object.keys(r["@reverse"]).sort()){const i=r["@reverse"][a];for(const r of Object.keys(e.subjects)){util.getValues(e.subjects[r],a).some(e=>e["@id"]===t)&&(u["@reverse"]=u["@reverse"]||{},util.addValue(u["@reverse"],a,[],{propertyIsArray:!0}),api.frame(e,[r],i,u["@reverse"][a],s))}}_addFrameOutput(a,s,u),e.subjectStack.pop()}}});

},{"./JsonLdError":31,"./context":39,"./graphTypes":46,"./nodeMap":48,"./types":50,"./util":52}],45:[function(require,module,exports){
"use strict";const JsonLdError=require("./JsonLdError"),graphTypes=require("./graphTypes"),types=require("./types"),util=require("./util"),{RDF_LIST:RDF_LIST,RDF_FIRST:RDF_FIRST,RDF_REST:RDF_REST,RDF_NIL:RDF_NIL,RDF_TYPE:RDF_TYPE,RDF_JSON_LITERAL:RDF_JSON_LITERAL,XSD_BOOLEAN:XSD_BOOLEAN,XSD_DOUBLE:XSD_DOUBLE,XSD_INTEGER:XSD_INTEGER,XSD_STRING:XSD_STRING}=require("./constants"),api={};function _RDFToObject(e,t){if(e.termType.endsWith("Node"))return{"@id":e.value};const s={"@value":e.value};if(e.language)s["@language"]=e.language;else{let a=e.datatype.value;if(a||(a=XSD_STRING),a===RDF_JSON_LITERAL){a="@json";try{s["@value"]=JSON.parse(s["@value"])}catch(e){throw new JsonLdError("JSON literal could not be parsed.","jsonld.InvalidJsonLiteral",{code:"invalid JSON literal",value:s["@value"],cause:e})}}if(t){if(a===XSD_BOOLEAN)"true"===s["@value"]?s["@value"]=!0:"false"===s["@value"]&&(s["@value"]=!1);else if(types.isNumeric(s["@value"]))if(a===XSD_INTEGER){const e=parseInt(s["@value"],10);e.toFixed(0)===s["@value"]&&(s["@value"]=e)}else a===XSD_DOUBLE&&(s["@value"]=parseFloat(s["@value"]));[XSD_BOOLEAN,XSD_INTEGER,XSD_DOUBLE,XSD_STRING].includes(a)||(s["@type"]=a)}else a!==XSD_STRING&&(s["@type"]=a)}return s}module.exports=api,api.fromRDF=(async(e,{useRdfType:t=!1,useNativeTypes:s=!1})=>{const a={},r={"@default":a},u={};for(const l of e){const e="DefaultGraph"===l.graph.termType?"@default":l.graph.value;e in r||(r[e]={}),"@default"===e||e in a||(a[e]={"@id":e});const o=r[e],n=l.subject.value,i=l.predicate.value,p=l.object;n in o||(o[n]={"@id":n});const R=o[n],D=p.termType.endsWith("Node");if(!D||p.value in o||(o[p.value]={"@id":p.value}),i===RDF_TYPE&&!t&&D){util.addValue(R,"@type",p.value,{propertyIsArray:!0});continue}const c=_RDFToObject(p,s);if(util.addValue(R,i,c,{propertyIsArray:!0}),D)if(p.value===RDF_NIL){const e=o[p.value];"usages"in e||(e.usages=[]),e.usages.push({node:R,property:i,value:c})}else p.value in u?u[p.value]=!1:u[p.value]={node:R,property:i,value:c}}for(const e in r){const t=r[e];if(!(RDF_NIL in t))continue;const s=t[RDF_NIL];if(s.usages){for(let e of s.usages){let s=e.node,a=e.property,r=e.value;const l=[],o=[];let n=Object.keys(s).length;for(;a===RDF_REST&&types.isObject(u[s["@id"]])&&types.isArray(s[RDF_FIRST])&&1===s[RDF_FIRST].length&&types.isArray(s[RDF_REST])&&1===s[RDF_REST].length&&(3===n||4===n&&types.isArray(s["@type"])&&1===s["@type"].length&&s["@type"][0]===RDF_LIST)&&(l.push(s[RDF_FIRST][0]),o.push(s["@id"]),s=(e=u[s["@id"]]).node,a=e.property,r=e.value,n=Object.keys(s).length,graphTypes.isBlankNode(s)););delete r["@id"],r["@list"]=l.reverse();for(const e of o)delete t[e]}delete s.usages}}const l=[],o=Object.keys(a).sort();for(const e of o){const t=a[e];if(e in r){const s=t["@graph"]=[],a=r[e],u=Object.keys(a).sort();for(const e of u){const t=a[e];graphTypes.isSubjectReference(t)||s.push(t)}}graphTypes.isSubjectReference(t)||l.push(t)}return l});

},{"./JsonLdError":31,"./constants":38,"./graphTypes":46,"./types":50,"./util":52}],46:[function(require,module,exports){
"use strict";const types=require("./types"),api={};module.exports=api,api.isSubject=(i=>{if(types.isObject(i)&&!("@value"in i||"@set"in i||"@list"in i)){return Object.keys(i).length>1||!("@id"in i)}return!1}),api.isSubjectReference=(i=>types.isObject(i)&&1===Object.keys(i).length&&"@id"in i),api.isValue=(i=>types.isObject(i)&&"@value"in i),api.isList=(i=>types.isObject(i)&&"@list"in i),api.isGraph=(i=>types.isObject(i)&&"@graph"in i&&1===Object.keys(i).filter(i=>"@id"!==i&&"@index"!==i).length),api.isSimpleGraph=(i=>api.isGraph(i)&&!("@id"in i)),api.isBlankNode=(i=>!!types.isObject(i)&&("@id"in i?0===i["@id"].indexOf("_:"):0===Object.keys(i).length||!("@value"in i||"@set"in i||"@list"in i)));

},{"./types":50}],47:[function(require,module,exports){
(function (process,global){
const canonize=require("rdf-canonize"),util=require("./util"),ContextResolver=require("./ContextResolver"),IdentifierIssuer=util.IdentifierIssuer,JsonLdError=require("./JsonLdError"),LRU=require("lru-cache"),NQuads=require("./NQuads"),Rdfa=require("./Rdfa"),{expand:_expand}=require("./expand"),{flatten:_flatten}=require("./flatten"),{fromRDF:_fromRDF}=require("./fromRdf"),{toRDF:_toRDF}=require("./toRdf"),{frameMergedOrDefault:_frameMergedOrDefault}=require("./frame"),{isArray:_isArray,isObject:_isObject,isString:_isString}=require("./types"),{isSubjectReference:_isSubjectReference}=require("./graphTypes"),{getInitialContext:_getInitialContext,process:_processContext}=require("./context"),{compact:_compact,compactIri:_compactIri,removePreserve:_removePreserve}=require("./compact"),{createNodeMap:_createNodeMap,createMergedNodeMap:_createMergedNodeMap,mergeNodeMaps:_mergeNodeMaps}=require("./nodeMap"),_nodejs="undefined"!=typeof process&&process.versions&&process.versions.node,_browser=!_nodejs&&("undefined"!=typeof window||"undefined"!=typeof self),wrapper=function(e){const t={},n=new LRU({max:100});function o(t,{documentLoader:n=e.documentLoader,...o}){return Object.assign({},{documentLoader:n},o,t)}return e.compact=async function(t,r,a){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");if(null===r)throw new JsonLdError("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});if(null===t)return null;let i;(a=o(a,{base:_isString(t)?t:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new IdentifierIssuer("_:b"),contextResolver:new ContextResolver({sharedCache:n})})).link&&(a.skipExpansion=!0),a.compactToRelative||delete a.base,i=a.skipExpansion?t:await e.expand(t,a);const s=await e.processContext(_getInitialContext(a),r,a);let c=await _compact({activeCtx:s,element:i,options:a,compactionMap:a.compactionMap});a.compactArrays&&!a.graph&&_isArray(c)?1===c.length?c=c[0]:0===c.length&&(c={}):a.graph&&_isObject(c)&&(c=[c]),_isObject(r)&&"@context"in r&&(r=r["@context"]),r=util.clone(r),_isArray(r)||(r=[r]);const u=r;r=[];for(let e=0;e<u.length;++e)(!_isObject(u[e])||Object.keys(u[e]).length>0)&&r.push(u[e]);const d=r.length>0;if(1===r.length&&(r=r[0]),_isArray(c)){const e=_compactIri({activeCtx:s,iri:"@graph",relativeTo:{vocab:!0}}),t=c;c={},d&&(c["@context"]=r),c[e]=t}else if(_isObject(c)&&d){const e=c;c={"@context":r};for(const t in e)c[t]=e[t]}if(a.framing){const e=_compactIri({activeCtx:s,iri:"@graph",relativeTo:{vocab:!0}});a.link={},c[e]=_removePreserve(s,c[e],a)}return c},e.expand=async function(t,r){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");!1===(r=o(r,{keepFreeFloatingNodes:!1,contextResolver:new ContextResolver({sharedCache:n})})).expansionMap&&(r.expansionMap=void 0);const a={},i=[];if("expandContext"in r){const e=util.clone(r.expandContext);_isObject(e)&&"@context"in e?a.expandContext=e:a.expandContext={"@context":e},i.push(a.expandContext)}let s;if(_isString(t)){const n=await e.get(t,r);s=n.documentUrl,a.input=n.document,n.contextUrl&&(a.remoteContext={"@context":n.contextUrl},i.push(a.remoteContext))}else a.input=util.clone(t);"base"in r||(r.base=s||"");let c=_getInitialContext(r);for(const e of i)c=await _processContext({activeCtx:c,localCtx:e,options:r});let u=await _expand({activeCtx:c,element:a.input,options:r,expansionMap:r.expansionMap});return _isObject(u)&&"@graph"in u&&1===Object.keys(u).length?u=u["@graph"]:null===u&&(u=[]),_isArray(u)||(u=[u]),u},e.flatten=async function(t,r,a){if(arguments.length<1)return new TypeError("Could not flatten, too few arguments.");r="function"==typeof r?null:r||null,a=o(a,{base:_isString(t)?t:"",contextResolver:new ContextResolver({sharedCache:n})});const i=await e.expand(t,a),s=_flatten(i);return null===r?s:(a.graph=!0,a.skipExpansion=!0,await e.compact(s,r,a))},e.frame=async function(t,r,a){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");if(a=o(a,{base:_isString(t)?t:"",embed:"@last",explicit:!1,requireAll:!0,omitDefault:!1,pruneBlankNodeIdentifiers:!0,bnodesToClear:[],contextResolver:new ContextResolver({sharedCache:n})}),_isString(r)){const t=await e.get(r,a);if(r=t.document,t.contextUrl){let e=r["@context"];e?_isArray(e)?e.push(t.contextUrl):e=[e,t.contextUrl]:e=t.contextUrl,r["@context"]=e}}const i=r&&r["@context"]||{},s=await e.expand(t,a),c={...a};c.isFrame=!0,c.keepFreeFloatingNodes=!0;const u=await e.expand(r,c);c.merged=!("@graph"in r);const d=_frameMergedOrDefault(s,u,c);return c.graph=!0,c.skipExpansion=!0,c.link={},c.framing=!0,await e.compact(d,i,c)},e.link=async function(t,n,o){const r={};return n&&(r["@context"]=n),r["@embed"]="@link",e.frame(t,r,o)},e.normalize=e.canonize=async function(t,r){if(arguments.length<1)throw new TypeError("Could not canonize, too few arguments.");if("inputFormat"in(r=o(r,{base:_isString(t)?t:"",algorithm:"URDNA2015",skipExpansion:!1,contextResolver:new ContextResolver({sharedCache:n})}))){if("application/n-quads"!==r.inputFormat&&"application/nquads"!==r.inputFormat)throw new JsonLdError("Unknown canonicalization input format.","jsonld.CanonizeError");const e=NQuads.parse(t);return canonize.canonize(e,r)}const a={...r};delete a.format,a.produceGeneralizedRdf=!1;const i=await e.toRDF(t,a);return canonize.canonize(i,r)},e.fromRDF=async function(e,n){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");n=o(n,{format:_isString(e)?"application/n-quads":void 0});const{format:r}=n;let{rdfParser:a}=n;if(r){if(!(a=a||t[r]))throw new JsonLdError("Unknown input format.","jsonld.UnknownFormat",{format:r})}else a=(()=>e);const i=await a(e);return _fromRDF(i,n)},e.toRDF=async function(t,r){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");let a;a=(r=o(r,{base:_isString(t)?t:"",skipExpansion:!1,contextResolver:new ContextResolver({sharedCache:n})})).skipExpansion?t:await e.expand(t,r);const i=_toRDF(a,r);if(r.format){if("application/n-quads"===r.format||"application/nquads"===r.format)return await NQuads.serialize(i);throw new JsonLdError("Unknown output format.","jsonld.UnknownFormat",{format:r.format})}return i},e.createNodeMap=async function(t,r){if(arguments.length<1)throw new TypeError("Could not create node map, too few arguments.");r=o(r,{base:_isString(t)?t:"",contextResolver:new ContextResolver({sharedCache:n})});const a=await e.expand(t,r);return _createMergedNodeMap(a,r)},e.merge=async function(t,r,a){if(arguments.length<1)throw new TypeError("Could not merge, too few arguments.");if(!_isArray(t))throw new TypeError('Could not merge, "docs" must be an array.');r="function"==typeof r?null:r||null,a=o(a,{contextResolver:new ContextResolver({sharedCache:n})});const i=await Promise.all(t.map(t=>{const n={...a};return e.expand(t,n)}));let s=!0;"mergeNodes"in a&&(s=a.mergeNodes);const c=a.issuer||new IdentifierIssuer("_:b"),u={"@default":{}};for(let e=0;e<i.length;++e){const t=util.relabelBlankNodes(i[e],{issuer:new IdentifierIssuer("_:b"+e+"-")}),n=s||0===e?u:{"@default":{}};if(_createNodeMap(t,n,"@default",c),n!==u)for(const e in n){const t=n[e];if(!(e in u)){u[e]=t;continue}const o=u[e];for(const e in t)e in o||(o[e]=t[e])}}const d=_mergeNodeMaps(u),l=[],p=Object.keys(d).sort();for(let e=0;e<p.length;++e){const t=d[p[e]];_isSubjectReference(t)||l.push(t)}return null===r?l:(a.graph=!0,a.skipExpansion=!0,await e.compact(l,r,a))},Object.defineProperty(e,"documentLoader",{get:()=>e._documentLoader,set:t=>e._documentLoader=t}),e.documentLoader=(async e=>{throw new JsonLdError("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:e})}),e.get=async function(t,n){let o;o="function"==typeof n.documentLoader?n.documentLoader:e.documentLoader;const r=await o(t);try{if(!r.document)throw new JsonLdError("No remote document found at the given URL.","jsonld.NullRemoteDocument");_isString(r.document)&&(r.document=JSON.parse(r.document))}catch(e){throw new JsonLdError("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:e,remoteDoc:r})}return r},e.processContext=async function(e,t,r){return r=o(r,{base:"",contextResolver:new ContextResolver({sharedCache:n})}),null===t?_getInitialContext(r):(t=util.clone(t),_isObject(t)&&"@context"in t||(t={"@context":t}),_processContext({activeCtx:e,localCtx:t,options:r}))},e.getContextValue=require("./context").getContextValue,e.documentLoaders={},e.documentLoaders.node=require("./documentLoaders/node"),e.documentLoaders.xhr=require("./documentLoaders/xhr"),e.useDocumentLoader=function(t){if(!(t in e.documentLoaders))throw new JsonLdError('Unknown document loader type: "'+t+'"',"jsonld.UnknownDocumentLoader",{type:t});e.documentLoader=e.documentLoaders[t].apply(e,Array.prototype.slice.call(arguments,1))},e.registerRDFParser=function(e,n){t[e]=n},e.unregisterRDFParser=function(e){delete t[e]},e.registerRDFParser("application/n-quads",NQuads.parse),e.registerRDFParser("application/nquads",NQuads.parse),e.registerRDFParser("rdfa-api",Rdfa.parse),e.url=require("./url"),e.util=util,Object.assign(e,util),e.promises=e,e.RequestQueue=require("./RequestQueue"),e.JsonLdProcessor=require("./JsonLdProcessor")(e),_browser&&void 0===global.JsonLdProcessor&&Object.defineProperty(global,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:e.JsonLdProcessor}),_nodejs?e.useDocumentLoader("node"):"undefined"!=typeof XMLHttpRequest&&e.useDocumentLoader("xhr"),e},factory=function(){return wrapper(function(){return factory()})};wrapper(factory),module.exports=factory;

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"./ContextResolver":30,"./JsonLdError":31,"./JsonLdProcessor":32,"./NQuads":33,"./Rdfa":34,"./RequestQueue":35,"./compact":37,"./context":39,"./documentLoaders/node":40,"./documentLoaders/xhr":41,"./expand":42,"./flatten":43,"./frame":44,"./fromRdf":45,"./graphTypes":46,"./nodeMap":48,"./toRdf":49,"./types":50,"./url":51,"./util":52,"_process":60,"lru-cache":53,"rdf-canonize":70}],48:[function(require,module,exports){
"use strict";const{isKeyword:isKeyword}=require("./context"),graphTypes=require("./graphTypes"),types=require("./types"),util=require("./util"),JsonLdError=require("./JsonLdError"),api={};module.exports=api,api.createMergedNodeMap=((e,t)=>{const r=(t=t||{}).issuer||new util.IdentifierIssuer("_:b"),i={"@default":{}};return api.createNodeMap(e,i,"@default",r),api.mergeNodeMaps(i)}),api.createNodeMap=((e,t,r,i,o,s)=>{if(types.isArray(e)){for(const o of e)api.createNodeMap(o,t,r,i,void 0,s);return}if(!types.isObject(e))return void(s&&s.push(e));if(graphTypes.isValue(e)){if("@type"in e){let t=e["@type"];0===t.indexOf("_:")&&(e["@type"]=t=i.getId(t))}return void(s&&s.push(e))}if(s&&graphTypes.isList(e)){const a=[];return api.createNodeMap(e["@list"],t,r,i,o,a),void s.push({"@list":a})}if("@type"in e){const t=e["@type"];for(const e of t)0===e.indexOf("_:")&&i.getId(e)}types.isUndefined(o)&&(o=graphTypes.isBlankNode(e)?i.getId(e["@id"]):e["@id"]),s&&s.push({"@id":o});const a=t[r],p=a[o]=a[o]||{};p["@id"]=o;const n=Object.keys(e).sort();for(let s of n){if("@id"===s)continue;if("@reverse"===s){const s={"@id":o},p=e["@reverse"];for(const e in p){const o=p[e];for(const p of o){let o=p["@id"];graphTypes.isBlankNode(p)&&(o=i.getId(o)),api.createNodeMap(p,t,r,i,o),util.addValue(a[o],e,s,{propertyIsArray:!0,allowDuplicate:!1})}}continue}if("@graph"===s){o in t||(t[o]={}),api.createNodeMap(e[s],t,o,i);continue}if("@type"!==s&&isKeyword(s)){if("@index"===s&&s in p&&(e[s]!==p[s]||e[s]["@id"]!==p[s]["@id"]))throw new JsonLdError("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:p});p[s]=e[s];continue}const n=e[s];if(0===s.indexOf("_:")&&(s=i.getId(s)),0!==n.length)for(let e of n)if("@type"===s&&(e=0===e.indexOf("_:")?i.getId(e):e),graphTypes.isSubject(e)||graphTypes.isSubjectReference(e)){const o=graphTypes.isBlankNode(e)?i.getId(e["@id"]):e["@id"];util.addValue(p,s,{"@id":o},{propertyIsArray:!0,allowDuplicate:!1}),api.createNodeMap(e,t,r,i,o)}else if(graphTypes.isValue(e))util.addValue(p,s,e,{propertyIsArray:!0,allowDuplicate:!1});else if(graphTypes.isList(e)){const a=[];api.createNodeMap(e["@list"],t,r,i,o,a),e={"@list":a},util.addValue(p,s,e,{propertyIsArray:!0,allowDuplicate:!1})}else api.createNodeMap(e,t,r,i,o),util.addValue(p,s,e,{propertyIsArray:!0,allowDuplicate:!1});else util.addValue(p,s,[],{propertyIsArray:!0})}}),api.mergeNodeMapGraphs=(e=>{const t={};for(const r of Object.keys(e).sort())for(const i of Object.keys(e[r]).sort()){const o=e[r][i];i in t||(t[i]={"@id":i});const s=t[i];for(const e of Object.keys(o).sort())if(isKeyword(e))s[e]=util.clone(o[e]);else for(const t of o[e])util.addValue(s,e,util.clone(t),{propertyIsArray:!0,allowDuplicate:!1})}return t}),api.mergeNodeMaps=(e=>{const t=e["@default"],r=Object.keys(e).sort();for(const i of r){if("@default"===i)continue;const r=e[i];let o=t[i];o?"@graph"in o||(o["@graph"]=[]):t[i]=o={"@id":i,"@graph":[]};const s=o["@graph"];for(const e of Object.keys(r).sort()){const t=r[e];graphTypes.isSubjectReference(t)||s.push(t)}}return t});

},{"./JsonLdError":31,"./context":39,"./graphTypes":46,"./types":50,"./util":52}],49:[function(require,module,exports){
"use strict";const{createNodeMap:createNodeMap}=require("./nodeMap"),{isKeyword:isKeyword}=require("./context"),graphTypes=require("./graphTypes"),jsonCanonicalize=require("canonicalize"),types=require("./types"),util=require("./util"),{RDF_FIRST:RDF_FIRST,RDF_REST:RDF_REST,RDF_NIL:RDF_NIL,RDF_TYPE:RDF_TYPE,RDF_JSON_LITERAL:RDF_JSON_LITERAL,RDF_LANGSTRING:RDF_LANGSTRING,XSD_BOOLEAN:XSD_BOOLEAN,XSD_DOUBLE:XSD_DOUBLE,XSD_INTEGER:XSD_INTEGER,XSD_STRING:XSD_STRING}=require("./constants"),{isAbsolute:_isAbsoluteIri}=require("./url"),api={};function _graphToRDF(e,t,a,o,s){const r=Object.keys(t).sort();for(const i of r){const r=t[i],u=Object.keys(r).sort();for(let t of u){const u=r[t];if("@type"===t)t=RDF_TYPE;else if(isKeyword(t))continue;for(const r of u){const u={termType:i.startsWith("_:")?"BlankNode":"NamedNode",value:i};if(!_isAbsoluteIri(i))continue;const l={termType:t.startsWith("_:")?"BlankNode":"NamedNode",value:t};if(!_isAbsoluteIri(t))continue;if("BlankNode"===l.termType&&!s.produceGeneralizedRdf)continue;const p=_objectToRDF(r,o,e,a);p&&e.push({subject:u,predicate:l,object:p,graph:a})}}}}function _listToRDF(e,t,a,o){const s={termType:"NamedNode",value:RDF_FIRST},r={termType:"NamedNode",value:RDF_REST},i={termType:"NamedNode",value:RDF_NIL},u=e.pop(),l=u?{termType:"BlankNode",value:t.getId()}:i;let p=l;for(const i of e){const e=_objectToRDF(i,t,a,o),u={termType:"BlankNode",value:t.getId()};a.push({subject:p,predicate:s,object:e,graph:o}),a.push({subject:p,predicate:r,object:u,graph:o}),p=u}if(u){const e=_objectToRDF(u,t,a,o);a.push({subject:p,predicate:s,object:e,graph:o}),a.push({subject:p,predicate:r,object:i,graph:o})}return l}function _objectToRDF(e,t,a,o){const s={};if(graphTypes.isValue(e)){s.termType="Literal",s.value=void 0,s.datatype={termType:"NamedNode"};let t=e["@value"];const a=e["@type"]||null;"@json"===a?(s.value=jsonCanonicalize(t),s.datatype.value=RDF_JSON_LITERAL):types.isBoolean(t)?(s.value=t.toString(),s.datatype.value=a||XSD_BOOLEAN):types.isDouble(t)||a===XSD_DOUBLE?(types.isDouble(t)||(t=parseFloat(t)),s.value=t.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),s.datatype.value=a||XSD_DOUBLE):types.isNumber(t)?(s.value=t.toFixed(0),s.datatype.value=a||XSD_INTEGER):"@language"in e?(s.value=t,s.datatype.value=a||RDF_LANGSTRING,s.language=e["@language"]):(s.value=t,s.datatype.value=a||XSD_STRING)}else if(graphTypes.isList(e)){const r=_listToRDF(e["@list"],t,a,o);s.termType=r.termType,s.value=r.value}else{const t=types.isObject(e)?e["@id"]:e;s.termType=t.startsWith("_:")?"BlankNode":"NamedNode",s.value=t}return"NamedNode"!==s.termType||_isAbsoluteIri(s.value)?s:null}module.exports=api,api.toRDF=((e,t)=>{const a=new util.IdentifierIssuer("_:b"),o={"@default":{}};createNodeMap(e,o,"@default",a);const s=[],r=Object.keys(o).sort();for(const e of r){let r;if("@default"===e)r={termType:"DefaultGraph",value:""};else{if(!_isAbsoluteIri(e))continue;(r=e.startsWith("_:")?{termType:"BlankNode"}:{termType:"NamedNode"}).value=e}_graphToRDF(s,o[e],r,a,t)}return s});

},{"./constants":38,"./context":39,"./graphTypes":46,"./nodeMap":48,"./types":50,"./url":51,"./util":52,"canonicalize":29}],50:[function(require,module,exports){
"use strict";const api={};module.exports=api,api.isArray=Array.isArray,api.isBoolean=(t=>"boolean"==typeof t||"[object Boolean]"===Object.prototype.toString.call(t)),api.isDouble=(t=>api.isNumber(t)&&-1!==String(t).indexOf(".")),api.isEmptyObject=(t=>api.isObject(t)&&0===Object.keys(t).length),api.isNumber=(t=>"number"==typeof t||"[object Number]"===Object.prototype.toString.call(t)),api.isNumeric=(t=>!isNaN(parseFloat(t))&&isFinite(t)),api.isObject=(t=>"[object Object]"===Object.prototype.toString.call(t)),api.isString=(t=>"string"==typeof t||"[object String]"===Object.prototype.toString.call(t)),api.isUndefined=(t=>void 0===t);

},{}],51:[function(require,module,exports){
"use strict";const types=require("./types"),api={};module.exports=api,api.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},api.parse=((e,t)=>{const r={},a=api.parsers[t||"full"],p=a.regex.exec(e);let s=a.keys.length;for(;s--;)r[a.keys[s]]=void 0===p[s]?null:p[s];return("https"===r.scheme&&"443"===r.port||"http"===r.scheme&&"80"===r.port)&&(r.href=r.href.replace(":"+r.port,""),r.authority=r.authority.replace(":"+r.port,""),r.port=null),r.normalizedPath=api.removeDotSegments(r.path),r}),api.prependBase=((e,t)=>{if(null===e)return t;if(api.isAbsolute(t))return t;types.isString(e)&&(e=api.parse(e||""));const r=api.parse(t),a={protocol:e.protocol||""};if(null!==r.authority)a.authority=r.authority,a.path=r.path,a.query=r.query;else if(a.authority=e.authority,""===r.path)a.path=e.path,null!==r.query?a.query=r.query:a.query=e.query;else{if(0===r.path.indexOf("/"))a.path=r.path;else{let t=e.path;(t=t.substr(0,t.lastIndexOf("/")+1)).length>0&&"/"!==t.substr(-1)&&(t+="/"),t+=r.path,a.path=t}a.query=r.query}""!==r.path&&(a.path=api.removeDotSegments(a.path));let p=a.protocol;return null!==a.authority&&(p+="//"+a.authority),p+=a.path,null!==a.query&&(p+="?"+a.query),null!==r.fragment&&(p+="#"+r.fragment),""===p&&(p="./"),p}),api.removeBase=((e,t)=>{if(null===e)return t;types.isString(e)&&(e=api.parse(e||""));let r="";if(""!==e.href?r+=(e.protocol||"")+"//"+(e.authority||""):t.indexOf("//")&&(r+="//"),0!==t.indexOf(r))return t;const a=api.parse(t.substr(r.length)),p=e.normalizedPath.split("/"),s=a.normalizedPath.split("/"),i=a.fragment||a.query?0:1;for(;p.length>0&&s.length>i&&p[0]===s[0];)p.shift(),s.shift();let l="";if(p.length>0){p.pop();for(let e=0;e<p.length;++e)l+="../"}return l+=s.join("/"),null!==a.query&&(l+="?"+a.query),null!==a.fragment&&(l+="#"+a.fragment),""===l&&(l="./"),l}),api.removeDotSegments=(e=>{if(0===e.length)return"";const t=e.split("/"),r=[];for(;t.length>0;){const e=t.shift(),a=0===t.length;"."!==e?".."!==e?r.push(e):(r.pop(),a&&r.push("")):a&&r.push("")}return r.length>0&&""!==r[0]&&r.unshift(""),1===r.length&&""===r[0]?"/":r.join("/")});const isAbsoluteRegex=/^([A-Za-z][A-Za-z0-9+-.]*|_):/;api.isAbsolute=(e=>types.isString(e)&&isAbsoluteRegex.test(e)),api.isRelative=(e=>types.isString(e));

},{"./types":50}],52:[function(require,module,exports){
"use strict";const graphTypes=require("./graphTypes"),types=require("./types"),IdentifierIssuer=require("rdf-canonize").IdentifierIssuer,JsonLdError=require("./JsonLdError"),REGEX_LINK_HEADERS=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,REGEX_LINK_HEADER=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,REGEX_LINK_HEADER_PARAMS=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,DEFAULTS={headers:{accept:"application/ld+json, application/json"}},api={};function _labelBlankNodes(e,r){if(types.isArray(r))for(let a=0;a<r.length;++a)r[a]=_labelBlankNodes(e,r[a]);else if(graphTypes.isList(r))r["@list"]=_labelBlankNodes(e,r["@list"]);else if(types.isObject(r)){graphTypes.isBlankNode(r)&&(r["@id"]=e.getId(r["@id"]));const a=Object.keys(r).sort();for(let t=0;t<a.length;++t){const s=a[t];"@id"!==s&&(r[s]=_labelBlankNodes(e,r[s]))}}return r}module.exports=api,api.IdentifierIssuer=IdentifierIssuer,api.clone=function(e){if(e&&"object"==typeof e){let r;if(types.isArray(e)){r=[];for(let a=0;a<e.length;++a)r[a]=api.clone(e[a])}else if(e instanceof Map){r=new Map;for(const[a,t]of e)r.set(a,api.clone(t))}else if(e instanceof Set){r=new Set;for(const a of e)r.add(api.clone(a))}else if(types.isObject(e)){r={};for(const a in e)r[a]=api.clone(e[a])}else r=e.toString();return r}return e},api.asArray=function(e){return Array.isArray(e)?e:[e]},api.buildHeaders=((e={})=>{if(Object.keys(e).some(e=>"accept"===e.toLowerCase()))throw new RangeError('Accept header may not be specified; only "'+DEFAULTS.headers.accept+'" is supported.');return Object.assign({Accept:DEFAULTS.headers.accept},e)}),api.parseLinkHeader=(e=>{const r={},a=e.match(REGEX_LINK_HEADERS);for(let e=0;e<a.length;++e){let t=a[e].match(REGEX_LINK_HEADER);if(!t)continue;const s={target:t[1]},i=t[2];for(;t=REGEX_LINK_HEADER_PARAMS.exec(i);)s[t[1]]=void 0===t[2]?t[3]:t[2];const p=s.rel||"";Array.isArray(r[p])?r[p].push(s):r.hasOwnProperty(p)?r[p]=[r[p],s]:r[p]=s}return r}),api.validateTypeValue=(e=>{if(types.isString(e)||types.isEmptyObject(e))return;let r=!1;if(types.isArray(e)){r=!0;for(let a=0;a<e.length;++a)if(!types.isString(e[a])){r=!1;break}}if(!r)throw new JsonLdError('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, or an empty object.',"jsonld.SyntaxError",{code:"invalid type value",value:e})}),api.hasProperty=((e,r)=>{if(e.hasOwnProperty(r)){const a=e[r];return!types.isArray(a)||a.length>0}return!1}),api.hasValue=((e,r,a)=>{if(api.hasProperty(e,r)){let t=e[r];const s=graphTypes.isList(t);if(types.isArray(t)||s){s&&(t=t["@list"]);for(let e=0;e<t.length;++e)if(api.compareValues(a,t[e]))return!0}else if(!types.isArray(a))return api.compareValues(a,t)}return!1}),api.addValue=((e,r,a,t)=>{if("propertyIsArray"in(t=t||{})||(t.propertyIsArray=!1),"valueIsArray"in t||(t.valueIsArray=!1),"allowDuplicate"in t||(t.allowDuplicate=!0),"prependValue"in t||(t.prependValue=!1),t.valueIsArray)e[r]=a;else if(types.isArray(a)){0===a.length&&t.propertyIsArray&&!e.hasOwnProperty(r)&&(e[r]=[]),t.prependValue&&(a=a.concat(e[r]),e[r]=[]);for(let s=0;s<a.length;++s)api.addValue(e,r,a[s],t)}else if(e.hasOwnProperty(r)){const s=!t.allowDuplicate&&api.hasValue(e,r,a);types.isArray(e[r])||s&&!t.propertyIsArray||(e[r]=[e[r]]),s||(t.prependValue?e[r].unshift(a):e[r].push(a))}else e[r]=t.propertyIsArray?[a]:a}),api.getValues=((e,r)=>[].concat(e[r]||[])),api.removeProperty=((e,r)=>{delete e[r]}),api.removeValue=((e,r,a,t)=>{"propertyIsArray"in(t=t||{})||(t.propertyIsArray=!1);const s=api.getValues(e,r).filter(e=>!api.compareValues(e,a));0===s.length?api.removeProperty(e,r):1!==s.length||t.propertyIsArray?e[r]=s:e[r]=s[0]}),api.relabelBlankNodes=((e,r)=>{return _labelBlankNodes((r=r||{}).issuer||new IdentifierIssuer("_:b"),e)}),api.compareValues=((e,r)=>e===r||(!(!graphTypes.isValue(e)||!graphTypes.isValue(r)||e["@value"]!==r["@value"]||e["@type"]!==r["@type"]||e["@language"]!==r["@language"]||e["@index"]!==r["@index"])||!!(types.isObject(e)&&"@id"in e&&types.isObject(r)&&"@id"in r)&&e["@id"]===r["@id"])),api.compareShortestLeast=((e,r)=>e.length<r.length?-1:r.length<e.length?1:e===r?0:e<r?-1:1);

},{"./JsonLdError":31,"./graphTypes":46,"./types":50,"rdf-canonize":70}],53:[function(require,module,exports){
"use strict";const Yallist=require("yallist"),MAX=Symbol("max"),LENGTH=Symbol("length"),LENGTH_CALCULATOR=Symbol("lengthCalculator"),ALLOW_STALE=Symbol("allowStale"),MAX_AGE=Symbol("maxAge"),DISPOSE=Symbol("dispose"),NO_DISPOSE_ON_SET=Symbol("noDisposeOnSet"),LRU_LIST=Symbol("lruList"),CACHE=Symbol("cache"),UPDATE_AGE_ON_GET=Symbol("updateAgeOnGet"),naiveLength=()=>1;class LRUCache{constructor(t){if("number"==typeof t&&(t={max:t}),t||(t={}),t.max&&("number"!=typeof t.max||t.max<0))throw new TypeError("max must be a non-negative number");this[MAX]=t.max||1/0;const e=t.length||naiveLength;if(this[LENGTH_CALCULATOR]="function"!=typeof e?naiveLength:e,this[ALLOW_STALE]=t.stale||!1,t.maxAge&&"number"!=typeof t.maxAge)throw new TypeError("maxAge must be a number");this[MAX_AGE]=t.maxAge||0,this[DISPOSE]=t.dispose,this[NO_DISPOSE_ON_SET]=t.noDisposeOnSet||!1,this[UPDATE_AGE_ON_GET]=t.updateAgeOnGet||!1,this.reset()}set max(t){if("number"!=typeof t||t<0)throw new TypeError("max must be a non-negative number");this[MAX]=t||1/0,trim(this)}get max(){return this[MAX]}set allowStale(t){this[ALLOW_STALE]=!!t}get allowStale(){return this[ALLOW_STALE]}set maxAge(t){if("number"!=typeof t)throw new TypeError("maxAge must be a non-negative number");this[MAX_AGE]=t,trim(this)}get maxAge(){return this[MAX_AGE]}set lengthCalculator(t){"function"!=typeof t&&(t=naiveLength),t!==this[LENGTH_CALCULATOR]&&(this[LENGTH_CALCULATOR]=t,this[LENGTH]=0,this[LRU_LIST].forEach(t=>{t.length=this[LENGTH_CALCULATOR](t.value,t.key),this[LENGTH]+=t.length})),trim(this)}get lengthCalculator(){return this[LENGTH_CALCULATOR]}get length(){return this[LENGTH]}get itemCount(){return this[LRU_LIST].length}rforEach(t,e){e=e||this;for(let s=this[LRU_LIST].tail;null!==s;){const i=s.prev;forEachStep(this,t,s,e),s=i}}forEach(t,e){e=e||this;for(let s=this[LRU_LIST].head;null!==s;){const i=s.next;forEachStep(this,t,s,e),s=i}}keys(){return this[LRU_LIST].toArray().map(t=>t.key)}values(){return this[LRU_LIST].toArray().map(t=>t.value)}reset(){this[DISPOSE]&&this[LRU_LIST]&&this[LRU_LIST].length&&this[LRU_LIST].forEach(t=>this[DISPOSE](t.key,t.value)),this[CACHE]=new Map,this[LRU_LIST]=new Yallist,this[LENGTH]=0}dump(){return this[LRU_LIST].map(t=>!isStale(this,t)&&{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[LRU_LIST]}set(t,e,s){if((s=s||this[MAX_AGE])&&"number"!=typeof s)throw new TypeError("maxAge must be a number");const i=s?Date.now():0,h=this[LENGTH_CALCULATOR](e,t);if(this[CACHE].has(t)){if(h>this[MAX])return del(this,this[CACHE].get(t)),!1;const n=this[CACHE].get(t).value;return this[DISPOSE]&&(this[NO_DISPOSE_ON_SET]||this[DISPOSE](t,n.value)),n.now=i,n.maxAge=s,n.value=e,this[LENGTH]+=h-n.length,n.length=h,this.get(t),trim(this),!0}const n=new Entry(t,e,h,i,s);return n.length>this[MAX]?(this[DISPOSE]&&this[DISPOSE](t,e),!1):(this[LENGTH]+=n.length,this[LRU_LIST].unshift(n),this[CACHE].set(t,this[LRU_LIST].head),trim(this),!0)}has(t){if(!this[CACHE].has(t))return!1;const e=this[CACHE].get(t).value;return!isStale(this,e)}get(t){return get(this,t,!0)}peek(t){return get(this,t,!1)}pop(){const t=this[LRU_LIST].tail;return t?(del(this,t),t.value):null}del(t){del(this,this[CACHE].get(t))}load(t){this.reset();const e=Date.now();for(let s=t.length-1;s>=0;s--){const i=t[s],h=i.e||0;if(0===h)this.set(i.k,i.v);else{const t=h-e;t>0&&this.set(i.k,i.v,t)}}}prune(){this[CACHE].forEach((t,e)=>get(this,e,!1))}}const get=(t,e,s)=>{const i=t[CACHE].get(e);if(i){const e=i.value;if(isStale(t,e)){if(del(t,i),!t[ALLOW_STALE])return}else s&&(t[UPDATE_AGE_ON_GET]&&(i.value.now=Date.now()),t[LRU_LIST].unshiftNode(i));return e.value}},isStale=(t,e)=>{if(!e||!e.maxAge&&!t[MAX_AGE])return!1;const s=Date.now()-e.now;return e.maxAge?s>e.maxAge:t[MAX_AGE]&&s>t[MAX_AGE]},trim=t=>{if(t[LENGTH]>t[MAX])for(let e=t[LRU_LIST].tail;t[LENGTH]>t[MAX]&&null!==e;){const s=e.prev;del(t,e),e=s}},del=(t,e)=>{if(e){const s=e.value;t[DISPOSE]&&t[DISPOSE](s.key,s.value),t[LENGTH]-=s.length,t[CACHE].delete(s.key),t[LRU_LIST].removeNode(e)}};class Entry{constructor(t,e,s,i,h){this.key=t,this.value=e,this.length=s,this.now=i,this.maxAge=h||0}}const forEachStep=(t,e,s,i)=>{let h=s.value;isStale(t,h)&&(del(t,s),t[ALLOW_STALE]||(h=void 0)),h&&e.call(i,h.value,h.key,t)};module.exports=LRUCache;

},{"yallist":74}],54:[function(require,module,exports){
(function (Buffer){
var api={};module.exports=api;var _reverseAlphabets={};function _encodeWithByteBuffer(r,e){var t=0,n=e.length,o=e.charAt(0),a=[0];for(t=0;t<r.length();++t){for(var f=0,h=r.at(t);f<a.length;++f)h+=a[f]<<8,a[f]=h%n,h=h/n|0;for(;h>0;)a.push(h%n),h=h/n|0}var i="";for(t=0;0===r.at(t)&&t<r.length()-1;++t)i+=o;for(t=a.length-1;t>=0;--t)i+=e[a[t]];return i}api.encode=function(r,e,t){if("string"!=typeof e)throw new TypeError('"alphabet" must be a string.');if(void 0!==t&&"number"!=typeof t)throw new TypeError('"maxline" must be a number.');var n="";if(r instanceof Uint8Array){var o=0,a=e.length,f=e.charAt(0),h=[0];for(o=0;o<r.length;++o){for(var i=0,p=r[o];i<h.length;++i)p+=h[i]<<8,h[i]=p%a,p=p/a|0;for(;p>0;)h.push(p%a),p=p/a|0}for(o=0;0===r[o]&&o<r.length-1;++o)n+=f;for(o=h.length-1;o>=0;--o)n+=e[h[o]]}else n=_encodeWithByteBuffer(r,e);if(t){var s=new RegExp(".{1,"+t+"}","g");n=n.match(s).join("\r\n")}return n},api.decode=function(r,e){if("string"!=typeof r)throw new TypeError('"input" must be a string.');if("string"!=typeof e)throw new TypeError('"alphabet" must be a string.');var t=_reverseAlphabets[e];if(!t){t=_reverseAlphabets[e]=[];for(var n=0;n<e.length;++n)t[e.charCodeAt(n)]=n}r=r.replace(/\s/g,"");var o=e.length,a=e.charAt(0),f=[0];for(n=0;n<r.length;n++){var h=t[r.charCodeAt(n)];if(void 0===h)return;for(var i=0,p=h;i<f.length;++i)p+=f[i]*o,f[i]=255&p,p>>=8;for(;p>0;)f.push(255&p),p>>=8}for(var s=0;r[s]===a&&s<r.length-1;++s)f.push(0);return"undefined"!=typeof Buffer?Buffer.from(f.reverse()):new Uint8Array(f.reverse())};

}).call(this,require("buffer").Buffer)
},{"buffer":28}],55:[function(require,module,exports){
module.exports={options:{usePureJavaScript:!1}};

},{}],56:[function(require,module,exports){
var forge=require("./forge");module.exports=forge.md=forge.md||{},forge.md.algorithms=forge.md.algorithms||{};

},{"./forge":55}],57:[function(require,module,exports){
var forge=require("./forge");require("./md"),require("./util");var sha1=module.exports=forge.sha1=forge.sha1||{};forge.md.sha1=forge.md.algorithms.sha1=sha1,sha1.create=function(){_initialized||_init();var e=null,t=forge.util.createBuffer(),h=new Array(80),g={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){g.messageLength=0,g.fullMessageLength=g.messageLength64=[];for(var h=g.messageLengthSize/4,r=0;r<h;++r)g.fullMessageLength.push(0);return t=forge.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},g}};return g.start(),g.update=function(r,n){"utf8"===n&&(r=forge.util.encodeUtf8(r));var a=r.length;g.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var s=g.fullMessageLength.length-1;s>=0;--s)g.fullMessageLength[s]+=a[1],a[1]=a[0]+(g.fullMessageLength[s]/4294967296>>>0),g.fullMessageLength[s]=g.fullMessageLength[s]>>>0,a[0]=a[1]/4294967296>>>0;return t.putBytes(r),_update(e,h,t),(t.read>2048||0===t.length())&&t.compact(),g},g.digest=function(){var r=forge.util.createBuffer();r.putBytes(t.bytes());var n,a=g.fullMessageLength[g.fullMessageLength.length-1]+g.messageLengthSize&g.blockLength-1;r.putBytes(_padding.substr(0,g.blockLength-a));for(var s=8*g.fullMessageLength[0],u=0;u<g.fullMessageLength.length-1;++u)s+=(n=8*g.fullMessageLength[u+1])/4294967296>>>0,r.putInt32(s>>>0),s=n>>>0;r.putInt32(s);var l={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4};_update(l,h,r);var f=forge.util.createBuffer();return f.putInt32(l.h0),f.putInt32(l.h1),f.putInt32(l.h2),f.putInt32(l.h3),f.putInt32(l.h4),f},g};var _padding=null,_initialized=!1;function _init(){_padding=String.fromCharCode(128),_padding+=forge.util.fillString(String.fromCharCode(0),64),_initialized=!0}function _update(e,t,h){for(var g,r,n,a,s,u,l,f=h.length();f>=64;){for(r=e.h0,n=e.h1,a=e.h2,s=e.h3,u=e.h4,l=0;l<16;++l)g=h.getInt32(),t[l]=g,g=(r<<5|r>>>27)+(s^n&(a^s))+u+1518500249+g,u=s,s=a,a=(n<<30|n>>>2)>>>0,n=r,r=g;for(;l<20;++l)g=(g=t[l-3]^t[l-8]^t[l-14]^t[l-16])<<1|g>>>31,t[l]=g,g=(r<<5|r>>>27)+(s^n&(a^s))+u+1518500249+g,u=s,s=a,a=(n<<30|n>>>2)>>>0,n=r,r=g;for(;l<32;++l)g=(g=t[l-3]^t[l-8]^t[l-14]^t[l-16])<<1|g>>>31,t[l]=g,g=(r<<5|r>>>27)+(n^a^s)+u+1859775393+g,u=s,s=a,a=(n<<30|n>>>2)>>>0,n=r,r=g;for(;l<40;++l)g=(g=t[l-6]^t[l-16]^t[l-28]^t[l-32])<<2|g>>>30,t[l]=g,g=(r<<5|r>>>27)+(n^a^s)+u+1859775393+g,u=s,s=a,a=(n<<30|n>>>2)>>>0,n=r,r=g;for(;l<60;++l)g=(g=t[l-6]^t[l-16]^t[l-28]^t[l-32])<<2|g>>>30,t[l]=g,g=(r<<5|r>>>27)+(n&a|s&(n^a))+u+2400959708+g,u=s,s=a,a=(n<<30|n>>>2)>>>0,n=r,r=g;for(;l<80;++l)g=(g=t[l-6]^t[l-16]^t[l-28]^t[l-32])<<2|g>>>30,t[l]=g,g=(r<<5|r>>>27)+(n^a^s)+u+3395469782+g,u=s,s=a,a=(n<<30|n>>>2)>>>0,n=r,r=g;e.h0=e.h0+r|0,e.h1=e.h1+n|0,e.h2=e.h2+a|0,e.h3=e.h3+s|0,e.h4=e.h4+u|0,f-=64}}

},{"./forge":55,"./md":56,"./util":59}],58:[function(require,module,exports){
var forge=require("./forge");require("./md"),require("./util");var sha256=module.exports=forge.sha256=forge.sha256||{};forge.md.sha256=forge.md.algorithms.sha256=sha256,sha256.create=function(){_initialized||_init();var e=null,t=forge.util.createBuffer(),h=new Array(64),n={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var h=n.messageLengthSize/4,g=0;g<h;++g)n.fullMessageLength.push(0);return t=forge.util.createBuffer(),e={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},n}};return n.start(),n.update=function(g,r){"utf8"===r&&(g=forge.util.encodeUtf8(g));var a=g.length;n.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var u=n.fullMessageLength.length-1;u>=0;--u)n.fullMessageLength[u]+=a[1],a[1]=a[0]+(n.fullMessageLength[u]/4294967296>>>0),n.fullMessageLength[u]=n.fullMessageLength[u]>>>0,a[0]=a[1]/4294967296>>>0;return t.putBytes(g),_update(e,h,t),(t.read>2048||0===t.length())&&t.compact(),n},n.digest=function(){var g=forge.util.createBuffer();g.putBytes(t.bytes());var r,a=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize&n.blockLength-1;g.putBytes(_padding.substr(0,n.blockLength-a));for(var u=8*n.fullMessageLength[0],s=0;s<n.fullMessageLength.length-1;++s)u+=(r=8*n.fullMessageLength[s+1])/4294967296>>>0,g.putInt32(u>>>0),u=r>>>0;g.putInt32(u);var l={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4,h5:e.h5,h6:e.h6,h7:e.h7};_update(l,h,g);var f=forge.util.createBuffer();return f.putInt32(l.h0),f.putInt32(l.h1),f.putInt32(l.h2),f.putInt32(l.h3),f.putInt32(l.h4),f.putInt32(l.h5),f.putInt32(l.h6),f.putInt32(l.h7),f},n};var _padding=null,_initialized=!1,_k=null;function _init(){_padding=String.fromCharCode(128),_padding+=forge.util.fillString(String.fromCharCode(0),64),_k=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],_initialized=!0}function _update(e,t,h){for(var n,g,r,a,u,s,l,f,i,o,d,p,L,c=h.length();c>=64;){for(u=0;u<16;++u)t[u]=h.getInt32();for(;u<64;++u)n=((n=t[u-2])>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,g=((g=t[u-15])>>>7|g<<25)^(g>>>18|g<<14)^g>>>3,t[u]=n+t[u-7]+g+t[u-16]|0;for(s=e.h0,l=e.h1,f=e.h2,i=e.h3,o=e.h4,d=e.h5,p=e.h6,L=e.h7,u=0;u<64;++u)r=(s>>>2|s<<30)^(s>>>13|s<<19)^(s>>>22|s<<10),a=s&l|f&(s^l),n=L+((o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7))+(p^o&(d^p))+_k[u]+t[u],L=p,p=d,d=o,o=i+n>>>0,i=f,f=l,l=s,s=n+(g=r+a)>>>0;e.h0=e.h0+s|0,e.h1=e.h1+l|0,e.h2=e.h2+f|0,e.h3=e.h3+i|0,e.h4=e.h4+o|0,e.h5=e.h5+d|0,e.h6=e.h6+p|0,e.h7=e.h7+L|0,c-=64}}

},{"./forge":55,"./md":56,"./util":59}],59:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,setImmediate){
var forge=require("./forge"),baseN=require("./baseN"),util=module.exports=forge.util=forge.util||{};function _checkBitsParam(t){if(8!==t&&16!==t&&24!==t&&32!==t)throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}function ByteStringBuffer(t){if(this.data="",this.read=0,"string"==typeof t)this.data=t;else if(util.isArrayBuffer(t)||util.isArrayBufferView(t))if("undefined"!=typeof Buffer&&t instanceof Buffer)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch(t){for(var r=0;r<e.length;++r)this.putByte(e[r])}}else(t instanceof ByteStringBuffer||"object"==typeof t&&"string"==typeof t.data&&"number"==typeof t.read)&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}!function(){if("undefined"!=typeof process&&process.nextTick&&!process.browser)return util.nextTick=process.nextTick,void("function"==typeof setImmediate?util.setImmediate=setImmediate:util.setImmediate=util.nextTick);if("function"==typeof setImmediate)return util.setImmediate=function(){return setImmediate.apply(void 0,arguments)},void(util.nextTick=function(t){return setImmediate(t)});if(util.setImmediate=function(t){setTimeout(t,0)},"undefined"!=typeof window&&"function"==typeof window.postMessage){var t="forge.setImmediate",e=[];util.setImmediate=function(r){e.push(r),1===e.length&&window.postMessage(t,"*")},window.addEventListener("message",function(r){if(r.source===window&&r.data===t){r.stopPropagation();var i=e.slice();e.length=0,i.forEach(function(t){t()})}},!0)}if("undefined"!=typeof MutationObserver){var r=Date.now(),i=!0,n=document.createElement("div");e=[];new MutationObserver(function(){var t=e.slice();e.length=0,t.forEach(function(t){t()})}).observe(n,{attributes:!0});var a=util.setImmediate;util.setImmediate=function(t){Date.now()-r>15?(r=Date.now(),a(t)):(e.push(t),1===e.length&&n.setAttribute("a",i=!i))}}util.nextTick=util.setImmediate}(),util.isNodejs="undefined"!=typeof process&&process.versions&&process.versions.node,util.globalScope=util.isNodejs?global:"undefined"==typeof self?window:self,util.isArray=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},util.isArrayBuffer=function(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer},util.isArrayBufferView=function(t){return t&&util.isArrayBuffer(t.buffer)&&void 0!==t.byteLength},util.ByteBuffer=ByteStringBuffer,util.ByteStringBuffer=ByteStringBuffer;var _MAX_CONSTRUCTED_STRING_LENGTH=4096;function DataBuffer(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var r=util.isArrayBuffer(t),i=util.isArrayBufferView(t);if(r||i)return this.data=r?new DataView(t):new DataView(t.buffer,t.byteOffset,t.byteLength),void(this.write="writeOffset"in e?e.writeOffset:this.data.byteLength);this.data=new DataView(new ArrayBuffer(0)),this.write=0,null!=t&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)}util.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>_MAX_CONSTRUCTED_STRING_LENGTH&&(this.data.substr(0,1),this._constructedStringLength=0)},util.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},util.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},util.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))},util.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var r=this.data;e>0;)1&e&&(r+=t),(e>>>=1)>0&&(t+=t);return this.data=r,this._optimizeConstructedString(e),this},util.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this},util.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(util.encodeUtf8(t))},util.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},util.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},util.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},util.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255))},util.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))},util.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))},util.ByteStringBuffer.prototype.putInt=function(t,e){_checkBitsParam(e);var r="";do{e-=8,r+=String.fromCharCode(t>>e&255)}while(e>0);return this.putBytes(r)},util.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)},util.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())},util.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},util.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t},util.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t},util.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t},util.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t},util.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t},util.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t},util.ByteStringBuffer.prototype.getInt=function(t){_checkBitsParam(t);var e=0;do{e=(e<<8)+this.data.charCodeAt(this.read++),t-=8}while(t>0);return e},util.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e},util.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):0===t?e="":(e=0===this.read?this.data:this.data.slice(this.read),this.clear()),e},util.ByteStringBuffer.prototype.bytes=function(t){return void 0===t?this.data.slice(this.read):this.data.slice(this.read,this.read+t)},util.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)},util.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this},util.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},util.ByteStringBuffer.prototype.copy=function(){var t=util.createBuffer(this.data);return t.read=this.read,t},util.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},util.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this},util.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this},util.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var r=this.data.charCodeAt(e);r<16&&(t+="0"),t+=r.toString(16)}return t},util.ByteStringBuffer.prototype.toString=function(){return util.decodeUtf8(this.bytes())},util.DataBuffer=DataBuffer,util.DataBuffer.prototype.length=function(){return this.write-this.read},util.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},util.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),i=new Uint8Array(this.length()+e);return i.set(r),this.data=new DataView(i.buffer),this},util.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this},util.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var r=0;r<e;++r)this.data.setUint8(t);return this},util.DataBuffer.prototype.putBytes=function(t,e){if(util.isArrayBufferView(t)){var r=(i=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)).byteLength-i.byteOffset;return this.accommodate(r),new Uint8Array(this.data.buffer,this.write).set(i),this.write+=r,this}if(util.isArrayBuffer(t)){var i=new Uint8Array(t);return this.accommodate(i.byteLength),new Uint8Array(this.data.buffer).set(i,this.write),this.write+=i.byteLength,this}if(t instanceof util.DataBuffer||"object"==typeof t&&"number"==typeof t.read&&"number"==typeof t.write&&util.isArrayBufferView(t.data)){i=new Uint8Array(t.data.byteLength,t.read,t.length());return this.accommodate(i.byteLength),new Uint8Array(t.data.byteLength,this.write).set(i),this.write+=i.byteLength,this}if(t instanceof util.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary","string"==typeof t){var n;if("hex"===e)return this.accommodate(Math.ceil(t.length/2)),n=new Uint8Array(this.data.buffer,this.write),this.write+=util.binary.hex.decode(t,n,this.write),this;if("base64"===e)return this.accommodate(3*Math.ceil(t.length/4)),n=new Uint8Array(this.data.buffer,this.write),this.write+=util.binary.base64.decode(t,n,this.write),this;if("utf8"===e&&(t=util.encodeUtf8(t),e="binary"),"binary"===e||"raw"===e)return this.accommodate(t.length),n=new Uint8Array(this.data.buffer,this.write),this.write+=util.binary.raw.decode(n),this;if("utf16"===e)return this.accommodate(2*t.length),n=new Uint16Array(this.data.buffer,this.write),this.write+=util.text.utf16.encode(n),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)},util.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this},util.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")},util.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this},util.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this},util.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this},util.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this},util.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this},util.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this},util.DataBuffer.prototype.putInt=function(t,e){_checkBitsParam(e),this.accommodate(e/8);do{e-=8,this.data.setInt8(this.write++,t>>e&255)}while(e>0);return this},util.DataBuffer.prototype.putSignedInt=function(t,e){return _checkBitsParam(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)},util.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},util.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t},util.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t},util.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t},util.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t},util.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t},util.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t},util.DataBuffer.prototype.getInt=function(t){_checkBitsParam(t);var e=0;do{e=(e<<8)+this.data.getInt8(this.read++),t-=8}while(t>0);return e},util.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e},util.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):0===t?e="":(e=0===this.read?this.data:this.data.slice(this.read),this.clear()),e},util.DataBuffer.prototype.bytes=function(t){return void 0===t?this.data.slice(this.read):this.data.slice(this.read,this.read+t)},util.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)},util.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this},util.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},util.DataBuffer.prototype.copy=function(){return new util.DataBuffer(this)},util.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this},util.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},util.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this},util.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var r=this.data.getUint8(e);r<16&&(t+="0"),t+=r.toString(16)}return t},util.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if("binary"===(t=t||"utf8")||"raw"===t)return util.binary.raw.encode(e);if("hex"===t)return util.binary.hex.encode(e);if("base64"===t)return util.binary.base64.encode(e);if("utf8"===t)return util.text.utf8.decode(e);if("utf16"===t)return util.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)},util.createBuffer=function(t,e){return e=e||"raw",void 0!==t&&"utf8"===e&&(t=util.encodeUtf8(t)),new util.ByteBuffer(t)},util.fillString=function(t,e){for(var r="";e>0;)1&e&&(r+=t),(e>>>=1)>0&&(t+=t);return r},util.xorBytes=function(t,e,r){for(var i="",n="",a="",u=0,o=0;r>0;--r,++u)n=t.charCodeAt(u)^e.charCodeAt(u),o>=10&&(i+=a,a="",o=0),a+=String.fromCharCode(n),++o;return i+=a},util.hexToBytes=function(t){var e="",r=0;for(!0&t.length&&(r=1,e+=String.fromCharCode(parseInt(t[0],16)));r<t.length;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e},util.bytesToHex=function(t){return util.createBuffer(t).toHex()},util.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t)};var _base64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_base64Idx=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],_base58="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";util.encode64=function(t,e){for(var r,i,n,a="",u="",o=0;o<t.length;)r=t.charCodeAt(o++),i=t.charCodeAt(o++),n=t.charCodeAt(o++),a+=_base64.charAt(r>>2),a+=_base64.charAt((3&r)<<4|i>>4),isNaN(i)?a+="==":(a+=_base64.charAt((15&i)<<2|n>>6),a+=isNaN(n)?"=":_base64.charAt(63&n)),e&&a.length>e&&(u+=a.substr(0,e)+"\r\n",a=a.substr(e));return u+=a},util.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e,r,i,n,a="",u=0;u<t.length;)e=_base64Idx[t.charCodeAt(u++)-43],r=_base64Idx[t.charCodeAt(u++)-43],i=_base64Idx[t.charCodeAt(u++)-43],n=_base64Idx[t.charCodeAt(u++)-43],a+=String.fromCharCode(e<<2|r>>4),64!==i&&(a+=String.fromCharCode((15&r)<<4|i>>2),64!==n&&(a+=String.fromCharCode((3&i)<<6|n)));return a},util.encodeUtf8=function(t){return unescape(encodeURIComponent(t))},util.decodeUtf8=function(t){return decodeURIComponent(escape(t))},util.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:baseN.encode,decode:baseN.decode}},util.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)},util.binary.raw.decode=function(t,e,r){var i=e;i||(i=new Uint8Array(t.length));for(var n=r=r||0,a=0;a<t.length;++a)i[n++]=t.charCodeAt(a);return e?n-r:i},util.binary.hex.encode=util.bytesToHex,util.binary.hex.decode=function(t,e,r){var i=e;i||(i=new Uint8Array(Math.ceil(t.length/2)));var n=0,a=r=r||0;for(1&t.length&&(n=1,i[a++]=parseInt(t[0],16));n<t.length;n+=2)i[a++]=parseInt(t.substr(n,2),16);return e?a-r:i},util.binary.base64.encode=function(t,e){for(var r,i,n,a="",u="",o=0;o<t.byteLength;)r=t[o++],i=t[o++],n=t[o++],a+=_base64.charAt(r>>2),a+=_base64.charAt((3&r)<<4|i>>4),isNaN(i)?a+="==":(a+=_base64.charAt((15&i)<<2|n>>6),a+=isNaN(n)?"=":_base64.charAt(63&n)),e&&a.length>e&&(u+=a.substr(0,e)+"\r\n",a=a.substr(e));return u+=a},util.binary.base64.decode=function(t,e,r){var i,n,a,u,o=e;o||(o=new Uint8Array(3*Math.ceil(t.length/4))),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var s=0,f=r=r||0;s<t.length;)i=_base64Idx[t.charCodeAt(s++)-43],n=_base64Idx[t.charCodeAt(s++)-43],a=_base64Idx[t.charCodeAt(s++)-43],u=_base64Idx[t.charCodeAt(s++)-43],o[f++]=i<<2|n>>4,64!==a&&(o[f++]=(15&n)<<4|a>>2,64!==u&&(o[f++]=(3&a)<<6|u));return e?f-r:o.subarray(0,f)},util.binary.base58.encode=function(t,e){return util.binary.baseN.encode(t,_base58,e)},util.binary.base58.decode=function(t,e){return util.binary.baseN.decode(t,_base58,e)},util.text={utf8:{},utf16:{}},util.text.utf8.encode=function(t,e,r){t=util.encodeUtf8(t);var i=e;i||(i=new Uint8Array(t.length));for(var n=r=r||0,a=0;a<t.length;++a)i[n++]=t.charCodeAt(a);return e?n-r:i},util.text.utf8.decode=function(t){return util.decodeUtf8(String.fromCharCode.apply(null,t))},util.text.utf16.encode=function(t,e,r){var i=e;i||(i=new Uint8Array(2*t.length));for(var n=new Uint16Array(i.buffer),a=r=r||0,u=r,o=0;o<t.length;++o)n[u++]=t.charCodeAt(o),a+=2;return e?a-r:i},util.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))},util.deflate=function(t,e,r){if(e=util.decode64(t.deflate(util.encode64(e)).rval),r){var i=2;32&e.charCodeAt(1)&&(i=6),e=e.substring(i,e.length-4)}return e},util.inflate=function(t,e,r){var i=t.inflate(util.encode64(e)).rval;return null===i?null:util.decode64(i)};var _setStorageObject=function(t,e,r){if(!t)throw new Error("WebStorage not available.");var i;if(null===r?i=t.removeItem(e):(r=util.encode64(JSON.stringify(r)),i=t.setItem(e,r)),void 0!==i&&!0!==i.rval){var n=new Error(i.error.message);throw n.id=i.error.id,n.name=i.error.name,n}},_getStorageObject=function(t,e){if(!t)throw new Error("WebStorage not available.");var r=t.getItem(e);if(t.init)if(null===r.rval){if(r.error){var i=new Error(r.error.message);throw i.id=r.error.id,i.name=r.error.name,i}r=null}else r=r.rval;return null!==r&&(r=JSON.parse(util.decode64(r))),r},_setItem=function(t,e,r,i){var n=_getStorageObject(t,e);null===n&&(n={}),n[r]=i,_setStorageObject(t,e,n)},_getItem=function(t,e,r){var i=_getStorageObject(t,e);return null!==i&&(i=r in i?i[r]:null),i},_removeItem=function(t,e,r){var i=_getStorageObject(t,e);if(null!==i&&r in i){delete i[r];var n=!0;for(var a in i){n=!1;break}n&&(i=null),_setStorageObject(t,e,i)}},_clearItems=function(t,e){_setStorageObject(t,e,null)},_callStorageFunction=function(t,e,r){var i,n=null;void 0===r&&(r=["web","flash"]);var a=!1,u=null;for(var o in r){i=r[o];try{if("flash"===i||"both"===i){if(null===e[0])throw new Error("Flash local storage not available.");n=t.apply(this,e),a="flash"===i}"web"!==i&&"both"!==i||(e[0]=localStorage,n=t.apply(this,e),a=!0)}catch(t){u=t}if(a)break}if(!a)throw u;return n};util.setItem=function(t,e,r,i,n){_callStorageFunction(_setItem,arguments,n)},util.getItem=function(t,e,r,i){return _callStorageFunction(_getItem,arguments,i)},util.removeItem=function(t,e,r,i){_callStorageFunction(_removeItem,arguments,i)},util.clearItems=function(t,e,r){_callStorageFunction(_clearItems,arguments,r)},util.parseUrl=function(t){var e=/^(https?):\/\/([^:&^\/]*):?(\d*)(.*)$/g;e.lastIndex=0;var r=e.exec(t),i=null===r?null:{full:t,scheme:r[1],host:r[2],port:r[3],path:r[4]};return i&&(i.fullHost=i.host,i.port?80!==i.port&&"http"===i.scheme?i.fullHost+=":"+i.port:443!==i.port&&"https"===i.scheme&&(i.fullHost+=":"+i.port):"http"===i.scheme?i.port=80:"https"===i.scheme&&(i.port=443),i.full=i.scheme+"://"+i.fullHost),i};var _queryVariables=null;util.getQueryVariables=function(t){var e,r=function(t){for(var e={},r=t.split("&"),i=0;i<r.length;i++){var n,a,u=r[i].indexOf("=");u>0?(n=r[i].substring(0,u),a=r[i].substring(u+1)):(n=r[i],a=null),n in e||(e[n]=[]),n in Object.prototype||null===a||e[n].push(unescape(a))}return e};return void 0===t?(null===_queryVariables&&(_queryVariables="undefined"!=typeof window&&window.location&&window.location.search?r(window.location.search.substring(1)):{}),e=_queryVariables):e=r(t),e},util.parseFragment=function(t){var e=t,r="",i=t.indexOf("?");i>0&&(e=t.substring(0,i),r=t.substring(i+1));var n=e.split("/");return n.length>0&&""===n[0]&&n.shift(),{pathString:e,queryString:r,path:n,query:""===r?{}:util.getQueryVariables(r)}},util.makeRequest=function(t){var e=util.parseFragment(t),r={path:e.pathString,query:e.queryString,getPath:function(t){return void 0===t?e.path:e.path[t]},getQuery:function(t,r){var i;return void 0===t?i=e.query:(i=e.query[t])&&void 0!==r&&(i=i[r]),i},getQueryLast:function(t,e){var i=r.getQuery(t);return i?i[i.length-1]:e}};return r},util.makeLink=function(t,e,r){t=jQuery.isArray(t)?t.join("/"):t;var i=jQuery.param(e||{});return r=r||"",t+(i.length>0?"?"+i:"")+(r.length>0?"#"+r:"")},util.setPath=function(t,e,r){if("object"==typeof t&&null!==t)for(var i=0,n=e.length;i<n;){var a=e[i++];if(i==n)t[a]=r;else{var u=a in t;(!u||u&&"object"!=typeof t[a]||u&&null===t[a])&&(t[a]={}),t=t[a]}}},util.getPath=function(t,e,r){for(var i=0,n=e.length,a=!0;a&&i<n&&"object"==typeof t&&null!==t;){var u=e[i++];(a=u in t)&&(t=t[u])}return a?t:r},util.deletePath=function(t,e){if("object"==typeof t&&null!==t)for(var r=0,i=e.length;r<i;){var n=e[r++];if(r==i)delete t[n];else{if(!(n in t)||"object"!=typeof t[n]||null===t[n])break;t=t[n]}}},util.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},util.format=function(t){for(var e,r,i=/%./g,n=0,a=[],u=0;e=i.exec(t);){(r=t.substring(u,i.lastIndex-2)).length>0&&a.push(r),u=i.lastIndex;var o=e[0][1];switch(o){case"s":case"o":n<arguments.length?a.push(arguments[1+n++]):a.push("<?>");break;case"%":a.push("%");break;default:a.push("<%"+o+"?>")}}return a.push(t.substring(u)),a.join("")},util.formatNumber=function(t,e,r,i){var n=t,a=isNaN(e=Math.abs(e))?2:e,u=void 0===r?",":r,o=void 0===i?".":i,s=n<0?"-":"",f=parseInt(n=Math.abs(+n||0).toFixed(a),10)+"",h=f.length>3?f.length%3:0;return s+(h?f.substr(0,h)+o:"")+f.substr(h).replace(/(\d{3})(?=\d)/g,"$1"+o)+(a?u+Math.abs(n-f).toFixed(a).slice(2):"")},util.formatSize=function(t){return t=t>=1073741824?util.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?util.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?util.formatNumber(t/1024,0)+" KiB":util.formatNumber(t,0)+" bytes"},util.bytesFromIP=function(t){return-1!==t.indexOf(".")?util.bytesFromIPv4(t):-1!==t.indexOf(":")?util.bytesFromIPv6(t):null},util.bytesFromIPv4=function(t){if(4!==(t=t.split(".")).length)return null;for(var e=util.createBuffer(),r=0;r<t.length;++r){var i=parseInt(t[r],10);if(isNaN(i))return null;e.putByte(i)}return e.getBytes()},util.bytesFromIPv6=function(t){for(var e=0,r=2*(8-(t=t.split(":").filter(function(t){return 0===t.length&&++e,!0})).length+e),i=util.createBuffer(),n=0;n<8;++n)if(t[n]&&0!==t[n].length){var a=util.hexToBytes(t[n]);a.length<2&&i.putByte(0),i.putBytes(a)}else i.fillWithByte(0,r),r=0;return i.getBytes()},util.bytesToIP=function(t){return 4===t.length?util.bytesToIPv4(t):16===t.length?util.bytesToIPv6(t):null},util.bytesToIPv4=function(t){if(4!==t.length)return null;for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e.join(".")},util.bytesToIPv6=function(t){if(16!==t.length)return null;for(var e=[],r=[],i=0,n=0;n<t.length;n+=2){for(var a=util.bytesToHex(t[n]+t[n+1]);"0"===a[0]&&"0"!==a;)a=a.substr(1);if("0"===a){var u=r[r.length-1],o=e.length;u&&o===u.end+1?(u.end=o,u.end-u.start>r[i].end-r[i].start&&(i=r.length-1)):r.push({start:o,end:o})}e.push(a)}if(r.length>0){var s=r[i];s.end-s.start>0&&(e.splice(s.start,s.end-s.start+1,""),0===s.start&&e.unshift(""),7===s.end&&e.push(""))}return e.join(":")},util.estimateCores=function(t,e){if("function"==typeof t&&(e=t,t={}),t=t||{},"cores"in util&&!t.update)return e(null,util.cores);if("undefined"!=typeof navigator&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return util.cores=navigator.hardwareConcurrency,e(null,util.cores);if("undefined"==typeof Worker)return util.cores=1,e(null,util.cores);if("undefined"==typeof Blob)return util.cores=2,e(null,util.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(t){for(var e=Date.now(),r=e+4;Date.now()<r;);self.postMessage({st:e,et:r})})}.toString(),")()"],{type:"application/javascript"}));!function t(i,n,a){if(0===n){var u=Math.floor(i.reduce(function(t,e){return t+e},0)/i.length);return util.cores=Math.max(1,u),URL.revokeObjectURL(r),e(null,util.cores)}!function(t,e){for(var i=[],n=[],a=0;a<t;++a){var u=new Worker(r);u.addEventListener("message",function(r){if(n.push(r.data),n.length===t){for(var a=0;a<t;++a)i[a].terminate();e(null,n)}}),i.push(u)}for(var a=0;a<t;++a)i[a].postMessage(a)}(a,function(e,r){i.push(function(t,e){for(var r=[],i=0;i<t;++i)for(var n=e[i],a=r[i]=[],u=0;u<t;++u)if(i!==u){var o=e[u];(n.st>o.st&&n.st<o.et||o.st>n.st&&o.st<n.et)&&a.push(u)}return r.reduce(function(t,e){return Math.max(t,e.length)},0)}(a,r)),t(i,n-1,a)})}([],5,16)};

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],require("timers").setImmediate)
},{"./baseN":54,"./forge":55,"_process":60,"buffer":28,"timers":72}],60:[function(require,module,exports){
var cachedSetTimeout,cachedClearTimeout,process=module.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(e){if(cachedSetTimeout===setTimeout)return setTimeout(e,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(e,0);try{return cachedSetTimeout(e,0)}catch(t){try{return cachedSetTimeout.call(null,e,0)}catch(t){return cachedSetTimeout.call(this,e,0)}}}function runClearTimeout(e){if(cachedClearTimeout===clearTimeout)return clearTimeout(e);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(e);try{return cachedClearTimeout(e)}catch(t){try{return cachedClearTimeout.call(null,e)}catch(t){return cachedClearTimeout.call(this,e)}}}!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var currentQueue,queue=[],draining=!1,queueIndex=-1;function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var e=runTimeout(cleanUpNextTick);draining=!0;for(var t=queue.length;t;){for(currentQueue=queue,queue=[];++queueIndex<t;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,t=queue.length}currentQueue=null,draining=!1,runClearTimeout(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}process.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];queue.push(new Item(e,t)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.prependListener=noop,process.prependOnceListener=noop,process.listeners=function(e){return[]},process.binding=function(e){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(e){throw new Error("process.chdir is not supported")},process.umask=function(){return 0};

},{}],61:[function(require,module,exports){
"use strict";const util=require("./util");module.exports=class{constructor({maxCallStackDepth:t=500,maxTotalCallStackDepth:e=4294967295,timeSlice:i=10}={}){this.schedule={},this.schedule.MAX_DEPTH=t,this.schedule.MAX_TOTAL_DEPTH=e,this.schedule.depth=0,this.schedule.totalDepth=0,this.schedule.timeSlice=i}doWork(t,e){const i=this.schedule;if(i.totalDepth>=i.MAX_TOTAL_DEPTH)return e(new Error("Maximum total call stack depth exceeded; canonicalization aborting."));!function n(){if(i.depth===i.MAX_DEPTH)return i.depth=0,i.running=!1,util.nextTick(n);const l=Date.now();if(i.running||(i.start=Date.now(),i.deadline=i.start+i.timeSlice),l<i.deadline)return i.running=!0,i.depth++,i.totalDepth++,t((t,n)=>{i.depth--,i.totalDepth--,e(t,n)});i.depth=0,i.running=!1,util.setImmediate(n)}()}forEach(t,e,i){const n=this;let l,o,s=0;if(Array.isArray(t))o=t.length,l=(()=>s!==o&&(l.value=t[s++],l.key=s,!0));else{const e=Object.keys(t);o=e.length,l=(()=>s!==o&&(l.key=e[s++],l.value=t[l.key],!0))}!function t(o){return o?i(o):l()?n.doWork(()=>e(l.value,l.key,t)):void i()}()}waterfall(t,e){const i=this;i.forEach(t,(t,e,n)=>i.doWork(t,n),e)}whilst(t,e,i){const n=this;!function l(o){return o?i(o):t()?void n.doWork(e,l):i()}()}};

},{"./util":71}],62:[function(require,module,exports){
"use strict";const util=require("./util");module.exports=class t{constructor(t){this.prefix=t,this.counter=0,this.existing={}}clone(){const i=new t(this.prefix);return i.counter=this.counter,i.existing=util.clone(this.existing),i}getId(t){if(t&&t in this.existing)return this.existing[t];const i=this.prefix+this.counter;return this.counter+=1,t&&(this.existing[t]=i),i}hasId(t){return t in this.existing}};

},{"./util":71}],63:[function(require,module,exports){
"use strict";const forge=require("node-forge/lib/forge");require("node-forge/lib/md"),require("node-forge/lib/sha1"),require("node-forge/lib/sha256"),module.exports=class{constructor(e){this.md=forge.md[e].create()}update(e){this.md.update(e,"utf8")}digest(){return this.md.digest().toHex()}};

},{"node-forge/lib/forge":55,"node-forge/lib/md":56,"node-forge/lib/sha1":57,"node-forge/lib/sha256":58}],64:[function(require,module,exports){
"use strict";const TERMS=["subject","predicate","object","graph"],RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",RDF_LANGSTRING=RDF+"langString",XSD_STRING="http://www.w3.org/2001/XMLSchema#string",REGEX={};function _compareTriples(e,a){for(const t in e)if(e[t].termType!==a[t].termType||e[t].value!==a[t].value)return!1;return"Literal"!==e.object.termType||e.object.datatype.termType===a.object.datatype.termType&&e.object.datatype.value===a.object.datatype.value&&e.object.language===a.object.language}REGEX.eoln=/(?:\r\n)|(?:\n)|(?:\r)/g,REGEX.empty=new RegExp("^[ \\t]*$"),REGEX.quad=new RegExp('^[ \\t]*(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�_0-9])(?:(?:[A-Za-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�_0-9-·̀-ͯ‿-⁀.])*(?:[A-Za-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�_0-9-·̀-ͯ‿-⁀]))?))[ \\t]+(?:<([^:]+:[^>]*)>)[ \\t]+(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�_0-9])(?:(?:[A-Za-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�_0-9-·̀-ͯ‿-⁀.])*(?:[A-Za-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�_0-9-·̀-ͯ‿-⁀]))?)|(?:"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"(?:(?:\\^\\^(?:<([^:]+:[^>]*)>))|(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*)))?))[ \\t]*(?:\\.|(?:(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�_0-9])(?:(?:[A-Za-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�_0-9-·̀-ͯ‿-⁀.])*(?:[A-Za-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�_0-9-·̀-ͯ‿-⁀]))?))[ \\t]*\\.))[ \\t]*$'),module.exports=class e{static parse(e){const a=[],t={},r=e.split(REGEX.eoln);let n=0;for(const e of r){if(n++,REGEX.empty.test(e))continue;const r=e.match(REGEX.quad);if(null===r)throw new Error("N-Quads parse error on line "+n+".");const o={};if(void 0!==r[1]?o.subject={termType:"NamedNode",value:r[1]}:o.subject={termType:"BlankNode",value:r[2]},o.predicate={termType:"NamedNode",value:r[3]},void 0!==r[4]?o.object={termType:"NamedNode",value:r[4]}:void 0!==r[5]?o.object={termType:"BlankNode",value:r[5]}:(o.object={termType:"Literal",value:void 0,datatype:{termType:"NamedNode"}},void 0!==r[7]?o.object.datatype.value=r[7]:void 0!==r[8]?(o.object.datatype.value=RDF_LANGSTRING,o.object.language=r[8]):o.object.datatype.value=XSD_STRING,o.object.value=_unescape(r[6])),void 0!==r[9]?o.graph={termType:"NamedNode",value:r[9]}:void 0!==r[10]?o.graph={termType:"BlankNode",value:r[10]}:o.graph={termType:"DefaultGraph",value:""},o.graph.value in t){let e=!0;const r=t[o.graph.value];for(const a of r)if(_compareTriples(a,o)){e=!1;break}e&&(r.push(o),a.push(o))}else t[o.graph.value]=[o],a.push(o)}return a}static serialize(a){Array.isArray(a)||(a=e.legacyDatasetToQuads(a));const t=[];for(const r of a)t.push(e.serializeQuad(r));return t.sort().join("")}static serializeQuad(e){const a=e.subject,t=e.predicate,r=e.object,n=e.graph;let o="";return[a,t].forEach(e=>{"NamedNode"===e.termType?o+="<"+e.value+">":o+=e.value,o+=" "}),"NamedNode"===r.termType?o+="<"+r.value+">":"BlankNode"===r.termType?o+=r.value:(o+='"'+_escape(r.value)+'"',r.datatype.value===RDF_LANGSTRING?r.language&&(o+="@"+r.language):r.datatype.value!==XSD_STRING&&(o+="^^<"+r.datatype.value+">")),"NamedNode"===n.termType?o+=" <"+n.value+">":"BlankNode"===n.termType&&(o+=" "+n.value),o+=" .\n"}static legacyDatasetToQuads(e){const a=[],t={"blank node":"BlankNode",IRI:"NamedNode",literal:"Literal"};for(const r in e){e[r].forEach(e=>{const n={};for(const a in e){const r=e[a],o={termType:t[r.type],value:r.value};"Literal"===o.termType&&(o.datatype={termType:"NamedNode"},"datatype"in r&&(o.datatype.value=r.datatype),"language"in r?("datatype"in r||(o.datatype.value=RDF_LANGSTRING),o.language=r.language):"datatype"in r||(o.datatype.value=XSD_STRING)),n[a]=o}n.graph="@default"===r?{termType:"DefaultGraph",value:""}:{termType:r.startsWith("_:")?"BlankNode":"NamedNode",value:r},a.push(n)})}return a}};const _escapeRegex=/["\\\n\r]/g;function _escape(e){return e.replace(_escapeRegex,function(e){switch(e){case'"':return'\\"';case"\\":return"\\\\";case"\n":return"\\n";case"\r":return"\\r"}})}const _unescapeRegex=/(?:\\([tbnrf"'\\]))|(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g;function _unescape(e){return e.replace(_unescapeRegex,function(e,a,t,r){if(a)switch(a){case"t":return"\t";case"b":return"\b";case"n":return"\n";case"r":return"\r";case"f":return"\f";case'"':return'"';case"'":return"'";case"\\":return"\\"}if(t)return String.fromCharCode(parseInt(t,16));if(r)throw new Error("Unsupported U escape")})}

},{}],65:[function(require,module,exports){
"use strict";module.exports=class{constructor(t){this.list=t.sort(),this.done=!1,this.left={};for(let s=0;s<t.length;++s)this.left[t[s]]=!0}hasNext(){return!this.done}next(){const t=this.list.slice();let s=null,i=0;const l=this.list.length;for(let t=0;t<l;++t){const e=this.list[t],h=this.left[e];(null===s||e>s)&&(h&&t>0&&e>this.list[t-1]||!h&&t<l-1&&e>this.list[t+1])&&(s=e,i=t)}if(null===s)this.done=!0;else{const t=this.left[s]?i-1:i+1;this.list[i]=this.list[t],this.list[t]=s;for(let t=0;t<l;++t)this.list[t]>s&&(this.left[this.list[t]]=!this.left[this.list[t]])}return t}};

},{}],66:[function(require,module,exports){
"use strict";const AsyncAlgorithm=require("./AsyncAlgorithm"),IdentifierIssuer=require("./IdentifierIssuer"),MessageDigest=require("./MessageDigest"),Permutator=require("./Permutator"),NQuads=require("./NQuads"),util=require("./util"),POSITIONS={subject:"s",object:"o",graph:"g"};module.exports=class extends AsyncAlgorithm{constructor(e){super(e=e||{}),this.name="URDNA2015",this.options=Object.assign({},e),this.blankNodeInfo={},this.hashToBlankNodes={},this.canonicalIssuer=new IdentifierIssuer("_:c14n"),this.hashAlgorithm="sha256",this.quads}main(e,s){const t=this;let a;t.schedule.start=Date.now(),t.quads=e;const r={};t.waterfall([s=>{t.forEach(e,(e,s,a)=>{t.forEachComponent(e,s=>{if("BlankNode"!==s.termType)return;const a=s.value;a in t.blankNodeInfo?t.blankNodeInfo[a].quads.push(e):(r[a]=!0,t.blankNodeInfo[a]={quads:[e]})}),a()},s)},e=>{let s=!0;t.whilst(()=>s,e=>{s=!1,t.hashToBlankNodes={},t.waterfall([e=>{t.forEach(r,(e,s,a)=>{t.hashFirstDegreeQuads(s,(e,r)=>{if(e)return a(e);r in t.hashToBlankNodes?t.hashToBlankNodes[r].push(s):t.hashToBlankNodes[r]=[s],a()})},e)},e=>{const a=Object.keys(t.hashToBlankNodes).sort();t.forEach(a,(e,a,n)=>{const o=t.hashToBlankNodes[e];if(o.length>1)return n();const h=o[0];t.canonicalIssuer.getId(h),delete r[h],delete t.hashToBlankNodes[e],s=!0,n()},e)}],e)},e)},e=>{const s=Object.keys(t.hashToBlankNodes).sort();t.forEach(s,(e,s,a)=>{const r=[],n=t.hashToBlankNodes[e];t.waterfall([e=>{t.forEach(n,(e,s,a)=>{if(t.canonicalIssuer.hasId(e))return a();const n=new IdentifierIssuer("_:b");n.getId(e),t.hashNDegreeQuads(e,n,(e,s)=>{if(e)return a(e);r.push(s),a()})},e)},e=>{r.sort((e,s)=>e.hash<s.hash?-1:e.hash>s.hash?1:0),t.forEach(r,(e,s,a)=>{for(const s in e.issuer.existing)t.canonicalIssuer.getId(s);a()},e)}],a)},e)},e=>{const s=[];t.waterfall([e=>{t.forEach(t.quads,(e,a,r)=>{t.forEachComponent(e,e=>{"BlankNode"!==e.termType||e.value.startsWith(t.canonicalIssuer.prefix)||(e.value=t.canonicalIssuer.getId(e.value))}),s.push(NQuads.serializeQuad(e)),r()},e)},e=>(s.sort(),a=s.join(""),e())],e)}],e=>s(e,a))}hashFirstDegreeQuads(e,s){const t=this,a=t.blankNodeInfo[e];if("hash"in a)return s(null,a.hash);const r=[],n=a.quads;t.forEach(n,(s,a,n)=>{const o={predicate:s.predicate};t.forEachComponent(s,(s,a)=>{o[a]=t.modifyFirstDegreeComponent(e,s,a)}),r.push(NQuads.serializeQuad(o)),n()},e=>{if(e)return s(e);r.sort();const n=new MessageDigest(t.hashAlgorithm);for(let e=0;e<r.length;++e)n.update(r[e]);a.hash=n.digest(),s(null,a.hash)})}hashRelatedBlankNode(e,s,t,a,r){const n=this;let o;n.waterfall([s=>n.canonicalIssuer.hasId(e)?(o=n.canonicalIssuer.getId(e),s()):t.hasId(e)?(o=t.getId(e),s()):void n.hashFirstDegreeQuads(e,(e,t)=>{if(e)return s(e);o=t,s()})],e=>{if(e)return r(e);const t=new MessageDigest(n.hashAlgorithm);return t.update(a),"g"!==a&&t.update(n.getRelatedPredicate(s)),t.update(o),r(null,t.digest())})}hashNDegreeQuads(e,s,t){const a=this;let r;const n=new MessageDigest(a.hashAlgorithm);a.waterfall([t=>a.createHashToRelated(e,s,(e,s)=>{if(e)return t(e);r=s,t()}),e=>{const t=Object.keys(r).sort();a.forEach(t,(e,t,o)=>{n.update(e);let h,i="";const l=new Permutator(r[e]);a.whilst(()=>l.hasNext(),e=>{const t=l.next();let r=s.clone(),n="";const o=[];a.waterfall([s=>{a.forEach(t,(s,t,h)=>{if(a.canonicalIssuer.hasId(s)?n+=a.canonicalIssuer.getId(s):(r.hasId(s)||o.push(s),n+=r.getId(s)),0!==i.length&&n.length>=i.length&&n>i)return e();h()},s)},s=>{a.forEach(o,(s,t,o)=>{a.hashNDegreeQuads(s,r,(t,a)=>t?o(t):(n+=r.getId(s),n+="<"+a.hash+">",r=a.issuer,0!==i.length&&n.length>=i.length&&n>i?e():void o()))},s)},e=>{(0===i.length||n<i)&&(i=n,h=r),e()}],e)},e=>{if(e)return o(e);n.update(i),s=h,o()})},e)}],e=>{t(e,{hash:n.digest(),issuer:s})})}modifyFirstDegreeComponent(e,s){return"BlankNode"!==s.termType?s:((s=util.clone(s)).value=s.value===e?"_:a":"_:z",s)}getRelatedPredicate(e){return"<"+e.predicate.value+">"}createHashToRelated(e,s,t){const a=this,r={},n=a.blankNodeInfo[e].quads;a.forEach(n,(t,n,o)=>{a.forEach(t,(n,o,h)=>{if("predicate"===o||"BlankNode"!==n.termType||n.value===e)return h();const i=n.value,l=POSITIONS[o];a.hashRelatedBlankNode(i,t,s,l,(e,s)=>{if(e)return h(e);s in r?r[s].push(i):r[s]=[i],h()})},o)},e=>t(e,r))}forEachComponent(e,s){for(const t in e)"predicate"!==t&&s(e[t],t,e)}};

},{"./AsyncAlgorithm":61,"./IdentifierIssuer":62,"./MessageDigest":63,"./NQuads":64,"./Permutator":65,"./util":71}],67:[function(require,module,exports){
"use strict";const IdentifierIssuer=require("./IdentifierIssuer"),MessageDigest=require("./MessageDigest"),Permutator=require("./Permutator"),NQuads=require("./NQuads"),util=require("./util"),POSITIONS={subject:"s",object:"o",graph:"g"};module.exports=class{constructor(){this.name="URDNA2015",this.blankNodeInfo={},this.hashToBlankNodes={},this.canonicalIssuer=new IdentifierIssuer("_:c14n"),this.hashAlgorithm="sha256",this.quads}main(e){const s=this;s.quads=e;const t={};for(const n of e)s.forEachComponent(n,e=>{if("BlankNode"!==e.termType)return;const a=e.value;a in s.blankNodeInfo?s.blankNodeInfo[a].quads.push(n):(t[a]=!0,s.blankNodeInfo[a]={quads:[n]})});let n=!0;for(;n;){n=!1,s.hashToBlankNodes={};for(const e in t){const t=s.hashFirstDegreeQuads(e);t in s.hashToBlankNodes?s.hashToBlankNodes[t].push(e):s.hashToBlankNodes[t]=[e]}const e=Object.keys(s.hashToBlankNodes).sort();for(let a=0;a<e.length;++a){const o=e[a],r=s.hashToBlankNodes[o];if(r.length>1)continue;const h=r[0];s.canonicalIssuer.getId(h),delete t[h],delete s.hashToBlankNodes[o],n=!0}}const a=Object.keys(s.hashToBlankNodes).sort();for(let e=0;e<a.length;++e){const t=[],n=a[e],o=s.hashToBlankNodes[n];for(let e=0;e<o.length;++e){const n=o[e];if(s.canonicalIssuer.hasId(n))continue;const a=new IdentifierIssuer("_:b");a.getId(n);const r=s.hashNDegreeQuads(n,a);t.push(r)}t.sort((e,s)=>e.hash<s.hash?-1:e.hash>s.hash?1:0);for(let e=0;e<t.length;++e){const n=t[e];for(const e in n.issuer.existing)s.canonicalIssuer.getId(e)}}const o=[];for(let e=0;e<s.quads.length;++e){const t=s.quads[e];s.forEachComponent(t,e=>{"BlankNode"!==e.termType||e.value.startsWith(s.canonicalIssuer.prefix)||(e.value=s.canonicalIssuer.getId(e.value))}),o.push(NQuads.serializeQuad(t))}return o.sort(),o.join("")}hashFirstDegreeQuads(e){const s=this,t=s.blankNodeInfo[e];if("hash"in t)return t.hash;const n=[],a=t.quads;for(let t=0;t<a.length;++t){const o=a[t],r={predicate:o.predicate};s.forEachComponent(o,(t,n)=>{r[n]=s.modifyFirstDegreeComponent(e,t,n)}),n.push(NQuads.serializeQuad(r))}n.sort();const o=new MessageDigest(s.hashAlgorithm);for(let e=0;e<n.length;++e)o.update(n[e]);return t.hash=o.digest(),t.hash}hashRelatedBlankNode(e,s,t,n){const a=this;let o;o=a.canonicalIssuer.hasId(e)?a.canonicalIssuer.getId(e):t.hasId(e)?t.getId(e):a.hashFirstDegreeQuads(e);const r=new MessageDigest(a.hashAlgorithm);return r.update(n),"g"!==n&&r.update(a.getRelatedPredicate(s)),r.update(o),r.digest()}hashNDegreeQuads(e,s){const t=this,n=new MessageDigest(t.hashAlgorithm),a=t.createHashToRelated(e,s),o=Object.keys(a).sort();for(let e=0;e<o.length;++e){const r=o[e];n.update(r);let h,l="";const i=new Permutator(a[r]);for(;i.hasNext();){const e=i.next();let n=s.clone(),a="";const o=[];let r=!1;for(let s=0;s<e.length;++s){const h=e[s];if(t.canonicalIssuer.hasId(h)?a+=t.canonicalIssuer.getId(h):(n.hasId(h)||o.push(h),a+=n.getId(h)),0!==l.length&&a.length>=l.length&&a>l){r=!0;break}}if(!r){for(let e=0;e<o.length;++e){const s=o[e],h=t.hashNDegreeQuads(s,n);if(a+=n.getId(s),a+="<"+h.hash+">",n=h.issuer,0!==l.length&&a.length>=l.length&&a>l){r=!0;break}}r||(0===l.length||a<l)&&(l=a,h=n)}}n.update(l),s=h}return{hash:n.digest(),issuer:s}}modifyFirstDegreeComponent(e,s){return"BlankNode"!==s.termType?s:((s=util.clone(s)).value=s.value===e?"_:a":"_:z",s)}getRelatedPredicate(e){return"<"+e.predicate.value+">"}createHashToRelated(e,s){const t=this,n={},a=t.blankNodeInfo[e].quads;for(let o=0;o<a.length;++o){const r=a[o];for(const a in r){const o=r[a];if("predicate"===a||"BlankNode"!==o.termType||o.value===e)continue;const h=o.value,l=POSITIONS[a],i=t.hashRelatedBlankNode(h,r,s,l);i in n?n[i].push(h):n[i]=[h]}}return n}forEachComponent(e,s){for(const t in e)"predicate"!==t&&s(e[t],t,e)}};

},{"./IdentifierIssuer":62,"./MessageDigest":63,"./NQuads":64,"./Permutator":65,"./util":71}],68:[function(require,module,exports){
"use strict";const URDNA2015=require("./URDNA2015"),util=require("./util");module.exports=class extends URDNA2015{constructor(e){super(e),this.name="URGNA2012",this.hashAlgorithm="sha1"}modifyFirstDegreeComponent(e,t,a){return"BlankNode"!==t.termType?t:((t=util.clone(t)).value="name"===a?"_:g":t.value===e?"_:a":"_:z",t)}getRelatedPredicate(e){return e.predicate.value}createHashToRelated(e,t,a){const r=this,u={},l=r.blankNodeInfo[e].quads;r.forEach(l,(a,l,s)=>{let o,n;if("BlankNode"===a.subject.termType&&a.subject.value!==e)n=a.subject.value,o="p";else{if("BlankNode"!==a.object.termType||a.object.value===e)return s();n=a.object.value,o="r"}r.hashRelatedBlankNode(n,a,t,o,(e,t)=>{if(e)return s(e);t in u?u[t].push(n):u[t]=[n],s()})},e=>a(e,u))}};

},{"./URDNA2015":66,"./util":71}],69:[function(require,module,exports){
"use strict";const URDNA2015Sync=require("./URDNA2015Sync"),util=require("./util");module.exports=class extends URDNA2015Sync{constructor(){super(),this.name="URGNA2012",this.hashAlgorithm="sha1"}modifyFirstDegreeComponent(e,t,a){return"BlankNode"!==t.termType?t:((t=util.clone(t)).value="name"===a?"_:g":t.value===e?"_:a":"_:z",t)}getRelatedPredicate(e){return e.predicate.value}createHashToRelated(e,t){const a=this,n={},l=a.blankNodeInfo[e].quads;for(let r=0;r<l.length;++r){const s=l[r];let o,u;if("BlankNode"===s.subject.termType&&s.subject.value!==e)u=s.subject.value,o="p";else{if("BlankNode"!==s.object.termType||s.object.value===e)continue;u=s.object.value,o="r"}const c=a.hashRelatedBlankNode(u,s,t,o);c in n?n[c].push(u):n[c]=[u]}return n}};

},{"./URDNA2015Sync":67,"./util":71}],70:[function(require,module,exports){
"use strict";const util=require("./util"),URDNA2015=require("./URDNA2015"),URGNA2012=require("./URGNA2012"),URDNA2015Sync=require("./URDNA2015Sync"),URGNA2012Sync=require("./URGNA2012Sync");let rdfCanonizeNative;try{rdfCanonizeNative=require("rdf-canonize-native")}catch(i){}const api={};module.exports=api,api.NQuads=require("./NQuads"),api.IdentifierIssuer=require("./IdentifierIssuer"),api._rdfCanonizeNative=function(i){return i&&(rdfCanonizeNative=i),rdfCanonizeNative},api.canonize=util.callbackify(async function(i,a){let e;const n=new Promise((i,a)=>{e=((e,n)=>{if(e)return a(e);i(n)})});if(Array.isArray(i)||(i=api.NQuads.legacyDatasetToQuads(i)),a.useNative){if(!rdfCanonizeNative)throw new Error("rdf-canonize-native not available");rdfCanonizeNative.canonize(i,a,e)}else if("URDNA2015"===a.algorithm)new URDNA2015(a).main(i,e);else{if("URGNA2012"!==a.algorithm)throw"algorithm"in a?new Error("Invalid RDF Dataset Canonicalization algorithm: "+a.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.");new URGNA2012(a).main(i,e)}return n}),api.canonizeSync=function(i,a){if(Array.isArray(i)||(i=api.NQuads.legacyDatasetToQuads(i)),a.useNative){if(rdfCanonizeNative)return rdfCanonizeNative.canonizeSync(i,a);throw new Error("rdf-canonize-native not available")}if("URDNA2015"===a.algorithm)return new URDNA2015Sync(a).main(i);if("URGNA2012"===a.algorithm)return new URGNA2012Sync(a).main(i);if(!("algorithm"in a))throw new Error("No RDF Dataset Canonicalization algorithm specified.");throw new Error("Invalid RDF Dataset Canonicalization algorithm: "+a.algorithm)};

},{"./IdentifierIssuer":62,"./NQuads":64,"./URDNA2015":66,"./URDNA2015Sync":67,"./URGNA2012":68,"./URGNA2012Sync":69,"./util":71,"rdf-canonize-native":28}],71:[function(require,module,exports){
(function (process,setImmediate){
"use strict";const api={};module.exports=api;const _setImmediate="function"==typeof setImmediate&&setImmediate,_delay=_setImmediate?e=>_setImmediate(e):e=>setTimeout(e,0);function _invokeCallback(e,t,i){try{return e(t,i)}catch(e){process.nextTick(()=>{throw e})}}"object"==typeof process&&"function"==typeof process.nextTick?api.nextTick=process.nextTick:api.nextTick=_delay,api.setImmediate=_setImmediate?_delay:api.nextTick,api.clone=function(e){if(e&&"object"==typeof e){let t;if(Array.isArray(e)){t=[];for(let i=0;i<e.length;++i)t[i]=api.clone(e[i])}else if(api.isObject(e)){t={};for(const i in e)t[i]=api.clone(e[i])}else t=e.toString();return t}return e},api.isObject=(e=>"[object Object]"===Object.prototype.toString.call(e)),api.isUndefined=(e=>void 0===e),api.callbackify=(e=>(async function(...t){const i=t[t.length-1];let n;"function"==typeof i&&t.pop();try{n=await e.apply(null,t)}catch(e){if("function"==typeof i)return _invokeCallback(i,e);throw e}return"function"==typeof i?_invokeCallback(i,null,n):n}));

}).call(this,require('_process'),require("timers").setImmediate)
},{"_process":60,"timers":72}],72:[function(require,module,exports){
(function (setImmediate,clearImmediate){
var nextTick=require("process/browser.js").nextTick,apply=Function.prototype.apply,slice=Array.prototype.slice,immediateIds={},nextImmediateId=0;function Timeout(e,t){this._id=e,this._clearFn=t}exports.setTimeout=function(){return new Timeout(apply.call(setTimeout,window,arguments),clearTimeout)},exports.setInterval=function(){return new Timeout(apply.call(setInterval,window,arguments),clearInterval)},exports.clearTimeout=exports.clearInterval=function(e){e.close()},Timeout.prototype.unref=Timeout.prototype.ref=function(){},Timeout.prototype.close=function(){this._clearFn.call(window,this._id)},exports.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},exports.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},exports._unrefActive=exports.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},exports.setImmediate="function"==typeof setImmediate?setImmediate:function(e){var t=nextImmediateId++,i=!(arguments.length<2)&&slice.call(arguments,1);return immediateIds[t]=!0,nextTick(function(){immediateIds[t]&&(i?e.apply(null,i):e.call(null),exports.clearImmediate(t))}),t},exports.clearImmediate="function"==typeof clearImmediate?clearImmediate:function(e){delete immediateIds[e]};

}).call(this,require("timers").setImmediate,require("timers").clearImmediate)
},{"process/browser.js":60,"timers":72}],73:[function(require,module,exports){
"use strict";module.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}};

},{}],74:[function(require,module,exports){
"use strict";function Yallist(t){var e=this;if(e instanceof Yallist||(e=new Yallist),e.tail=null,e.head=null,e.length=0,t&&"function"==typeof t.forEach)t.forEach(function(t){e.push(t)});else if(arguments.length>0)for(var l=0,i=arguments.length;l<i;l++)e.push(arguments[l]);return e}function insert(t,e,l){var i=e===t.head?new Node(l,null,e,t):new Node(l,e,e.next,t);return null===i.next&&(t.tail=i),null===i.prev&&(t.head=i),t.length++,i}function push(t,e){t.tail=new Node(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function unshift(t,e){t.head=new Node(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function Node(t,e,l,i){if(!(this instanceof Node))return new Node(t,e,l,i);this.list=i,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,l?(l.prev=this,this.next=l):this.next=null}module.exports=Yallist,Yallist.Node=Node,Yallist.create=Yallist,Yallist.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,l=t.prev;return e&&(e.prev=l),l&&(l.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=l),t.list.length--,t.next=null,t.prev=null,t.list=null,e},Yallist.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}},Yallist.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}},Yallist.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)push(this,arguments[t]);return this.length},Yallist.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)unshift(this,arguments[t]);return this.length},Yallist.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}},Yallist.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}},Yallist.prototype.forEach=function(t,e){e=e||this;for(var l=this.head,i=0;null!==l;i++)t.call(e,l.value,i,this),l=l.next},Yallist.prototype.forEachReverse=function(t,e){e=e||this;for(var l=this.tail,i=this.length-1;null!==l;i--)t.call(e,l.value,i,this),l=l.prev},Yallist.prototype.get=function(t){for(var e=0,l=this.head;null!==l&&e<t;e++)l=l.next;if(e===t&&null!==l)return l.value},Yallist.prototype.getReverse=function(t){for(var e=0,l=this.tail;null!==l&&e<t;e++)l=l.prev;if(e===t&&null!==l)return l.value},Yallist.prototype.map=function(t,e){e=e||this;for(var l=new Yallist,i=this.head;null!==i;)l.push(t.call(e,i.value,this)),i=i.next;return l},Yallist.prototype.mapReverse=function(t,e){e=e||this;for(var l=new Yallist,i=this.tail;null!==i;)l.push(t.call(e,i.value,this)),i=i.prev;return l},Yallist.prototype.reduce=function(t,e){var l,i=this.head;if(arguments.length>1)l=e;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");i=this.head.next,l=this.head.value}for(var n=0;null!==i;n++)l=t(l,i.value,n),i=i.next;return l},Yallist.prototype.reduceReverse=function(t,e){var l,i=this.tail;if(arguments.length>1)l=e;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");i=this.tail.prev,l=this.tail.value}for(var n=this.length-1;null!==i;n--)l=t(l,i.value,n),i=i.prev;return l},Yallist.prototype.toArray=function(){for(var t=new Array(this.length),e=0,l=this.head;null!==l;e++)t[e]=l.value,l=l.next;return t},Yallist.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,l=this.tail;null!==l;e++)t[e]=l.value,l=l.prev;return t},Yallist.prototype.slice=function(t,e){(e=e||this.length)<0&&(e+=this.length),(t=t||0)<0&&(t+=this.length);var l=new Yallist;if(e<t||e<0)return l;t<0&&(t=0),e>this.length&&(e=this.length);for(var i=0,n=this.head;null!==n&&i<t;i++)n=n.next;for(;null!==n&&i<e;i++,n=n.next)l.push(n.value);return l},Yallist.prototype.sliceReverse=function(t,e){(e=e||this.length)<0&&(e+=this.length),(t=t||0)<0&&(t+=this.length);var l=new Yallist;if(e<t||e<0)return l;t<0&&(t=0),e>this.length&&(e=this.length);for(var i=this.length,n=this.tail;null!==n&&i>e;i--)n=n.prev;for(;null!==n&&i>t;i--,n=n.prev)l.push(n.value);return l},Yallist.prototype.splice=function(t,e){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var l=0,i=this.head;null!==i&&l<t;l++)i=i.next;var n=[];for(l=0;i&&l<e;l++)n.push(i.value),i=this.removeNode(i);null===i&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(l=2;l<arguments.length;l++)i=insert(this,i,arguments[l]);return n},Yallist.prototype.reverse=function(){for(var t=this.head,e=this.tail,l=t;null!==l;l=l.prev){var i=l.prev;l.prev=l.next,l.next=i}return this.head=e,this.tail=t,this};try{require("./iterator.js")(Yallist)}catch(t){}

},{"./iterator.js":73}],75:[function(require,module,exports){
"use strict";var util=require("./utilities");class Class{constructor(s,e){this.IRI=s,this.graph=e}getIRI(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?this.IRI:util.toAbsoluteIRI(this.IRI,this.graph.context)}getTermType(){return"rdfs:Class"}getVocabulary(){var s=this.graph.classes[this.IRI];return void 0!==s["schema:isPartOf"]?s["schema:isPartOf"]:null}getSource(){var s=this.graph.classes[this.IRI];return void 0!==s["dc:source"]?s["dc:source"]:null}isSupersededBy(){var s=this.graph.classes[this.IRI];return util.isString(s["schema:supersededBy"])?s["schema:supersededBy"]:null}getName(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en",e=this.graph.classes[this.IRI]["rdfs:label"];return null===e||void 0===e[s]?null:e[s]}getDescription(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en",e=this.graph.classes[this.IRI]["rdfs:comment"];return null===e||void 0===e[s]?null:e[s]}getProperties(){var s=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=this.graph.classes[this.IRI],r=[];return r.push(...t["soa:hasProperty"]),!0===s&&r.push(...this.graph.reasoner.inferPropertiesFromSuperClasses(t["rdfs:subClassOf"])),util.applyFilter(util.uniquifyArray(r),e,this.graph)}getSuperClasses(){var s=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=this.graph.classes[this.IRI],r=[];return!0===s?r.push(...this.graph.reasoner.inferImplicitSuperClasses(this.IRI)):r.push(...t["rdfs:subClassOf"]),util.applyFilter(util.uniquifyArray(r),e,this.graph)}getSubClasses(){var s=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=this.graph.classes[this.IRI],r=[];return!0===s?r.push(...this.graph.reasoner.inferImplicitSubClasses(this.IRI)):r.push(...t["soa:superClassOf"]),util.applyFilter(util.uniquifyArray(r),e,this.graph)}toString(){return JSON.stringify(this.toJSON(!1,null),null,2)}toJSON(){var s=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t={};return t.id=this.getIRI(!0),t.IRI=this.getIRI(),t.type=this.getTermType(),t.vocabulary=this.getVocabulary(),t.source=this.getSource(),t.supersededBy=this.isSupersededBy(),t.name=this.getName(),t.description=this.getDescription(),t.superClasses=this.getSuperClasses(s,e),t.subClasses=this.getSubClasses(s,e),t.properties=this.getProperties(s,e),t}}module.exports=Class;

},{"./utilities":83}],76:[function(require,module,exports){
"use strict";var util=require("./utilities");class DataType{constructor(t,e){this.IRI=t,this.graph=e}getIRI(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?this.IRI:util.toAbsoluteIRI(this.IRI,this.graph.context)}getTermType(){return"schema:DataType"}getVocabulary(){var t=this.graph.dataTypes[this.IRI];return void 0!==t["schema:isPartOf"]?t["schema:isPartOf"]:null}getSource(){var t=this.graph.dataTypes[this.IRI];return void 0!==t["dc:source"]?t["dc:source"]:null}isSupersededBy(){var t=this.graph.dataTypes[this.IRI];return util.isString(t["schema:supersededBy"])?t["schema:supersededBy"]:null}getName(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en",e=this.graph.dataTypes[this.IRI]["rdfs:label"];return null===e||void 0===e[t]?null:e[t]}getDescription(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en",e=this.graph.dataTypes[this.IRI]["rdfs:comment"];return null===e||void 0===e[t]?null:e[t]}getSuperDataTypes(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=this.graph.dataTypes[this.IRI],r=[];return!0===t?r.push(...this.graph.reasoner.inferImplicitSuperDataTypes(this.IRI)):r.push(...s["rdfs:subClassOf"]),util.applyFilter(util.uniquifyArray(r),e,this.graph)}getSubDataTypes(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=this.graph.dataTypes[this.IRI],r=[];return!0===t?r.push(...this.graph.reasoner.inferImplicitSubDataTypes(this.IRI)):r.push(...s["soa:superClassOf"]),util.applyFilter(util.uniquifyArray(r),e,this.graph)}toString(){return JSON.stringify(this.toJSON(!1,null),null,2)}toJSON(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s={};return s.id=this.getIRI(!0),s.IRI=this.getIRI(),s.type=this.getTermType(),s.vocabulary=this.getVocabulary(),s.source=this.getSource(),s.supersededBy=this.isSupersededBy(),s.name=this.getName(),s.description=this.getDescription(),s.superDataTypes=this.getSuperDataTypes(t,e),s.subDataTypes=this.getSubDataTypes(t,e),s}}module.exports=DataType;

},{"./utilities":83}],77:[function(require,module,exports){
"use strict";var util=require("./utilities");class Enumeration{constructor(e,s){this.IRI=e,this.graph=s}getIRI(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?this.IRI:util.toAbsoluteIRI(this.IRI,this.graph.context)}getTermType(){return"schema:Enumeration"}getVocabulary(){var e=this.graph.enumerations[this.IRI];return void 0!==e["schema:isPartOf"]?e["schema:isPartOf"]:null}getSource(){var e=this.graph.enumerations[this.IRI];return void 0!==e["dc:source"]?e["dc:source"]:null}isSupersededBy(){var e=this.graph.enumerations[this.IRI];return util.isString(e["schema:supersededBy"])?e["schema:supersededBy"]:null}getName(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en",s=this.graph.enumerations[this.IRI]["rdfs:label"];return null===s||void 0===s[e]?null:s[e]}getDescription(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en",s=this.graph.enumerations[this.IRI]["rdfs:comment"];return null===s||void 0===s[e]?null:s[e]}getEnumerationMembers(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=this.graph.enumerations[this.IRI],r=[];if(r.push(...t["soa:hasEnumerationMember"]),!0===e)for(var i=this.getSubClasses(!0,null),u=0;u<i.length;u++){var n=this.graph.enumerations[i[u]];n&&r.push(...n["soa:hasEnumerationMember"])}return util.applyFilter(util.uniquifyArray(r),s,this.graph)}getProperties(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=this.graph.enumerations[this.IRI],r=[];return r.push(...t["soa:hasProperty"]),!0===e&&r.push(...this.graph.reasoner.inferPropertiesFromSuperClasses(t["rdfs:subClassOf"])),util.applyFilter(util.uniquifyArray(r),s,this.graph)}getSuperClasses(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=this.graph.enumerations[this.IRI],r=[];return!0===e?r.push(...this.graph.reasoner.inferImplicitSuperClasses(this.IRI)):r.push(...t["rdfs:subClassOf"]),util.applyFilter(util.uniquifyArray(r),s,this.graph)}getSubClasses(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=this.graph.enumerations[this.IRI],r=[];return!0===e?r.push(...this.graph.reasoner.inferImplicitSubClasses(this.IRI)):r.push(...t["soa:superClassOf"]),util.applyFilter(util.uniquifyArray(r),s,this.graph)}toString(){return JSON.stringify(this.toJSON(!1,null),null,2)}toJSON(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t={};return t.id=this.getIRI(!0),t.IRI=this.getIRI(),t.type=this.getTermType(),t.vocabulary=this.getVocabulary(),t.source=this.getSource(),t.supersededBy=this.isSupersededBy(),t.name=this.getName(),t.description=this.getDescription(),t.enumerationMembers=this.getEnumerationMembers(e,s),t.superClasses=this.getSuperClasses(e,s),t.subClasses=this.getSubClasses(e,s),t.properties=this.getProperties(e,s),t}}module.exports=Enumeration;

},{"./utilities":83}],78:[function(require,module,exports){
"use strict";var util=require("./utilities");class EnumerationMember{constructor(e,t){this.IRI=e,this.graph=t}getIRI(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?this.IRI:util.toAbsoluteIRI(this.IRI,this.graph.context)}getTermType(){return"soa:EnumerationMember"}getVocabulary(){var e=this.graph.enumerationMembers[this.IRI];return void 0!==e["schema:isPartOf"]?e["schema:isPartOf"]:null}getSource(){var e=this.graph.enumerationMembers[this.IRI];return void 0!==e["dc:source"]?e["dc:source"]:null}isSupersededBy(){var e=this.graph.enumerationMembers[this.IRI];return util.isString(e["schema:supersededBy"])?e["schema:supersededBy"]:null}getName(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en",t=this.graph.enumerationMembers[this.IRI]["rdfs:label"];return null===t||void 0===t[e]?null:t[e]}getDescription(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en",t=this.graph.enumerationMembers[this.IRI]["rdfs:comment"];return null===t||void 0===t[e]?null:t[e]}getDomainEnumerations(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=this.graph.enumerationMembers[this.IRI],i=[];if(i.push(...r["soa:enumerationDomainIncludes"]),!0===e){for(var s=JSON.parse(JSON.stringify(i)),n=0;n<s.length;n++)i.push(...this.graph.reasoner.inferImplicitSuperClasses(s[n]));i=util.applyFilter(util.uniquifyArray(i),{termType:"Enumeration"},this.graph)}return util.applyFilter(util.uniquifyArray(i),t,this.graph)}toString(){return JSON.stringify(this.toJSON(!1,null),null,2)}toJSON(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r={};return r.id=this.getIRI(!0),r.IRI=this.getIRI(),r.type=this.getTermType(),r.vocabulary=this.getVocabulary(),r.source=this.getSource(),r.supersededBy=this.isSupersededBy(),r.name=this.getName(),r.description=this.getDescription(),r.domainEnumerations=this.getDomainEnumerations(e,t),r}}module.exports=EnumerationMember;

},{"./utilities":83}],79:[function(require,module,exports){
"use strict";function asyncGeneratorStep(e,s,r,a,t,o,n){try{var i=e[o](n),l=i.value}catch(e){return void r(e)}i.done?s(l):Promise.resolve(l).then(a,t)}function _asyncToGenerator(e){return function(){var s=this,r=arguments;return new Promise(function(a,t){var o=e.apply(s,r);function n(e){asyncGeneratorStep(o,a,t,n,i,"next",e)}function i(e){asyncGeneratorStep(o,a,t,n,i,"throw",e)}n(void 0)})}}var util=require("./utilities"),Class=require("./Class"),Property=require("./Property"),Enumeration=require("./Enumeration"),EnumerationMember=require("./EnumerationMember"),DataType=require("./DataType"),ReasoningEngine=require("./ReasoningEngine");class Graph{constructor(e){this.sdoAdapter=e,this.reasoner=new ReasoningEngine(this),this.context={rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",xsd:"http://www.w3.org/2001/XMLSchema#",dc:"http://purl.org/dc/terms/",schema:"http://schema.org/",soa:"http://schema-org-adapter.at/vocabTerms/","soa:superClassOf":{"@id":"soa:superClassOf","@type":"@id"},"soa:superPropertyOf":{"@id":"soa:superPropertyOf","@type":"@id"},"soa:hasProperty":{"@id":"soa:hasProperty","@type":"@id"},"soa:isRangeOf":{"@id":"soa:isRangeOf","@type":"@id"},"soa:hasEnumerationMember":{"@id":"soa:hasEnumerationMember","@type":"@id"},"soa:enumerationDomainIncludes":{"@id":"soa:enumerationDomainIncludes","@type":"@id"},"rdfs:subClassOf":{"@id":"rdfs:subClassOf","@type":"@id"},"rdfs:subPropertyOf":{"@id":"rdfs:subPropertyOf","@type":"@id"},"schema:isPartOf":{"@id":"schema:isPartOf","@type":"@id"},"schema:domainIncludes":{"@id":"schema:domainIncludes","@type":"@id"},"schema:rangeIncludes":{"@id":"schema:rangeIncludes","@type":"@id"},"schema:supersededBy":{"@id":"schema:supersededBy","@type":"@id"},"schema:inverseOf":{"@id":"schema:inverseOf","@type":"@id"},"dc:source":{"@id":"dc:source","@type":"@id"}},this.classes={},this.properties={},this.dataTypes={},this.enumerations={},this.enumerationMembers={}}addVocabulary(e){var s=this;return _asyncToGenerator(function*(){try{s.context=util.generateContext(s.context,e["@context"]),e=yield util.preProcessVocab(e,s.context);for(var r,a,t=s.sdoAdapter.getVocabularies(),o=0;o<e["@graph"].length;o++)e["@graph"][o]=util.curateVocabNode(e["@graph"][o],t);for(var n=0;n<e["@graph"].length;n++){var i=JSON.parse(JSON.stringify(e["@graph"][n]));if(util.isString(i["@type"]))switch(i["@type"]){case"rdfs:Class":s.addGraphNode(s.classes,i);break;case"rdf:Property":s.addGraphNode(s.properties,i);break;default:s.addGraphNode(s.enumerationMembers,i)}else util.isArray(i["@type"])?-1!==i["@type"].indexOf("rdfs:Class")&&-1!==i["@type"].indexOf("schema:DataType")?s.addGraphNode(s.dataTypes,i):s.addGraphNode(s.enumerationMembers,i):(console.log("unexpected @type format for the following node:"),console.log(JSON.stringify(i,null,2)))}do{r=!1;for(var l=Object.keys(s.classes),u=Object.keys(s.enumerations),d=0;d<l.length;d++)if(void 0!==s.classes[l[d]]["rdfs:subClassOf"])for(var h=s.classes[l[d]]["rdfs:subClassOf"],f=0;f<h.length;f++)-1===u.indexOf(h[f])&&"schema:Enumeration"!==h[f]||void 0!==s.classes[l[d]]&&void 0===s.enumerations[l[d]]&&(r=!0,s.enumerations[l[d]]=JSON.parse(JSON.stringify(s.classes[l[d]])),delete s.classes[l[d]])}while(r);do{a=!1;for(var p=Object.keys(s.classes),c=Object.keys(s.dataTypes),m=0;m<p.length;m++)if(void 0!==s.classes[p[m]]["rdfs:subClassOf"])for(var y=s.classes[p[m]]["rdfs:subClassOf"],v=0;v<y.length;v++)-1===c.indexOf(y[v])&&"schema:DataType"!==y[v]||void 0!==s.classes[p[m]]&&void 0===s.dataTypes[p[m]]&&(a=!0,s.dataTypes[p[m]]=JSON.parse(JSON.stringify(s.classes[p[m]])),delete s.classes[p[m]])}while(a);for(var O=Object.keys(s.dataTypes),g=0;g<O.length;g++)s.dataTypes[O[g]]["@type"]="schema:DataType";for(var b=Object.keys(s.classes),I=0;I<b.length;I++){var w=s.classes[b[I]]["rdfs:subClassOf"];void 0===s.classes[b[I]]["soa:superClassOf"]&&(s.classes[b[I]]["soa:superClassOf"]=[]);for(var C=0;C<w.length;C++){var P=s.classes[w[C]];void 0===P&&(P=s.enumerations[w[C]]),void 0!==P&&(void 0!==P["soa:superClassOf"]?-1===P["soa:superClassOf"].indexOf(b[I])&&P["soa:superClassOf"].push(b[I]):P["soa:superClassOf"]=[b[I]])}}for(var E=Object.keys(s.enumerations),T=0;T<E.length;T++){var R=s.enumerations[E[T]]["rdfs:subClassOf"];void 0===s.enumerations[E[T]]["soa:superClassOf"]&&(s.enumerations[E[T]]["soa:superClassOf"]=[]);for(var x=0;x<R.length;x++){var M=s.classes[R[x]];void 0===M&&(M=s.enumerations[R[x]]),void 0!==M&&(void 0!==M["soa:superClassOf"]?-1===M["soa:superClassOf"].indexOf(E[T])&&M["soa:superClassOf"].push(E[T]):M["soa:superClassOf"]=[E[T]])}}for(var k=Object.keys(s.dataTypes),j=0;j<k.length;j++){var D=s.dataTypes[k[j]]["rdfs:subClassOf"];if(void 0===s.dataTypes[k[j]]["soa:superClassOf"]&&(s.dataTypes[k[j]]["soa:superClassOf"]=[]),void 0===D)s.dataTypes[k[j]]["rdfs:subClassOf"]=[];else for(var N=0;N<D.length;N++){var S=s.dataTypes[D[N]];void 0!==S&&(void 0!==S["soa:superClassOf"]?-1===S["soa:superClassOf"].indexOf(k[j])&&S["soa:superClassOf"].push(k[j]):S["soa:superClassOf"]=[k[j]])}}for(var G=Object.keys(s.properties),A=0;A<G.length;A++){var J=s.properties[G[A]]["rdfs:subPropertyOf"];if(void 0===s.properties[G[A]]["soa:superPropertyOf"]&&(s.properties[G[A]]["soa:superPropertyOf"]=[]),void 0===J)s.properties[G[A]]["rdfs:subPropertyOf"]=[];else for(var q=0;q<J.length;q++){var L=s.properties[J[q]];void 0!==L&&(void 0!==L["soa:superPropertyOf"]?-1===L["soa:superPropertyOf"].indexOf(G[A])&&L["soa:superPropertyOf"].push(G[A]):L["soa:superPropertyOf"]=[G[A]])}}b=Object.keys(s.classes);for(var B=0;B<b.length;B++)void 0===s.classes[b[B]]["soa:hasProperty"]&&(s.classes[b[B]]["soa:hasProperty"]=[]),void 0===s.classes[b[B]]["soa:isRangeOf"]&&(s.classes[b[B]]["soa:isRangeOf"]=[]);E=Object.keys(s.enumerations);for(var F=0;F<E.length;F++)void 0===s.enumerations[E[F]]["soa:hasEnumerationMember"]&&(s.enumerations[E[F]]["soa:hasEnumerationMember"]=[]),void 0===s.enumerations[E[F]]["soa:isRangeOf"]&&(s.enumerations[E[F]]["soa:isRangeOf"]=[]),void 0===s.enumerations[E[F]]["soa:hasProperty"]&&(s.enumerations[E[F]]["soa:hasProperty"]=[]);for(var V=Object.keys(s.enumerationMembers),U=0;U<V.length;U++)void 0===s.enumerationMembers[V[U]]["soa:enumerationDomainIncludes"]&&(s.enumerationMembers[V[U]]["soa:enumerationDomainIncludes"]=[]);G=Object.keys(s.properties);for(var W=0;W<G.length;W++){var _=s.properties[G[W]]["schema:domainIncludes"];if(util.isArray(_))for(var X=0;X<_.length;X++){var z=s.classes[_[X]];void 0===z&&(z=s.enumerations[_[X]]),void 0!==z&&util.isArray(z["soa:hasProperty"])&&-1===z["soa:hasProperty"].indexOf(G[W])&&z["soa:hasProperty"].push(G[W])}var H=s.properties[G[W]]["schema:rangeIncludes"];if(util.isArray(H))for(var K=0;K<H.length;K++){var Q=s.classes[H[K]];void 0===Q&&(Q=s.enumerations[H[K]]),void 0!==Q&&util.isArray(Q["soa:isRangeOf"])&&-1===Q["soa:isRangeOf"].indexOf(G[W])&&Q["soa:isRangeOf"].push(G[W])}}V=Object.keys(s.enumerationMembers);for(var Y=0;Y<V.length;Y++){var Z=s.enumerationMembers[V[Y]],$=Z["@type"];util.isArray($)||($=[$]);for(var ee=0;ee<$.length;ee++){var se=s.enumerations[$[ee]];void 0!==se&&util.isArray(se["soa:hasEnumerationMember"])&&-1===se["soa:hasEnumerationMember"].indexOf(V[Y])&&(se["soa:hasEnumerationMember"].push(V[Y]),util.isArray(Z["soa:enumerationDomainIncludes"])?Z["soa:enumerationDomainIncludes"].push($[ee]):Z["soa:enumerationDomainIncludes"]=[$[ee]])}}return!0}catch(T){return console.log(T),!1}})()}addGraphNode(e,s){try{if(void 0===e[s["@id"]])e[s["@id"]]=s;else{var r=e[s["@id"]];if(void 0!==s["schema:isPartOf"]&&null!==s["schema:isPartOf"]&&(r["schema:isPartOf"]=s["schema:isPartOf"]),void 0!==s["dc:source"]&&null!==s["dc:source"]&&(r["dc:source"]=s["dc:source"]),void 0!==s["schema:category"]&&null!==s["schema:category"]&&(r["schema:category"]=s["schema:category"]),void 0!==s["schema:supersededBy"]&&null!==s["schema:supersededBy"]&&(r["schema:supersededBy"]=s["schema:supersededBy"]),void 0!==s["rdfs:label"]&&null!==s["rdfs:label"])for(var a=Object.keys(s["rdfs:label"]),t=0;t<a.length;t++)r["rdfs:label"][a[t]]=s["rdfs:label"][a[t]];if(void 0!==s["rdfs:comment"]&&null!==s["rdfs:comment"])for(var o=Object.keys(s["rdfs:comment"]),n=0;n<o.length;n++)r["rdfs:comment"][o[n]]=s["rdfs:comment"][o[n]];if(void 0!==s["rdfs:subClassOf"]&&null!==s["rdfs:subClassOf"])for(var i=0;i<s["rdfs:subClassOf"].length;i++)-1===r["rdfs:subClassOf"].indexOf(s["rdfs:subClassOf"][i])&&r["rdfs:subClassOf"].push(s["rdfs:subClassOf"][i]);if(void 0!==s["soa:superClassOf"]&&null!==s["soa:superClassOf"])for(var l=0;l<s["soa:superClassOf"].length;l++)-1===r["soa:superClassOf"].indexOf(s["soa:superClassOf"][l])&&r["soa:superClassOf"].push(s["soa:superClassOf"][l]);if(void 0!==s["soa:hasProperty"]&&null!==s["soa:hasProperty"])for(var u=0;u<s["soa:hasProperty"].length;u++)-1===r["soa:hasProperty"].indexOf(s["soa:hasProperty"][u])&&r["soa:hasProperty"].push(s["soa:hasProperty"][u]);if(void 0!==s["soa:isRangeOf"]&&null!==s["soa:isRangeOf"])for(var d=0;d<s["soa:isRangeOf"].length;d++)-1===r["soa:isRangeOf"].indexOf(s["soa:isRangeOf"][d])&&r["soa:isRangeOf"].push(s["soa:isRangeOf"][d]);if(void 0!==s["soa:enumerationDomainIncludes"]&&null!==s["soa:enumerationDomainIncludes"])for(var h=0;h<s["soa:enumerationDomainIncludes"].length;h++)-1===r["soa:enumerationDomainIncludes"].indexOf(s["soa:enumerationDomainIncludes"][h])&&r["soa:enumerationDomainIncludes"].push(s["soa:enumerationDomainIncludes"][h]);if(void 0!==s["soa:hasEnumerationMember"]&&null!==s["soa:hasEnumerationMember"])for(var f=0;f<s["soa:hasEnumerationMember"].length;f++)-1===r["soa:hasEnumerationMember"].indexOf(s["soa:hasEnumerationMember"][f])&&r["soa:hasEnumerationMember"].push(s["soa:hasEnumerationMember"][f]);if(void 0!==s["rdfs:subPropertyOf"]&&null!==s["rdfs:subPropertyOf"])for(var p=0;p<s["rdfs:subPropertyOf"].length;p++)-1===r["rdfs:subPropertyOf"].indexOf(s["rdfs:subPropertyOf"][p])&&r["rdfs:subPropertyOf"].push(s["rdfs:subPropertyOf"][p]);if(void 0!==s["schema:domainIncludes"]&&null!==s["schema:domainIncludes"])for(var c=0;c<s["schema:domainIncludes"].length;c++)-1===r["schema:domainIncludes"].indexOf(s["schema:domainIncludes"][c])&&r["schema:domainIncludes"].push(s["schema:domainIncludes"][c]);if(void 0!==s["schema:rangeIncludes"]&&null!==s["schema:rangeIncludes"])for(var m=0;m<s["schema:rangeIncludes"].length;m++)-1===r["schema:rangeIncludes"].indexOf(s["schema:rangeIncludes"][m])&&r["schema:rangeIncludes"].push(s["schema:rangeIncludes"][m]);if(void 0!==s["schema:superPropertyOf"]&&null!==s["schema:superPropertyOf"])for(var y=0;y<s["schema:superPropertyOf"].length;y++)-1===r["schema:superPropertyOf"].indexOf(s["schema:superPropertyOf"][y])&&r["schema:superPropertyOf"].push(s["schema:superPropertyOf"][y])}return!0}catch(r){return console.log(r),console.log("memory[newNode[@id]]:"),console.log(JSON.stringify(e[s["@id"]],null,2)),console.log("newNode:"),console.log(JSON.stringify(s,null,2)),!1}}getTerm(e){var s,r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=this.discoverCompactIRI(e),o=0;do{switch(o){case 0:s=this.classes[t],r="Class";break;case 1:s=this.properties[t],r="Property";break;case 2:s=this.dataTypes[t],r="DataType";break;case 3:s=this.enumerations[t],r="Enumeration";break;case 4:s=this.enumerationMembers[t],r="EnumerationMember"}o++}while(void 0===s&&o<6);if(!s)throw new Error("There is no term with the IRI "+e);if(0===(s=util.applyFilter([s["@id"]],a,this)).length)throw new Error("There is no term with that IRI and filter settings.");switch(r){case"Class":return new Class(t,this);case"Property":return new Property(t,this);case"Enumeration":return new Enumeration(t,this);case"EnumerationMember":return new EnumerationMember(t,this);case"DataType":return new DataType(t,this)}}getClass(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=this.discoverCompactIRI(e);if(null!=r){var a=this.classes[r];if(void 0!==a){if(0===(a=util.applyFilter([r],s,this)).length)throw new Error("There is no class with that IRI and filter settings.");return new Class(r,this)}if(void 0!==(a=this.enumerations[r]))try{return this.getEnumeration(r,s)}catch(e){throw new Error("There is no class with that IRI and filter settings.")}}throw new Error("There is no class with the IRI "+e)}getProperty(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=this.discoverCompactIRI(e);if(null!=r){var a=this.properties[r];if(void 0!==a){if(0===(a=util.applyFilter([r],s,this)).length)throw new Error("There is no property with that URI and filter settings.");return new Property(r,this)}}throw new Error("There is no property with that URI.")}getDataType(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=this.discoverCompactIRI(e);if(null!=r){var a=this.dataTypes[r];if(void 0!==a){if(0===(a=util.applyFilter([r],s,this)).length)throw new Error("There is no data-type with that IRI and filter settings.");return new DataType(r,this)}}throw new Error("There is no data-type with the IRI "+e)}getEnumeration(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=this.discoverCompactIRI(e);if(null!=r){var a=this.enumerations[r];if(void 0!==a){if(0===(a=util.applyFilter([r],s,this)).length)throw new Error("There is no enumeration with that IRI and filter settings.");return new Enumeration(r,this)}}throw new Error("There is no enumeration with the IRI "+e)}getEnumerationMember(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=this.discoverCompactIRI(e);if(null!=r){var a=this.enumerationMembers[r];if(void 0!==a){if(0===(a=util.applyFilter([r],s,this)).length)throw new Error("There is no EnumerationMember with that IRI and filter settings.");return new EnumerationMember(r,this)}}throw new Error("There is no EnumerationMember with the IRI "+e)}discoverCompactIRI(e){if(-1!==e.indexOf(":"))for(var s=Object.keys(this.context),r=0;r<s.length;r++){var a=this.context[s[r]];if(util.isString(a)){if(e.startsWith(s[r]))return e;if(e.startsWith(a))return util.toCompactIRI(e,this.context)}}else{for(var t=Object.keys(this.classes),o=0;o<t.length;o++)if(!0===this.containsLabel(this.classes[t[o]],e))return t[o];for(var n=Object.keys(this.properties),i=0;i<n.length;i++)if(!0===this.containsLabel(this.properties[n[i]],e))return n[i];for(var l=Object.keys(this.dataTypes),u=0;u<l.length;u++)if(!0===this.containsLabel(this.dataTypes[l[u]],e))return l[u];for(var d=Object.keys(this.enumerations),h=0;h<d.length;h++)if(!0===this.containsLabel(this.enumerations[d[h]],e))return d[h];for(var f=Object.keys(this.enumerationMembers),p=0;p<f.length;p++)if(!0===this.containsLabel(this.enumerationMembers[f[p]],e))return f[p]}return null}containsLabel(e,s){if(void 0!==e&&util.isObject(e["rdfs:label"]))for(var r=Object.keys(e["rdfs:label"]),a=0;a<r.length;a++)if(e["rdfs:label"][r[a]]===s)return!0;return!1}}module.exports=Graph;

},{"./Class":75,"./DataType":76,"./Enumeration":77,"./EnumerationMember":78,"./Property":80,"./ReasoningEngine":81,"./utilities":83}],80:[function(require,module,exports){
"use strict";var util=require("./utilities");class Property{constructor(e,r){this.IRI=e,this.graph=r}getIRI(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?this.IRI:util.toAbsoluteIRI(this.IRI,this.graph.context)}getTermType(){return"rdf:Property"}getVocabulary(){var e=this.graph.properties[this.IRI];return void 0!==e["schema:isPartOf"]?e["schema:isPartOf"]:null}getSource(){var e=this.graph.properties[this.IRI];return void 0!==e["dc:source"]?e["dc:source"]:null}isSupersededBy(){var e=this.graph.properties[this.IRI];return util.isString(e["schema:supersededBy"])?e["schema:supersededBy"]:null}getName(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en",r=this.graph.properties[this.IRI]["rdfs:label"];return null===r||void 0===r[e]?null:r[e]}getDescription(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en",r=this.graph.properties[this.IRI]["rdfs:comment"];return null===r||void 0===r[e]?null:r[e]}getRanges(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=this.graph.properties[this.IRI],i=[];if(i.push(...t["schema:rangeIncludes"]),!0===e){for(var s=[],h=0;h<i.length;h++)s.push(...this.graph.reasoner.inferImplicitSubClasses(i[h]));i.push(...s),i=i.filter(function(e){return null!==e})}return util.applyFilter(util.uniquifyArray(i),r,this.graph)}getDomains(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=this.graph.properties[this.IRI],i=[];if(i.push(...t["schema:domainIncludes"]),!0===e){for(var s=[],h=0;h<i.length;h++)s.push(...this.graph.reasoner.inferImplicitSubClasses(i[h]));i.push(...s)}return util.applyFilter(util.uniquifyArray(i),r,this.graph)}getSuperProperties(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=this.graph.properties[this.IRI],i=[];return!0===e?i.push(...this.graph.reasoner.inferSuperProperties(this.IRI)):i.push(...t["rdfs:subPropertyOf"]),util.applyFilter(util.uniquifyArray(i),r,this.graph)}getSubProperties(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=this.graph.properties[this.IRI],i=[];return!0===e?i.push(...this.graph.reasoner.inferSubProperties(this.IRI)):i.push(...t["soa:superPropertyOf"]),util.applyFilter(util.uniquifyArray(i),r,this.graph)}getInverseOf(){return this.graph.properties[this.IRI]["schema:inverseOf"]}toString(){return JSON.stringify(this.toJSON(!1,null),null,2)}toJSON(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t={};return t.id=this.getIRI(!0),t.IRI=this.getIRI(),t.type=this.getTermType(),t.vocabulary=this.getVocabulary(),t.source=this.getSource(),t.supersededBy=this.isSupersededBy(),t.name=this.getName(),t.description=this.getDescription(),t.ranges=this.getRanges(e,r),t.domains=this.getDomains(e,r),t.superProperties=this.getSuperProperties(e,r),t.subProperties=this.getSubProperties(e,r),t.inverseOf=this.getInverseOf(),t}}module.exports=Property;

},{"./utilities":83}],81:[function(require,module,exports){
"use strict";var util=require("./utilities");class ReasoningEngine{constructor(r){this.graph=r}inferPropertiesFromSuperClasses(r){for(var s=[],i=0;i<r.length;i++){var a=this.graph.classes[r[i]];void 0===a&&(a=this.graph.enumerations[r[i]]),void 0!==a&&(s.push(...a["soa:hasProperty"]),0!==a["rdfs:subClassOf"].length&&s.push(...this.inferPropertiesFromSuperClasses(a["rdfs:subClassOf"])))}return util.uniquifyArray(s)}inferImplicitSuperClasses(r){var s=this.graph.classes[r],i=[];if(void 0===s&&(s=this.graph.enumerations[r]),void 0!==s){i.push(...s["rdfs:subClassOf"]);var a=util.copByVal(i);do{for(var u=[],e=0;e<a.length;e++){var t=this.graph.classes[a[e]];void 0===t&&(t=this.graph.enumerations[a[e]]),void 0!==t&&u.push(...t["rdfs:subClassOf"])}u=util.uniquifyArray(u),a=util.copByVal(u),i.push(...u)}while(0!==a.length);i=util.uniquifyArray(i)}return i}inferImplicitSubClasses(r){var s=this.graph.classes[r],i=[];if(void 0===s&&(s=this.graph.enumerations[r]),void 0!==s){i.push(...s["soa:superClassOf"]);var a=util.copByVal(i);do{for(var u=[],e=0;e<a.length;e++){var t=this.graph.classes[a[e]];void 0===t&&(t=this.graph.enumerations[a[e]]),void 0!==t&&u.push(...t["soa:superClassOf"])}u=util.uniquifyArray(u),a=util.copByVal(u),i.push(...u)}while(0!==a.length);return i=util.uniquifyArray(i)}return i}inferImplicitSuperDataTypes(r){var s=this.graph.dataTypes[r],i=[];if(void 0!==s){i.push(...s["rdfs:subClassOf"]);var a=util.copByVal(i);do{for(var u=[],e=0;e<a.length;e++){var t=this.graph.dataTypes[a[e]];void 0!==t&&u.push(...t["rdfs:subClassOf"])}u=util.uniquifyArray(u),a=util.copByVal(u),i.push(...u)}while(0!==a.length);i=util.uniquifyArray(i)}return i}inferImplicitSubDataTypes(r){var s=this.graph.dataTypes[r],i=[];if(void 0!==s){i.push(...s["soa:superClassOf"]);var a=util.copByVal(i);do{for(var u=[],e=0;e<a.length;e++){var t=this.graph.dataTypes[a[e]];void 0!==t&&u.push(...t["soa:superClassOf"])}u=util.uniquifyArray(u),a=util.copByVal(u),i.push(...u)}while(0!==a.length);i=util.uniquifyArray(i)}return i}inferSubProperties(r){var s=this.graph.properties[r],i=[];if(void 0!==s){i.push(...s["soa:superPropertyOf"]);var a=util.copByVal(i);do{for(var u=[],e=0;e<a.length;e++){var t=this.graph.properties[a[e]];void 0!==t&&u.push(...t["soa:superPropertyOf"])}u=util.uniquifyArray(u),a=util.copByVal(u),i.push(...u)}while(0!==a.length);i=util.uniquifyArray(i)}return i}inferSuperProperties(r){var s=this.graph.properties[r],i=[];if(void 0!==s){i.push(...s["rdfs:subPropertyOf"]);var a=util.copByVal(i);do{for(var u=[],e=0;e<a.length;e++){var t=this.graph.properties[a[e]];void 0!==t&&u.push(...t["rdfs:subPropertyOf"])}u=util.uniquifyArray(u),a=util.copByVal(u),i.push(...u)}while(0!==a.length);i=util.uniquifyArray(i)}return i}}module.exports=ReasoningEngine;

},{"./utilities":83}],82:[function(require,module,exports){
"use strict";function asyncGeneratorStep(t,e,r,a,n,i,s){try{var o=t[i](s),h=o.value}catch(t){return void r(t)}o.done?e(h):Promise.resolve(h).then(a,n)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise(function(a,n){var i=t.apply(e,r);function s(t){asyncGeneratorStep(i,a,n,s,o,"next",t)}function o(t){asyncGeneratorStep(i,a,n,s,o,"throw",t)}s(void 0)})}}var Graph=require("./Graph"),util=require("./utilities"),axios=require("axios"),FALLBACK_VERSION="7.04",URI_SDO_GITHUB="https://raw.githubusercontent.com/schemaorg/schemaorg/master/",URI_SDO_RELEASES=URI_SDO_GITHUB+"data/releases/",URI_SDO_VERSIONS=URI_SDO_GITHUB+"versions.json";class SDOAdapter{constructor(){this.graph=new Graph(this)}addVocabularies(t){var e=this;return _asyncToGenerator(function*(){if(!util.isArray(t))throw new Error("The first argument of the function must be an Array of vocabularies (JSON-LD)");for(var r=0;r<t.length;r++)if(util.isString(t[r]))if(t[r].startsWith("www")||t[r].startsWith("http")){var a=yield e.fetchVocabularyFromURL(t[r]);try{yield e.graph.addVocabulary(a)}catch(e){console.log("The given URL "+t[r]+" did not contain a valid JSON-LD vocabulary.")}}else try{yield e.graph.addVocabulary(JSON.parse(t[r]))}catch(t){console.log("Parsing of vocabulary string produced an invalid JSON-LD.")}else{if(!util.isObject(t[r]))throw new Error("The first argument of the function must be an Array of vocabularies (JSON-LD as Object/String)");yield e.graph.addVocabulary(t[r])}})()}fetchVocabularyFromURL(t){return _asyncToGenerator(function*(){try{return new Promise(function(e,r){axios.get(t).then(function(t){e(t.data)}).catch(function(t){r(console.log(t))})})}catch(t){return console.log(t),""}})()}getClass(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.graph.getClass(t,e)}getAllClasses(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.getListOfClasses(t),r=[],a=0;a<e.length;a++)try{r.push(this.getClass(e[a]))}catch(t){throw new Error("There is no class with the IRI "+e[a])}return r}getListOfClasses(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return util.applyFilter(Object.keys(this.graph.classes),t,this.graph)}getProperty(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.graph.getProperty(t,e)}getAllProperties(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.getListOfProperties(t),r=[],a=0;a<e.length;a++)try{r.push(this.getProperty(e[a]))}catch(t){throw new Error("There is no property with the IRI "+e[a])}return r}getListOfProperties(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return util.applyFilter(Object.keys(this.graph.properties),t,this.graph)}getDataType(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.graph.getDataType(t,e)}getAllDataTypes(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.getListOfDataTypes(t),r=[],a=0;a<e.length;a++)try{r.push(this.getDataType(e[a]))}catch(t){throw new Error("There is no data type with the IRI "+e[a])}return r}getListOfDataTypes(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return util.applyFilter(Object.keys(this.graph.dataTypes),t,this.graph)}getEnumeration(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.graph.getEnumeration(t,e)}getAllEnumerations(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.getListOfEnumerations(t),r=[],a=0;a<e.length;a++)try{r.push(this.getEnumeration(e[a]))}catch(t){throw new Error("There is no enumeration with the IRI "+e[a])}return r}getListOfEnumerations(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return util.applyFilter(Object.keys(this.graph.enumerations),t,this.graph)}getEnumerationMember(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.graph.getEnumerationMember(t,e)}getAllEnumerationMembers(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.getListOfEnumerationMembers(t),r=[],a=0;a<e.length;a++)try{r.push(this.getEnumerationMember(e[a]))}catch(t){throw new Error("There is no enumeration member with the IRI "+e[a])}return r}getListOfEnumerationMembers(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return util.applyFilter(Object.keys(this.graph.enumerationMembers),t,this.graph)}getVocabularies(){for(var t=Object.keys(this.graph.context),e={},r=["soa","xsd","rdf","rdfa","rdfs","dc"],a=0;a<t.length;a++)util.isString(this.graph.context[t[a]])&&-1===r.indexOf(t[a])&&(e[t[a]]=this.graph.context[t[a]]);return e}constructSDOVocabularyURL(){var t=arguments,e=this;return _asyncToGenerator(function*(){var r=t.length>0&&void 0!==t[0]?t[0]:"latest",a=t.length>1&&void 0!==t[1]?t[1]:"schema";return"latest"===r?URI_SDO_RELEASES+(yield e.getLatestSDOVersion())+"/"+a+".jsonld":URI_SDO_RELEASES+r+"/"+a+".jsonld"})()}getLatestSDOVersion(){return _asyncToGenerator(function*(){try{var t=yield axios.get(URI_SDO_VERSIONS);if(!t.data.schemaversion)return FALLBACK_VERSION;try{return yield axios.head(URI_SDO_RELEASES+t.data.schemaversion),t.data.schemaversion}catch(t){return FALLBACK_VERSION}}catch(t){console.log(t)}})()}}module.exports=SDOAdapter;

},{"./Graph":79,"./utilities":83,"axios":1}],83:[function(require,module,exports){
"use strict";function asyncGeneratorStep(r,e,a,s,t,n,o){try{var i=r[n](o),f=i.value}catch(r){return void a(r)}i.done?e(f):Promise.resolve(f).then(s,t)}function _asyncToGenerator(r){return function(){var e=this,a=arguments;return new Promise(function(s,t){var n=r.apply(e,a);function o(r){asyncGeneratorStep(n,s,t,o,i,"next",r)}function i(r){asyncGeneratorStep(n,s,t,o,i,"throw",r)}o(void 0)})}}var jsonld=require("jsonld");function applyFilter(r,e,a){if(!Array.isArray(r)||0===r.length||null===e||0===Object.keys(e).length)return r;var s=[],t=a.context;if(isString(e.fromVocabulary)){for(var n=0;n<Object.keys(t).length;n++)if(t[Object.keys(t)[n]]===e.fromVocabulary){e.fromVocabulary=Object.keys(t)[n];break}}else if(isArray(e.fromVocabulary))for(var o=0;o<e.fromVocabulary.length;o++)for(var i=0;i<Object.keys(t).length;i++)if(t[Object.keys(t)[i]]===e.fromVocabulary[o]){e.fromVocabulary[o]=Object.keys(t)[i];break}for(var f=0;f<r.length;f++){var c=a.getTerm(r[f]);if(void 0!==e.isSuperseded){if(!1===e.isSuperseded&&null!=c.isSupersededBy())continue;if(!0===e.isSuperseded&&null==c.isSupersededBy())continue}if(void 0!==e.fromVocabulary){var l=!1;if(isString(e.fromVocabulary))e.fromVocabulary&&c.getIRI(!0).startsWith(e.fromVocabulary)&&(l=!0);else if(isArray(e.fromVocabulary))for(var u=0;u<e.fromVocabulary.length;u++)c.getIRI(!0).startsWith(e.fromVocabulary[u])&&(l=!0);if(!l)continue}if(void 0!==e.termType){var d=!1,y=[];isString(e.termType)?y.push(e.termType):isArray(e.termType)&&(y=e.termType);for(var b=0;b<y.length;b++){var m=void 0;switch(y[b]){case"Class":m="rdfs:Class";break;case"Property":m="rdf:Property";break;case"Enumeration":m="schema:Enumeration";break;case"EnumerationMember":m="soa:EnumerationMember";break;case"DataType":m="schema:DataType";break;default:console.log("Invalid filter.termType "+y[b])}if(m===c.getTermType()){d=!0;break}}if(!d)continue}s.push(r[f])}return s}function copByVal(r){if(void 0!==r)return JSON.parse(JSON.stringify(r))}function isObject(r){return!Array.isArray(r)&&(null!=r&&"object"==typeof r)}function isString(r){return null!=r&&("string"==typeof r||r instanceof String)}function isArray(r){return Array.isArray(r)}function uniquifyArray(r){for(var e={},a=[],s=0;s<r.length;s++){var t=r[s];1!==e[t]&&(e[t]=1,a.push(t))}return a}function generateContext(r,e){for(var a=Object.keys(r),s=Object.keys(e),t=JSON.parse(JSON.stringify(r)),n=0;n<s.length;n++){var o=s[n];if(isString(e[o])){for(var i=!1,f=0;f<a.length;f++)if(isString(t[a[f]])&&t[a[f]]===e[o]){i=!0;break}if(i)continue;if(void 0===t[o])t[o]=e[o];else if(t[o]!==e[o])for(var c=!1,l=1;!1===c;){var u=o+l++;void 0===t[u]&&(c=!0,t[u]=e[o])}}}var d={};Object.keys(t).sort().forEach(function(r){d[r]=t[r]}),t=d;for(var y=Object.keys(t),b={},m=0;m<y.length;m++)isString(t[y[m]])&&(b[y[m]]=t[y[m]]);for(var p=0;p<y.length;p++)isObject(t[y[p]])&&(b[y[p]]=t[y[p]]);return b}function preProcessVocab(r,e){return _preProcessVocab.apply(this,arguments)}function _preProcessVocab(){return(_preProcessVocab=_asyncToGenerator(function*(r,e){var a=!1;do{var s=[];a=!1;for(var t=0;t<r["@graph"].length;t++)void 0!==r["@graph"][t]["@graph"]?(s.push(...copByVal(r["@graph"][t]["@graph"])),a=!0):s.push(copByVal(r["@graph"][t]));r["@graph"]=copByVal(s)}while(!0===a);var n=yield jsonld.expand(r),o=yield jsonld.compact(n,e);return void 0===o["@graph"]?(delete o["@context"],{"@context":e,"@graph":[o]}):o})).apply(this,arguments)}function curateVocabNode(r,e){if(void 0!==r["rdfs:comment"]){if(isString(r["rdfs:comment"]))r["rdfs:comment"]={en:r["rdfs:comment"]};else if(isObject(r["rdfs:comment"])){var a={};a[r["rdfs:comment"]["@language"]]=r["rdfs:comment"]["@value"],r["rdfs:comment"]=copByVal(a)}else if(isArray(r["rdfs:comment"])){for(var s={},t=0;t<r["rdfs:comment"].length;t++)isObject(r["rdfs:comment"][t])&&(s[r["rdfs:comment"][t]["@language"]]=r["rdfs:comment"][t]["@value"]);r["rdfs:comment"]=copByVal(s)}}else r["rdfs:comment"]={};if(void 0!==r["rdfs:label"]){if(isString(r["rdfs:label"]))r["rdfs:label"]={en:r["rdfs:label"]};else if(isObject(r["rdfs:label"])){var n={};n[r["rdfs:label"]["@language"]]=r["rdfs:label"]["@value"],r["rdfs:label"]=copByVal(n)}else if(isArray(r["rdfs:label"])){for(var o={},i=0;i<r["rdfs:label"].length;i++)isObject(r["rdfs:label"][i])&&(o[r["rdfs:label"][i]["@language"]]=r["rdfs:label"][i]["@value"]);r["rdfs:label"]=copByVal(o)}}else r["rdfs:label"]={};if(isString(r["rdfs:subClassOf"])?r["rdfs:subClassOf"]=[r["rdfs:subClassOf"]]:void 0===r["rdfs:subClassOf"]&&"rdfs:Class"===r["@type"]&&(r["rdfs:subClassOf"]=[]),isString(r["rdfs:subPropertyOf"])?r["rdfs:subPropertyOf"]=[r["rdfs:subPropertyOf"]]:void 0===r["rdfs:subPropertyOf"]&&"rdf:Property"===r["@type"]&&(r["rdfs:subPropertyOf"]=[]),isString(r["schema:domainIncludes"])?r["schema:domainIncludes"]=[r["schema:domainIncludes"]]:void 0===r["schema:domainIncludes"]&&"rdf:Property"===r["@type"]&&(r["schema:domainIncludes"]=[]),isString(r["schema:rangeIncludes"])?r["schema:rangeIncludes"]=[r["schema:rangeIncludes"]]:void 0===r["schema:rangeIncludes"]&&"rdf:Property"===r["@type"]&&(r["schema:rangeIncludes"]=[]),!isString(r["schema:isPartOf"])){for(var f,c=Object.keys(e),l=0;l<c.length;l++)if(r["@id"].substring(0,r["@id"].indexOf(":"))===c[l]){f=e[c[l]];break}if(void 0!==f){var u;do{u=!1,(f.endsWith("/")||f.endsWith("#"))&&(f=f.substring(0,f.length-1),u=!0)}while(!0===u);r["schema:isPartOf"]=f}}return r}function toCompactIRI(r,e){for(var a=Object.keys(e),s=0;s<a.length;s++){var t=e[a[s]];if(isString(t)&&r.startsWith(t))return a[s]+":"+r.substring(t.length)}return null}function toAbsoluteIRI(r,e){for(var a=Object.keys(e),s=0;s<a.length;s++){var t=e[a[s]];if(r.substring(0,r.indexOf(":"))===a[s])return t.concat(r.substring(r.indexOf(":")+1))}return null}module.exports={applyFilter:applyFilter,copByVal:copByVal,isArray:isArray,isString:isString,isObject:isObject,uniquifyArray:uniquifyArray,preProcessVocab:preProcessVocab,generateContext:generateContext,curateVocabNode:curateVocabNode,toCompactIRI:toCompactIRI,toAbsoluteIRI:toAbsoluteIRI};

},{"jsonld":47}]},{},[82])(82)
});
